<?xml version="1.0" encoding="UTF-8"?>
<cheatsheet title="Créer des Extractions rules">
   <intro href="/com.twinsoft.convertigo/help/Screens.html">
      <description>
         Les Extraction rules ou règles d’extractions sont des outils qui servent à transformer le code HTML (langage d’un site web) en code XML. Les « extraction rules » sont présentes dans toutes les screen classes qui portent de l’information à extraire.
<br/><br/>
Le vocabulaire en gras dans cette aide est disponible dans (?).
      </description>
   </intro>
   <item title="Placez le navigateur" dialog="true" skip="false">
      <description>
         Placez la <b>navigator area</b> sur un écran portant de l’information à extraire.
      </description>
   </item>
   <item title="First project (9)" dialog="true" skip="false">
      <description>
         &gt;Placez votre navigateur sur &quot;http://www.google.com/search?hl=en&amp;q=convertigo&quot;
      </description>
   </item>
   <item title="Verifiez que la page web correspond à sa screen class" dialog="true" skip="false">
      <description>
         Verifiez que la page web de la <b>navigator area</b> est bien associé à la screen class voulue. Pour cela appuyez sur l’icône <b>Synchronize icon</b>.<br/><br/> Dans l’onglet <b>Project view</b>, une <b>screen class</b> à été automatiquement sélectionnée : c’est la screen class détectée par Convertigo pour la page web actuelle.
      </description>
   </item>
   <item title="First project (10)" dialog="true" skip="false">
      <description>
         &gt;En appuyant sur l&apos;icone <b>Synchronize icon</b>, vous voyez que c&apos;est la <b>screen class</b> &quot;dataPages&quot; qui est selectionnée
      </description>
   </item>
   <item title="Encadrez une information à extraire dans un cadre vert" dialog="true" skip="false">
      <description>
         Pour cela, faites un clic droit dans la <b>Navigator area</b> sur un des éléments à extraire  puis agrandissez éventuellement le cadre à l’aide de l’icône <b>parent node icon</b> .
      </description>
   </item>
   <item title="First project (11)" dialog="true" skip="false">
      <description>
         &gt;Encadrez le cadre bleu du récapitulatifs des résultats car il contient des informations utiles au projet.<br/><br/>
&gt;Placez vous sur le <b>tag</b> DIV qui porte un attribut en appuyant une fois sur l&apos;icone <b>parent node icon</b>
      </description>
   </item>
   <item title="Identifiez l&apos;information par un Xpath" dialog="true" skip="false">
      <description>
         Trouvez dans la <b>DOM area</b> à l’aide de clic droit--&gt;« Generate selection Xpath » une requête  XPATH identifiant le cadre vert.
<br/><br/>
Le résultat peut être un ou plusieurs éléments en fonction des besoins.
      </description>
   </item>
   <item title="First project (12)" dialog="true" skip="false">
      <description>
         &gt;Faites un clic droit sur l&apos;atribut id=&quot;ssb&quot; puis cliquez sur &quot;Generate selection Xpath&quot;.(La requête ainsi obtenu identifie de manière unique le cadre bleu )
      </description>
   </item>
   <item title="Choisissez une règle d&apos;extraction" dialog="true" skip="false" href="http://doc.convertigo.com/JSPWiki/Wiki.jsp?page=CWICWCExtractionRules">
      <description>
         En fonction du type d’information à extraire plusieurs règles peuvent être choisies.<br/> <br/> 
Cliquez sur (?) pour en voir la liste.<br/> <br/> 
  La suite de cette aide décrit deux des plus courantes règles d’extraction.
      </description>
   </item>
   <item title="L&apos;exemple de la règle Text" dialog="true" skip="true">
      <description>
         L’Extraction rule « Text » permet de récupérer le <b>Text</b> d’une balise HTML .<br/><br/> Pour ajouter cette règle à un projet, sélectionnez la <b>screen class</b> voulue dans l’onglet <b>Projet view</b> et appuyez sur l’icône  <b>new Extraction rules icon</b>(L’ Xpath de la <b>Xpath area</b> doit être valide).
      </description>
   </item>
   <item title="First project (13)" dialog="true" skip="false">
      <description>
         Ce qui est interessant ici est le texte contenu dans le bandeau bleu ciel. Vous aurez donc besoin d&apos;une regle d&apos;extraction Text.<br/>
<br/>
&gt;Appuyez sur l&apos;icone <b>new extraction rule icon</b> puis sur l&apos;extraction rule &quot;Text&quot;<br/>
<br/>
&gt;Cliquez sur l&apos;<b>extraction rule</b> qui vient d&apos;apparaître dans la <b>Project view
</b>.<br/>Dans l&apos;onglet <b>properties view</b> mettez la proprieté &quot;Recurse&quot; à la valeur true pour permettre la recherche de tous les elements <b>Text</b> sous la DIV.
      </description>
   </item>
   <item title="L&apos;exemple de la règle Record" dialog="true" skip="true">
      <description>
         L’extraction rule « Record » permet d’extraire les informations contenues dans une liste (plusieurs élements retournés par la requête Xpath). 
<br/>
<br/>Pour ajouter cette règle à un projet, sélectionnez la <b>screen class</b> voulue dans l’onglet <b>Projet view</b> et appuyez sur l’icône  <b>new Extraction rules icon</b>(L’ Xpath de la <b>Xpath area</b> doit être valide).
<br/><br/> 
Dans l’onglet <b>Properties view</b> vous voyez une ligne &quot;Xpath&quot; qui contient la requête qui permet d’accéder aux informations à extraire(doit retourner une liste). Un traitement va être effectué sur chacun des résultats  de cette requête. 
<br/>&gt;Cliquez sur la ligne « Description» qui se trouve juste au dessus puis sur le bouton « … ». <br/>&gt;Cliquez sur l’icône bleue pour chaque information élémentaire contenu dans un élement de la liste.
<br/>&gt; Donnez des noms correspondant à l’information dans la colonne « name » et dans la colonne Xpath entrez une requête Xpath relative à la premiere qui  amène à l’information voulue.
      </description>
   </item>
   <item title="First project (14)" dialog="true" skip="false">
      <description>
         Pour faire le tableau récapitulatif de la première page des résultats google , plusieurs étapes sont nécessaires.<br/><br/>
 &gt;Dans la <b>navigator area</b>, faites un clic droit sur un des résultats google et appuyez sur l&apos;icone <b>parent node icon</b> autant de fois que nécessaire pour englober tous les résutats.(allez  jusqu&apos;au <b>tag</b> &quot;OL&quot;)<br/><br/>
 &gt;Faites un clic droit sur ce OL et appuyez sur &quot;Generate selection Xpath&quot;<br/><br/>
 &gt;Completez l&apos;Xpath de l&apos;<b>Xpath area</b> par &quot;/LI&quot; de manière à avoir une liste de &quot;LI&quot; comme résultat de la requête Xpath et appuyez sur &quot;Entrée&quot;.
 <br/><br/>
 &gt;Appuyez ensuite sur l&apos;icone <b>new Extraction rule icon</b> puis sur &quot;Record&quot;.
  <br/><br/>
&gt;Cliquez sur l&apos;<b>extraction rule</b> qui vient d&apos;apparaître dans la <b>Project view
</b>.<br/>Dans l&apos;onglet <b>properties view</b> cliquez sur &quot;Description&quot; et sur &quot;...&quot;.
  <br/><br/>
 Le projet exemple aura besoin du titre et de l&apos;adresse de page web de chaque résultat google.<br/>Vous aurez donc besoin de deux paramètres par réponse.<br/>&gt;cliquez deux fois sur l&apos;icone bleu (De la pop up generé par le clic sur &quot;...&quot;). Nommez le premier Name &quot;title&quot; et le second &quot;adress&quot; et appuyez sur &quot;ok&quot;
    <br/><br/>
      </description>
   </item>
   <item title="First project (15)" dialog="true" skip="false">
      <description>
         &gt;Faites un clic droit sur un des titres d&apos;une réponse google . Faites ensuite un clic droit sur le <b>tag</b> &quot;A&quot; surligné dans la <b>DOM area</b> puis sur &quot;create <b>absolute</b> Xpath&quot;  .<br/><br/>Vous pouvez reconnaitre dans la requète Xpath affiché (dans la &quot;Xpath area&quot;) la suite &quot;/OL/LI&quot; qui est l&apos;Xpath utilisé pour créer la règle d&apos;extraction à l&apos;étape precédente. La suite de la requête commence par un crochet dans lequel se trouve un numero: c&apos;est la position du résultat google sur lequel vous avez cliqué. Le reste est le chemin relatif du <b>tag</b> &quot;LI&quot; vers le titre.<br/><br/>
&gt;Copiez la valeur &quot;/H3/A&quot; et collez la apres un &quot;.&quot;(qui représente la requète de base) dans le champ &quot;Xpath&quot;  de la ligne &quot;title&quot; du formulaire &quot;...&quot; de la proprieté &quot;Description&quot;
<br/><br/>Vous pouvez également remarquer que l&apos;adresse du site cible se trouvedans l&apos;attribut href de la balise A.<br/>
&gt;Copiez donc la chaine &quot;./H3/A/@href&quot;  dans la ligne &quot;adress&quot;
<br/><br/>
&gt;Mettez finalement la proprietés child à la valeur true pour la ligne lié au titre  (Afin de pouvoir, par exemple recuperer du texte surenvelopés dans des balises bold)
      </description>
   </item>
   <item title="Vérifiez la bonne marche de vos Extraction rules" dialog="true" skip="false">
      <description>
         Pour vérifier que vos règles d’extraction fonctionnent bien, cliquez  sur l’icône <b>XMLize icon</b> puis voyez le résultat dans l’onglet <b> Output Tab</b> du navigateur.<br/><br/> Attention l’icône <b>XMLize icon</b>  de cet onglet ne donne pas le bon résultat !!!
      </description>
   </item>
</cheatsheet>
