<script module>
	import ArcticonsDocScanner from '~icons/arcticons/doc-scanner?raw';
	import BytesizeExport from '~icons/bytesize/export?raw';
	import BytesizeImport from '~icons/bytesize/import?raw';
	import CarbonApplication from '~icons/carbon/application?raw';
	import CarbonDataRegular from '~icons/carbon/data-regular?raw';
	import CarbonIntentRequestInactive from '~icons/carbon/intent-request-inactive?raw';
	import CarbonPanelExpansion from '~icons/carbon/panel-expansion?raw';
	import CodiconJson from '~icons/codicon/json?raw';
	import CodiconOrganization from '~icons/codicon/organization?raw';
	import CodiconRunAll from '~icons/codicon/run-all?raw';
	import DashiconsUpdate from '~icons/dashicons/update?raw';
	import EosIconsCronjob from '~icons/eos-icons/cronjob?raw';
	import EtTools2 from '~icons/et/tools-2?raw';
	import FadDuplicate from '~icons/fad/duplicate?raw';
	import FileIconsTestRuby from '~icons/file-icons/test-ruby?raw';
	import FluentMdl2Certificate from '~icons/fluent-mdl2/certificate?raw';
	import FluentMdl2TestPlan from '~icons/fluent-mdl2/test-plan?raw';
	import FluentNote48Filled from '~icons/fluent/note-48-filled?raw';
	import FluentOpen24Filled from '~icons/fluent/open-24-filled?raw';
	import GameIconsLevelThreeAdvanced from '~icons/game-icons/level-three-advanced?raw';
	import GrommetIconsAdd from '~icons/grommet-icons/add?raw';
	import GrommetIconsFormSubtract from '~icons/grommet-icons/form-subtract?raw';
	import GrommetIconsResources from '~icons/grommet-icons/resources?raw';
	import IconamoonCloudFill from '~icons/iconamoon/cloud-fill?raw';
	import IconamoonMenuBurgerHorizontalThin from '~icons/iconamoon/menu-burger-horizontal-thin?raw';
	import IconParkApplicationOne from '~icons/icon-park/application-one?raw';
	import LetsIconsSearchLight from '~icons/lets-icons/search-light?raw';
	import LetsIconsTableLight from '~icons/lets-icons/table-light?raw';
	import LetsIconsUserAltLight from '~icons/lets-icons/user-alt-light?raw';
	import LineMdCoffeeLoop from '~icons/line-md/coffee-loop?raw';
	import LucideLayoutPanelTop from '~icons/lucide/layout-panel-top?raw';
	import MaterialSymbolsApiRounded from '~icons/material-symbols/api-rounded?raw';
	import MaterialSymbolsLightCancelOutline from '~icons/material-symbols-light/cancel-outline?raw';
	import MaterialSymbolsLightCloudOutline from '~icons/material-symbols-light/cloud-outline?raw';
	import MaterialSymbolsLightDeleteOutline from '~icons/material-symbols-light/delete-outline?raw';
	import MaterialSymbolsLightDateRangeRounded from '~icons/material-symbols-light/date-range-rounded?raw';
	import MaterialSymbolsLightHomeOutline from '~icons/material-symbols-light/home-outline?raw';
	import MaterialSymbolsLightKeyOutline from '~icons/material-symbols-light/key-outline?raw';
	import MaterialSymbolsLightSaveAsOutline from '~icons/material-symbols-light/save-as-outline?raw';
	import MaterialSymbolsLightScheduleOutline from '~icons/material-symbols-light/schedule-outline?raw';
	import MaterialSymbolsLightSyncOutline from '~icons/material-symbols-light/sync-outline?raw';
	import MaterialSymbolsLightUpdate from '~icons/material-symbols-light/update?raw';
	import MaterialSymbolsHomeOutlineRounded from '~icons/material-symbols/home-outline-rounded?raw';
	import MaterialSymbolsSettingsOutlineRounded from '~icons/material-symbols/settings-outline-rounded?raw';
	import MaterialSymbolsOnlinePredictionRounded from '~icons/material-symbols/online-prediction-rounded?raw';
	import MaterialSymbolsFolderOutlineRounded from '~icons/material-symbols/folder-outline?raw';
	import MaterialSymbolsBookmarkAddedOutlineSharp from '~icons/material-symbols/bookmark-added-outline-sharp?raw';
	import MaterialSymbolsSearchRounded from '~icons/material-symbols/search-rounded?raw';
	import MaterialSymbolsCachedRounded from '~icons/material-symbols/cached-rounded?raw';
	import MaterialSymbolsScheduleOutlineRounded from '~icons/material-symbols/schedule-outline-rounded?raw';
	import MaterialSymbolsKeyOutlineRounded from '~icons/material-symbols/key-outline-rounded?raw';
	import MaterialSymbolsSupervisedUserCircleOutline from '~icons/material-symbols/supervised-user-circle-outline?raw';
	import MaterialSymbolsHotelClassOutline from '~icons/material-symbols/hotel-class-outline?raw';
	import MaterialSymbolsSyncArrowUpRounded from '~icons/material-symbols/sync-arrow-up-rounded?raw';
	import MaterialSymbolsDashboardOutlineRounded from '~icons/material-symbols/dashboard-outline-rounded?raw';
	import MaterialSymbolsDataObject from '~icons/material-symbols/data-object?raw';
	import MaterialSymbolsCloudOutline from '~icons/material-symbols/cloud-outline?raw';
	import MaterialSymbolsDeviceHub from '~icons/material-symbols/device-hub?raw';
	import MaterialSymbolsUnknownDocumentOutline from '~icons/material-symbols/unknown-document-outline?raw';
	import MdiArrowULeftTop from '~icons/mdi/arrow-u-left-top?raw';
	import MdiBackupRestore from '~icons/mdi/backup-restore?raw';
	import MdiBriefcaseUploadOutline from '~icons/mdi/briefcase-upload-outline?raw';
	import MdiBroom from '~icons/mdi/broom?raw';
	import MdiCheckAll from '~icons/mdi/check-all?raw';
	import MdiClockStarFourPointsOutline from '~icons/mdi/clock-star-four-points-outline?raw';
	import MdiCodeBlockBraces from '~icons/mdi/code-block-braces?raw';
	import MdiDotsVertical from '~icons/mdi/dots-vertical?raw';
	import MdiEditOutline from '~icons/mdi/edit-outline?raw';
	import MdiEye from '~icons/mdi/eye?raw';
	import MdiEyeOff from '~icons/mdi/eye-off?raw';
	import MdiDownloadLockOutline from '~icons/mdi/download-lock-outline?raw';
	import MdiDownloadOffOutline from '~icons/mdi/download-off-outline?raw';
	import MdiFileDownloadOutline from '~icons/mdi/file-download-outline?raw';
	import MdiFilter from '~icons/mdi/filter?raw';
	import MdiFilterCog from '~icons/mdi/filter-cog?raw';
	import MdiFilterCogOutline from '~icons/mdi/filter-cog-outline?raw';
	import MdiFullscreen from '~icons/mdi/fullscreen?raw';
	import MdiFullscreenExit from '~icons/mdi/fullscreen-exit?raw';
	import MdiGithub from '~icons/mdi/github?raw';
	import MdiInvoiceScheduledOutline from '~icons/mdi/invoice-scheduled-outline?raw';
	import MdiLanguageJava from '~icons/mdi/language-java?raw';
	import MdiLock from '~icons/mdi/lock?raw';
	import MdiLockOpenVariant from '~icons/mdi/lock-open-variant?raw';
	import MdiMagnigy from '~icons/mdi/magnify?raw';
	import MdiMarketplaceOutline from '~icons/mdi/marketplace-outline?raw';
	import MdiMoonAndStars from '~icons/mdi/moon-and-stars?raw';
	import MdiReceiptTextSendOutline from '~icons/mdi/receipt-text-send-outline?raw';
	import MdiResizeHorizontal from '~icons/mdi/resize-horizontal?raw';
	import MdiSearch from '~icons/mdi/search?raw';
	import MdiWarningOutline from '~icons/mdi/warning-outline?raw';
	import MdiWeatherSunny from '~icons/mdi/weather-sunny?raw';
	import MingcuteDeleteLine from '~icons/mingcute/delete-line?raw';
	import OcticonLogoGithub16 from '~icons/octicon/logo-github-16?raw';
	import PhBooksThin from '~icons/ph/books-thin?raw';
	import PhCertificateThin from '~icons/ph/certificate-thin?raw';
	import PhFolderThin from '~icons/ph/folder-thin?raw';
	import PhGearSixThin from '~icons/ph/gear-six-thin?raw';
	import PhGearThin from '~icons/ph/gear-thin?raw';
	import PhPackageThin from '~icons/ph/package-thin?raw';
	import PhPlugsConnectedThin from '~icons/ph/plugs-connected-thin?raw';
	import PhUsers from '~icons/ph/users?raw';
	import PhVideoThin from '~icons/ph/video-thin?raw';
	import SimpleLineIconsReload from '~icons/simple-line-icons/reload?raw';
	import SolarMaskHapplyLineDuotone from '~icons/solar/mask-happly-line-duotone?raw';
	import UimLayerGroup from '~icons/uim/layer-group?raw';
	import VaadinKeyO from '~icons/vaadin/key-o?raw';
	import Return from '~icons/ion/return-down-back-sharp?raw';
	import RightArrow from '~icons/gg/arrow-right?raw';

	export const ico = {
		'arcticons:doc-scanner': ArcticonsDocScanner,
		'bytesize:export': BytesizeExport,
		'bytesize:import': BytesizeImport,
		'carbon:application': CarbonApplication,
		'carbon:data-regular': CarbonDataRegular,
		'carbon:intent-request-inactive': CarbonIntentRequestInactive,
		'carbon:panel-expansion': CarbonPanelExpansion,
		'codicon:json': CodiconJson,
		'codicon:organization': CodiconOrganization,
		'codicon:run-all': CodiconRunAll,
		'dashicons:update': DashiconsUpdate,
		'eos-icons:cronjob': EosIconsCronjob,
		'et:tools-2': EtTools2,
		'fad:duplicate': FadDuplicate,
		'file-icons:test-ruby': FileIconsTestRuby,
		'fluent-mdl2:certificate': FluentMdl2Certificate,
		'fluent-mdl2:test-plan': FluentMdl2TestPlan,
		'fluent:note-48-filled': FluentNote48Filled,
		'fluent:open-24-filled': FluentOpen24Filled,
		'game-icons:level-three-advanced': GameIconsLevelThreeAdvanced,
		'grommet-icons:add': GrommetIconsAdd,
		'grommet-icons:form-subtract': GrommetIconsFormSubtract,
		'grommet-icons:resources': GrommetIconsResources,
		'iconamoon:cloud-fill': IconamoonCloudFill,
		'iconamoon:menu-burger-horizontal-thin': IconamoonMenuBurgerHorizontalThin,
		'icon-park:application-one': IconParkApplicationOne,
		'lets-icons:search-light': LetsIconsSearchLight,
		'lets-icons:table-light': LetsIconsTableLight,
		'lets-icons:user-alt-light': LetsIconsUserAltLight,
		'line-md:coffee-loop': LineMdCoffeeLoop,
		'lucide:layout-panel-top': LucideLayoutPanelTop,
		'material-symbols:api-rounded': MaterialSymbolsApiRounded,
		'material-symbols-light:cancel-outline': MaterialSymbolsLightCancelOutline,
		'material-symbols-light:cloud-outline': MaterialSymbolsLightCloudOutline,
		'material-symbols-light:date-range-rounded': MaterialSymbolsLightDateRangeRounded,
		'material-symbols-light:delete-outline': MaterialSymbolsLightDeleteOutline,
		'material-symbols-light:home-outline': MaterialSymbolsLightHomeOutline,
		'material-symbols-light:key-outline': MaterialSymbolsLightKeyOutline,
		'material-symbols-light:save-as-outline': MaterialSymbolsLightSaveAsOutline,
		'material-symbols-light:schedule-outline': MaterialSymbolsLightScheduleOutline,
		'material-symbols-light:sync-outline': MaterialSymbolsLightSyncOutline,
		'material-symbols-light:update': MaterialSymbolsLightUpdate,
		'material-symbols:home-outline-rounded': MaterialSymbolsHomeOutlineRounded,
		'material-symbols:settings-outline-rounded': MaterialSymbolsSettingsOutlineRounded,
		'material-symbols:online-prediction-rounded': MaterialSymbolsOnlinePredictionRounded,
		'material-symbols:folder-outline': MaterialSymbolsFolderOutlineRounded,
		'material-symbols:bookmark-added-outline-sharp': MaterialSymbolsBookmarkAddedOutlineSharp,
		'material-symbols:search-rounded': MaterialSymbolsSearchRounded,
		'material-symbols:cached-rounded': MaterialSymbolsCachedRounded,
		'material-symbols:schedule-outline-rounded': MaterialSymbolsScheduleOutlineRounded,
		'material-symbols:key-outline-rounded': MaterialSymbolsKeyOutlineRounded,
		'material-symbols:supervised-user-circle-outline': MaterialSymbolsSupervisedUserCircleOutline,
		'material-symbols:hotel-class-outline': MaterialSymbolsHotelClassOutline,
		'material-symbols:sync-arrow-up-rounded': MaterialSymbolsSyncArrowUpRounded,
		'material-symbols:dashboard-outline-rounded': MaterialSymbolsDashboardOutlineRounded,
		'material-symbols:data-object': MaterialSymbolsDataObject,
		'material-symbols:cloud-outline': MaterialSymbolsCloudOutline,
		'material-symbols:device-hub': MaterialSymbolsDeviceHub,
		'material-symbols:unknown-document-outline': MaterialSymbolsUnknownDocumentOutline,
		'mdi:arrow-u-left-top': MdiArrowULeftTop,
		'mdi:backup-restore': MdiBackupRestore,
		'mdi:briefcase-upload-outline': MdiBriefcaseUploadOutline,
		'mdi:broom': MdiBroom,
		'mdi:check-all': MdiCheckAll,
		'mdi:clock-star-four-points-outline': MdiClockStarFourPointsOutline,
		'mdi:code-block-braces': MdiCodeBlockBraces,
		'mdi:dots-vertical': MdiDotsVertical,
		'mdi:download-lock-outline': MdiDownloadLockOutline,
		'mdi:download-off-outline': MdiDownloadOffOutline,
		'mdi:edit-outline': MdiEditOutline,
		'mdi:eye': MdiEye,
		'mdi:eye-off': MdiEyeOff,
		'mdi:file-download-outline': MdiFileDownloadOutline,
		'mdi:filter': MdiFilter,
		'mdi:filter-cog': MdiFilterCog,
		'mdi:filter-cog-outline': MdiFilterCogOutline,
		'mdi:fullscreen': MdiFullscreen,
		'mdi:fullscreen-exit': MdiFullscreenExit,
		'mdi:github': MdiGithub,
		'mdi:invoice-scheduled-outline': MdiInvoiceScheduledOutline,
		'mdi:language-java': MdiLanguageJava,
		'mdi:lock': MdiLock,
		'mdi:lock-open-variant': MdiLockOpenVariant,
		'mdi:magnify': MdiMagnigy,
		'mdi:marketplace-outline': MdiMarketplaceOutline,
		'mdi:moon-and-stars': MdiMoonAndStars,
		'mdi:receipt-text-send-outline': MdiReceiptTextSendOutline,
		'mdi:resize-horizontal': MdiResizeHorizontal,
		'mdi:search': MdiSearch,
		'mdi:warning-outline': MdiWarningOutline,
		'mdi:weather-sunny': MdiWeatherSunny,
		'mingcute:delete-line': MingcuteDeleteLine,
		'octicon:logo-github-16': OcticonLogoGithub16,
		'ph:books-thin': PhBooksThin,
		'ph:certificate-thin': PhCertificateThin,
		'ph:folder-thin': PhFolderThin,
		'ph:gear-six-thin': PhGearSixThin,
		'ph:gear-thin': PhGearThin,
		'ph:package-thin': PhPackageThin,
		'ph:plugs-connected-thin': PhPlugsConnectedThin,
		'ph:users': PhUsers,
		'ph:video-thin': PhVideoThin,
		'simple-line-icons:reload': SimpleLineIconsReload,
		'solar:mask-happly-line-duotone': SolarMaskHapplyLineDuotone,
		'uim:layer-group': UimLayerGroup,
		'vaadin:key-o': VaadinKeyO,
		'ion:return-down-back-sharp': Return,
		'gg:arrow-right': RightArrow
	};
</script>

<script>
	import { assets } from '$app/paths';
	import { browser } from '$app/environment';

	/** @type {{icon: string, size?: string|number, class?: string, animate?: boolean|import('svelte/transition').DrawParams , repeat?: boolean, strokeWidth?: any} | any} */
	let {
		icon,
		size = 4,
		class: cls = '',
		// animate = false,
		// repeat = false,
		// strokeWidth = undefined
		...props
	} = $props();

	if (size == 'btn') {
		size = 6;
	} else if (['nav', 'dashboard'].includes(size)) {
		size = 5;
	}

	// let _animate = $state({ duration: 2000 });
	// let svg = $state(null);
	// let show = $state(false);
	// if (animate) {
	// 	if (animate != true) {
	// 		// @ts-ignore
	// 		_animate = animate;
	// 	}
	// 	onMount(() => {
	// 		svg = new DOMParser().parseFromString(ico[icon], 'image/svg+xml').documentElement;
	// 		let interval;
	// 		if (repeat) {
	// 			interval = window.setInterval(() => {
	// 				show = !show;
	// 			}, _animate.duration);
	// 		}
	// 		tick().then(() => (show = true));
	// 		return () => window.clearInterval(interval);
	// 	});
	// }
	// function attrToObj(element) {
	// 	return [...element.attributes].reduce((acc, attr) => {
	// 		acc[attr.name] = attr.value;
	// 		return acc;
	// 	}, {});
	// }
	let html = $derived(icon.includes(':') ? ico[icon].match(/>(.*)</)?.[1] : undefined);
</script>

{#if html}
	<svg class="size-{size} ico {cls}" viewBox={ico[icon].match(/viewBox="([^"]+)"/)?.[1]}>
		{#if browser}
			{@html html}
		{:else}
			{@html html}
		{/if}
	</svg>
{:else}
	<img src="{assets}/{icon}" class="w-{size} {cls}" {...props} />
{/if}

<!-- {#if !svg || !animate}
	{@html ico[icon].replace('class="', `class="w-${size} h-${size} ${cls} `)}
{:else}
	<svg {...attrToObj(svg)} class={`${svg.getAttribute('class') ?? ''} w-${size} h-${size} ${cls} `}>
		{#each svg.children as child}
			{#if ['path', 'polyline'].includes(child.tagName)}
				{#if show}
					<svelte:element
						this={child.tagName}
						transition:draw={_animate}
						{...attrToObj(child)}
						fill="none"
						stroke="currentColor"
						stroke-linejoin="round"
						stroke-width={strokeWidth}
					/>
				{/if}
			{:else}
				{@html child.outerHTML}
			{/if}
		{/each}
	</svg>
{/if} -->
