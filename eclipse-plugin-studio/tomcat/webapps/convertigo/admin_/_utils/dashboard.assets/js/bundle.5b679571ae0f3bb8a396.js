(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{147:function(e,t,n){var r;!function(){function n(e,t){"use strict";return new o(e,t).beautify()}function o(e,t){"use strict";var n,r,o,a,i,s,c,l,u,d,p,f,m,h,y,b,g,E,_,v,O,S,D,N,w,T,C="";function I(e,t){var n=0;return e&&(n=e.indentation_level,n+=e.var_line&&e.var_line_reindented?1:0,!L()&&e.line_indent_level>n&&(n=e.line_indent_level)),{mode:t,parent:e,last_text:e?e.last_text:"",last_word:e?e.last_word:"",var_line:!1,var_line_tainted:!1,var_line_reindented:!1,in_html_comment:!1,multiline_frame:!1,if_block:!1,do_block:!1,do_while:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:n,line_indent_level:e?e.line_indent_level:n,start_line_index:r.length,had_comment:!1,ternary_depth:0}}for(p="\n\r\t ".split(""),f="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_$".split(""),b="0123456789".split(""),m="+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! !! , : ? ^ ^= |= ::",m=(m+=" <%= <% %> <?= <? ?>").split(" "),y="continue,try,throw,return,var,if,switch,case,default,for,while,break,function".split(","),w={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"},N={TK_START_EXPR:function(){G();var e=w.Expression;if("["===o){if("TK_WORD"===i||")"===l.last_text)return W(l.last_text,y)&&(v=!0),V(e),U(),M(),void(T.space_in_paren&&(v=!0));e=w.ArrayLiteral,F(l.mode)&&("["!==l.last_text&&(","!==l.last_text||"]"!==s&&"}"!==s)||T.keep_array_indentation||k())}else"for"===l.last_text?e=w.ForInitializer:W(l.last_text,["if","while"])&&(e=w.Conditional);";"===l.last_text||"TK_START_BLOCK"===i?k():"TK_END_EXPR"===i||"TK_START_EXPR"===i||"TK_END_BLOCK"===i||"."===l.last_text?(x(E),_=!1):"TK_WORD"!==i&&"TK_OPERATOR"!==i?v=!0:"function"===l.last_word||"typeof"===l.last_word?T.jslint_happy&&(v=!0):(W(l.last_text,y)||"catch"===l.last_text)&&T.space_before_conditional&&(v=!0);"("===o&&("TK_EQUALS"!==i&&"TK_OPERATOR"!==i||K()||x());V(e),U(),T.space_in_paren&&(v=!0);M()},TK_END_EXPR:function(){for(;l.mode===w.Statement;)H();"]"===o&&F(l.mode)&&l.multiline_frame&&!T.keep_array_indentation&&k();l.multiline_frame&&x();T.space_in_paren&&("TK_START_EXPR"===i?(A(),v=!1):v=!0);"]"===o&&T.keep_array_indentation?(U(),H()):(H(),U());q(u),l.do_while&&u.mode===w.Conditional&&(u.mode=w.Expression,l.do_block=!1,l.do_while=!1)},TK_START_BLOCK:function(){V(w.BlockStatement);var e=function(e){var t=h,r=n.charAt(t);for(;W(r,p)&&r!==e;){if(++t>=O)return!1;r=n.charAt(t)}return r===e}("}")&&"function"===l.last_word&&"TK_END_EXPR"===i;"expand"===T.brace_style?"TK_OPERATOR"!==i&&(e||"TK_EQUALS"===i||X(l.last_text)&&"else"!==l.last_text)?v=!0:k():"TK_OPERATOR"!==i&&"TK_START_EXPR"!==i?"TK_START_BLOCK"===i?k():v=!0:F(u.mode)&&","===l.last_text&&("}"===s?v=!0:k());U(),M()},TK_END_BLOCK:function(){for(;l.mode===w.Statement;)H();var e="TK_START_BLOCK"===i;"expand"===T.brace_style?e||k():e||(F(l.mode)&&T.keep_array_indentation?(T.keep_array_indentation=!1,k(),T.keep_array_indentation=!0):k());H(),U()},TK_WORD:function(){G()||!E||B(l.mode)||"TK_OPERATOR"===i&&"--"!==l.last_text&&"++"!==l.last_text||"TK_EQUALS"===i||!T.preserve_newlines&&"var"===l.last_text||k();if(l.do_block&&!l.do_while){if("while"===o)return v=!0,U(),v=!0,void(l.do_while=!0);k(),l.do_block=!1}if(l.if_block&&"else"!==o){for(;l.mode===w.Statement;)H();l.if_block=!1}if("case"===o||"default"===o&&l.in_case_statement)return k(),(l.case_body||T.jslint_happy)&&(l.indentation_level>0&&(!l.parent||l.indentation_level>l.parent.indentation_level)&&(l.indentation_level-=1),l.case_body=!1),U(),l.in_case=!0,void(l.in_case_statement=!0);"function"===o&&(l.var_line&&"TK_EQUALS"!==i&&(l.var_line_reindented=!0),(W(l.last_text,["}",";"])||L()&&!W(l.last_text,["{",":","=",","]))&&(function(){if(L()){return 1===r.length||0===r[r.length-2].text.length}return!1}()||l.had_comment||(k(),k(!0))),"TK_WORD"===i?"get"===l.last_text||"set"===l.last_text||"new"===l.last_text||"return"===l.last_text?v=!0:k():"TK_OPERATOR"===i||"="===l.last_text?v=!0:B(l.mode)||k());"TK_COMMA"!==i&&"TK_START_EXPR"!==i&&"TK_EQUALS"!==i&&"TK_OPERATOR"!==i||K()||x();if("function"===o)return U(),void(l.last_word=o);g="NONE","TK_END_BLOCK"===i?W(o,["else","catch","finally"])?"expand"===T.brace_style||"end-expand"===T.brace_style?g="NEWLINE":(g="SPACE",v=!0):g="NEWLINE":"TK_SEMICOLON"===i&&l.mode===w.BlockStatement?g="NEWLINE":"TK_SEMICOLON"===i&&B(l.mode)?g="SPACE":"TK_STRING"===i?g="NEWLINE":"TK_WORD"===i?g="SPACE":"TK_START_BLOCK"===i?g="NEWLINE":"TK_END_EXPR"===i&&(v=!0,g="NEWLINE");W(o,y)&&")"!==l.last_text&&(g="else"===l.last_text?"SPACE":"NEWLINE");if(W(o,["else","catch","finally"]))if("TK_END_BLOCK"!==i||"expand"===T.brace_style||"end-expand"===T.brace_style)k();else{A(!0);var e=r[r.length-1];"}"!==e.text[e.text.length-1]&&k(),v=!0}else"NEWLINE"===g?X(l.last_text)?v=!0:"TK_END_EXPR"!==i?"TK_START_EXPR"===i&&"var"===o||":"===l.last_text||("if"===o&&"else"===l.last_word&&"{"!==l.last_text?v=!0:(l.var_line=!1,l.var_line_reindented=!1,k())):W(o,y)&&")"!==l.last_text&&(l.var_line=!1,l.var_line_reindented=!1,k()):F(l.mode)&&","===l.last_text&&"}"===s?k():"SPACE"===g&&(v=!0);U(),l.last_word=o,"var"===o&&(l.var_line=!0,l.var_line_reindented=!1,l.var_line_tainted=!1);"do"===o&&(l.do_block=!0);"if"===o&&(l.if_block=!0)},TK_SEMICOLON:function(){G()&&(v=!1);for(;l.mode===w.Statement&&!l.if_block&&!l.do_block;)H();U(),l.var_line=!1,l.var_line_reindented=!1,l.mode===w.ObjectLiteral&&(l.mode=w.BlockStatement)},TK_STRING:function(){G()?v=!0:"TK_WORD"===i?v=!0:"TK_COMMA"===i||"TK_START_EXPR"===i||"TK_EQUALS"===i||"TK_OPERATOR"===i?K()||x():k();U()},TK_EQUALS:function(){l.var_line&&(l.var_line_tainted=!0);v=!0,U(),v=!0},TK_OPERATOR:function(){var e=!0,t=!0;if(X(l.last_text))return v=!0,void U();if("*"===o&&"TK_DOT"===i&&!s.match(/^\d+$/))return void U();if(":"===o&&l.in_case)return l.case_body=!0,M(),U(),k(),void(l.in_case=!1);if("::"===o)return void U();!E||"--"!==o&&"++"!==o||k();W(o,["--","++","!"])||W(o,["-","+"])&&(W(i,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||W(l.last_text,y)||","===l.last_text)?(e=!1,t=!1,";"===l.last_text&&B(l.mode)&&(e=!0),"TK_WORD"===i&&W(l.last_text,y)&&(e=!0),l.mode!==w.BlockStatement&&l.mode!==w.Statement||"{"!==l.last_text&&";"!==l.last_text||k()):":"===o?0===l.ternary_depth?(l.mode===w.BlockStatement&&(l.mode=w.ObjectLiteral),e=!1):l.ternary_depth-=1:"?"===o&&(l.ternary_depth+=1);v=v||e,U(),v=t},TK_COMMA:function(){if(l.var_line)return(B(l.mode)||"TK_END_BLOCK"===i)&&(l.var_line_tainted=!1),l.var_line&&(l.var_line_reindented=!0),U(),void(l.var_line_tainted?(l.var_line_tainted=!1,k()):v=!0);"TK_END_BLOCK"===i&&l.mode!==w.Expression?(U(),l.mode===w.ObjectLiteral&&"}"===l.last_text?k():v=!0):l.mode===w.ObjectLiteral?(U(),k()):(U(),v=!0)},TK_BLOCK_COMMENT:function(){var e,t=function(e){e=e.replace(/\x0d/g,"");var t=[],n=e.indexOf("\n");for(;-1!==n;)t.push(e.substring(0,n)),e=e.substring(n+1),n=e.indexOf("\n");e.length&&t.push(e);return t}(o),n=!1;k(!1,!0),t.length>1&&function(e,t){for(var n=0;n<e.length;n++){if(P(e[n]).charAt(0)!==t)return!1}return!0}(t.slice(1),"*")&&(n=!0);for(U(t[0]),e=1;e<t.length;e++)k(!1,!0),n?U(" "+P(t[e])):r[r.length-1].text.push(t[e]);k(!1,!0)},TK_INLINE_COMMENT:function(){v=!0,U(),v=!0},TK_COMMENT:function(){E?k(!1,!0):A(!0);v=!0,U(),k(!1,!0)},TK_DOT:function(){X(l.last_text)?v=!0:x(")"===l.last_text&&T.break_chained_methods);U()},TK_UNKNOWN:function(){U(),"\n"===o[o.length-1]&&k()}},T={},void 0!==(t=t||{}).space_after_anon_function&&void 0===t.jslint_happy&&(t.jslint_happy=t.space_after_anon_function),void 0!==t.braces_on_own_line&&(T.brace_style=t.braces_on_own_line?"expand":"collapse"),T.brace_style=t.brace_style?t.brace_style:T.brace_style?T.brace_style:"collapse","expand-strict"===T.brace_style&&(T.brace_style="expand"),T.indent_size=t.indent_size?parseInt(t.indent_size,10):4,T.indent_char=t.indent_char?t.indent_char:" ",T.preserve_newlines=void 0===t.preserve_newlines||t.preserve_newlines,T.break_chained_methods=void 0!==t.break_chained_methods&&t.break_chained_methods,T.max_preserve_newlines=void 0===t.max_preserve_newlines?0:parseInt(t.max_preserve_newlines,10),T.space_in_paren=void 0!==t.space_in_paren&&t.space_in_paren,T.jslint_happy=void 0!==t.jslint_happy&&t.jslint_happy,T.keep_array_indentation=void 0!==t.keep_array_indentation&&t.keep_array_indentation,T.space_before_conditional=void 0===t.space_before_conditional||t.space_before_conditional,T.unescape_strings=void 0!==t.unescape_strings&&t.unescape_strings,T.wrap_line_length=void 0===t.wrap_line_length?0:parseInt(t.wrap_line_length,10),T.e4x=void 0!==t.e4x&&t.e4x,t.indent_with_tabs&&(T.indent_char="\t",T.indent_size=1),c="";T.indent_size>0;)c+=T.indent_char,T.indent_size-=1;for(;e&&(" "===e.charAt(0)||"\t"===e.charAt(0));)C+=e.charAt(0),e=e.substring(1);function A(e){if(e=void 0!==e&&e,r.length)for(R(r[r.length-1]);e&&r.length>1&&0===r[r.length-1].text.length;)r.pop(),R(r[r.length-1])}function R(e){for(;e.text.length&&(" "===e.text[e.text.length-1]||e.text[e.text.length-1]===c||e.text[e.text.length-1]===C);)e.text.pop()}function P(e){return e.replace(/^\s+|\s+$/g,"")}function L(){return 0===r[r.length-1].text.length}function x(e){if(e=void 0!==e&&e,T.wrap_line_length&&!e){var t=r[r.length-1];t.text.length>0&&t.text.join("").length+o.length+(v?1:0)>=T.wrap_line_length&&(e=!0)}(T.preserve_newlines&&E||e)&&!L()&&(k(!1,!0),F(l.mode)||B(l.mode)||(_=!0))}function k(e,t){if(_=!1,v=!1,!t&&";"!==l.last_text)for(;l.mode===w.Statement&&!l.if_block&&!l.do_block;)H();1===r.length&&L()||!e&&L()||(l.multiline_frame=!0,r.push({text:[]}))}function j(){if(L()){var e=r[r.length-1];if(T.keep_array_indentation&&F(l.mode)&&E){e.text.push("");for(var t=0;t<D.length;t+=1)e.text.push(D[t])}else C&&e.text.push(C),function(e){if(r.length>1){var t=r[r.length-1];l.line_indent_level=e;for(var n=0;n<e;n+=1)t.text.push(c)}}(l.indentation_level+(l.var_line&&l.var_line_reindented?1:0)+(_?1:0))}}function U(e){e=e||o,j(),_=!1,function(){var e=r[r.length-1];if(v&&e.text.length){var t=e.text[e.text.length-1];" "!==t&&t!==c&&e.text.push(" ")}}(),v=!1,r[r.length-1].text.push(e)}function M(){l.indentation_level+=1}function q(e){if(!e.multiline_frame)for(var t,n=e.start_line_index,o=0;n<r.length;)t=r[n],n++,0!==t.text.length&&(o=C&&t.text[0]===C?1:0,t.text[o]===c&&t.text.splice(o,1))}function V(e){l?(d.push(l),u=l):u=I(null,e),l=I(u,e)}function F(e){return e===w.ArrayLiteral}function B(e){return W(e,[w.Expression,w.ForInitializer,w.Conditional])}function H(){d.length>0&&(u=l,l=d.pop())}function K(){return l.mode===w.ObjectLiteral&&":"===l.last_text&&0===l.ternary_depth}function G(){return("do"===l.last_text||"else"===l.last_text&&"if"!==o||"TK_END_EXPR"===i&&(u.mode===w.ForInitializer||u.mode===w.Conditional))&&(x(W(o,["do","for","if","while"])),V(w.Statement),L()&&(M(),_=!1),!0)}function X(e){return W(e,["case","return","do","if","throw","else"])}function W(e,t){for(var n=0;n<t.length;n+=1)if(t[n]===e)return!0;return!1}function z(){var e;if(S=0,h>=O)return["","TK_EOF"];E=!1,D=[];var t=n.charAt(h);for(h+=1;W(t,p);){if("\n"===t?(S+=1,D=[]):S&&(t===c?D.push(c):"\r"!==t&&D.push(" ")),h>=O)return["","TK_EOF"];t=n.charAt(h),h+=1}if(W(t,f)){if(h<O)for(;W(n.charAt(h),f)&&(t+=n.charAt(h),(h+=1)!==O););if(h!==O&&t.match(/^[0-9]+[Ee]$/)&&("-"===n.charAt(h)||"+"===n.charAt(h))){var o=n.charAt(h);return h+=1,[t+=o+z()[0],"TK_WORD"]}return"in"===t?[t,"TK_OPERATOR"]:[t,"TK_WORD"]}if("("===t||"["===t)return[t,"TK_START_EXPR"];if(")"===t||"]"===t)return[t,"TK_END_EXPR"];if("{"===t)return[t,"TK_START_BLOCK"];if("}"===t)return[t,"TK_END_BLOCK"];if(";"===t)return[t,"TK_SEMICOLON"];if("/"===t){var a="",s=!0;if("*"===n.charAt(h)){if((h+=1)<O)for(;h<O&&("*"!==n.charAt(h)||!n.charAt(h+1)||"/"!==n.charAt(h+1))&&(a+=t=n.charAt(h),"\n"!==t&&"\r"!==t||(s=!1),!((h+=1)>=O)););return h+=2,s&&0===S?["/*"+a+"*/","TK_INLINE_COMMENT"]:["/*"+a+"*/","TK_BLOCK_COMMENT"]}if("/"===n.charAt(h)){for(a=t;"\r"!==n.charAt(h)&&"\n"!==n.charAt(h)&&(a+=n.charAt(h),!((h+=1)>=O)););return[a,"TK_COMMENT"]}}if("'"===t||'"'===t||("/"===t||T.e4x&&"<"===t&&n.slice(h-1).match(/^<([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])\s*([-a-zA-Z:0-9_.]+=('[^']*'|"[^"]*"|{[^{}]*})\s*)*\/?\s*>/))&&("TK_WORD"===i&&X(l.last_text)||"TK_END_EXPR"===i&&W(u.mode,[w.Conditional,w.ForInitializer])||W(i,["TK_COMMENT","TK_START_EXPR","TK_START_BLOCK","TK_END_BLOCK","TK_OPERATOR","TK_EQUALS","TK_EOF","TK_SEMICOLON","TK_COMMA"]))){var d=t,y=!1,g=!1;if(e=t,h<O)if("/"===d){for(var _=!1;y||_||n.charAt(h)!==d;)if(e+=n.charAt(h),y?y=!1:(y="\\"===n.charAt(h),"["===n.charAt(h)?_=!0:"]"===n.charAt(h)&&(_=!1)),(h+=1)>=O)return[e,"TK_STRING"]}else if(T.e4x&&"<"===d){var v=/<(\/?)([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])\s*([-a-zA-Z:0-9_.]+=('[^']*'|"[^"]*"|{[^{}]*})\s*)*(\/?)\s*>/g,N=n.slice(h-1),C=v.exec(N);if(C&&0===C.index){for(var I=C[2],A=0;C;){var R=!!C[1],L=C[2],x=!!C[C.length-1]||"![CDATA["===L.slice(0,8);if(L!==I||x||(R?--A:++A),A<=0)break;C=v.exec(N)}var k=C?C.index+C[0].length:N.length;return h+=k-1,[N.slice(0,k),"TK_STRING"]}}else for(;y||n.charAt(h)!==d;)if(e+=n.charAt(h),y?("x"!==n.charAt(h)&&"u"!==n.charAt(h)||(g=!0),y=!1):y="\\"===n.charAt(h),(h+=1)>=O)return[e,"TK_STRING"];if(h+=1,e+=d,g&&T.unescape_strings&&(e=function(e){for(var t,n=!1,r="",o=0,a="",i=0;n||o<e.length;)if(t=e.charAt(o),o++,n){if(n=!1,"x"===t)a=e.substr(o,2),o+=2;else{if("u"!==t){r+="\\"+t;continue}a=e.substr(o,4),o+=4}if(!a.match(/^[0123456789abcdefABCDEF]+$/))return e;if((i=parseInt(a,16))>=0&&i<32){r+="x"===t?"\\x"+a:"\\u"+a;continue}if(34===i||39===i||92===i)r+="\\"+String.fromCharCode(i);else{if("x"===t&&i>126&&i<=255)return e;r+=String.fromCharCode(i)}}else"\\"===t?n=!0:r+=t;return r}(e)),"/"===d)for(;h<O&&W(n.charAt(h),f);)e+=n.charAt(h),h+=1;return[e,"TK_STRING"]}if("#"===t){if(1===r.length&&0===r[0].text.length&&"!"===n.charAt(h)){for(e=t;h<O&&"\n"!==t;)e+=t=n.charAt(h),h+=1;return[P(e)+"\n","TK_UNKNOWN"]}var j="#";if(h<O&&W(n.charAt(h),b)){do{j+=t=n.charAt(h),h+=1}while(h<O&&"#"!==t&&"="!==t);return"#"===t||("["===n.charAt(h)&&"]"===n.charAt(h+1)?(j+="[]",h+=2):"{"===n.charAt(h)&&"}"===n.charAt(h+1)&&(j+="{}",h+=2)),[j,"TK_WORD"]}}if("<"===t&&"\x3c!--"===n.substring(h-1,h+3)){for(h+=3,t="\x3c!--";"\n"!==n.charAt(h)&&h<O;)t+=n.charAt(h),h++;return l.in_html_comment=!0,[t,"TK_COMMENT"]}if("-"===t&&l.in_html_comment&&"--\x3e"===n.substring(h-1,h+2))return l.in_html_comment=!1,h+=2,["--\x3e","TK_COMMENT"];if("."===t)return[t,"TK_DOT"];if(W(t,m)){for(;h<O&&W(t+n.charAt(h),m)&&(t+=n.charAt(h),!((h+=1)>=O)););return","===t?[t,"TK_COMMA"]:"="===t?[t,"TK_EQUALS"]:[t,"TK_OPERATOR"]}return[t,"TK_UNKNOWN"]}n=e,O=e.length,i="TK_START_BLOCK",s="",r=[{text:[]}],_=!1,v=!1,D=[],d=[],V(w.BlockStatement),h=0,this.beautify=function(){for(var e,t,n,c;e=z(),o=e[0],"TK_EOF"!==(a=e[1]);){if(n=T.keep_array_indentation&&F(l.mode),E=S>0,n)for(t=0;t<S;t+=1)k(t>0);else if(T.max_preserve_newlines&&S>T.max_preserve_newlines&&(S=T.max_preserve_newlines),T.preserve_newlines&&S>1)for(k(),t=1;t<S;t+=1)k(!0);N[a](),"TK_INLINE_COMMENT"!==a&&"TK_COMMENT"!==a&&"TK_BLOCK_COMMENT"!==a&&"TK_UNKNOWN"!==a&&(s=l.last_text,i=a,l.last_text=o),l.had_comment="TK_INLINE_COMMENT"===a||"TK_COMMENT"===a||"TK_BLOCK_COMMENT"===a}c=r[0].text.join("");for(var u=1;u<r.length;u++)c+="\n"+r[u].text.join("");return c=c.replace(/[\r\n ]+$/,"")}}void 0===(r=function(){return n}.apply(t,[]))||(e.exports=r)}()},208:function(e,t){var n=null;window.PR_SHOULD_USE_CONTINUATION=!0,function(){function e(e,t,n,r){t&&(n(e={a:t,d:e}),r.push.apply(r,e.e))}function t(t,r){var o,a={};!function(){for(var e=t.concat(r),i=[],s={},c=0,l=e.length;c<l;++c){var u=e[c],d=u[3];if(d)for(var p=d.length;--p>=0;)a[d.charAt(p)]=u;d=""+(u=u[1]),s.hasOwnProperty(d)||(i.push(u),s[d]=n)}i.push(/[\S\s]/),o=function(e){function t(e){var t=e.charCodeAt(0);if(92!==t)return t;var n=e.charAt(1);return(t=d[n])?t:"0"<=n&&n<="7"?parseInt(e.substring(1),8):"u"===n||"x"===n?parseInt(e.substring(2),16):e.charCodeAt(1)}function n(e){return e<32?(e<16?"\\x0":"\\x")+e.toString(16):("\\"!==(e=String.fromCharCode(e))&&"-"!==e&&"["!==e&&"]"!==e||(e="\\"+e),e)}function r(e){for(var r=e.substring(1,e.length-1).match(/\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\[0-3][0-7]{0,2}|\\[0-7]{1,2}|\\[\S\s]|[^\\]/g),o=(e=[],[]),a="^"===r[0],i=a?1:0,s=r.length;i<s;++i){var c=r[i];if(/\\[bdsw]/i.test(c))e.push(c);else{var l;c=t(c);i+2<s&&"-"===r[i+1]?(l=t(r[i+2]),i+=2):l=c,o.push([c,l]),l<65||c>122||(l<65||c>90||o.push([32|Math.max(65,c),32|Math.min(l,90)]),l<97||c>122||o.push([-33&Math.max(97,c),-33&Math.min(l,122)]))}}for(o.sort((function(e,t){return e[0]-t[0]||t[1]-e[1]})),r=[],c=[NaN,NaN],i=0;i<o.length;++i)(s=o[i])[0]<=c[1]+1?c[1]=Math.max(c[1],s[1]):r.push(c=s);for(o=["["],a&&o.push("^"),o.push.apply(o,e),i=0;i<r.length;++i)s=r[i],o.push(n(s[0])),s[1]>s[0]&&(s[1]+1>s[0]&&o.push("-"),o.push(n(s[1])));return o.push("]"),o.join("")}function o(e){for(var t=e.source.match(/\[(?:[^\\\]]|\\[\S\s])*]|\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\\d+|\\[^\dux]|\(\?[!:=]|[()^]|[^()[\\^]+/g),n=t.length,o=[],s=0,c=0;s<n;++s){var l=t[s];"("===l?++c:"\\"===l.charAt(0)&&(l=+l.substring(1))&&l<=c&&(o[l]=-1)}for(s=1;s<o.length;++s)-1===o[s]&&(o[s]=++a);for(c=s=0;s<n;++s)"("===(l=t[s])?void 0===o[++c]&&(t[s]="(?:"):"\\"===l.charAt(0)&&(l=+l.substring(1))&&l<=c&&(t[s]="\\"+o[c]);for(c=s=0;s<n;++s)"^"===t[s]&&"^"!==t[s+1]&&(t[s]="");if(e.ignoreCase&&i)for(s=0;s<n;++s)e=(l=t[s]).charAt(0),l.length>=2&&"["===e?t[s]=r(l):"\\"!==e&&(t[s]=l.replace(/[A-Za-z]/g,(function(e){return e=e.charCodeAt(0),"["+String.fromCharCode(-33&e,32|e)+"]"})));return t.join("")}for(var a=0,i=!1,s=!1,c=0,l=e.length;c<l;++c){var u=e[c];if(u.ignoreCase)s=!0;else if(/[a-z]/i.test(u.source.replace(/\\u[\da-f]{4}|\\x[\da-f]{2}|\\[^UXux]/gi,""))){i=!0,s=!1;break}}var d={b:8,t:9,n:10,v:11,f:12,r:13},p=[];for(c=0,l=e.length;c<l;++c){if((u=e[c]).global||u.multiline)throw Error(""+u);p.push("(?:"+o(u)+")")}return RegExp(p.join("|"),s?"gi":"g")}(i)}();var s=r.length;return function t(n){for(var c=n.d,l=[c,"pln"],u=0,d=n.a.match(o)||[],p={},f=0,m=d.length;f<m;++f){var h,y=d[f],b=p[y],g=void 0;if("string"==typeof b)h=!1;else{var E=a[y.charAt(0)];if(E)g=y.match(E[1]),b=E[0];else{for(h=0;h<s;++h)if(E=r[h],g=y.match(E[1])){b=E[0];break}g||(b="pln")}!(h=b.length>=5&&"lang-"===b.substring(0,5))||g&&"string"==typeof g[1]||(h=!1,b="src"),h||(p[y]=b)}if(E=u,u+=y.length,h){h=g[1];var _=y.indexOf(h),v=_+h.length;g[2]&&(_=(v=y.length-g[2].length)-h.length),b=b.substring(5),e(c+E,y.substring(0,_),t,l),e(c+E+_,h,i(b,h),l),e(c+E+v,y.substring(v),t,l)}else l.push(c+E,b)}n.e=l}}function r(e){var r=[],o=[];e.tripleQuotedStrings?r.push(["str",/^(?:'''(?:[^'\\]|\\[\S\s]|''?(?=[^']))*(?:'''|$)|"""(?:[^"\\]|\\[\S\s]|""?(?=[^"]))*(?:"""|$)|'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$))/,n,"'\""]):e.multiLineStrings?r.push(["str",/^(?:'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$)|`(?:[^\\`]|\\[\S\s])*(?:`|$))/,n,"'\"`"]):r.push(["str",/^(?:'(?:[^\n\r'\\]|\\.)*(?:'|$)|"(?:[^\n\r"\\]|\\.)*(?:"|$))/,n,"\"'"]),e.verbatimStrings&&o.push(["str",/^@"(?:[^"]|"")*(?:"|$)/,n]);var a=e.hashComments;return a&&(e.cStyleComments?(a>1?r.push(["com",/^#(?:##(?:[^#]|#(?!##))*(?:###|$)|.*)/,n,"#"]):r.push(["com",/^#(?:(?:define|elif|else|endif|error|ifdef|include|ifndef|line|pragma|undef|warning)\b|[^\n\r]*)/,n,"#"]),o.push(["str",/^<(?:(?:(?:\.\.\/)*|\/?)(?:[\w-]+(?:\/[\w-]+)+)?[\w-]+\.h|[a-z]\w*)>/,n])):r.push(["com",/^#[^\n\r]*/,n,"#"])),e.cStyleComments&&(o.push(["com",/^\/\/[^\n\r]*/,n]),o.push(["com",/^\/\*[\S\s]*?(?:\*\/|$)/,n])),e.regexLiterals&&o.push(["lang-regex",/^(?:^^\.?|[!+-]|!=|!==|#|%|%=|&|&&|&&=|&=|\(|\*|\*=|\+=|,|-=|->|\/|\/=|:|::|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|[?@[^]|\^=|\^\^|\^\^=|{|\||\|=|\|\||\|\|=|~|break|case|continue|delete|do|else|finally|instanceof|return|throw|try|typeof)\s*(\/(?=[^*/])(?:[^/[\\]|\\[\S\s]|\[(?:[^\\\]]|\\[\S\s])*(?:]|$))+\/)/]),(a=e.types)&&o.push(["typ",a]),(e=(""+e.keywords).replace(/^ | $/g,"")).length&&o.push(["kwd",RegExp("^(?:"+e.replace(/[\s,]+/g,"|")+")\\b"),n]),r.push(["pln",/^\s+/,n," \r\n\t "]),o.push(["lit",/^@[$_a-z][\w$@]*/i,n],["typ",/^(?:[@_]?[A-Z]+[a-z][\w$@]*|\w+_t\b)/,n],["pln",/^[$_a-z][\w$@]*/i,n],["lit",/^(?:0x[\da-f]+|(?:\d(?:_\d+)*\d*(?:\.\d*)?|\.\d\+)(?:e[+-]?\d+)?)[a-z]*/i,n,"0123456789"],["pln",/^\\[\S\s]?/,n],["pun",/^.[^\s\w"-$'./@\\`]*/,n]),t(r,o)}function o(e,t){function r(e){switch(e.nodeType){case 1:if(i.test(e.className))break;if("BR"===e.nodeName)o(e),e.parentNode&&e.parentNode.removeChild(e);else for(e=e.firstChild;e;e=e.nextSibling)r(e);break;case 3:case 4:if(l){var t=e.nodeValue,n=t.match(s);if(n){var a=t.substring(0,n.index);e.nodeValue=a,(t=t.substring(n.index+n[0].length))&&e.parentNode.insertBefore(c.createTextNode(t),e.nextSibling),o(e),a||e.parentNode.removeChild(e)}}}}function o(e){for(;!e.nextSibling;)if(!(e=e.parentNode))return;var t;for(e=function e(t,n){var r=n?t.cloneNode(!1):t;if(o=t.parentNode){var o=e(o,1),a=t.nextSibling;o.appendChild(r);for(var i=a;i;i=a)a=i.nextSibling,o.appendChild(i)}return r}(e.nextSibling,0);(t=e.parentNode)&&1===t.nodeType;)e=t;u.push(e)}var a,i=/(?:^|\s)nocode(?:\s|$)/,s=/\r\n?|\n/,c=e.ownerDocument;e.currentStyle?a=e.currentStyle.whiteSpace:window.getComputedStyle&&(a=c.defaultView.getComputedStyle(e,n).getPropertyValue("white-space"));var l=a&&"pre"===a.substring(0,3);for(a=c.createElement("LI");e.firstChild;)a.appendChild(e.firstChild);for(var u=[a],d=0;d<u.length;++d)r(u[d]);t===(0|t)&&u[0].setAttribute("value",t);var p=c.createElement("OL");p.className="linenums";for(var f=Math.max(0,t-1|0)||0,m=(d=0,u.length);d<m;++d)(a=u[d]).className="L"+(d+f)%10,a.firstChild||a.appendChild(c.createTextNode(" ")),p.appendChild(a);e.appendChild(p)}function a(e,t){for(var n=t.length;--n>=0;){var r=t[n];g.hasOwnProperty(r)?window.console&&console.warn("cannot override language handler %s",r):g[r]=e}}function i(e,t){return e&&g.hasOwnProperty(e)||(e=/^\s*</.test(t)?"default-markup":"default-code"),g[e]}function s(e){var t=e.g;try{var r=(u=function(e){var t,r=/(?:^|\s)nocode(?:\s|$)/,o=[],a=0,i=[],s=0;e.currentStyle?t=e.currentStyle.whiteSpace:window.getComputedStyle&&(t=document.defaultView.getComputedStyle(e,n).getPropertyValue("white-space"));var c=t&&"pre"===t.substring(0,3);return function e(t){switch(t.nodeType){case 1:if(r.test(t.className))break;for(var n=t.firstChild;n;n=n.nextSibling)e(n);"BR"!==(n=t.nodeName)&&"LI"!==n||(o[s]="\n",i[s<<1]=a++,i[s++<<1|1]=t);break;case 3:case 4:(n=t.nodeValue).length&&(n=c?n.replace(/\r\n?/g,"\n"):n.replace(/[\t\n\r ]+/g," "),o[s]=n,i[s<<1]=a,a+=n.length,i[s++<<1|1]=t)}}(e),{a:o.join("").replace(/\n$/,""),c:i}}(e.h)).a;e.a=r,e.c=u.c,e.d=0,i(t,r)(e);var o,a,s=/\bMSIE\b/.test(navigator.userAgent),c=(t=/\n/g,e.a),l=c.length,u=0,d=e.c,p=d.length,f=(r=0,e.e),m=f.length;e=0;for(f[m]=l,a=o=0;a<m;)f[a]!==f[a+2]?(f[o++]=f[a++],f[o++]=f[a++]):a+=2;for(m=o,a=o=0;a<m;){for(var h=f[a],y=f[a+1],b=a+2;b+2<=m&&f[b+1]===y;)b+=2;f[o++]=h,f[o++]=y,a=b}for(f.length=o;r<p;){var g,E=d[r+2]||l,_=f[e+2]||l,v=(b=Math.min(E,_),d[r+1]);if(1!==v.nodeType&&(g=c.substring(u,b))){s&&(g=g.replace(t,"\r")),v.nodeValue=g;var O=v.ownerDocument,S=O.createElement("SPAN");S.className=f[e+1];var D=v.parentNode;D.replaceChild(S,v),S.appendChild(v),u<E&&(d[r+1]=v=O.createTextNode(c.substring(b,E)),D.insertBefore(v,S.nextSibling))}(u=b)>=E&&(r+=2),u>=_&&(e+=2)}}catch(e){"console"in window&&console.log(e&&e.stack?e.stack:e)}}var c,l,u=[c=[[l=["break,continue,do,else,for,if,return,while"],"auto,case,char,const,default,double,enum,extern,float,goto,int,long,register,short,signed,sizeof,static,struct,switch,typedef,union,unsigned,void,volatile"],"catch,class,delete,false,import,new,operator,private,protected,public,this,throw,true,try,typeof"],"alignof,align_union,asm,axiom,bool,concept,concept_map,const_cast,constexpr,decltype,dynamic_cast,explicit,export,friend,inline,late_check,mutable,namespace,nullptr,reinterpret_cast,static_assert,static_cast,template,typeid,typename,using,virtual,where"],d=[c,"abstract,boolean,byte,extends,final,finally,implements,import,instanceof,null,native,package,strictfp,super,synchronized,throws,transient"],p=[d,"as,base,by,checked,decimal,delegate,descending,dynamic,event,fixed,foreach,from,group,implicit,in,interface,internal,into,is,lock,object,out,override,orderby,params,partial,readonly,ref,sbyte,sealed,stackalloc,string,select,uint,ulong,unchecked,unsafe,ushort,var"],f=[l,"and,as,assert,class,def,del,elif,except,exec,finally,from,global,import,in,is,lambda,nonlocal,not,or,pass,print,raise,try,with,yield,False,True,None"],m=[l,"alias,and,begin,case,class,def,defined,elsif,end,ensure,false,in,module,next,nil,not,or,redo,rescue,retry,self,super,then,true,undef,unless,until,when,yield,BEGIN,END"],h=/^(DIR|FILE|vector|(de|priority_)?queue|list|stack|(const_)?iterator|(multi)?(set|map)|bitset|u?(int|float)\d*)/,y=/\S/,b=r({keywords:[u,p,c=[c,"debugger,eval,export,function,get,null,set,undefined,var,with,Infinity,NaN"],"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END"+f,m,l=[l,"case,done,elif,esac,eval,fi,function,in,local,set,then,until"]],hashComments:!0,cStyleComments:!0,multiLineStrings:!0,regexLiterals:!0}),g={};a(b,["default-code"]),a(t([],[["pln",/^[^<?]+/],["dec",/^<!\w[^>]*(?:>|$)/],["com",/^<\!--[\S\s]*?(?:--\>|$)/],["lang-",/^<\?([\S\s]+?)(?:\?>|$)/],["lang-",/^<%([\S\s]+?)(?:%>|$)/],["pun",/^(?:<[%?]|[%?]>)/],["lang-",/^<xmp\b[^>]*>([\S\s]+?)<\/xmp\b[^>]*>/i],["lang-js",/^<script\b[^>]*>([\S\s]*?)(<\/script\b[^>]*>)/i],["lang-css",/^<style\b[^>]*>([\S\s]*?)(<\/style\b[^>]*>)/i],["lang-in.tag",/^(<\/?[a-z][^<>]*>)/i]]),["default-markup","htm","html","mxml","xhtml","xml","xsl"]),a(t([["pln",/^\s+/,n," \t\r\n"],["atv",/^(?:"[^"]*"?|'[^']*'?)/,n,"\"'"]],[["tag",/^^<\/?[a-z](?:[\w-.:]*\w)?|\/?>$/i],["atn",/^(?!style[\s=]|on)[a-z](?:[\w:-]*\w)?/i],["lang-uq.val",/^=\s*([^\s"'>]*(?:[^\s"'/>]|\/(?=\s)))/],["pun",/^[/<->]+/],["lang-js",/^on\w+\s*=\s*"([^"]+)"/i],["lang-js",/^on\w+\s*=\s*'([^']+)'/i],["lang-js",/^on\w+\s*=\s*([^\s"'>]+)/i],["lang-css",/^style\s*=\s*"([^"]+)"/i],["lang-css",/^style\s*=\s*'([^']+)'/i],["lang-css",/^style\s*=\s*([^\s"'>]+)/i]]),["in.tag"]),a(t([],[["atv",/^[\S\s]+/]]),["uq.val"]),a(r({keywords:u,hashComments:!0,cStyleComments:!0,types:h}),["c","cc","cpp","cxx","cyc","m"]),a(r({keywords:"null,true,false"}),["json"]),a(r({keywords:p,hashComments:!0,cStyleComments:!0,verbatimStrings:!0,types:h}),["cs"]),a(r({keywords:d,cStyleComments:!0}),["java"]),a(r({keywords:l,hashComments:!0,multiLineStrings:!0}),["bsh","csh","sh"]),a(r({keywords:f,hashComments:!0,multiLineStrings:!0,tripleQuotedStrings:!0}),["cv","py"]),a(r({keywords:"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END",hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["perl","pl","pm"]),a(r({keywords:m,hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["rb"]),a(r({keywords:c,cStyleComments:!0,regexLiterals:!0}),["js"]),a(r({keywords:"all,and,by,catch,class,else,extends,false,finally,for,if,in,is,isnt,loop,new,no,not,null,of,off,on,or,return,super,then,true,try,unless,until,when,while,yes",hashComments:3,cStyleComments:!0,multilineStrings:!0,tripleQuotedStrings:!0,regexLiterals:!0}),["coffee"]),a(t([],[["str",/^[\S\s]+/]]),["regex"]),window.prettyPrintOne=function(e,t,n){var r=document.createElement("PRE");return r.innerHTML=e,n&&o(r,n),s({g:t,i:n,h:r}),r.innerHTML},window.prettyPrint=function(e){for(var t=[document.getElementsByTagName("pre"),document.getElementsByTagName("code"),document.getElementsByTagName("xmp")],r=[],a=0;a<t.length;++a)for(var i=0,c=t[a].length;i<c;++i)r.push(t[a][i]);t=n;var l=Date;l.now||(l={now:function(){return+new Date}});var u=0,d=/\blang(?:uage)?-([\w.]+)(?!\S)/;!function t(){for(var n=window.PR_SHOULD_USE_CONTINUATION?l.now()+250:1/0;u<r.length&&l.now()<n;u++){var a=r[u];if((i=a.className).indexOf("prettyprint")>=0){var i,c,p;if(p=!(i=i.match(d))){for(var f=void 0,m=(p=a).firstChild;m;m=m.nextSibling){var h=m.nodeType;f=1===h?f?p:m:3===h&&y.test(m.nodeValue)?p:f}p=(c=f===p?void 0:f)&&"CODE"===c.tagName}for(p&&(i=c.className.match(d)),i&&(i=i[1]),p=!1,f=a.parentNode;f;f=f.parentNode)if(("pre"===f.tagName||"code"===f.tagName||"xmp"===f.tagName)&&f.className&&f.className.indexOf("prettyprint")>=0){p=!0;break}p||((p=!!(p=a.className.match(/\blinenums\b(?::(\d+))?/))&&(!p[1]||!p[1].length||+p[1]))&&o(a,p),s({g:i,h:a,i:p}))}}u<r.length?setTimeout(t,250):e&&e()}()},window.PR={createSimpleLexer:t,registerLangHandler:a,sourceDecorator:r,PR_ATTRIB_NAME:"atn",PR_ATTRIB_VALUE:"atv",PR_COMMENT:"com",PR_DECLARATION:"dec",PR_KEYWORD:"kwd",PR_LITERAL:"lit",PR_NOCODE:"nocode",PR_PLAIN:"pln",PR_PUNCTUATION:"pun",PR_SOURCE:"src",PR_STRING:"str",PR_TAG:"tag",PR_TYPE:"typ"}}()},333:function(e,t,n){n(334),n(364),n(367),n(369),n(401),n(404),n(414),e.exports=n(648)},449:function(e,t,n){},450:function(e,t,n){},451:function(e,t,n){},625:function(e,t,n){},637:function(e,t,n){},638:function(e,t,n){},639:function(e,t,n){},640:function(e,t,n){},641:function(e,t,n){},642:function(e,t,n){},643:function(e,t,n){},644:function(e,t,n){},645:function(e,t,n){},646:function(e,t,n){},647:function(e,t,n){},648:function(e,t,n){"use strict";n.r(t);var r=n(79),o=n.n(r),a={
    root:"/",version:"1.0",
    host:"../../fullsync/",i18n:{en_US:{"mango-descripton":"Mango is an easy way to find documents on predefined indexes.","new-mango-index":"Mango Indexes","mango-help-title":"Mango","run-query-with-mango":"Run A Query with Mango","mango-title-editor":"Mango Query","mango-descripton-index-editor":"Mango is an easy way to find documents on predefined indexes. <br/><br/>Create an Index to query it afterwards. The example in the editor shows how to create an index for the field '_id'. <br/><br/>The Indexes that you already created are listed on the right.","mango-additional-indexes-heading":"Your additional Indexes:","mango-indexeditor-title":"Mango","couchdb-productname":"Apache CouchDB","cors-disable-cors-prompt":"Are you sure? Disabling CORS will overwrite your specific origin domains.","cors-notice":"Cross-Origin Resource Sharing (CORS) lets you connect to remote servers directly from the browser, so you can host browser-based apps on static pages and talk directly with CouchDB to load your data.","replication-password-modal-header":"Enter Account Password.","replication-password-modal-text":"Replication requires authentication on your credentials.","replication-user-password-auth-label":"Username and password","replication-username-input-placeholder":"Username","replication-password-input-placeholder":"Password","auth-missing-credentials":"Username or password cannot be blank.","auth-logged-in":"You have been logged in.","auth-admin-created":"CouchDB admin created","auth-change-password":"Your password has been updated.","auth-admin-creation-failed-prefix":"Could not create admin.","auth-passwords-not-matching":"Passwords do not match.","create-db-partitioned-help":"A partitioned database requires a partition key for every document, where the document _id format is '&lt;partition_key&gt;:&lt;doc_key&gt;'. A partition is a logical grouping of documents. Partition queries are often faster than global ones."}}},i=n(9),s=n.n(i),c={MISC:{TRAY_TOGGLE_SPEED:250,DEFAULT_PAGE_SIZE:20},DATABASES:{DOCUMENT_LIMIT:100},EVENTS:{TRAY_OPENED:"tray:opened",NAVBAR_SIZE_CHANGED:"navbar:size_changed"},DOC_URLS:{GENERAL:"./docs/intro/api.html#documents",ALL_DBS:"./docs/api/server/common.html?highlight=all_dbs#get--_all_dbs",REPLICATION:"./docs/replication/replicator.html#basics",DESIGN_DOCS:"./docs/ddocs/ddocs.html#design-docs",DESIGN_DOC_METADATA:"./docs/api/ddoc/common.html#api-ddoc-view-index-info",VIEW_FUNCS:"./docs/ddocs/ddocs.html#view-functions",MAP_FUNCS:"./docs/ddocs/ddocs.html#map-functions",REDUCE_FUNCS:"./docs/ddocs/ddocs.html#reduce-and-rereduce-functions",API_REF:"./docs/http-api.html",DB_PERMISSION:"./docs/api/database/security.html#db-security",STATS:"./docs/api/server/common.html?highlight=stats#get--_stats",ACTIVE_TASKS:"./docs/api/server/common.html?highlight=stats#active-tasks",LOG:"./docs/api/server/common.html?highlight=stats#log",CONFIG:"./docs/config/index.html",VIEWS:"./docs/intro/overview.html#views",MANGO_INDEX:"./docs/intro/api.html#documents",MANGO_SEARCH:"./docs/intro/api.html#documents",CHANGES:"./docs/api/database/changes.html?highlight=changes#post--db-_changes",SETUP:"./docs/cluster/setup.html#the-cluster-setup-wizard",MEMBERSHIP:"./docs/cluster/nodes.html"}},l=n(213),u=n.n(l),d={getParams:function(e){e&&("?"===e.substring(0,1)?e=e.substring(1):e.indexOf("?")>-1&&(e=e.split("?")[1]));var t=window.location.hash.split("?")[1];e=e||t||window.location.search.substring(1);var n={},r=/\+/g,o=/([^&=]+)=?([^&]*)/g,a=function(e){return decodeURIComponent(e.replace(r," "))},i=e;if(e)for(var s;s=o.exec(i);)n[a(s[1])]=a(s[2]);return n},removeSpecialCharacters:function(e){return e.replace(/[^\w\s]/gi,"")},safeURLName:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return encodeURIComponent(e)},queryParams:function(e){return u()(e)},queryString:function(e){return Object.keys(e).forEach((function(t){void 0===e[t]&&delete e[t]})),u()(e)},getDocTypeFromId:function(e){return e&&/^_design\//.test(e)?"design doc":"doc"},isSystemDatabase:function(e){return/^_/.test(e)},getSafeIdForDoc:function(e){if("design doc"===d.getDocTypeFromId(e)){var t=e.replace(/^_design\//,"");return"_design/"+d.safeURLName(t)}return d.safeURLName(e)},localStorageSet:function(e,t){(s.a.isObject(t)||s.a.isArray(t))&&(t=JSON.stringify(t));var n=!0;try{window.localStorage.setItem(e,t)}catch(e){n=!1}return n},localStorageGet:function(e){var t;if(s.a.has(window.localStorage,e)){t=window.localStorage[e];try{return JSON.parse(t)}catch(e){return t}}return t},stripHTML:function(e){if(!document)return e;var t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText}},p=d,f=n(65),m=n.n(f),h=n(214),y=n.n(h),b=(n(248),n(320)),g=(n(432),new b.Subject),E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return fetch(e,Object(i.defaultsDeep)({},n,{method:t,credentials:"include",headers:{accept:"application/json","Content-Type":"application/json",Pragma:"no-cache"},cache:"no-cache"})).then((function(e){return g.next(e),n.raw?e:e.json()}))},v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return E(e,"GET",t)},O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return E(e,"DELETE",t)},S=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return void 0!==t&&(n.rawBody?n.body=t:n.body=JSON.stringify(t)),E(e,"POST",n)},D=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return void 0!==t&&(n.rawBody?n.body=t:n.body=JSON.stringify(t)),E(e,"PUT",n)},N=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return E(e,t,Object(i.defaultsDeep)({},n,{headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}}))},w=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t&&(n.body=t),N(e,"POST",n)},T=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t&&(n.body=t),N(e,"DELETE",n)},C={};C.removeSpecialCharacters=p.removeSpecialCharacters,C.safeURL=p.safeURLName,C.imageUrl=function(e){return e},C.getDocUrl=function(e){return s.a.has(c.DOC_URLS,e)?c.DOC_URLS[e]:"#"},C.formatSize=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=512;if(e<n)return e+" bytes";for(var r=["KB","MB","GB","TB","PB","EB","ZB","YB"],o=0;e>=n&&o<r.length;)o+=1,e/=1024;return e.toFixed(t)+" "+r[o-1]},C.formatDate=function(e){return m()(e,"X").format("MMM Do, h:mm:ss a")},C.getDateFromNow=function(e){return m()(e,"X").fromNow()},C.escapeJQuerySelector=function(e){return e&&e.replace(/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~]/g,"\\$&")},C.getApiUrl=function(e){return a.host.endsWith("/")&&e.startsWith("/")&&(e=e.substr(1)),y.a.resolve(window.location.href,a.host+e)},C.getServerUrl=function(e){return a.host.endsWith("/")&&e.startsWith("/")&&(e=e.substr(1)),a.host+e},C.getRootUrl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location,t=e.origin,n=e.pathname;return y.a.resolve(t+n,a.host)},C.getUUID=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=C.getServerUrl("/_uuids?count=".concat(e));return v(t)},C.isIE1X=function(){return 11==document.documentMode||10==document.documentMode};var I=C,A=n(20),R=n.n(A);function P(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var k={router:{navigate:function(){}},masterLayout:{},addHeaderLink:function(e){k.reduxDispatch({type:"ADD_NAVBAR_LINK",link:e})},showHeaderLinkBadge:function(e){k.reduxDispatch({type:"SHOW_NAVBAR_LINK_BADGE",link:e})},hideHeaderLinkBadge:function(e){k.reduxDispatch({type:"HIDE_NAVBAR_LINK_BADGE",link:e})},addNotification:function(e){e=x({msg:"Notification Event Triggered!",type:"info",escape:!0,clear:!1},e),k.reduxDispatch&&k.reduxDispatch({type:"ADD_NOTIFICATION",options:{info:e}})},showPermanentNotification:function(e){k.reduxDispatch({type:"SHOW_PERMANENT_NOTIFICATION",options:{msg:e}})},config:function(e){return s.a.extend(this,e)},Deferred:function(){return $.Deferred()},when:function(e){return e instanceof Array?$.when.apply(null,e):$.when(e)},addonExtensions:{initialize:function(){},RouteObjects:{},Views:{}},addon:function(e){return s.a.extend(s.a.clone(k.addonExtensions),e)}};k.View=R.a.View.extend({establish:function(){return null},loaderClassname:"loader",manage:!0,forceRender:function(){this.hasRendered=!1}});var j={fetchOnce:function(e){var t=s.a.extend({},e);return this._deferred&&"rejected"!==this._deferred.state()&&!t.forceFetch||(this._deferred=this.fetch()),this._deferred}};k.Model=R.a.Model.extend({}),k.Collection=R.a.Collection.extend({}),s.a.each([k.Model,k.Collection],(function(e){s.a.extend(e.prototype,j)}));var U=s.a.extend({},R.a.Events);k.registerExtension=function(e,t){U[e]||(U[e]=[]),U.trigger("add:"+e,t),U[e].push(t)},k.unRegisterExtension=function(e){var t=U[e];t&&(U.trigger("remove:"+e,t),delete U[e])},k.getExtensions=function(e){var t=U[e];return t||(t=[]),t},k.removeExtensionItem=function(e,t,n){var r=U[e];if(r){var o=arguments[arguments.length-1];s.a.isObject(t)&&!n&&(o=function(e){return s.a.isEqual(e,t)}),r=s.a.filter(r,(function(e){return!o(e)})),U[e]=r,U.trigger("removeItem:"+e,t)}},k.extensions=U,k.setSession=function(e){k.session=e},k.reducers={},k.addReducers=function(e){k.reducers=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(n,!0).forEach((function(t){L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},k.reducers,{},e)},k.middlewares=[],k.addMiddleware=function(e){e&&"function"==typeof e&&k.middlewares.push(e)};var M=k,q=n(90),V=n.n(q),F=function(e,t){if(e.isAdminParty())return!0;if(e.matchesRoles(t))return!0;throw new Error("Unable to authenticate")},B=function(){var e=window.location.hash.replace("#","").replace("login?urlback=","");e&&M.navigate("/login?urlback=".concat(e),{replace:!0}),M.navigate("/login",{replace:!0})},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new V.a((function(t,n){return M.session.getSession().then((function(){F(M.session,e)?t():n()})).catch((function(e){n(e),B()}))}))},K={},G=R.a.Router.extend({routes:{},originalPageTitle:window.document.title,beforeUnload:function(e,t){K[e]=t},removeBeforeUnload:function(e){delete K[e]},navigate:function(e,t){var n=!0,r=s.a.find(s.a.map(K,(function(e){return e()})),(function(e){if(e)return!0}));if(r&&(n=window.confirm(r)),t&&t.redirect)return window.location=e;n&&(R.a.Router.prototype.navigate(e,t),this.updateWindowTitle(e))},updateWindowTitle:function(e){e.startsWith("#/")?window.document.title=this.originalPageTitle+" - "+e.substring(2):e.startsWith("/")||e.startsWith("#")?window.document.title=this.originalPageTitle+" - "+e.substring(1):window.document.title=this.originalPageTitle+" - "+e},addModuleRouteObject:function(e){var t=this,n=this;e.prototype.getRouteUrls().forEach((function(r){t.route(r,r.toString(),(function(){for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];var s=e.prototype.getRouteRoles(r);H(s).then((function(){n.activeRouteObject&&n.activeRouteObject.hasRoute(r)||(n.activeRouteObject=new e(r,a));var o=n.activeRouteObject.routeCallback(r,a);n.currentRouteOptions={selectedHeader:t.activeRouteObject.selectedHeader,component:o,roles:s,route:r.toString()},n.trigger("new-component",t.currentRouteOptions)}),(function(){}))}))}))},setModuleRoutes:function(e){var t=this;s.a.each(e,(function(e){e&&(e.initialize(),e.RouteObjects&&s.a.each(e.RouteObjects,t.addModuleRouteObject.bind(t)))}))},initialize:function(e){this.addons=e,this.setModuleRoutes(e),this.lastPages=[],R.a.history.on("route",(function(){this.lastPages.push(R.a.history.fragment),this.lastPages.length>5&&this.lastPages.shift()}),this)}}),X=n(11),W=n.n(X);function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Y=function(e){this._options=e,this.reactComponents={},this._configure(e||{}),this.initialize.apply(this,arguments)};Y.extend=R.a.Model.extend;var Q=["routes","roles"];s.a.extend(Y.prototype,{routes:{},route:function(){},roles:[],initialize:function(){}},{get:function(e){return s.a.isFunction(this[e])?this[e]():this[e]},_configure:function(e){var t=this;s.a.each(s.a.intersection(s.a.keys(e),Q),(function(n){t[n]=e[n]}))},getRouteUrls:function(){return s.a.keys(this.get("routes"))},hasRoute:function(e){return!!this.get("routes")[e]},routeCallback:function(e,t){var n,r=this.get("routes")[e];return n="object"===z(r)?this[r.route]:this[r],n.apply(this,t)},getRouteRoles:function(e){var t=this.get("routes")[e];return"object"===z(t)&&t.roles?t.roles:this.roles}});var Z=Y,J=function(){this.initialize.apply(this,arguments),s.a.bindAll(this)};J.extend=R.a.Model.extend,s.a.extend(J.prototype,R.a.Events,{triggerChange:function(){this.trigger("change")},initialize:function(){}});var ee=J,te=[],ne=0,re={register:function(e){if("function"!=typeof e)throw new Error("Store dispatch method must be a function");return ne+=1,te.push(e),e.dispatchId=ne,ne},dispatch:function(e){te.forEach((function(t){t(e)}))},unregister:function(e){var t=Object(i.findIndex)(te,(function(t){return t.dispatchId===e}));-1!==t&&te.splice(t,1)}};function oe(){return(oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}R.a.$=o.a,R.a.ajax=function(){
    var url = arguments[0].url;
    console.log("> " + url);
    /*url = url.replace("../", "../../fullsync/");
    console.log("< " + url);
    arguments[0].url = url;*/
return R.a.$.ajax.apply(R.a.$,arguments)},oe(M,{Router:G,RouteObject:Z,utils:p,Store:ee,dispatcher:re,Promise:V.a,Events:s.a.extend({},R.a.Events)}),M.constants=c,M.dispatch=re.dispatch,M.navigate=function(e,t){var n=s.a.extend({trigger:!0},t);M.router.navigate(e,n),n.trigger&&M.router.trigger("trigger-update")},M.beforeUnload=function(){M.router.beforeUnload.apply(M.router,arguments)},M.removeBeforeUnload=function(){M.router.removeBeforeUnload.apply(M.router,arguments)},M.addRoute=function(e){M.router.route(e.route,e.name,e.callback)};var ae={};M.registerUrls=function(e,t){ae[e]=t},M.url={encode:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/[$+/]/g.test(e)?encodeURIComponent(e):e},decode:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/[$+/]/g.test(e)?decodeURIComponent(e):e}},M.urls=function(e,t){var n,r=M.getExtensions("urls:interceptors"),o=arguments;return s.a.find(r,(function(e){var t=e.apply(null,o);return!!t&&(n=t,!0)})),s.a.isUndefined(n)?ae[e]?ae[e][t]?(o=Array.prototype.slice.call(arguments,2),n=ae[e][t].apply(null,o)):(console.error("could not find context ",t),""):(console.error("could not find name ",e),""):n},M.getIndexTypePropNames=function(){var e=M.getExtensions("IndexTypes:propNames");return e.push("views"),e};var ie=M;n(449);function se(){return(se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}s.a.isUndefined(console)&&(console={log:function(){},trace:function(){},debug:function(){}}),se(a,{utils:p,getParams:ie.utils.getParams,helpers:I}),ie.config({addHeaderLink:function(e){ie.reduxDispatch({type:"ADD_NAVBAR_LINK",link:e})},updateHeaderLink:function(e){ie.reduxDispatch({type:"UPDATE_NAVBAR_LINK",link:e})},removeHeaderLink:function(e){ie.reduxDispatch({type:"REMOVE_NAVBAR_LINK",link:e})},hideLogin:function(){ie.reduxDispatch({type:"NAVBAR_SHOW_HIDE_LOGIN_LOGOUT_SECTION",visible:!1})},showLogout:function(){ie.reduxDispatch({type:"NAVBAR_SHOW_LOGOUT_BUTTON"})},showLogin:function(){ie.reduxDispatch({type:"NAVBAR_SHOW_LOGIN_BUTTON"})}});var ce=a,le=n(0),ue=n.n(le),de={ADD_NAVBAR_LINK:"ADD_NAVBAR_LINK",TOGGLE_NAVBAR_MENU:"TOGGLE_NAVBAR_MENU",UPDATE_NAVBAR_LINK:"UPDATE_NAVBAR_LINK",REMOVE_NAVBAR_LINK:"REMOVE_NAVBAR_LINK",HIDE_NAVBAR_LINK_BADGE:"HIDE_NAVBAR_LINK_BADGE",SHOW_NAVBAR_LINK_BADGE:"SHOW_NAVBAR_LINK_BADGE",NAVBAR_SET_VERSION_INFO:"NAVBAR_SET_VERSION_INFO",NAVBAR_ACTIVE_LINK:"NAVBAR_ACTIVE_LINK",NAVBAR_HIDE:"NAVBAR_HIDE",NAVBAR_SHOW:"NAVBAR_SHOW",NAVBAR_SHOW_HIDE_LOGIN_LOGOUT_SECTION:"NAVBAR_SHOW_HIDE_LOGIN_LOGOUT_SECTION",NAVBAR_SHOW_LOGIN_BUTTON:"NAVBAR_SHOW_LOGIN_BUTTON",NAVBAR_SHOW_LOGOUT_BUTTON:"NAVBAR_SHOW_LOGOUT_BUTTON"};function pe(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(n,!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var he={isMinimized:!0,activeLink:null,version:null,navLinks:[],footerNavLinks:[],bottomNavLinks:[],navBarVisible:!0,loginSectionVisible:!1,loginVisibleInsteadOfLogout:!0};function ye(e,t,n){var r=be(e,t),o=r.links,a=r.sectionName,i=!1,s=o.map((function(e){return e.title===t.title?(i=!0,fe({},e,{badge:n})):e}));if(!i)return e;var c=fe({},e);return c[a]=s,c}function be(e,t){var n=e.navLinks,r="navLinks";return t.bottomNav&&(n=e.bottomNavLinks,r="bottomNavLinks"),t.footerNav&&(n=e.footerNavLinks,r="footerNavLinks"),{links:n,sectionName:r}}var ge={ADD_NOTIFICATION:"ADD_NOTIFICATION",SHOW_NOTIFICATION_CENTER:"SHOW_NOTIFICATION_CENTER",HIDE_NOTIFICATION_CENTER:"HIDE_NOTIFICATION_CENTER",CLEAR_SINGLE_NOTIFICATION:"CLEAR_SINGLE_NOTIFICATION",CLEAR_ALL_NOTIFICATIONS:"CLEAR_ALL_NOTIFICATIONS",SELECT_NOTIFICATION_FILTER:"SELECT_NOTIFICATION_FILTER",START_HIDING_NOTIFICATION:"START_HIDING_NOTIFICATION",HIDE_NOTIFICATION:"HIDE_NOTIFICATION",HIDE_ALL_NOTIFICATIONS:"HIDE_ALL_NOTIFICATIONS",SHOW_PERMANENT_NOTIFICATION:"SHOW_PERMANENT_NOTIFICATION",HIDE_PERMANENT_NOTIFICATION:"HIDE_PERMANENT_NOTIFICATION"};function Ee(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function _e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(n,!0).forEach((function(t){ve(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Oe={notifications:[],notificationCenterVisible:!1,selectedNotificationFilter:"all",permanentNotificationVisible:!1,permanentNotificationMessage:""},Se=0,De=["success","error","info"],Ne=["all","success","error","info"];function we(e,t){var n=e.notifications,r=n.findIndex((function(e){return e.notificationId===t}));if(-1===r)return n;var o=[].concat(n);return o.splice(r,1),o}function Te(e,t){var n=e.notifications,r=n.findIndex((function(e){return e.notificationId===t}));if(-1===r)return n;var o=[].concat(n);return o[r].isHiding=!0,o}function Ce(e,t){var n=e.notifications,r=n.findIndex((function(e){return e.notificationId===t}));if(-1===r)return n;var o=[].concat(n);return o[r].visible=!1,o[r].isHiding=!1,o}function Ie(e){var t=e.notifications,n=[].concat(t);return n.forEach((function(e){e.visible&&(e.isHiding=!0)})),n}n(450);var Ae=ie.addon();Ae.initialize=function(){var e=new Ae.VersionInfo;e.fetch().then((function(){!function(e){ie.reduxDispatch({type:de.NAVBAR_SET_VERSION_INFO,version:e})}(e.get("version"))}))},Ae.VersionInfo=Backbone.Model.extend({url:function(){return ce.host}}),ie.addReducers({navigation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case de.ADD_NAVBAR_LINK:return function(e,t){var n=fe({},e);return t.top&&!t.bottomNav?(n.navLinks=[].concat(n.navLinks),n.navLinks.unshift(t),n):t.top&&t.bottomNav?(n.bottomNavLinks=[].concat(n.bottomNavLinks),n.bottomNavLinks.unshift(t),n):t.bottomNav?(n.bottomNavLinks=[].concat(n.bottomNavLinks),n.bottomNavLinks.push(t),n):t.footerNav?(n.footerNavLinks=[].concat(n.footerNavLinks),n.footerNavLinks.push(t),n):(n.navLinks=[].concat(n.navLinks),n.navLinks.push(t),n)}(e,t.link);case de.TOGGLE_NAVBAR_MENU:return fe({},e,{isMinimized:!e.isMinimized});case de.UPDATE_NAVBAR_LINK:return function(e,t){var n=be(e,t),r=n.links,o=n.sectionName,a=!1,i=r.map((function(e){return e.id===t.id?(a=!0,fe({},e,{title:t.title,href:t.href})):e}));if(!a)return e;var s=fe({},e);return s[o]=i,s}(e,t.link);case de.REMOVE_NAVBAR_LINK:return function(e,t){var n=be(e,t),r=n.links,o=n.sectionName,a=r.filter((function(e){return e.id!==t.id}));if(a.length===r.length)return e;var i=fe({},e);return i[o]=a,i}(e,t.link);case de.SHOW_NAVBAR_LINK_BADGE:return ye(e,t.link,!0);case de.HIDE_NAVBAR_LINK_BADGE:return ye(e,t.link,!1);case de.NAVBAR_SET_VERSION_INFO:return fe({},e,{version:t.version});case de.NAVBAR_ACTIVE_LINK:return fe({},e,{activeLink:t.name});case de.NAVBAR_HIDE:return fe({},e,{navBarVisible:!1});case de.NAVBAR_SHOW:return fe({},e,{navBarVisible:!0});case de.NAVBAR_SHOW_HIDE_LOGIN_LOGOUT_SECTION:return fe({},e,{loginSectionVisible:t.visible});case de.NAVBAR_SHOW_LOGIN_BUTTON:return fe({},e,{loginSectionVisible:!0,loginVisibleInsteadOfLogout:!0});case de.NAVBAR_SHOW_LOGOUT_BUTTON:return fe({},e,{loginSectionVisible:!0,loginVisibleInsteadOfLogout:!1});default:return e}},notifications:function(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,o=arguments.length>1?arguments[1]:void 0,a=o.options;switch(o.type){case ge.ADD_NOTIFICATION:return-1===De.indexOf(a.info.type)?r:_e({},r,{notifications:(e=r,t=a.info,n=e.notifications.slice(),(t=_e({},t)).notificationId=++Se,t.cleanMsg=ce.utils.stripHTML(t.msg),t.time=m()(),!0!==t.escape&&!1!==t.escape&&(t.escape=!0),t.visible=!0,t.isHiding=!1,t.clear&&n.forEach((function(e){e.visible&&(e.isHiding=!0)})),n.unshift(t),n)});case ge.CLEAR_ALL_NOTIFICATIONS:return _e({},r,{notifications:[]});case ge.CLEAR_SINGLE_NOTIFICATION:return _e({},r,{notifications:we(r,a.notificationId)});case ge.START_HIDING_NOTIFICATION:return _e({},r,{notifications:Te(r,a.notificationId)});case ge.HIDE_NOTIFICATION:return _e({},r,{notifications:Ce(r,a.notificationId)});case ge.HIDE_ALL_NOTIFICATIONS:return _e({},r,{notifications:Ie(r)});case ge.SHOW_NOTIFICATION_CENTER:return _e({},r,{notificationCenterVisible:!0});case ge.HIDE_NOTIFICATION_CENTER:return _e({},r,{notificationCenterVisible:!1});case ge.SELECT_NOTIFICATION_FILTER:return-1===Ne.indexOf(a.filter)?r:_e({},r,{selectedNotificationFilter:a.filter});case ge.SHOW_PERMANENT_NOTIFICATION:return _e({},r,{permanentNotificationVisible:!0,permanentNotificationMessage:a.msg});case ge.HIDE_PERMANENT_NOTIFICATION:return _e({},r,{permanentNotificationVisible:!1});default:return r}}});var Re=Ae,Pe=(n(451),{DATABASES_SETPAGE:"DATABASES_SETPAGE",DATABASES_SETLIMIT:"DATABASES_SETLIMIT",DATABASES_SET_PROMPT_VISIBLE:"DATABASES_SET_PROMPT_VISIBLE",DATABASES_STARTLOADING:"DATABASES_STARTLOADING",DATABASES_LOADCOMPLETE:"DATABASES_LOADCOMPLETE",DATABASES_UPDATE:"DATABASES_UPDATE",DATABASES_PARTITIONED_DB_AVAILABLE:"DATABASES_PARTITIONED_DB_AVAILABLE",DATABASES_FETCH_SELECTED_DB_METADATA:"DATABASES_FETCH_SELECTED_DB_METADATA",DATABASES_FETCH_SELECTED_DB_METADATA_SUCCESS:"DATABASES_FETCH_SELECTED_DB_METADATA_SUCCESS"}),Le=R.a.Collection.extend({constructor:function(){R.a.Collection.apply(this,arguments),this.configure.apply(this,arguments)},configure:function(e,t){var n=s.a.result(this,"url").split("?")[1]||"";this.paging=s.a.defaults(t.paging||{},{defaultParams:s.a.defaults({},t.params,this._parseQueryString(n)),hasNext:!1,hasPrevious:!1,params:{},pageSize:20,direction:void 0}),this.paging.params=s.a.clone(this.paging.defaultParams),this.updateUrlQuery(this.paging.defaultParams)},calculateParams:function(e,t,n){var r=s.a.clone(e);return r.skip=(parseInt(e.skip,10)||0)+t,this.paging.defaultParams.limit&&(r.limit=Math.min(this.paging.defaultParams.limit,r.limit)),r.limit=n+1,r.skip=Math.max(r.skip,0),r},pageSizeReset:function(e,t){var n=s.a.defaults(t||{},{fetch:!0});if(this.paging.direction=void 0,this.paging.pageSize=e,this.paging.params=this.paging.defaultParams,this.paging.params.limit=e,this.updateUrlQuery(this.paging.params),n.fetch)return this.fetch()},_parseQueryString:function(e){var t=decodeURI(e).split(/&/);return s.a.reduce(t,(function(e,t){var n=t.split(/=/);return 2===n.length&&(e[n[0]]=n[1]),e}),{})},_iterate:function(e,t){var n=s.a.defaults(t||{},{fetch:!0});if(this.paging.params=this.calculateParams(this.paging.params,e,this.paging.pageSize),this.updateUrlQuery(this.paging.params),n.fetch)return this.fetch({reset:!0})},next:function(e){return this.paging.direction="next",this._iterate(this.paging.pageSize,e)},previous:function(e){return this.paging.direction="previous",this._iterate(0-this.paging.pageSize,e)},shouldStringify:function(e){try{return JSON.parse(e),!1}catch(e){return!0}},updateUrlQuery:function(e){var t=this,n=s.a.result(this,"url").split("?")[0];s.a.each(["startkey","endkey","key"],(function(n){s.a.has(e,n)&&t.shouldStringify(e[n])&&(e[n]=JSON.stringify(e[n]))})),this.url=n+"?"+ce.utils.queryParams(e)},fetch:function(){return!this.paging.direction&&this.paging.params.limit>0&&(this.paging.direction="fetch",this.paging.params.limit=this.paging.params.limit+1,this.updateUrlQuery(this.paging.params)),R.a.Collection.prototype.fetch.apply(this,arguments)},parse:function(e){var t=e.rows;return this.paging.hasNext=this.paging.hasPrevious=!1,this.viewMeta={total_rows:e.total_rows,offset:e.offset,update_seq:e.update_seq},this.paging.params.skip>0&&(this.paging.hasPrevious=!0),t.length===this.paging.pageSize+1&&(this.paging.hasNext=!0,t.pop(),this.viewMeta.total_rows=this.viewMeta.total_rows-1),t},hasNext:function(){return this.paging.hasNext},hasPrevious:function(){return this.paging.hasPrevious}});function xe(){return(xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var ke=ie.addon();ke.Doc=ie.Model.extend({idAttribute:"_id",documentation:function(){return ie.constants.DOC_URLS.GENERAL},url:function(e){void 0===e&&(e="server");var t=this.safeID();t||(t="");var n=this.fetchConflicts?"?conflicts=true":"";return ie.urls("document",e,this.getDatabase().safeID(),t,n)},initialize:function(e,t){this.collection&&this.collection.database?this.database=this.collection.database:t.database&&(this.database=t.database),t.fetchConflicts&&(this.fetchConflicts=!0),this.partitionKey=t.partitionKey},getDatabase:function(){return this.database?this.database:this.collection.database},validate:function(e){if(this.id&&this.id!==e._id&&this.get("_rev"))return"Cannot change a documents id."},docType:function(){return ce.utils.getDocTypeFromId(this.id)},isBulkDeletable:function(){return!!this.id&&!!this.get("_rev")},isDeletable:function(){return!!this.id},isFromView:function(){return!this.id},isMangoDoc:function(){return!!this.isDdoc()&&("query"===this.get("language")||!(!this.get("doc")||"query"!==this.get("doc").language))},isDdoc:function(){return"design doc"===this.docType()},setDDocPartitionedOption:function(e){if(!this.isDdoc())return!1;var t=this.get("options");return t||(t={}),t.partitioned=e,this.set({options:t}),!0},setDdocView:function(e,t,n){if(!this.isDdoc())return!1;var r=this.get("views");r||(r={},this.set({language:"javascript"}));var o=r[e]||{};return n?o.reduce=n:delete o.reduce,o.map=t,r[e]=o,this.set({views:r}),!0},removeDdocView:function(e){if(!this.isDdoc())return!1;var t=this.get("views");delete t[e],this.set({views:t})},dDocModel:function(){if(!this.isDdoc())return!1;var e=this.get("doc");return e?(e._rev=this.get("_rev"),new ke.Doc(e,{database:this.database})):this},safeID:function(){return ce.utils.getSafeIdForDoc(this.id)},destroy:function(){var e=this.url()+"?rev="+this.get("_rev");return O(e).then((function(e){if(e.error)throw new Error(e.reason||e.error);return e}))},parse:function(e){return e.rev&&(e._rev=e.rev,delete e.rev),e.id&&_.isUndefined(this.id)&&(e._id=e.id),e.ok&&(delete e.id,delete e.ok),e},prettyJSON:function(){var e=this.get("doc")?this.get("doc"):this.attributes;return JSON.stringify(e,null,"  ")},copy:function(e){var t=xe({},this.attributes,{_id:e});return delete t._rev,new this.constructor(t,{database:this.database}).save()},isNewDoc:function(){return!this.get("_rev")}}),ke.AllDocs=Le.extend({model:ke.Doc,documentation:function(){return ie.constants.DOC_URLS.GENERAL},initialize:function(e,t){this.viewMeta=t.viewMeta,this.database=t.database,this.params=_.clone(t.params),this.on("remove",this.decrementTotalRows,this),this.perPageLimit=t.perPageLimit||20,this.params.limit||(this.params.limit=this.perPageLimit)},isEditable:function(){return!0},urlRef:function(e,t){var n="";return t?n=_.isEmpty(t)?"":"?"+ce.utils.queryParams(t):this.params&&(n="?"+ce.utils.queryParams(this.params)),_.isUndefined(e)&&(e="server"),ie.urls("allDocs",e,this.database.safeID(),n)},url:function(){return this.urlRef.apply(this,arguments)},simple:function(){var e=this.map((function(e){return{_id:e.id,_rev:e.get("_rev")}}));return new ke.AllDocs(e,{database:this.database,params:this.params})},totalRows:function(){return this.viewMeta.total_rows||"unknown"},decrementTotalRows:function(){this.viewMeta.total_rows&&(this.viewMeta.total_rows=this.viewMeta.total_rows-1,this.trigger("totalRows:decrement"))},updateSeq:function(){return this.viewMeta&&this.viewMeta.update_seq||!1},parse:function(e){var t=e.rows,n=_.filter(t,(function(e){return e.value}));return e.rows=_.map(n,(function(e){var t={_id:e.id,_rev:e.value.rev,value:e.value,key:e.key};return e.doc&&(t.doc=e.doc),t})),Le.prototype.parse.call(this,e)},clone:function(){return new this.constructor(this.models,{database:this.database,params:this.params,paging:this.paging})}});var je,Ue=ke;Ue.QueryParams=(je=function(e,t){var n=_.clone(e);return _.each(["startkey","endkey","key"],(function(e){_.has(n,e)&&(n[e]=t(n[e]))})),n},{parse:function(e){return je(e,JSON.parse)},stringify:function(e){return je(e,JSON.stringify)}}),Ue.DdocInfo=ie.Model.extend({idAttribute:"_id",documentation:function(){return ie.constants.DOC_URLS.GENERAL},initialize:function(e,t){this.database=t.database},url:function(e){return e||(e="server"),ie.urls("designDocs",e,this.database.safeID(),this.safeID())},safeID:function(){var e=this.id.replace(/^_design\//,"");return"_design/"+ce.utils.safeURLName(e)}}),Ue.NewDoc=Ue.Doc.extend({fetch:function(){var e=this,t=this.partitionKey?this.partitionKey+":":"";return I.getUUID().then((function(n){return n.uuids?e.set("_id",t+n.uuids[0]):e.set("_id",t+"enter_document_id"),n})).catch((function(){e.set("_id",t+"enter_document_id")}))}}),Ue.BulkDeleteDoc=ie.Model.extend({idAttribute:"_id"}),Ue.BulkDeleteDocCollection=ie.Collection.extend({model:Ue.BulkDeleteDoc,sync:function(){},initialize:function(e,t){this.databaseId=t.databaseId},url:function(){return ie.urls("bulk_docs","server",this.databaseId,"")},bulkDelete:function(){var e=this,t=this.createPayload(this.toJSON());return new ie.Promise((function(n,r){S(e.url(),t).then((function(t){if(t.error)throw new Error(t.reason||t.error);e.handleResponse(t,n,r)})).catch((function(){var t=_.reduce(e.toArray(),(function(e,t){return e.push(t.id),e}),[]);e.trigger("error",t),r(t)}))}))},handleResponse:function(e,t,n){var r=_.reduce(e,(function(e,t){return t.error&&e.errorIds.push(t.id),t.error||e.successIds.push(t.id),e}),{errorIds:[],successIds:[]});this.removeDocuments(r.successIds),r.errorIds.length&&this.trigger("error",r.errorIds),_.isEmpty(r.successIds)?n(r.errorIds):t(r),this.trigger("updated")},removeDocuments:function(e){var t=this;_.each(e,(function(e){t.remove(t.get(e))})),this.trigger("removed",e)},createPayload:function(e){return{docs:e}}}),Ue.MangoBulkDeleteDocCollection=Ue.BulkDeleteDocCollection.extend({url:function(){return I.getServerUrl("/".concat(this.databaseId,"/_index/_bulk_delete"))},createPayload:function(e){return{docids:e.filter((function(e){return"_all_docs"!==e._id})).map((function(e){return e._id}))}}});var Me=Ue,qe=ie.addon();qe.DocLimit=100,qe.Model=ie.Model.extend({partitioned:!1,setPartitioned:function(e){this.partitioned=e},documentation:function(){return ie.constants.DOC_URLS.ALL_DBS},buildAllDocs:function(e){return this.allDocs=new Me.AllDocs(null,{database:this,params:e}),this.allDocs},isNew:function(){return!1},isSystemDatabase:function(){return ce.utils.isSystemDatabase(this.id)},url:function(e){return"index"===e?"/database/"+this.safeID()+"/_all_docs":"web-index"===e?"#/database/"+this.safeID()+"/_all_docs?limit="+qe.DocLimit:"apiurl"===e?I.getApiUrl("/database/"+this.safeID()+"/_all_docs"):"changes"===e?ie.urls("changes","app",this.safeID(),"","?descending=true&limit=100&include_docs=true"):"changes-apiurl"===e?ie.urls("changes","apiurl",this.safeID(),"?descending=true&limit=100&include_docs=true"):"app"===e?"/database/"+this.safeID():this.partitioned?I.getServerUrl("/"+this.safeID())+"?partitioned=true":I.getServerUrl("/"+this.safeID())},safeID:function(){return ce.utils.safeURLName(this.id)},buildChanges:function(e){return e.limit||(e.limit=100),this.changes=new qe.Changes({database:this,params:e}),this.changes}}),qe.Changes=ie.Collection.extend({initialize:function(e){this.database=e.database,this.params=e.params},documentation:function(){return ie.constants.DOC_URLS.CHANGES},url:function(e){var t="";return this.params&&(t="?"+ce.utils.queryParams(this.params)),e||(e="server"),ie.urls("changes",e,this.database.safeID(),t)},parse:function(e){return this.last_seq=e.last_seq,e.results}});var Ve=qe;function Fe(){return(Fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Be=Ve.Model,He=ie.Store.extend({initialize:function(){this.reset()},reset:function(){var e;this._loading=!1,this._promptVisible=!1,this._page=1,this._limit=((e=ce.utils.localStorageGet("fauxton:dbs_per_page"))||(e=ie.constants.MISC.DEFAULT_PAGE_SIZE),e),this._dbList=[],this._databaseDetails=[],this._failedDbs=[],this._fullDbList=[],this._partitionedDatabasesAvailable=!1},getPage:function(){return this._page},getLimit:function(){return this._limit},setLimit:function(e){this._limit=e,ce.utils.localStorageSet("fauxton:dbs_per_page",e)},isLoading:function(){return this._loading},setLoading:function(e){this._loading=e},isPromptVisible:function(){return this._promptVisible},setPromptVisible:function(e){this._promptVisible=e},obtainNewDatabaseModel:function(e,t){var n=new Be({id:e,name:e});return n.setPartitioned(t),n},doesDatabaseExist:function(e){return-1!==this._dbList.indexOf(e)},getTotalAmountOfDatabases:function(){return this._fullDbList.length},getDbList:function(){var e=this;return this._dbList.map((function(t){var n=e._databaseDetails.filter((function(e){return e.db_name===t}));return Fe({},{id:t,encodedId:encodeURIComponent(t),url:ie.urls("allDocsSanitized","app",t),failed:-1!==e._failedDbs.indexOf(t)},e._getDetails(n[0]))}))},_getDetails:function(e){if(!e)return{};var t=e.sizes,n=t&&t.active||e.data_size||0;return{dataSize:I.formatSize(n),docCount:e.doc_count,docDelCount:e.doc_del_count,showTombstoneWarning:e.doc_del_count>e.doc_count,isPartitioned:e.props&&!0===e.props.partitioned}},isPartitionedDatabasesAvailable:function(){return this._partitionedDatabasesAvailable},dispatch:function(e){switch(e.type){case Pe.DATABASES_SETPAGE:this._page=e.options.page;break;case Pe.DATABASES_SETLIMIT:this.setLimit(e.options.limit);break;case Pe.DATABASES_SET_PROMPT_VISIBLE:this.setPromptVisible(e.options.visible);break;case Pe.DATABASES_STARTLOADING:this.setLoading(!0);break;case Pe.DATABASES_LOADCOMPLETE:this.setLoading(!1);break;case Pe.DATABASES_UPDATE:this._fullDbList=e.options.fullDbList,this._dbList=e.options.dbList,this._databaseDetails=e.options.databaseDetails,this._failedDbs=e.options.failedDbs,this.setLoading(!1);break;case Pe.DATABASES_PARTITIONED_DB_AVAILABLE:this._partitionedDatabasesAvailable=e.options.available;break;default:return}this.triggerChange()}}),Ke=new He;Ke.dispatchToken=ie.dispatcher.register(Ke.dispatch.bind(Ke));var Ge={databasesStore:Ke,DatabasesStoreConstructor:He},Xe=function(e){var t=ie.urls("databaseBaseURL","server",e);return v(t)};function We(e,t){var n=[],r=[],o=0;e.forEach((function(a){ze(ie.urls("databaseBaseURL","server",a)).then((function(e){n.push(e)})).catch((function(){r.push(a)})).then((function(){++o===e.length&&Ze({dbList:e,databaseDetails:n,failedDbs:r,fullDbList:t})}))}))}function ze(e){return v(e).then((function(e){if(e.error)throw new Error(e.reason||e.error);return e}))}function Ye(){return ze(ie.urls("allDBs","server"))}function Qe(e,t,n){var r=(t-1)*n,o=t*n;return e.slice(r,o)}function Ze(e){ie.dispatch({type:Pe.DATABASES_UPDATE,options:e})}var Je={getDatabaseList:Ye,paginate:Qe,getDatabaseDetails:We,fetch:ze,updateDatabases:Ze,init:function(e){var t=this,n=e.page,r=e.limit;this.setStartLoading(),this.setPage(n),r&&this.setLimit(r),Ye().then((function(e){var o=Qe(e,n,r);t.updateDatabases({dbList:o,databaseDetails:[],failedDbs:[],fullDbList:e}),We(o,e)}))},setPage:function(e){ie.dispatch({type:Pe.DATABASES_SETPAGE,options:{page:e}})},setLimit:function(e){ie.dispatch({type:Pe.DATABASES_SETLIMIT,options:{limit:e}})},setStartLoading:function(){ie.dispatch({type:Pe.DATABASES_STARTLOADING})},setLoadComplete:function(){ie.dispatch({type:Pe.DATABASES_LOADCOMPLETE})},createNewDatabase:function(e,t){if(_.isNull(e)||0===e.trim().length)ie.addNotification({msg:"Please enter a valid database name",type:"error",clear:!0});else{e=e.trim(),ie.dispatch({type:Pe.DATABASES_SET_PROMPT_VISIBLE,options:{visible:!1}});var n=Ge.databasesStore.obtainNewDatabaseModel(e,t);ie.addNotification({msg:"Creating database."}),n.save().done((function(){ie.addNotification({msg:"Database created successfully",type:"success",clear:!0});var t=ie.urls("allDocs","app",ce.utils.safeURLName(e));ce.router.navigate(t,{trigger:!0})})).fail((function(e){var t=JSON.parse(e.responseText).reason;ie.addNotification({msg:"Create database failed: "+t,type:"error",clear:!0})}))}},jumpToDatabase:function(e){if(!_.isNull(e)&&0!==e.trim().length){e=e.trim();var t=ie.urls("allDocs","app",ce.utils.safeURLName(e),"");return setTimeout((function(){ie.navigate(t)}))}},fetchAllDbsWithKey:function(e,t){var n="?"+ce.utils.queryParams({startkey:JSON.stringify(e),endkey:JSON.stringify(e+"香"),limit:30}),r=I.getServerUrl("/_all_dbs".concat(n));v(r).then((function(e){var n=e.map((function(e){return{value:e,label:e}}));t(null,{options:n})}))},setPartitionedDatabasesAvailable:function(e){var t={type:Pe.DATABASES_PARTITIONED_DB_AVAILABLE,options:{available:e}};ie.dispatch(t),ie.reduxDispatch(t)},checkPartitionedQueriesIsAvailable:function(){var e=this,t=ie.getExtensions(ri.PARTITONED_DB_CHECK_EXTENSION).map((function(e){return e()}));ie.Promise.all(t).then((function(t){var n=t.every((function(e){return!0===e}));e.setPartitionedDatabasesAvailable(n)})).catch((function(){}))},fetchSelectedDatabaseInfo:function(e){ie.reduxDispatch({type:Pe.DATABASES_FETCH_SELECTED_DB_METADATA}),Xe(e).then((function(e){if(!e.db_name){var t=e.reason?e.reason:"";throw new Error("Failed to fetch database info. "+t)}ie.reduxDispatch({type:Pe.DATABASES_FETCH_SELECTED_DB_METADATA_SUCCESS,options:{metadata:e}})})).catch((function(e){ie.addNotification({msg:e.message,type:"error",clear:!0})}))}},$e=n(1),et=n.n($e),tt=n(10);function nt(e){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ot(e,t){return!t||"object"!==nt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function at(e){return(at=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function it(e,t){return(it=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var st,ct,lt,ut=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ot(this,at(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&it(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e="fonticon fonticon-bell"+(this.props.visible?"":" hide");return ue.a.createElement("div",{className:e,onClick:this.props.onClick})}}])&&rt(n.prototype,r),o&&rt(n,o),t}(ue.a.Component);st=ut,ct="propTypes",lt={onClick:et.a.func.isRequired,visible:et.a.bool.isRequired},ct in st?Object.defineProperty(st,ct,{value:lt,enumerable:!0,configurable:!0,writable:!0}):st[ct]=lt;var dt=Object(tt.b)((function(e){return{visible:!e.notifications.notificationCenterVisible}}),(function(e){return{onClick:function(){e((function(e){e({type:ge.SHOW_NOTIFICATION_CENTER})}))}}}))(ut),pt=function(e){var t=e.endpoint;return t?ue.a.createElement("div",{className:"faux__jsonlink"},ue.a.createElement("a",{"data-bypass":!0,className:"faux__jsonlink-link",href:t,target:"_blank",rel:"noopener noreferrer"},ue.a.createElement("span",{className:"faux__jsonlink-link-brackets"},"{ }"),ue.a.createElement("span",{className:"faux__jsonlink-link-label"},"JSON"))):null},ft=function(e){var t=e.docURL;return t?ue.a.createElement("div",{className:"faux__doclink"},ue.a.createElement("a",{"data-bypass":"true",href:t,target:"_blank",rel:"noopener noreferrer",className:"faux__doclink-link"},ue.a.createElement("i",{className:"icon fonticon-bookmark"}))):null},mt=function(e){var t=e.crumbs;return ue.a.createElement("div",{className:"faux-header__breadcrumbs"},function(e){var t=e.length-1;return e.map((function(e,n){var r=[ue.a.createElement(ht,{key:n},e.name)];return e.link&&(r=[ue.a.createElement(ht,{key:n},ue.a.createElement("a",{className:"faux-header__breadcrumbs-link",href:"#/"+e.link},e.name))]),e.name?(n<t&&r.push(ue.a.createElement(yt,{key:"divider_"+n})),r):r}))}(t))};mt.propTypes={crumbs:et.a.array.isRequired};var ht=function(e){var t=e.children;return ue.a.createElement("div",{className:"faux-header__breadcrumbs-element"},t)},yt=function(){return ue.a.createElement("div",{className:"fonticon-right-open faux-header__breadcrumbs-divider"})};var bt=function(e){var t=e.docURL,n=e.endpoint;return ue.a.createElement("div",{className:"faux__jsondoc-wrapper"},ue.a.createElement(pt,{endpoint:n}),ue.a.createElement(ft,{docURL:t}))},gt=function(e){var t=e.children;return ue.a.createElement("div",{id:"dashboard",className:"one-pane "},t)},Et=function(e){var t=e.showApiUrl,n=e.docURL,r=e.endpoint,o=e.crumbs,a=e.children,i="right-header-flex";return I.isIE1X()&&(i+=" "+i+"--ie1X"),ue.a.createElement("header",null,ue.a.createElement("div",{className:"flex-layout flex-row"},ue.a.createElement("div",{id:"breadcrumbs",className:"flex-body"},ue.a.createElement(mt,{crumbs:o})),ue.a.createElement("div",{id:"right-header"},ue.a.createElement("div",{className:i},a)),t?ue.a.createElement(bt,{docURL:n,endpoint:r}):null,ue.a.createElement("div",{id:"notification-center-btn"},ue.a.createElement(dt,null))))};Et.defaultProps={showApiUrl:!0,crumbs:[]},Et.propTypes={docURL:et.a.string,endpoint:et.a.string,crumbs:et.a.array};var _t=function(e){var t=e.children;return ue.a.createElement("div",{className:"content-area container-fluid"},ue.a.createElement("div",{id:"tabs"}),ue.a.createElement("div",{id:"dashboard-content",className:"scrollable"},t))},vt=function(e){var t=e.children;return ue.a.createElement("div",{className:"faux__onepane-footer"},t)},Ot=function(e){var t=e.component,n=e.docURL,r=e.endpoint,o=e.crumbs;return ue.a.createElement(gt,null,ue.a.createElement(Et,{crumbs:o,endpoint:r,docURL:n}),ue.a.createElement(_t,null,t),ue.a.createElement(vt,null))},St=function(e){var t=e.children;return ue.a.createElement("div",{id:"dashboard-content"},t)},Dt=function(e){var t=e.component,n=e.docURL,r=e.endpoint,o=e.crumbs;return ue.a.createElement("div",{id:"dashboard",className:"one-pane doc-editor-page"},ue.a.createElement(Et,{crumbs:o,endpoint:r,docURL:n}),ue.a.createElement(St,null,t))},Nt=n(3),wt=n.n(Nt),Tt=n(8);function Ct(e){return(Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function It(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function At(e){return(At=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pt(e,t){return(Pt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Lt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xt=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,o=(e=At(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==Ct(o)&&"function"!=typeof o?Rt(r):o,Lt(Rt(n),"state",{open:!1}),Lt(Rt(n),"handleClick",(function(e){var t=!n.state.open;n.setState({open:t}),n.props.onClick({isOpen:t,event:e})})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pt(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.children,n=e.title,r=this.state.open?"fonticon-down-open":"fonticon-right-open",o=wt()("faux--accordion__item-content","collapse",{in:this.state.open});return ue.a.createElement("li",{className:"faux--accordion__item",onClick:this.handleClick},ue.a.createElement("button",{type:"button",className:"faux--accordion__item-header",onClick:this.handleClick},ue.a.createElement("i",{className:r}),ue.a.createElement("span",null,n)),ue.a.createElement(Tt.c,{in:this.state.open},ue.a.createElement("div",{className:o},t)))}}])&&It(n.prototype,r),o&&It(n,o),t}(ue.a.Component);function kt(e){return(kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ut(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mt(e,t,n){return t&&Ut(e.prototype,t),n&&Ut(e,n),e}function qt(e,t){return!t||"object"!==kt(t)&&"function"!=typeof t?Ft(e):t}function Vt(e){return(Vt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ft(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ht(e,t)}function Ht(e,t){return(Ht=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Kt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Lt(xt,"propTypes",{title:et.a.string.isRequired}),Lt(xt,"defaultProps",{onClick:function(){}});var Gt=function(e){function t(){var e,n;jt(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return Kt(Ft(n=qt(this,(e=Vt(t)).call.apply(e,[this].concat(o)))),"getBadges",(function(){return n.props.elements.map(function(e,t){return ue.a.createElement(Xt,{label:this.props.getLabel(e),key:t,id:e,remove:this.removeBadge})}.bind(Ft(n)))})),Kt(Ft(n),"removeBadge",(function(e,t){n.props.removeBadge(e,t)})),n}return Bt(t,e),Mt(t,[{key:"render",value:function(){return ue.a.createElement("ul",{className:"component-badgelist"},this.getBadges())}}]),t}(ue.a.Component);Kt(Gt,"propTypes",{elements:et.a.array.isRequired,removeBadge:et.a.func.isRequired}),Kt(Gt,"defaultProps",{getLabel:function(e){return e},getId:function(e){return e}});var Xt=function(e){function t(){var e,n;jt(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return Kt(Ft(n=qt(this,(e=Vt(t)).call.apply(e,[this].concat(o)))),"remove",(function(e){e.preventDefault(),n.props.remove(n.props.label,n.props.id)})),n}return Bt(t,e),Mt(t,[{key:"render",value:function(){return ue.a.createElement("li",{className:"component-badge"},ue.a.createElement("span",{className:"label label-info"},this.props.label),ue.a.createElement("a",{href:"#",className:"label label-info remove-filter",onClick:this.remove,"data-bypass":"true"},"×"))}}]),t}(ue.a.Component);function Wt(e){return(Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yt(e,t){return!t||"object"!==Wt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qt(e){return(Qt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zt(e,t){return(Zt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Kt(Xt,"propTypes",{label:et.a.string.isRequired,remove:et.a.func.isRequired});var Jt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Yt(this,Qt(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zt(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.iconDefaultClass,n=e.fonticon,r=e.innerClasses,o=e.selected,a=e.containerClasses,i=e.title,s=e.disabled,c=e.text,l=e.toggleCallback,u=e.active,d=o||u?"js-headerbar-togglebutton-selected":"";return ue.a.createElement("button",{title:i,disabled:s,onClick:l,className:"button ".concat(a," ").concat(d)},ue.a.createElement("i",{className:"".concat(t," ").concat(n," ").concat(r)}),ue.a.createElement("span",null,c))}}])&&zt(n.prototype,r),o&&zt(n,o),t}(ue.a.Component);function $t(e){return($t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function en(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tn(e){return(tn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rn(e,t){return(rn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function on(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Jt,"defaultProps",{innerClasses:"",fonticon:"",containerClasses:"",selected:!1,title:"",disabled:!1,toggleCallback:null,text:"",iconDefaultClass:"icon"});var an=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,o=(e=tn(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==$t(o)&&"function"!=typeof o?nn(r):o,on(nn(n),"getMultiSelectOptions",(function(){return n.props.hasSelectedItem?ue.a.createElement("button",{onClick:n.props.removeItem,className:"fonticon "+n.props.bulkIcon,title:n.props.buttonTitle}):null})),on(nn(n),"getPopupContent",(function(){return ue.a.createElement("ul",{className:"bulk-action-component-popover-actions"},ue.a.createElement("li",{onClick:n.selectAll},ue.a.createElement("i",{className:"icon fonticon-cancel"})," ",n.props.dropdownContentText))})),on(nn(n),"selectAll",(function(){n.bulkActionPopover.hide(),n.props.selectAll()})),on(nn(n),"getOverlay",(function(){return ue.a.createElement(Tt.h,{ref:function(e){return n.bulkActionPopover=e},trigger:"click",placement:"bottom",rootClose:!0,overlay:ue.a.createElement(Tt.i,{id:"bulk-action-component-popover",title:n.props.title},n.getPopupContent())},ue.a.createElement("div",{className:"arrow-button"},ue.a.createElement("i",{className:"fonticon fonticon-play"})))})),on(nn(n),"getMasterSelector",(function(){return ue.a.createElement("div",{className:"bulk-action-component-panel"},ue.a.createElement("input",{type:"checkbox",checked:n.props.isChecked,onChange:n.props.toggleSelect,disabled:n.props.disabled}),n.props.enableOverlay?ue.a.createElement("div",{className:"separator"}):null,n.props.enableOverlay?n.getOverlay():null)})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rn(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return ue.a.createElement("div",{className:"bulk-action-component"},ue.a.createElement("div",{className:"bulk-action-component-selector-group"},this.getMasterSelector(),this.getMultiSelectOptions()))}}])&&en(n.prototype,r),o&&en(n,o),t}(ue.a.Component);function sn(e){return(sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ln(e,t){return!t||"object"!==sn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function un(e){return(un=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dn(e,t){return(dn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}on(an,"propTypes",{hasSelectedItem:et.a.bool.isRequired,removeItem:et.a.func.isRequired,selectAll:et.a.func,toggleSelect:et.a.func.isRequired,isChecked:et.a.bool.isRequired,disabled:et.a.bool}),on(an,"defaultProps",{disabled:!1,title:"Select rows that can be...",bulkIcon:"fonticon-trash",buttonTitle:"Delete all selected",dropdownContentText:"Deleted",enableOverlay:!1});var pn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ln(this,un(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dn(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return ue.a.createElement("div",{className:"styled-select"},ue.a.createElement("label",{htmlFor:this.props.selectId},ue.a.createElement("i",{className:"fonticon-down-dir styled-select-icon"}),ue.a.createElement("i",{className:"fonticon-down-dir styled-select-hover-icon"}),ue.a.createElement("select",{value:this.props.selectValue,id:this.props.selectId,className:this.props.selectValue,onChange:this.props.selectChange},this.props.selectContent)))}}])&&cn(n.prototype,r),o&&cn(n,o),t}(ue.a.Component);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(pn,"propTypes",{selectValue:et.a.string.isRequired,selectId:et.a.string.isRequired,selectChange:et.a.func.isRequired});var fn=n(66),mn=n.n(fn),hn={CMPNTS_DATABASES_SHOWDELETE_MODAL:"CMPNTS_DATABASES_SHOWDELETE_MODAL"};var yn={deleteDatabase:function(e,t){var n=this,r=ie.urls("databaseBaseURL","server",e,"");O(r).then((function(r){if(!r.ok){var o=r.reason||"";throw new Error(o)}n.showDeleteDatabaseModal({showModal:!0}),ie.addNotification({msg:"The database <code>"+_.escape(e)+"</code> has been deleted.",clear:!0,escape:!1}),Backbone.history.loadUrl(ie.urls("allDBs","app")),t&&t()})).catch((function(e){ie.addNotification({msg:"Could not delete the database. "+e.message,type:"error",clear:!0})}))},showDeleteDatabaseModal:function(e){ie.dispatch({type:hn.CMPNTS_DATABASES_SHOWDELETE_MODAL,options:e})}},bn=function(e,t){var n="#"+ie.urls("databaseBaseURL","app",ie.url.encode(e))+(t?"/_partition/"+encodeURIComponent(t):"");return{title:ce.i18n.en_US["new-mango-index"],url:n+"/_index",icon:"fonticon-plus-circled"}},gn=function(e){return"designDoc"===e.navItem&&"Views"===e.designDocSection&&e.indexName},En=function(e,t){var n=t;return t&&e.options&&!1===e.options.partitioned&&(n=!1),n},_n={getSeqNum:function(e){return _.isArray(e)?e[1]:e},getNewButtonLinks:function(e,t){var n=ie.getExtensions("sidebar:links"),r="#"+ie.urls("databaseBaseURL","app",ie.url.encode(e)),o="",a="";return t&&(o="/_partition/"+encodeURIComponent(t),a="?partitionKey="+encodeURIComponent(t)),[{title:"Add New",links:n.reduce((function(e,t){return e.push({title:t.title,url:r+o+"/"+t.url,icon:"fonticon-plus-circled"}),e}),[{title:"New Doc",url:r+"/_new"+a,icon:"fonticon-plus-circled"},{title:"New View",url:r+o+"/new_view",icon:"fonticon-plus-circled"},bn(e,t)])}]},getModifyDatabaseLinks:function(e){return[{title:"Replicate Database",icon:"fonticon-replicate",url:ie.urls("replication","app",e)},{title:"Delete",icon:"fonticon-trash",onClick:yn.showDeleteDatabaseModal.bind(void 0,{showDeleteModal:!0,dbId:e})}]},getNewDocUrl:function(e,t){var n=encodeURIComponent(e),r=ie.urls("new","newDocument",n);return t&&(r=r+"?partitionKey="+encodeURIComponent(t)),r},isDDocPartitioned:En,parseJSON:function(e){return JSON.parse('"'+e+'"')},truncateDoc:function(e,t){var n=e.split("\n"),r=!1;return n.length>t&&(r=!0,e=(n=n.slice(0,t)).join("\n")),{isTruncated:r,content:e}},selectedViewContainsReduceFunction:function(e,t){if(!t)return!1;var n=!1;if(e&&gn(t)){var r="_design/"+t.designDocName,o=e.find((function(e){return e._id===r}));n=void 0!==o&&o.views&&void 0!==o.views[t.indexName]&&void 0!==o.views[t.indexName].reduce}return n},selectedItemIsPartitionedView:function(e,t,n){if(!t)return!1;var r=!1;if(e&&gn(t)){var o="_design/"+t.designDocName,a=e.find((function(e){return e._id===o}));a&&(r=En(a,n))}return r},isViewSelected:gn};function vn(e){return(vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function On(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sn(e){return(Sn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Dn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nn(e,t){return(Nn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(280),n(182),n(183);var Tn=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,o=(e=Sn(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==vn(o)&&"function"!=typeof o?Dn(r):o,wn(Dn(n),"initAceEditor",(function(e){n.editor=mn.a.edit(e),n.editor.$blockScrolling=1/0,n.editor.setShowPrintMargin(!1),n.editor.setOption("highlightActiveLine",!0),n.editor.setTheme("ace/theme/idle_fingers");var t=_n.parseJSON(n.props.value);n.editor.setValue(t,-1)})),wn(Dn(n),"closeModal",(function(){n.props.onClose()})),wn(Dn(n),"save",(function(){n.props.onSave(n.editor.getValue())})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nn(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this;return ue.a.createElement(Tt.f,{className:"string-editor-modal",show:this.props.visible,onHide:this.closeModal},ue.a.createElement(Tt.f.Header,{closeButton:!0},ue.a.createElement(Tt.f.Title,null,"Edit Value ",ue.a.createElement("span",{id:"string-edit-header"}))),ue.a.createElement(Tt.f.Body,null,ue.a.createElement("div",{id:"modal-error",className:"hide alert alert-error"}),ue.a.createElement("div",{id:"string-editor-wrapper"},ue.a.createElement("div",{id:"string-editor-container",ref:function(t){return e.initAceEditor(t)},className:"doc-code"}))),ue.a.createElement(Tt.f.Footer,null,ue.a.createElement("a",{className:"cancel-link",onClick:this.closeModal},"Cancel"),ue.a.createElement("button",{id:"string-edit-save-btn",onClick:this.save,className:"btn btn-primary save"},ue.a.createElement("i",{className:"fonticon-circle-check"})," Modify Text")))}}])&&On(n.prototype,r),o&&On(n,o),t}(ue.a.Component);wn(Tn,"propTypes",{value:et.a.string.isRequired,visible:et.a.bool.isRequired,onClose:et.a.func.isRequired,onSave:et.a.func.isRequired}),wn(Tn,"defaultProps",{visible:!1,onClose:function(){},onSave:function(){}});n(540);function Cn(e){return(Cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function In(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function An(e){return(An=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pn(e,t){return(Pn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ln(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(280),n(182),n(183);var xn=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,o=(e=An(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==Cn(o)&&"function"!=typeof o?Rn(r):o,Ln(Rn(n),"state",{originalCode:n.props.defaultCode,stringEditModalVisible:!1,stringEditIconVisible:!1,stringEditIconStyle:{},stringEditModalValue:""}),Ln(Rn(n),"hasChanged",(function(){return!_.isEqual(n.state.originalCode,n.getValue())})),Ln(Rn(n),"clearChanges",(function(){n.setState({originalCode:n.getValue()})})),Ln(Rn(n),"setupAce",(function(e,t){n.editor=mn.a.edit(n.ace),n.editor.commands.bindKeys({"Ctrl-L|Command-L":null,"Ctrl-Shift-L|Command-Shift-L":"gotoline"}),n.editor.$blockScrolling=1/0,t&&n.setValue(e.defaultCode),n.editor.setShowPrintMargin(e.showPrintMargin),n.editor.autoScrollEditorIntoView=e.autoScrollEditorIntoView,n.editor.setOption("highlightActiveLine",n.props.highlightActiveLine),n.props.setHeightToLineCount&&n.setHeightToLineCount(),n.props.ignorableErrors&&n.removeIgnorableAnnotations(),n.addCommands(),n.editor.getSession().setMode("ace/mode/"+e.mode),n.editor.setTheme("ace/theme/"+e.theme),n.editor.setFontSize(e.fontSize),n.editor.getSession().setTabSize(2),n.editor.getSession().setUseSoftTabs(!0),n.props.autoFocus&&n.editor.focus()})),Ln(Rn(n),"addCommands",(function(){_.each(n.props.editorCommands,(function(e){n.editor.commands.addCommand(e)}))})),Ln(Rn(n),"setupEvents",(function(){n.editor.on("blur",_.bind(n.onBlur,Rn(n))),n.editor.on("change",_.bind(n.onContentChange,Rn(n))),n.props.stringEditModalEnabled&&(n.editor.on("changeSelection",_.bind(n.showHideEditStringGutterIcon,Rn(n))),n.editor.getSession().on("changeBackMarker",_.bind(n.showHideEditStringGutterIcon,Rn(n))),n.editor.getSession().on("changeScrollTop",_.bind(n.updateEditStringGutterIconPosition,Rn(n)))),n.props.notifyUnsavedChanges&&(window.addEventListener("beforeunload",n.quitWarningMsg),ie.beforeUnload("editor_"+n.props.id,n.quitWarningMsg))})),Ln(Rn(n),"onBlur",(function(){n.props.blur(n.getValue())})),Ln(Rn(n),"onContentChange",(function(){n.props.setHeightToLineCount&&n.setHeightToLineCount(),n.props.change(n.getValue())})),Ln(Rn(n),"quitWarningMsg",(function(){if(n.hasChanged())return"Your changes have not been saved. Click Cancel to return to the document, or OK to proceed."})),Ln(Rn(n),"removeEvents",(function(){n.props.notifyUnsavedChanges&&(window.removeEventListener("beforeunload",n.quitWarningMsg),ie.removeBeforeUnload("editor_"+n.props.id))})),Ln(Rn(n),"setHeightToLineCount",(function(){var e=n.editor.getSession().getDocument().getLength(),t=e>n.props.maxLines?n.props.maxLines:e;n.editor.setOptions({maxLines:t,minLines:n.props.minLines})})),Ln(Rn(n),"getAnnotations",(function(){return n.editor.getSession().getAnnotations()})),Ln(Rn(n),"isIgnorableError",(function(e){return-1!==_.indexOf(n.props.ignorableErrors,e)})),Ln(Rn(n),"removeIgnorableAnnotations",(function(){var e=n.isIgnorableError;n.editor.getSession().on("changeAnnotation",function(){var t=this.editor.getSession().getAnnotations(),n=_.reduce(t,(function(t,n){return e(n.raw)||t.push(n),t}),[]);t.length!==n.length&&this.editor.getSession().setAnnotations(n)}.bind(Rn(n)))})),Ln(Rn(n),"showHideEditStringGutterIcon",(function(){return n.hasErrors()||!n.parseLineForStringMatch()?(n.setState({stringEditIconVisible:!1}),!1):(n.setState({stringEditIconVisible:!0,stringEditIconStyle:{top:n.getGutterIconPosition()}}),!0)})),Ln(Rn(n),"updateEditStringGutterIconPosition",(function(){n.state.stringEditIconVisible&&n.setState({stringEditIconStyle:{top:n.getGutterIconPosition()}})})),Ln(Rn(n),"getGutterIconPosition",(function(){var e=n.getRowHeight(),t=n.editor.session.getScrollTop();return e*n.documentToScreenRow(n.getSelectionStart().row)-t+"px"})),Ln(Rn(n),"parseLineForStringMatch",(function(){var e=n.getSelectionStart().row,t=n.getSelectionEnd().row;if(e>=0&&t>=0&&e===t&&n.isRowExpanded(e)){var r=n.getLine(e).match(/^([ \t]*)("[^"]*["][ \t]*:[ \t]*)?(["|'].*"[ \t]*,?[ \t]*)$/);if(r)return r}return!1})),Ln(Rn(n),"openStringEditModal",(function(){var e=n.parseLineForStringMatch()[3].trim();","===e.substring(e.length-1)&&(e=e.substring(0,e.length-1).trim()),e=e.substring(1,e.length-1),n.setState({stringEditModalVisible:!0,stringEditModalValue:e})})),Ln(Rn(n),"saveStringEditModal",(function(e){var t=n.parseLineForStringMatch(),r=t[1]||"",o=t[2]||"",a=t[3],i="";","===a.substring(a.length-1)&&(i=","),n.replaceCurrentLine(r+o+JSON.stringify(e)+i+"\n"),n.closeStringEditModal()})),Ln(Rn(n),"closeStringEditModal",(function(){n.setState({stringEditModalVisible:!1})})),Ln(Rn(n),"hasErrors",(function(){return!_.every(n.getAnnotations(),(function(e){return n.isIgnorableError(e.raw)}))})),Ln(Rn(n),"setReadOnly",(function(e){n.editor.setReadOnly(e)})),Ln(Rn(n),"setValue",(function(e,t){t=t||-1,n.editor.setValue(e,t)})),Ln(Rn(n),"getValue",(function(){return n.editor.getValue()})),Ln(Rn(n),"getEditor",(function(){return Rn(n)})),Ln(Rn(n),"getLine",(function(e){return n.editor.session.getLine(e)})),Ln(Rn(n),"getSelectionStart",(function(){return n.editor.getSelectionRange().start})),Ln(Rn(n),"getSelectionEnd",(function(){return n.editor.getSelectionRange().end})),Ln(Rn(n),"getRowHeight",(function(){return n.editor.renderer.layerConfig.lineHeight})),Ln(Rn(n),"isRowExpanded",(function(e){return!n.editor.getSession().isRowFolded(e)})),Ln(Rn(n),"documentToScreenRow",(function(e){return n.editor.getSession().documentToScreenRow(e,0)})),Ln(Rn(n),"replaceCurrentLine",(function(e){n.editor.getSelection().selectLine(),n.editor.insert(e),n.editor.getSelection().moveCursorUp()})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pn(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.setupAce(this.props,!0),this.setupEvents(),this.props.autoFocus&&this.editor.focus()}},{key:"componentWillUnmount",value:function(){this.removeEvents(),this.editor.destroy()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setupAce(e,!1)}},{key:"render",value:function(){var e=this;return ue.a.createElement("div",null,ue.a.createElement("div",{ref:function(t){return e.ace=t},className:"js-editor",id:this.props.id}),ue.a.createElement("button",{ref:function(t){return e.stringEditIcon=t},className:"btn string-edit",title:"Edit string",disabled:!this.state.stringEditIconVisible,style:this.state.stringEditIconStyle,onClick:this.openStringEditModal},ue.a.createElement("i",{className:"icon icon-edit"})),ue.a.createElement(Tn,{ref:function(t){return e.stringEditModal=t},visible:this.state.stringEditModalVisible,value:this.state.stringEditModalValue,onSave:this.saveStringEditModal,onClose:this.closeStringEditModal}))}}])&&In(n.prototype,r),o&&In(n,o),t}(ue.a.Component);Ln(xn,"defaultProps",{id:"code-editor",mode:"javascript",theme:"idle_fingers",fontSize:13,defaultCode:"",showGutter:!0,highlightActiveLine:!0,showPrintMargin:!1,autoScrollEditorIntoView:!0,autoFocus:!1,stringEditModalEnabled:!1,setHeightToLineCount:!1,maxLines:10,minLines:11,editorCommands:[],notifyUnsavedChanges:!1,ignorableErrors:[],change:function(){},blur:function(){}});var kn=n(147),jn=n.n(kn);function Un(e){return(Un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qn(e){return(qn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fn(e,t){return(Fn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Bn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Hn=jn.a.js_beautify?jn.a.js_beautify:jn.a,Kn=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,o=(e=qn(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==Un(o)&&"function"!=typeof o?Vn(r):o,Bn(Vn(n),"noOfLines",(function(){return n.props.code.split(/\r\n|\r|\n/).length})),Bn(Vn(n),"canBeautify",(function(){return 1===n.noOfLines()})),Bn(Vn(n),"beautify",(function(e){e.preventDefault();var t=Hn(n.props.code);n.props.beautifiedCode(t)})),Bn(Vn(n),"getTooltip",(function(){return ue.a.createElement(Tt.k,{id:"tooltip"},"Switch to editable code format.")})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fn(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){if(!this.canBeautify())return null;var e=this.getTooltip();return ue.a.createElement(Tt.h,{placement:"right",overlay:e},ue.a.createElement("button",{onClick:this.beautify,className:"beautify beautify_map btn btn-primary btn-small beautify-tooltip",type:"button"},"Format Code"))}}])&&Mn(n.prototype,r),o&&Mn(n,o),t}(ue.a.Component);function Gn(e){return(Gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wn(e){return(Wn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yn(e,t){return(Yn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(541);var Zn={dark:"idle_fingers",light:"dawn"},Jn=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,o=(e=Wn(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==Gn(o)&&"function"!=typeof o?zn(r):o,Qn(zn(n),"getStoreState",(function(){return{theme:n.getZenTheme(),code:n.props.defaultCode}})),Qn(zn(n),"getZenTheme",(function(){var e=ce.utils.localStorageGet("zenTheme");return _.isUndefined(e)?"dark":e})),Qn(zn(n),"onChange",(function(){n.setState(n.getStoreState())})),Qn(zn(n),"exitZenMode",(function(){n.props.onExit(n.getValue())})),Qn(zn(n),"getValue",(function(){return n.ace.getValue()})),Qn(zn(n),"toggleTheme",(function(){var e="dark"===n.state.theme?"light":"dark";n.setState({theme:e,code:n.getValue()}),ce.utils.localStorageSet("zenTheme",e)})),Qn(zn(n),"setValue",(function(e,t){t=t||-1,n.editor.setValue(e,t)})),Qn(zn(n),"state",n.getStoreState()),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yn(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t="full-page-editor-modal-wrapper zen-theme-"+this.state.theme,n=[{name:"close",bindKey:{win:"ESC",mac:"ESC"},exec:this.exitZenMode}],r=ue.a.createElement(Tt.k,{id:"tooltip"},"Exit zen mode (`esc`)"),o=ue.a.createElement(Tt.k,{id:"tooltip"},"Switch zen theme");return ue.a.createElement("div",{className:t},ue.a.createElement("div",{className:"zen-mode-controls"},ue.a.createElement("ul",null,ue.a.createElement("li",null,ue.a.createElement(Tt.h,{placement:"left",overlay:r},ue.a.createElement("span",{className:"fonticon fonticon-resize-small js-exit-zen-mode","data-container":".zen-mode-controls .tooltips",onClick:this.exitZenMode}))),ue.a.createElement("li",null,ue.a.createElement(Tt.h,{placement:"left",overlay:o},ue.a.createElement("span",{className:"fonticon fonticon-picture js-toggle-theme","data-container":".zen-mode-controls .tooltips",title:"Switch zen theme",onClick:this.toggleTheme})))),ue.a.createElement("div",{className:"tooltips"})),ue.a.createElement(xn,{ref:function(t){return e.ace=t},autoFocus:!0,theme:Zn[this.state.theme],defaultCode:this.props.defaultCode,editorCommands:n,ignorableErrors:this.props.ignorableErrors,highlightActiveLine:this.props.highlightActiveLine}))}}])&&Xn(n.prototype,r),o&&Xn(n,o),t}(ue.a.Component);function $n(e){return($n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function er(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tr(e){return(tr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rr(e,t){return(rr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function or(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Qn(Jn,"defaultProps",{mode:"javascript",defaultCode:"",ignorableErrors:[],onExit:null,highlightActiveLine:!1});var ar=["Missing name in function declaration.","['{a}'] is better written in dot notation."],ir=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,o=(e=tr(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==$n(o)&&"function"!=typeof o?nr(r):o,or(nr(n),"getStoreState",(function(){return{zenModeEnabled:!1,code:n.props.defaultCode}})),or(nr(n),"getZenModeIcon",(function(){if(n.props.allowZenMode)return ue.a.createElement("span",{className:"fonticon fonticon-resize-full zen-editor-icon",title:"Enter Zen mode",onClick:n.enterZenMode})})),or(nr(n),"getDocIcon",(function(){if(n.props.docLink)return ue.a.createElement("a",{className:"help-link","data-bypass":"true",href:n.props.docLink,target:"_blank",rel:"noopener noreferrer"},ue.a.createElement("i",{className:"icon-question-sign"}))})),or(nr(n),"getZenModeOverlay",(function(){if(n.state.zenModeEnabled)return ue.a.createElement(Jn,{defaultCode:n.state.code,mode:n.props.mode,ignorableErrors:ar,onExit:n.exitZenMode})})),or(nr(n),"enterZenMode",(function(){n.setState({zenModeEnabled:!0,code:n.codeEditor.getValue()})})),or(nr(n),"exitZenMode",(function(e){n.setState({zenModeEnabled:!1}),n.getEditor().setValue(e)})),or(nr(n),"getEditor",(function(){return n.codeEditor})),or(nr(n),"getValue",(function(){return n.getEditor().getValue()})),or(nr(n),"beautify",(function(e){n.setState({code:e}),n.getEditor().setValue(e)})),or(nr(n),"update",(function(){n.getEditor().setValue(n.state.code)})),or(nr(n),"state",n.getStoreState()),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rr(e,t)}(t,e),n=t,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.defaultCode!==this.props.defaultCode&&this.setState({code:e.defaultCode})}},{key:"render",value:function(){var e=this,t="control-group";return this.props.className&&(t+=" "+this.props.className),ue.a.createElement("div",{className:t},ue.a.createElement("label",null,ue.a.createElement("span",null,this.props.title),this.getDocIcon(),this.getZenModeIcon()),ue.a.createElement(xn,{id:this.props.id,ref:function(t){return e.codeEditor=t},mode:"javascript",defaultCode:this.state.code,showGutter:!0,ignorableErrors:ar,setHeightToLineCount:!0,maxLines:1e4,blur:this.props.blur}),ue.a.createElement(Kn,{code:this.state.code,beautifiedCode:this.beautify}),this.getZenModeOverlay())}}])&&er(n.prototype,r),o&&er(n,o),t}(ue.a.Component);function sr(e){return(sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lr(e,t){return!t||"object"!==sr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ur(e){return(ur=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dr(e,t){return(dr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}or(ir,"defaultProps",{id:"code-editor",className:"",defaultCode:"",title:"",docLink:"",allowZenMode:!0,blur:function(){}});var pr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),lr(this,ur(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dr(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return ue.a.createElement("div",{className:"bordered-box"},ue.a.createElement("div",{className:"padded-box"},this.props.children))}}])&&cr(n.prototype,r),o&&cr(n,o),t}(ue.a.Component),fr={LAYOUT_ORIENTATION:{TABLE:"LAYOUT_TABLE",METADATA:"LAYOUT_METADATA",JSON:"LAYOUT_JSON"},INDEX_RESULTS_DOC_TYPE:{MANGO_INDEX:"MangoIndex",MANGO_QUERY:"MangoQueryResult",VIEW:"view"},INDEX_RESULTS_STYLE:{TEXT_OVERFLOW_TRUNCATED:"truncated",TEXT_OVERFLOW_FULL:"full",FONT_SIZE_SMALL:"small-font",FONT_SIZE_LARGE:"large-font",FONT_SIZE_MEDIUM:"medium-font"}};function mr(e){return(mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yr(e){return(yr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function br(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gr(e,t){return(gr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Er(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _r=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,o=(e=yr(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==mr(o)&&"function"!=typeof o?br(r):o,Er(br(n),"onChange",(function(e){e.preventDefault(),n.props.docChecked(n.props.doc.id,n.props.doc._rev)})),Er(br(n),"getUrlFragment",(function(){return n.props.children?ue.a.createElement("div",{className:"doc-edit-symbol pull-right",title:"Edit document"},n.props.children):""})),Er(br(n),"getExtensionIcons",(function(){var e=ie.getExtensions("DocList:icons");return _.map(e,(function(e,t){return ue.a.createElement(e,{doc:n.props.doc,key:t})}))})),Er(br(n),"getDocumentTypeIcon",(function(){return n.props.docType===fr.INDEX_RESULTS_DOC_TYPE.MANGO_INDEX?-1!==n.props.docContent.indexOf('"partitioned": true')?ue.a.createElement("i",{className:"fonticon-documents",title:"Partitioned index"}):ue.a.createElement("i",{className:"fonticon-document",title:"Global index"}):null})),Er(br(n),"getCheckbox",(function(){return n.props.isDeletable?ue.a.createElement("div",{className:"checkbox inline"},ue.a.createElement("input",{id:"checkbox-"+n.props.docIdentifier,checked:n.props.checked,"data-checked":n.props.checked,type:"checkbox",onChange:n.onChange,className:"js-row-select"}),ue.a.createElement("label",{onClick:n.onChange,className:"label-checkbox-doclist",htmlFor:"checkbox-"+n.props.docIdentifier})):ue.a.createElement("div",{className:"checkbox-dummy"})})),Er(br(n),"onClick",(function(e){n.props.onClick(n.props.docIdentifier,n.props.doc,e)})),Er(br(n),"getDocContent",(function(){if(_.isEmpty(n.props.docContent))return null;var e=n.props.docContent,t=!1;if(n.props.truncate){var r=_n.truncateDoc(n.props.docContent,n.props.maxRows);t=r.isTruncated,e=r.content}var o=n.props.resultsStyle.fontSize,a=wt()("prettyprint",{"prettyprint--small":o===fr.INDEX_RESULTS_STYLE.FONT_SIZE_SMALL,"prettyprint--large":o===fr.INDEX_RESULTS_STYLE.FONT_SIZE_LARGE});return ue.a.createElement("div",{className:"doc-data"},ue.a.createElement("pre",{className:a},e),t?ue.a.createElement("div",{className:"doc-content-truncated"},"(truncated)"):null)})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gr(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return ue.a.createElement("div",{"data-id":this.props.docIdentifier,className:"doc-row"},ue.a.createElement("div",{className:"custom-inputs"},this.getCheckbox()),ue.a.createElement("div",{className:"doc-item"},ue.a.createElement("header",{onClick:this.onClick},ue.a.createElement("span",{className:"header-keylabel"},this.getDocumentTypeIcon(),this.props.keylabel),ue.a.createElement("span",{className:"header-doc-id"},this.props.header?'"'+this.props.header+'"':null),this.getUrlFragment(),ue.a.createElement("div",{className:"doc-item-extension-icons pull-right"},this.getExtensionIcons())),this.getDocContent()),ue.a.createElement("div",{className:"clearfix"}))}}])&&hr(n.prototype,r),o&&hr(n,o),t}(ue.a.Component);Er(_r,"propTypes",{docIdentifier:et.a.string.isRequired,docType:et.a.string,docChecked:et.a.func.isRequired,truncate:et.a.bool,maxRows:et.a.number,resultsStyle:et.a.object}),Er(_r,"defaultProps",{truncate:!0,maxRows:500,resultsStyle:{fontSize:fr.INDEX_RESULTS_STYLE.FONT_SIZE_MEDIUM},docType:fr.INDEX_RESULTS_DOC_TYPE.VIEW});var vr=function(){return ue.a.createElement("div",{className:"loading-lines"},ue.a.createElement("div",{id:"line1"}," "),ue.a.createElement("div",{id:"line2"}," "),ue.a.createElement("div",{id:"line3"}," "),ue.a.createElement("div",{id:"line4"}," "))};function Or(e){return(Or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dr(e){return(Dr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wr(e,t){return(wr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Tr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Cr=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,o=(e=Dr(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==Or(o)&&"function"!=typeof o?Nr(r):o,Tr(Nr(n),"getIcon",(function(){return n.props.showIcon?ue.a.createElement("i",{className:"icon "+n.props.customIcon}):null})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wr(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.onClick,n=e.buttonType,r=e.id,o=e.style,a=e.text,i=e.disabled;return ue.a.createElement("button",{onClick:t,type:"submit",disabled:i,"data-id":this.props["data-id"],className:"btn save "+n,id:r,style:o},this.getIcon(),a)}}])&&Sr(n.prototype,r),o&&Sr(n,o),t}(ue.a.Component);Tr(Cr,"propTypes",{showIcon:et.a.bool,id:et.a.string,customIcon:et.a.string,style:et.a.object,buttonType:et.a.string,"data-id":et.a.string,onClick:et.a.func,disabled:et.a.bool}),Tr(Cr,"defaultProps",{disabled:!1,showIcon:!0,customIcon:"fonticon-ok-circled",buttonType:"btn-primary",style:{},"data-id":null,onClick:function(){}});var Ir=n(116),Ar=n.n(Ir);function Rr(e){return(Rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xr(e,t,n){return t&&Lr(e.prototype,t),n&&Lr(e,n),e}function kr(e,t){return!t||"object"!==Rr(t)&&"function"!=typeof t?Ur(e):t}function jr(e){return(jr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ur(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qr(e,t)}function qr(e,t){return(qr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Vr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fr=function(e){function t(){var e,n;Pr(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return Vr(Ur(n=kr(this,(e=jr(t)).call.apply(e,[this].concat(o)))),"createSectionLinks",(function(e){return e?e.map((function(e,t){return n.createEntry(e,t)})):null})),Vr(Ur(n),"createEntry",(function(e,t){return ue.a.createElement("li",{key:t},ue.a.createElement("a",{className:wt()("icon",e.icon,{"fonticon-placeholder":!e.icon}),"data-bypass":e.external?"true":"",href:e.url,onClick:e.onClick,target:e.external?"_blank":""},e.title))})),Vr(Ur(n),"createSectionTitle",(function(e,t){return e?ue.a.createElement("li",{key:t,className:"header-label"},e):null})),Vr(Ur(n),"createSection",(function(){return n.props.links.map((function(e,t){return e.title&&e.links?[n.createSectionTitle(e.title,"title_"+t),n.createSectionLinks(e.links)]:n.createEntry(e,"el"+t)}))})),n}return Mr(t,e),xr(t,[{key:"render",value:function(){var e=this.createSection(),t=this.props.hideArrow?"":"arrow",n="button"===this.props.toggleType?Br:Hr;return ue.a.createElement(Tt.d,{id:"dropdown-menu"},ue.a.createElement(n,{bsRole:"toggle",icon:this.props.icon}),ue.a.createElement(Kr,{bsRole:"menu",className:t},e))}}]),t}(ue.a.Component);Vr(Fr,"defaultProps",{icon:"fonticon-plus-circled",hideArrow:!1,toggleType:"link"}),Vr(Fr,"propTypes",{icon:et.a.string,hideArrow:et.a.bool,links:et.a.array.isRequired,toggleType:et.a.string.isRequired});var Br=function(e){function t(e,n){var r;return Pr(this,t),(r=kr(this,jr(t).call(this,e,n))).handleClick=r.handleClick.bind(Ur(r)),r}return Mr(t,e),xr(t,[{key:"handleClick",value:function(e){e.preventDefault(),this.props.onClick(e)}},{key:"render",value:function(){return ue.a.createElement(Tt.a,{onClick:this.handleClick},ue.a.createElement("i",{className:"dropdown-toggle "+this.props.icon,style:{fontSize:"1rem",boxShadow:"0px 0px 0px"}}),this.props.children)}}]),t}(ue.a.Component),Hr=function(e){function t(e,n){var r;return Pr(this,t),(r=kr(this,jr(t).call(this,e,n))).handleClick=r.handleClick.bind(Ur(r)),r}return Mr(t,e),xr(t,[{key:"handleClick",value:function(e){e.preventDefault(),this.props.onClick(e)}},{key:"render",value:function(){return ue.a.createElement("a",{className:"dropdown-toggle icon "+this.props.icon,style:{fontSize:"1rem",boxShadow:"0px 0px 0px"},onClick:this.handleClick},this.props.children)}}]),t}(ue.a.Component),Kr=function(e){function t(e,n){return Pr(this,t),kr(this,jr(t).call(this,e,n))}return Mr(t,e),xr(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.open,r=e.onClose,o=e.className;return ue.a.createElement(Ar.a,{disabled:!n,onRootClose:r},ue.a.createElement("ul",{className:wt()("dropdown-menu",o),role:"menu","aria-labelledby":"dLabel"},t))}}]),t}(ue.a.Component),Gr=n(16);function Xr(e){return(Xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wr(){return(Wr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function zr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qr(e,t,n){return t&&Yr(e.prototype,t),n&&Yr(e,n),e}function Zr(e,t){return!t||"object"!==Xr(t)&&"function"!=typeof t?$r(e):t}function Jr(e){return(Jr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eo(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&to(e,t)}function to(e,t){return(to=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function no(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ro=function(e){function t(e){var n;return zr(this,t),no($r(n=Zr(this,Jr(t).call(this,e))),"getChildren",(function(e){var t=e[0].style,r="tray show-tray "+n.props.className;return ue.a.createElement("div",{key:"1",id:n.props.id,style:{opacity:t.opacity,top:t.top+"px"},className:r},n.props.children)})),no($r(n),"willEnter",(function(){return{opacity:Object(Gr.spring)(1),top:Object(Gr.spring)(64)}})),no($r(n),"willLeave",(function(){return{opacity:Object(Gr.spring)(0),top:Object(Gr.spring)(30)}})),no($r(n),"getDefaultStyles",(function(){return[{key:"1",style:{opacity:0,top:30}}]})),no($r(n),"getStyles",(function(e){return e?e.map((function(e){return{key:"1",style:e.style}})):[{key:"1",style:n.willEnter()}]})),e.container||(n.container=$r(n)),n}return eo(t,e),Qr(t,[{key:"render",value:function(){return ue.a.createElement(Tt.g,{show:this.props.contentVisible,onHide:this.props.closeTray,placement:"bottom",container:this.props.container,rootClose:!0,onEnter:this.props.onEnter},ue.a.createElement(Gr.TransitionMotion,{defaultStyles:this.getDefaultStyles(),styles:this.getStyles(),willLeave:this.willLeave,willEnter:this.willEnter},this.getChildren))}}]),t}(ue.a.Component);no(ro,"propTypes",{contentVisible:et.a.bool.isRequired,closeTray:et.a.func.isRequired,onEnter:et.a.func,container:et.a.object}),no(ro,"defaultProps",{onEnter:function(){}});var oo=function(e){function t(){var e,n;zr(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return no($r(n=Zr(this,(e=Jr(t)).call.apply(e,[this].concat(o)))),"renderChildren",(function(){return ue.a.Children.map(n.props.children,(function(e){var t={};return Object.keys(n.props).filter((function(e){return Object.prototype.hasOwnProperty.call(n.props,e)})).map((function(e){return t[e]=n.props[e]})),ue.a.cloneElement(e,t)}))})),n}return eo(t,e),Qr(t,[{key:"render",value:function(){return ue.a.createElement("div",null,this.renderChildren())}}]),t}(ue.a.Component);function ao(e){return(ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function io(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function so(e){return(so=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function co(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lo(e,t){return(lo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function uo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}no(oo,"defaultProps",{className:""});var po=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,o=(e=so(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==ao(o)&&"function"!=typeof o?co(r):o,uo(co(n),"state",{inputValue:"",disableSubmit:!0}),uo(co(n),"close",(function(e){e&&e.preventDefault(),n.setState({inputValue:"",disableSubmit:!0}),n.props.showHide({showModal:!1})})),uo(co(n),"open",(function(){n.props.showHide({showModal:!0})})),uo(co(n),"getDatabaseName",(function(){return n.props.modalProps.dbId.trim()})),uo(co(n),"onInputChange",(function(e){var t=e.target.value.trim();n.setState({inputValue:t}),n.setState({disableSubmit:t!==n.getDatabaseName()})})),uo(co(n),"onDeleteClick",(function(e){e.preventDefault(),yn.deleteDatabase(n.getDatabaseName(),n.props.onSuccess)})),uo(co(n),"onInputKeypress",(function(e){13===e.keyCode&&!0!==n.state.disableSubmit&&yn.deleteDatabase(n.getDatabaseName(),n.props.onSuccess)})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lo(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.modalProps.isSystemDatabase,t=this.props.modalProps.showDeleteModal,n=this.props.modalProps.dbId,r=e?ue.a.createElement("p",{style:{color:"#d14"},className:"warning"},ue.a.createElement("b",null,"You are about to delete a system database, be careful!")):null;return ue.a.createElement(Tt.f,{dialogClassName:"delete-db-modal",show:t,onHide:this.close},ue.a.createElement(Tt.f.Header,{closeButton:!0},ue.a.createElement(Tt.f.Title,null,"Confirm Deletion")),ue.a.createElement(Tt.f.Body,null,r,ue.a.createElement("p",null,"Warning: This action will permanently delete ",ue.a.createElement("code",null,n),". To confirm the deletion of the database and all of the database's documents, you must enter the database's name."),ue.a.createElement("input",{type:"text",className:"input-block-level",onKeyUp:this.onInputKeypress,onChange:this.onInputChange,autoFocus:!0})),ue.a.createElement(Tt.f.Footer,null,ue.a.createElement("a",{href:"#",onClick:this.close,"data-bypass":"true",className:"cancel-link"},"Cancel"),ue.a.createElement("button",{disabled:this.state.disableSubmit,onClick:this.onDeleteClick,className:"btn btn-danger delete"},ue.a.createElement("i",{className:"icon icon-trash"})," Delete Database")))}}])&&io(n.prototype,r),o&&io(n,o),t}(ue.a.Component);uo(po,"propTypes",{showHide:et.a.func.isRequired,modalProps:et.a.object,onSuccess:et.a.func});var fo=function(e){var t=e.selected,n=e.text,r=e.onChange,o=e.iconClass,a=e.badgeText,i=t?"tab-element-checked":"",s=null;return a&&(s=ue.a.createElement("span",{className:"tab-element-badge"},a)),ue.a.createElement("li",{className:"component-tab-element ".concat(i)},ue.a.createElement("label",null,ue.a.createElement("div",{className:"tab-element-indicator-wrapper"},ue.a.createElement("div",{className:"tab-element-indicator"})),ue.a.createElement("div",{className:"tab-element-content"},ue.a.createElement("i",{className:o}),ue.a.createElement("input",{type:"radio",value:n,checked:t,onChange:r}),n,s)))};fo.propTypes={selected:et.a.bool.isRequired,text:et.a.string.isRequired,onChange:et.a.func.isRequired,iconClass:et.a.string,badgeText:et.a.string};var mo,ho=function(e){var t=e.children;return ue.a.createElement("ul",{className:"component-tab-element-wrapper"},t)},yo=n(326),bo=n.n(yo);function go(e){return(go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Eo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _o(e){return(_o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oo(e,t){return(Oo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var So=function(){mo&&window.clearInterval(mo)},Do=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=_o(t).call(this,e))||"object"!==go(o)&&"function"!=typeof o?vo(r):o).state={value:n.props.startValue},n.updatePollingFreq=n.updatePollingFreq.bind(vo(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oo(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.setPollingCounter(this.state.value)}},{key:"componentWillUnmount",value:function(){So()}},{key:"setPollingCounter",value:function(e){var t,n,r=this.props,o=r.min,a=r.max,i=r.onPoll;this.setState({value:e}),0===e||e<o||e>a?So():(t=1e3*e,n=function(){return i()},So(),mo=window.setInterval(n,t))}},{key:"updatePollingFreq",value:function(e){this.setPollingCounter(parseInt(e.target.value,10))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.startValue!==e.startValue&&this.setPollingCounter(e.startValue)}},{key:"render",value:function(){var e=this.props,t=e.stepSize,n=e.min,r=e.max,o=e.valueUnits,a=this.state.value,i=function(e,t,n,r){var o=parseInt(e,10);if(0===o||o>n||o<r)return"off";if(o<60&&"minute"===t)return"".concat(o," seconds");var a=o;return"minute"===t&&(a=Math.floor(o/60)),"".concat(a," ").concat(1===a?t:"".concat(t,"s"))}(a,o,r,n),s="off"===i?"faux__polling-info-value--off":"faux__polling-info-value--active";return ue.a.createElement("div",{className:"faux__polling"},ue.a.createElement("div",{className:"faux__polling-info"},ue.a.createElement("span",{className:"faux__polling-info-text"},"Polling Interval"),ue.a.createElement("span",{className:"faux__polling-info-value faux__polling-info-value ".concat(s)},i)),ue.a.createElement(bo.a,{onChange:this.updatePollingFreq,className:"faux__polling-info-slider",type:"range",value:a,min:n,max:r+t,step:t}))}}])&&Eo(n.prototype,r),o&&Eo(n,o),t}(ue.a.Component);Do.defaultProps={startValue:0,min:0,valueUnits:"minute"},Do.propTypes={startValue:et.a.number,valueUnits:et.a.string,min:et.a.number,max:et.a.number.isRequired,stepSize:et.a.number.isRequired,onPoll:et.a.func.isRequired};var No=function(e){var t=e.refresh;return ue.a.createElement("div",{className:"faux__refresh-btn"},ue.a.createElement("a",{className:"faux__refresh-link",href:"#","data-bypass":"true",onClick:function(e){e.preventDefault(),t()}},ue.a.createElement("i",{className:"faux__refresh-icon fonticon-arrows-cw"}),"Refresh"))};No.propTypes={refresh:et.a.func.isRequired};var wo,To=n(327),Co=n.n(To);function Io(e){return(Io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ao(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ro(e,t){return!t||"object"!==Io(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Po(e){return(Po=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Lo(e,t){return(Lo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var xo=function(e,t){(wo=new Co.a("#copy-"+e)).on("success",(function(){t()}))},ko=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ro(this,Po(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lo(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){xo(this.props.uniqueKey,this.props.onClipboardClick)}},{key:"componentWillUnmount",value:function(){wo.destroy()}},{key:"componentDidUpdate",value:function(){xo(this.props.uniqueKey,this.props.onClipboardClick)}},{key:"getClipboardElement",value:function(){return"icon"===this.props.displayType?ue.a.createElement("i",{"aria-hidden":"true",className:"fontawesome icon-paste"}):this.props.textDisplay}},{key:"getClipboardButton",value:function(){var e="input"===this.props.displayType?"btn copy-button":"copy clipboard-copy-element";return ue.a.createElement("button",{"aria-label":"Copy to Clipboard",className:e,"data-clipboard-text":this.props.text,title:this.props.title,id:"copy-"+this.props.uniqueKey},this.getClipboardElement())}},{key:"render",value:function(){return"input"===this.props.displayType?ue.a.createElement("p",null,ue.a.createElement("input",{type:"text",className:"input-xxlarge text-field-to-copy",readOnly:!0,value:this.props.text}),this.getClipboardButton()):this.getClipboardButton()}}])&&Ao(n.prototype,r),o&&Ao(n,o),t}(ue.a.Component);function jo(e){return(jo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Uo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mo(e,t){return!t||"object"!==jo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qo(e){return(qo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vo(e,t){return(Vo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}ko.defaultProps={displayType:"icon",textDisplay:"Copy",title:"Copy to clipboard",onClipboardClick:function(){}},ko.propTypes={text:et.a.string.isRequired,displayType:et.a.oneOf(["icon","text","input"]),uniqueKey:et.a.string.isRequired,onClipboardClick:et.a.func.isRequired};var Fo=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Mo(this,qo(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vo(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.selectedTab,n=e.tabs,r=n.map((function(e,n){return ue.a.createElement(fo,{key:n,selected:e.name===t,text:e.name,badgeText:e.badgeText,onChange:function(){ie.navigate(e.route,{redirect:!0})},iconClass:""})})),o=n.reduce((function(e,n){return n.name===t?n:e}),{});return o.component?ue.a.createElement("div",{className:"tab__wrapper"},ue.a.createElement(ho,null,r),ue.a.createElement("div",{className:"tab__container"},ue.a.createElement(o.component,null))):null}}])&&Uo(n.prototype,r),o&&Uo(n,o),t}(ue.a.Component);Fo.propTypes={tabs:et.a.array.isRequired,selectedTab:et.a.string.isRequired};var Bo=n(29);function Ho(e){return(Ho="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ko(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function Go(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wo(e,t){return!t||"object"!==Ho(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zo(e){return(zo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yo(e,t){return(Yo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Qo=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Wo(this,zo(t).call(this,e))).lastCall=void 0,n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yo(e,t)}(t,e),n=t,(r=[{key:"wrapThrottler",value:function(e){var t=this;return e?function(n,r){t.lastCall&&clearTimeout(t.lastCall),t.lastCall=setTimeout((function(){e(n,r)}),400)}:function(){}}},{key:"render",value:function(){var e=this.wrapThrottler(this.props.loadOptions).bind(this),t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ko(n,!0).forEach((function(t){Go(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ko(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.props,{loadOptions:e});return ue.a.createElement(Bo.a.Async,t)}}])&&Xo(n.prototype,r),o&&Xo(n,o),t}(ue.a.Component),Zo={Accordion:function(e){var t=e.children,n=e.className,r=e.style,o=wt()("faux--accordion",n);return ue.a.createElement("ul",{className:o,style:r},t)},AccordionItem:xt,BadgeList:Gt,Badge:Xt,BulkActionComponent:an,ConfirmButton:Cr,ToggleHeaderButton:Jt,StyledSelect:pn,CodeEditorPanel:ir,CodeEditor:xn,StringEditModal:Tn,ZenModeOverlay:Jn,Beautify:Kn,PaddedBorderedBox:pr,Polling:Do,Document:_r,LoadLines:vr,MenuDropDown:Fr,TrayContents:ro,TrayWrapper:oo,connectToStores:function(e,t,n){return function(r){function o(){var e,t;zr(this,o);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return no($r(t=Zr(this,(e=Jr(o)).call.apply(e,[this].concat(a)))),"state",n(t.props)),no($r(t),"onChange",(function(){t.setState(n(t.props))})),no($r(t),"handleStoresChanged",(function(){t.setState(n(t.props))})),t}return eo(o,r),Qr(o,[{key:"componentDidMount",value:function(){var e=this;t.forEach((function(t){t.on("change",e.onChange,e)}))}},{key:"componentWillUnmount",value:function(){t.forEach(function(e){e.off("change",this.onChange)}.bind(this))}},{key:"render",value:function(){return ue.a.createElement(e,Wr({},this.state,this.props))}}]),o}(ue.a.Component)},DeleteDatabaseModal:po,TabElement:fo,TabElementWrapper:ho,RefreshBtn:No,Copy:ko,TabWindowWrapper:Fo,ThrottledReactSelectAsync:Qo},Jo={};Jo.DeleteDbModalStore=ie.Store.extend({initialize:function(){this.reset()},reset:function(){this._deleteModal={showDeleteModal:!1,dbId:"",isSystemDatabase:!1}},setDeleteModal:function(e){e.isSystemDatabase=ce.utils.isSystemDatabase(e.dbId),this._deleteModal=e},getShowDeleteDatabaseModal:function(){return this._deleteModal},dispatch:function(e){switch(e.type){case hn.CMPNTS_DATABASES_SHOWDELETE_MODAL:this.setDeleteModal(e.options);break;default:return}this.triggerChange()}}),Jo.deleteDbModalStore=new Jo.DeleteDbModalStore,Jo.deleteDbModalStore.dispatchToken=ie.dispatcher.register(Jo.deleteDbModalStore.dispatch.bind(Jo.deleteDbModalStore));var $o=Jo;function ea(e){return(ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ta(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function na(e,t){return!t||"object"!==ea(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ra(e){return(ra=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oa(e,t){return(oa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var aa=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),na(this,ra(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oa(e,t)}(t,e),n=t,(r=[{key:"perPageChange",value:function(e){var t=parseInt(e.target.value,10);this.props.perPageChange(t)}},{key:"getOptions",value:function(){return _.map(this.props.options,(function(e){return ue.a.createElement("option",{value:e,key:e},e)}))}},{key:"render",value:function(){return ue.a.createElement("div",{id:"per-page"},ue.a.createElement("label",{htmlFor:"select-per-page",className:"drop-down inline"},this.props.label,"  ",ue.a.createElement("select",{id:"select-per-page",onChange:this.perPageChange.bind(this),value:this.props.perPage.toString(),className:"input-small"},this.getOptions())))}}])&&ta(n.prototype,r),o&&ta(n,o),t}(ue.a.Component);function ia(e){return(ia="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ca(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function la(e,t,n){return t&&ca(e.prototype,t),n&&ca(e,n),e}function ua(e,t){return!t||"object"!==ia(t)&&"function"!=typeof t?pa(e):t}function da(e){return(da=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fa(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ma(e,t)}function ma(e,t){return(ma=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ha(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}aa.defaultProps={label:"Documents per page: ",options:[5,10,20,30,50,100]},aa.propTypes={perPage:et.a.number.isRequired,perPageChange:et.a.func.isRequired,label:et.a.string,options:et.a.array};var ya=function(e){function t(){var e,n;sa(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return ha(pa(n=ua(this,(e=da(t)).call.apply(e,[this].concat(o)))),"getClasses",(function(){var e={js:"lang-js"},t="prettyprint";return _.has(e,n.props.lang)&&(t+=" "+e[n.props.lang]),t})),n}return fa(t,e),la(t,[{key:"componentDidMount",value:function(){prettyPrint()}},{key:"render",value:function(){var e=JSON.stringify(this.props.code,null," ");return ue.a.createElement("div",null,ue.a.createElement("pre",{className:this.getClasses()},e))}}]),t}(ue.a.Component);ha(ya,"defaultProps",{lang:"js"});var ba=function(e){function t(){var e,n;sa(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return ha(pa(n=ua(this,(e=da(t)).call.apply(e,[this].concat(o)))),"getVisiblePages",(function(e,t){var r,o;if(t<n.props.maxNavPages)r=1,o=t+1;else{var a=Math.floor(n.props.maxNavPages/2);o=e+a,(r=e-a)<=1&&(r=1,o=n.props.maxNavPages+1),o>t+1&&(r=t-(n.props.maxNavPages-1),o=t+1)}return{from:r,to:o}})),ha(pa(n),"createItemsForPage",(function(e){return _.range(e.from,e.to).map((function(e){return ue.a.createElement("li",{key:e,className:n.props.page===e?"active":null},n.getLink(e,e))}))})),ha(pa(n),"getLink",(function(e,t){return n.props.onClick?ue.a.createElement("a",{onClick:n.getOnPageClick(e),dangerouslySetInnerHTML:{__html:t}}):ue.a.createElement("a",{href:n.props.urlPrefix+e+n.props.urlSuffix,dangerouslySetInnerHTML:{__html:t}})})),ha(pa(n),"getTotalPages",(function(){return 0===n.props.total?1:Math.ceil(n.props.total/n.props.perPage)})),n}return fa(t,e),la(t,[{key:"getOnPageClick",value:function(e){var t=this;return function(n){n&&n.preventDefault(),t.props.onClick(e)}}},{key:"render",value:function(){var e=this.getTotalPages(),t=this.getVisiblePages(this.props.page,e),n=this.createItemsForPage(t),r=Math.max(this.props.page-1,1),o=Math.min(this.props.page+1,e);return ue.a.createElement("ul",{className:"pagination"},ue.a.createElement("li",{className:1===this.props.page?"disabled":null},this.getLink(r,"&laquo;")),n,ue.a.createElement("li",{className:this.props.page<e?null:"disabled"},this.getLink(o,"&raquo;")))}}]),t}(ue.a.Component);ha(ba,"defaultProps",{perPage:ie.constants.MISC.DEFAULT_PAGE_SIZE,onClick:null,page:1,total:0,urlPrefix:"",urlSuffix:"",maxNavPages:10});var ga=function(e){function t(){var e,n;sa(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return ha(pa(n=ua(this,(e=da(t)).call.apply(e,[this].concat(o)))),"close",(function(e){e&&e.preventDefault(),n.props.onClose()})),n}return fa(t,e),la(t,[{key:"render",value:function(){var e=ue.a.createElement("p",null,this.props.text);_.isString(this.props.text)||(e=this.props.text);var t="btn "+this.props.buttonClass;return ue.a.createElement(Tt.f,{dialogClassName:"confirmation-modal",show:this.props.visible,onHide:this.close},ue.a.createElement(Tt.f.Header,{closeButton:!0},ue.a.createElement(Tt.f.Title,null,this.props.title)),ue.a.createElement(Tt.f.Body,null,e),ue.a.createElement(Tt.f.Footer,null,ue.a.createElement("a",{href:"#","data-bypass":"true",className:"cancel-link",onClick:this.close},"Cancel"),ue.a.createElement("button",{className:t,onClick:this.props.onSubmit},ue.a.createElement("i",{className:"fonticon-ok-circled"})," ",this.props.successButtonLabel)))}}]),t}(ue.a.Component);ha(ga,"propTypes",{visible:et.a.bool.isRequired,text:et.a.oneOfType([et.a.string,et.a.element]).isRequired,onClose:et.a.func.isRequired,onSubmit:et.a.func.isRequired}),ha(ga,"defaultProps",{visible:!1,title:"Please confirm",text:"",successButtonLabel:"Okay",buttonClass:"btn-primary",onClose:function(){},onSubmit:function(){}});var Ea={CodeFormat:ya,Pagination:ba,ConfirmationModal:ga};function _a(e){return(_a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function va(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Oa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sa(e,t,n){return t&&Oa(e.prototype,t),n&&Oa(e,n),e}function Da(e,t){return!t||"object"!==_a(t)&&"function"!=typeof t?wa(e):t}function Na(e){return(Na=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ta(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ca(e,t)}function Ca(e,t){return(Ca=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ia(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Aa=Ge.databasesStore,Ra=$o.deleteDbModalStore,Pa=Zo.Accordion,La=Zo.AccordionItem,xa=Zo.DeleteDatabaseModal,ka=Zo.ToggleHeaderButton,ja=Zo.TrayContents,Ua=function(e){function t(e){var n;return va(this,t),Ia(wa(n=Da(this,Na(t).call(this,e))),"getStoreState",(function(){return{dbList:Aa.getDbList(),loading:Aa.isLoading(),showDeleteDatabaseModal:Ra.getShowDeleteDatabaseModal(),showPartitionedColumn:Aa.isPartitionedDatabasesAvailable(),page:Aa.getPage(),limit:Aa.getLimit()}})),Ia(wa(n),"onChange",(function(){n.setState(n.getStoreState())})),Ia(wa(n),"state",n.getStoreState()),n.reloadAfterDatabaseDeleted=n.reloadAfterDatabaseDeleted.bind(wa(n)),n}return Ta(t,e),Sa(t,[{key:"componentDidMount",value:function(){Aa.on("change",this.onChange,this),Ra.on("change",this.onChange,this),this.loadData()}},{key:"componentDidUpdate",value:function(e,t){t.page===this.state.page&&t.limit===this.state.limit||this.loadData()}},{key:"loadData",value:function(){Je.init({page:this.state.page,limit:this.state.limit})}},{key:"componentWillUnmount",value:function(){Aa.off("change",this.onChange,this),Ra.off("change",this.onChange,this)}},{key:"reloadAfterDatabaseDeleted",value:function(){var e=this.state.page;e>1&&1===this.state.dbList.length&&(e-=1),Je.init({page:e,limit:this.state.limit})}},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.dbList;return ue.a.createElement(Ma,{showDeleteDatabaseModal:this.state.showDeleteDatabaseModal,dbList:n,loading:t,showPartitionedColumn:this.state.showPartitionedColumn,onDatabaseDeleted:this.reloadAfterDatabaseDeleted})}}]),t}(ue.a.Component),Ma=function(e){function t(){var e,n;va(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return Ia(wa(n=Da(this,(e=Na(t)).call.apply(e,[this].concat(o)))),"createRows",(function(e){return e.map((function(e,t){return ue.a.createElement(qa,{item:e,key:t,showPartitionedColumn:n.props.showPartitionedColumn})}))})),Ia(wa(n),"getExtensionColumns",(function(){var e=ie.getExtensions("DatabaseTable:head");return _.map(e,(function(e,t){return ue.a.createElement(e,{key:t})}))})),Ia(wa(n),"showDeleteDatabaseModal",(function(){yn.showDeleteDatabaseModal({showDeleteModal:!n.props.showDeleteDatabaseModal.showDeleteModal})})),n}return Ta(t,e),Sa(t,[{key:"render",value:function(){if(this.props.loading)return ue.a.createElement("div",{className:"view"},ue.a.createElement(Zo.LoadLines,null));var e=this.createRows(this.props.dbList);return ue.a.createElement("div",{className:"view"},ue.a.createElement(xa,{showHide:this.showDeleteDatabaseModal,modalProps:this.props.showDeleteDatabaseModal,onSuccess:this.props.onDatabaseDeleted}),ue.a.createElement("table",{className:"table table-striped fauxton-table-list databases"},ue.a.createElement("thead",null,ue.a.createElement("tr",null,ue.a.createElement("th",null,"Name"),ue.a.createElement("th",null,"Size"),ue.a.createElement("th",null,"# of Docs"),this.props.showPartitionedColumn?ue.a.createElement("th",null,"Partitioned"):null,this.getExtensionColumns(),ue.a.createElement("th",null,"Actions"))),ue.a.createElement("tbody",null,e)))}}]),t}(ue.a.Component);Ia(Ma,"propTypes",{dbList:et.a.array.isRequired,showDeleteDatabaseModal:et.a.object.isRequired,loading:et.a.bool.isRequired,showPartitionedColumn:et.a.bool.isRequired,onDatabaseDeleted:et.a.func});var qa=function(e){function t(){var e,n;va(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return Ia(wa(n=Da(this,(e=Na(t)).call.apply(e,[this].concat(o)))),"getExtensionColumns",(function(e){var t=ie.getExtensions("DatabaseTable:databaseRow");return _.map(t,(function(t,n){return ue.a.createElement(t,{row:e,key:n})}))})),Ia(wa(n),"showDeleteDatabaseModal",(function(e){yn.showDeleteDatabaseModal({showDeleteModal:!0,dbId:e})})),n}return Ta(t,e),Sa(t,[{key:"render",value:function(){var e=this.props.item,t=e.encodedId,n=e.id,r=e.url,o=e.dataSize,a=e.docCount,i=e.docDelCount,s=e.showTombstoneWarning,c=e.failed,l=e.isPartitioned,u=s?ue.a.createElement(Va,{docCount:a,docDelCount:i}):null;if(c)return ue.a.createElement("tr",null,ue.a.createElement("td",{"data-name":"database-load-fail-name"},n),ue.a.createElement("td",{colSpan:"4",className:"database-load-fail"},"This database failed to load."));var d=this.props.showPartitionedColumn?ue.a.createElement("td",null,l?"Yes":"No"):null;return ue.a.createElement("tr",null,ue.a.createElement("td",null,ue.a.createElement("a",{href:r},n)),ue.a.createElement("td",null,o),ue.a.createElement("td",null,a," ",u),d,this.getExtensionColumns(e),ue.a.createElement("td",{className:"database-actions"},ue.a.createElement("a",{className:"db-actions btn fonticon-replicate set-replication-start","aria-label":"Replicate ".concat(n),title:"Replicate "+name,href:"#/replication/_create/"+t}),ue.a.createElement("a",{"aria-label":"Set permissions for ".concat(n),className:"db-actions btn icon-lock set-permissions",title:"Set permissions for "+name,href:"#/database/"+t+"/permissions"}),ue.a.createElement("a",{"aria-label":"Delete ".concat(n),className:"db-actions btn icon-trash",onClick:this.showDeleteDatabaseModal.bind(this,n,t),title:"Delete "+n,"data-bypass":"true"})))}}]),t}(ue.a.Component);Ia(qa,"propTypes",{item:et.a.shape({id:et.a.string.isRequired,encodedId:et.a.string.isRequired,url:et.a.string.isRequired,failed:et.a.bool.isRequired,dataSize:et.a.string,docCount:et.a.number,docDelCount:et.a.number,isPartitioned:et.a.bool,showTombstoneWarning:et.a.bool}).isRequired,showPartitionedColumn:et.a.bool.isRequired});var Va=function(e){var t=e.docCount,n=e.docDelCount,r="This database has just ".concat(t," docs and ").concat(n," deleted docs"),o=ue.a.createElement(Tt.k,{id:"graveyard-tooltip"},r);return ue.a.createElement(Tt.h,{placement:"top",overlay:o},ue.a.createElement("i",{className:"js-db-graveyard icon icon-exclamation-sign",title:r}))},Fa=function(e){function t(e){var n;return va(this,t),(n=Da(this,Na(t).call(this,e))).state=n.getStoreState(),n}return Ta(t,e),Sa(t,[{key:"getStoreState",value:function(){return{showPartitionedOption:Aa.isPartitionedDatabasesAvailable()}}},{key:"componentDidMount",value:function(){Aa.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){Aa.off("change",this.onChange,this)}},{key:"onChange",value:function(){this.setState(this.getStoreState())}},{key:"render",value:function(){return ue.a.createElement("div",{className:"header-right right-db-header flex-layout flex-row"},ue.a.createElement(Ha,{loadOptions:Je.fetchAllDbsWithKey}),ue.a.createElement(Ba,{showPartitionedOption:this.state.showPartitionedOption,partitionedDbHelpText:this.props.partitionedDbHelpText}))}}]),t}(ue.a.Component),Ba=function(e){function t(e){var n;return va(this,t),(n=Da(this,Na(t).call(this,e))).state={isPromptVisible:!1,databaseName:"",partitionedSelected:void 0},n.onTrayToggle=n.onTrayToggle.bind(wa(n)),n.closeTray=n.closeTray.bind(wa(n)),n.focusInput=n.focusInput.bind(wa(n)),n.onKeyUpInInput=n.onKeyUpInInput.bind(wa(n)),n.onChange=n.onChange.bind(wa(n)),n.onAddDatabase=n.onAddDatabase.bind(wa(n)),n.onSetPartitioned=n.onSetPartitioned.bind(wa(n)),n.onSetNotPartitioned=n.onSetNotPartitioned.bind(wa(n)),n}return Ta(t,e),Sa(t,[{key:"getI18nText",value:function(e){return this.props.i18n?this.props.i18n[e]:""}},{key:"onTrayToggle",value:function(){this.setState({isPromptVisible:!this.state.isPromptVisible})}},{key:"closeTray",value:function(){this.setState({isPromptVisible:!1})}},{key:"focusInput",value:function(){this.newDbName.focus()}},{key:"onKeyUpInInput",value:function(e){13===e.which&&this.onAddDatabase()}},{key:"onChange",value:function(e){this.setState({databaseName:e.target.value})}},{key:"onAddDatabase",value:function(){if(this.props.showPartitionedOption&&void 0===this.state.partitionedSelected)ie.addNotification({type:"error",msg:"Please select either Partitioned or Non-partitioned",clear:!0});else{var e=this.props.showPartitionedOption?this.state.partitionedSelected:void 0;Je.createNewDatabase(this.state.databaseName,e)}}},{key:"onSetNotPartitioned",value:function(){this.setState({partitionedSelected:!1})}},{key:"onSetPartitioned",value:function(){this.setState({partitionedSelected:!0})}},{key:"partitionedOption",value:function(){if(!this.props.showPartitionedOption)return null;var e=this.props.partitionedDbHelpText?ue.a.createElement(Pa,{className:"partitioned-db-help"},ue.a.createElement(La,{title:"What is a Partitioned Database?"},ue.a.createElement("p",{dangerouslySetInnerHTML:{__html:this.props.partitionedDbHelpText}}))):null;return ue.a.createElement("div",{className:"partitioned-db-section"},ue.a.createElement("label",{htmlFor:"partitioned-db",className:"partitioned-db-label"},"Partitioning"),ue.a.createElement("div",{className:"partitioned-db-options"},ue.a.createElement("input",{id:"partitioned-db",type:"radio",checked:!0===this.state.partitionedSelected,onChange:this.onSetPartitioned}),ue.a.createElement("label",{htmlFor:"partitioned-db"},"Partitioned"),ue.a.createElement("input",{id:"non-partitioned-db",type:"radio",checked:!1===this.state.partitionedSelected,onChange:this.onSetNotPartitioned}),ue.a.createElement("label",{htmlFor:"non-partitioned-db"},"Non-partitioned")),e)}},{key:"render",value:function(){var e=this,t=wt()("new-database-tray",{"new-database-tray--expanded":this.props.showPartitionedOption});return ue.a.createElement("div",null,ue.a.createElement(ka,{selected:this.state.isPromptVisible,toggleCallback:this.onTrayToggle,containerClasses:"header-control-box add-new-database-btn",title:"Create Database",fonticon:"fonticon-new-database",text:"Create Database"}),ue.a.createElement(ja,{className:t,contentVisible:this.state.isPromptVisible,closeTray:this.closeTray,onEnter:this.focusInput},ue.a.createElement("div",{className:"tray-contents"},ue.a.createElement("div",{className:"tray-header"},ue.a.createElement("h3",null,"Create Database")),ue.a.createElement("div",{className:"tray-body"},ue.a.createElement("label",{htmlFor:"js-new-database-name",className:"db-name-label"},"Database name"),ue.a.createElement("input",{id:"js-new-database-name",ref:function(t){return e.newDbName=t},type:"text",value:this.state.databaseName,onChange:this.onChange,onKeyUp:this.onKeyUpInInput,className:"input-xxlarge",placeholder:"database-name"}),this.partitionedOption()),ue.a.createElement("div",{className:"tray-footer"},ue.a.createElement("a",{className:"btn btn-cancel",id:"js-cancel-create-database",onClick:this.closeTray},"Cancel"),ue.a.createElement("a",{className:"btn btn-primary",id:"js-create-database",onClick:this.onAddDatabase},"Create")))))}}]),t}(ue.a.Component);Ia(Ba,"defaultProps",{showPartitionedOption:!1}),Ia(Ba,"propTypes",{showPartitionedOption:et.a.bool.isRequired,partitionedDbHelpText:et.a.string});var Ha=function(e){var t=e.loadOptions;return ue.a.createElement("div",{"data-name":"jump-to-db",className:"faux-header__searchboxwrapper"},ue.a.createElement("div",{className:"faux-header__searchboxcontainer"},ue.a.createElement(Zo.ThrottledReactSelectAsync,{placeholder:"Database name",loadOptions:t,clearable:!1,onChange:function(e){var t=e.value;Je.jumpToDatabase(t)}})))};Ha.propTypes={loadOptions:et.a.func.isRequired};var Ka=function(e){function t(){var e,n;va(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return Ia(wa(n=Da(this,(e=Na(t)).call.apply(e,[this].concat(o)))),"getStoreState",(function(e){var t=e.store;return{totalAmountOfDatabases:t.getTotalAmountOfDatabases(),page:t.getPage(),limit:t.getLimit()}})),Ia(wa(n),"onChange",(function(){n.setState(n.getStoreState(n.props))})),Ia(wa(n),"state",n.getStoreState(n.props)),n}return Ta(t,e),Sa(t,[{key:"componentDidMount",value:function(){this.props.store.on("change",this.onChange,this)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState(this.getStoreState(e)),this.props.store&&this.props.store.off("change",this.onChange,this),e.store.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){this.props.store.off("change",this.onChange,this)}},{key:"onPageLinkClick",value:function(e){var t="#/".concat(this.props.linkPath,"?page=").concat(e,"&limit=").concat(this.state.limit);ie.navigate(t)}},{key:"onPerPageSelected",value:function(e){var t="#/".concat(this.props.linkPath,"?page=").concat(this.state.page,"&limit=").concat(e);ie.navigate(t)}},{key:"render",value:function(){var e=this.state,t=e.limit,n=e.page,r=e.totalAmountOfDatabases,o=1+(n-1)*t,a=Math.min(r,n*t);return ue.a.createElement("footer",{className:"all-db-footer pagination-footer"},ue.a.createElement("div",{id:"database-pagination"},ue.a.createElement(Ea.Pagination,{page:n,total:r,perPage:t,onClick:this.onPageLinkClick.bind(this)})),ue.a.createElement(aa,{label:"Databases per page",perPage:t,perPageChange:this.onPerPageSelected.bind(this)}),ue.a.createElement("div",{className:"current-databases"},"Showing ",ue.a.createElement("span",{className:"all-db-footer__range"},o,"–",a)," of ",ue.a.createElement("span",{className:"all-db-footer__total-db-count"},r)," databases."))}}]),t}(ue.a.Component);Ia(Ka,"defaultProps",{linkPath:"_all_dbs",store:Aa});var Ga={DatabasesController:Ua,DatabaseTable:Ma,DatabaseRow:qa,RightDatabasesHeader:Fa,GraveyardInfo:Va,AddDatabaseWidget:Ba,JumpToDatabaseWidget:Ha,DatabasePagination:Ka},Xa=Ga.RightDatabasesHeader,Wa=Ga.DatabasesController,za=Ga.DatabasePagination,Ya=function(){return ue.a.createElement(gt,null,ue.a.createElement(Et,{crumbs:[{name:"Databases"}],endpoint:ie.urls("allDBs","apiurl"),docURL:ie.constants.DOC_URLS.ALL_DBS},ue.a.createElement(Xa,{partitionedDbHelpText:ce.i18n.en_US["create-db-partitioned-help"]})),ue.a.createElement(_t,null,ue.a.createElement(Wa,null)),ue.a.createElement(vt,null,ue.a.createElement(za,null)))},Qa=ie.RouteObject.extend({hideApiBar:!0,hideNotificationCenter:!0,routes:{"":"allDatabases","index.html":"allDatabases","_all_dbs(:extra)":"allDatabases"},roles:["fx_loggedIn"],selectedHeader:"Databases",allDatabases:function(e,t){var n=this.createParams(t),r=n.page,o=n.limit;return Je.setPage(r),o&&Je.setLimit(o),ue.a.createElement(Ya,null)},createParams:function(e){var t=1,n=void 0;if(e){var r=ce.getParams(e);isFinite(parseInt(r.page))&&(t=parseInt(r.page)),isFinite(parseInt(r.limit))&&(n=parseInt(r.limit))}return{page:t,limit:n}}});Ve.RouteObjects=[Qa];var Za=Ve;function Ja(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function $a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ja(n,!0).forEach((function(t){ei(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ja(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ei(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ti={partitionedDatabasesAvailable:!1,isLoadingDbInfo:!0,dbInfo:void 0,isDbPartitioned:!1};n(625);function ni(e){return e?"/_partition/".concat(e):""}Za.initialize=function(){ie.addHeaderLink({href:"#/_all_dbs",title:"Databases",icon:"fonticon-database",className:"databases"}),Je.checkPartitionedQueriesIsAvailable()},Za.PARTITONED_DB_CHECK_EXTENSION="Databases:PartitionedDbCheck",ie.registerExtension(Za.PARTITONED_DB_CHECK_EXTENSION,(function(){return v(I.getServerUrl("/")).then((function(e){return!(!e.features||-1===e.features.indexOf("partitioned"))||!(!e.features_flags||-1===e.features_flags.indexOf("partitioned"))})).catch((function(){return!1}))})),ie.addReducers({databases:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ti,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case Pe.DATABASES_PARTITIONED_DB_AVAILABLE:return $a({},t,{partitionedDatabasesAvailable:n.options.available});case Pe.DATABASES_FETCH_SELECTED_DB_METADATA:return $a({},t,{isLoadingDbInfo:!0,dbInfo:void 0,isDbPartitioned:!1});case Pe.DATABASES_FETCH_SELECTED_DB_METADATA_SUCCESS:return $a({},t,{isLoadingDbInfo:!1,dbInfo:n.options.metadata,isDbPartitioned:(e=n.options.metadata,!(!e||!e.props||!0!==e.props.partitioned))});default:return t}}}),Za.databaseUrl=function(e){var t=_.isObject(e)?e.id:e;return["/database/",ce.utils.safeURLName(t),"/_all_docs?limit="+Za.DocLimit].join("")},ie.registerUrls("changes",{server:function(e,t){return I.getServerUrl("/"+e+"/_changes"+t)},app:function(e,t,n){return"/database/"+e+ni(t)+"/_changes"+n},apiurl:function(e,t){return I.getApiUrl("/"+e+"/_changes"+t)}}),ie.registerUrls("allDBs",{server:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return I.getServerUrl("/_all_dbs".concat(e))},app:function(){return"_all_dbs"},apiurl:function(){return I.getApiUrl("/_all_dbs")}}),ie.registerUrls("databaseBaseURL",{server:function(e){return I.getServerUrl("/"+ce.utils.safeURLName(e))},apiurl:function(e){return I.getApiUrl("/"+ce.utils.safeURLName(e))},app:function(e){return"/database/"+e}}),ie.registerUrls("permissions",{server:function(e){return I.getServerUrl("/"+e+"/_security")},app:function(e,t){return"/database/"+e+ni(t)+"/permissions"},apiurl:function(e){return I.getApiUrl("/"+e+"/_security")}});var ri=Za,oi={SIDEBAR_EXPAND_SELECTED_ITEM:"SIDEBAR_EXPAND_SELECTED_ITEM",SIDEBAR_NEW_OPTIONS:"SIDEBAR_NEW_OPTIONS",SIDEBAR_TOGGLE_CONTENT:"SIDEBAR_TOGGLE_CONTENT",SIDEBAR_FETCHING:"SIDEBAR_FETCHING",SIDEBAR_SHOW_DELETE_INDEX_MODAL:"SIDEBAR_SHOW_DELETE_INDEX_MODAL",SIDEBAR_HIDE_DELETE_INDEX_MODAL:"SIDEBAR_HIDE_DELETE_INDEX_MODAL",SIDEBAR_SHOW_CLONE_INDEX_MODAL:"SIDEBAR_SHOW_CLONE_INDEX_MODAL",SIDEBAR_HIDE_CLONE_INDEX_MODAL:"SIDEBAR_HIDE_CLONE_INDEX_MODAL",SIDEBAR_CLONE_MODAL_DESIGN_DOC_CHANGE:"SIDEBAR_CLONE_MODAL_DESIGN_DOC_CHANGE",SIDEBAR_CLONE_MODAL_DESIGN_DOC_NEW_NAME_UPDATED:"SIDEBAR_CLONE_MODAL_DESIGN_DOC_NEW_NAME_UPDATED",SIDEBAR_CLONE_MODAL_DESIGN_DOC_NEW_PARTITIONED_UPDATED:"SIDEBAR_CLONE_MODAL_DESIGN_DOC_NEW_PARTITIONED_UPDATED",SIDEBAR_CLONE_MODAL_UPDATE_INDEX_NAME:"SIDEBAR_CLONE_MODAL_UPDATE_INDEX_NAME",SIDEBAR_UPDATED_DESIGN_DOCS:"SIDEBAR_UPDATED_DESIGN_DOCS"},ai={dispatchNewOptions:function(e){var t,n;e.database.safeID()!==(t=ie.reduxState(),!(n=t.sidebar)||n.loading?"":n.database.safeID())&&ie.reduxDispatch({type:oi.SIDEBAR_FETCHING}),e.designDocs.fetch().then((function(){ie.reduxDispatch({type:oi.SIDEBAR_NEW_OPTIONS,options:e})}),(function(t){var n="Unable to update the sidebar.";if(t.responseJSON&&"not_found"===t.responseJSON.error){var r=e.designDocs.database.safeID();n="The ".concat(r," database does not exist."),ie.navigate("/",{trigger:!0})}ie.addNotification({msg:n,type:"error",clear:!0})}))},dispatchUpdateDesignDocs:function(e){ie.reduxDispatch({type:oi.SIDEBAR_FETCHING}),e.fetch().then((function(){ie.reduxDispatch({type:oi.SIDEBAR_UPDATED_DESIGN_DOCS,options:{designDocs:e}})}))},toggleContent:function(e,t){return function(n){n({type:oi.SIDEBAR_TOGGLE_CONTENT,designDoc:e,indexGroup:t})}},showDeleteIndexModal:function(e,t,n,r){return function(o){o({type:oi.SIDEBAR_SHOW_DELETE_INDEX_MODAL,options:{indexName:e,indexLabel:n,designDocName:t,onDelete:r}})}},hideDeleteIndexModal:function(){return function(e){e({type:oi.SIDEBAR_HIDE_DELETE_INDEX_MODAL})}},dispatchHideDeleteIndexModal:function(){ie.reduxDispatch({type:oi.SIDEBAR_HIDE_DELETE_INDEX_MODAL})},showCloneIndexModal:function(e,t,n,r){return function(o){o({type:oi.SIDEBAR_SHOW_CLONE_INDEX_MODAL,options:{sourceIndexName:e,sourceDesignDocName:t,onSubmit:r,indexLabel:n,cloneIndexModalTitle:"Clone "+n}})}},hideCloneIndexModal:function(){return function(e){e({type:oi.SIDEBAR_HIDE_CLONE_INDEX_MODAL})}},updateNewDesignDocName:function(e){return function(t){t({type:oi.SIDEBAR_CLONE_MODAL_DESIGN_DOC_NEW_NAME_UPDATED,options:{value:e}})}},updateNewDesignDocPartitioned:function(e){return function(t){t({type:oi.SIDEBAR_CLONE_MODAL_DESIGN_DOC_NEW_PARTITIONED_UPDATED,options:{value:e}})}},selectDesignDoc:function(e){return function(t){t({type:oi.SIDEBAR_CLONE_MODAL_DESIGN_DOC_CHANGE,options:{value:e}})}},setNewCloneIndexName:function(e){return function(t){t({type:oi.SIDEBAR_CLONE_MODAL_UPDATE_INDEX_NAME,options:{value:e}})}},dispatchExpandSelectedItem:function(e){ie.reduxDispatch({type:oi.SIDEBAR_EXPAND_SELECTED_ITEM,options:{selectedNavItem:e}})}},ii=ie.RouteObject.extend({selectedHeader:"Databases",createDesignDocsCollection:function(){this.designDocs=new Ue.AllDocs(null,{database:this.database,paging:{pageSize:500},params:{startkey:"_design/",endkey:"_design0",include_docs:!0,limit:500}})},addSidebar:function(e){var t={designDocs:this.designDocs,database:this.database};e&&(t.selectedNavItem=e),ai.dispatchNewOptions(t)},getCrumbs:function(e){return[{type:"back",link:ie.urls("allDBs","app")},{name:e.id}]},createParams:function(e){var t=ce.getParams(e);return{urlParams:t,docParams:Ue.QueryParams.parse(t)}}});var si=function e(t,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.navItem=t,n){var r=n.designDocName,o=n.designDocSection,a=n.indexName;this.designDocName=r||"",this.designDocSection=o||"",this.indexName=a||""}};function ci(e){return(ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function li(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ui(e){return(ui=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function di(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pi(e,t){return(pi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var fi=Zo.StyledSelect,mi=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=ui(t).call(this,e))||"object"!==ci(o)&&"function"!=typeof o?di(r):o).onTogglePartitioned=n.onTogglePartitioned.bind(di(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pi(e,t)}(t,e),n=t,(r=[{key:"validate",value:function(){return"new-doc"!==this.props.selectedDesignDocName||""!==this.props.newDesignDocName||(ie.addNotification({msg:"Please name your design doc.",type:"error"}),this.newDesignDocInput.focus(),!1)}},{key:"getDocList",value:function(){return this.props.designDocList?this.props.designDocList.map((function(e){return ue.a.createElement("option",{key:e,value:e},e)})):[]}},{key:"selectDesignDoc",value:function(e){this.props.onSelectDesignDoc(e.target.value)}},{key:"updateDesignDocName",value:function(e){this.props.onChangeNewDesignDocName(e.target.value)}},{key:"getNewDDocField",value:function(){var e=this;if("new-doc"===this.props.selectedDesignDocName)return ue.a.createElement("div",{id:"new-ddoc-section",className:"span5"},ue.a.createElement("label",{className:"control-label",htmlFor:"new-ddoc"},"_design/"),ue.a.createElement("div",{className:"controls"},ue.a.createElement("input",{type:"text",id:"new-ddoc",placeholder:"newDesignDoc",ref:function(t){e.newDesignDocInput=t},onChange:this.updateDesignDocName.bind(this)})))}},{key:"getDocLink",value:function(){return this.props.docLink?ue.a.createElement("a",{className:"help-link","data-bypass":"true",href:this.props.docLink,target:"_blank",rel:"noopener noreferrer"},ue.a.createElement("i",{className:"icon-question-sign"})):null}},{key:"onTogglePartitioned",value:function(){this.props.onChangeNewDesignDocPartitioned(!this.props.newDesignDocPartitioned)}},{key:"getPartitionedCheckbox",value:function(){if(!this.props.isDbPartitioned)return null;var e="new-doc"!==this.props.selectedDesignDocName,t=e?this.props.selectedDesignDocPartitioned:this.props.newDesignDocPartitioned,n=e?"check--disabled":"",r=e?this.props.selectedDesignDocPartitioned?"Design document is partitioned":"Design document is not partitioned":this.props.newDesignDocPartitioned?"New document will be partitioned":"New document will not be partitioned";return ue.a.createElement("div",{className:"ddoc-selector-partitioned"},ue.a.createElement("label",{className:n,title:r},ue.a.createElement("input",{id:"js-ddoc-selector-partitioned",type:"checkbox",title:r,checked:t,onChange:this.onTogglePartitioned,style:{margin:"0px 10px 0px 0px"},disabled:e}),"Partitioned"))}},{key:"render",value:function(){var e=ue.a.createElement("optgroup",{label:"Select a document"},ue.a.createElement("option",{value:"new-doc"},"New document"),this.getDocList());return ue.a.createElement("div",{className:"design-doc-group control-group"},ue.a.createElement("div",{className:"span3"},ue.a.createElement("label",{htmlFor:"ddoc"},this.props.designDocLabel,this.getDocLink()),ue.a.createElement(fi,{selectChange:this.selectDesignDoc.bind(this),selectValue:this.props.selectedDesignDocName,selectId:"faux__edit-view__design-doc",selectContent:e})),this.getNewDDocField(),this.getPartitionedCheckbox())}}])&&li(n.prototype,r),o&&li(n,o),t}(le.Component);function hi(e){return(hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bi(e,t){return!t||"object"!==hi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gi(e){return(gi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ei(e,t){return(Ei=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}mi.defaultProps={designDocLabel:"Design Document",selectedDesignDocName:"",newDesignDocName:""},mi.propTypes={designDocList:et.a.array.isRequired,onSelectDesignDoc:et.a.func.isRequired,onChangeNewDesignDocName:et.a.func.isRequired,selectedDesignDocName:et.a.string.isRequired,selectedDesignDocPartitioned:et.a.bool.isRequired,newDesignDocName:et.a.string.isRequired,newDesignDocPartitioned:et.a.bool.isRequired,designDocLabel:et.a.string,docURL:et.a.string};var _i=ce.helpers.getDocUrl,vi=Zo.CodeEditorPanel,Oi=Zo.StyledSelect,Si=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),bi(this,gi(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ei(e,t)}(t,e),n=t,(r=[{key:"getOptionsList",value:function(){return this.props.reduceOptions.map((function(e,t){return ue.a.createElement("option",{key:t,value:e},e)}))}},{key:"getReduceValue",value:function(){return this.props.hasReduce?this.props.hasCustomReduce?this.reduceEditor.getValue():this.props.reduce:null}},{key:"getEditor",value:function(){return this.reduceEditor.getEditor()}},{key:"updateReduceCode",value:function(e){this.props.updateReduceCode(e)}},{key:"selectChange",value:function(e){this.props.selectReduceChanged(e.target.value)}},{key:"render",value:function(){var e,t=this,n=this.getOptionsList();return this.props.hasCustomReduce&&this.props.customReducerSupported?e=ue.a.createElement(vi,{ref:function(e){return t.reduceEditor=e},id:"reduce-function",title:"Custom Reduce function",defaultCode:this.props.reduce,allowZenMode:!1,blur:this.updateReduceCode.bind(this)}):this.props.customReducerSupported||(e=ue.a.createElement("div",{className:"reduce-editor-warning"},ue.a.createElement("label",null,"Partitioned views do not support custom reduce functions."))),ue.a.createElement("div",null,ue.a.createElement("div",{className:"control-group"},ue.a.createElement("label",{htmlFor:"reduce-function-selector"},ue.a.createElement("span",null,"Reduce (optional)"),ue.a.createElement("a",{className:"help-link","data-bypass":"true",href:_i("REDUCE_FUNCS"),target:"_blank",rel:"noopener noreferrer"},ue.a.createElement("i",{className:"icon-question-sign"}))),ue.a.createElement(Oi,{selectContent:n,selectChange:this.selectChange.bind(this),selectId:"reduce-function-selector",selectValue:this.props.reduceSelectedOption})),e)}}])&&yi(n.prototype,r),o&&yi(n,o),t}(le.Component);function Di(e){return(Di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ni(){return(Ni=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function wi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ti(e){return(Ti=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ci(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ii(e,t){return(Ii=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Si.defaultProps={customReducerSupported:!0},Si.propTypes={reduceOptions:et.a.array.isRequired,hasReduce:et.a.bool.isRequired,hasCustomReduce:et.a.bool.isRequired,customReducerSupported:et.a.bool,reduce:et.a.string,reduceSelectedOption:et.a.string.isRequired,updateReduceCode:et.a.func.isRequired,selectReduceChanged:et.a.func.isRequired};var Ai=ce.helpers.getDocUrl,Ri=Zo.CodeEditorPanel,Pi=Zo.ConfirmButton,Li=Zo.LoadLines,xi=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=Ti(t).call(this,e))||"object"!==Di(o)&&"function"!=typeof o?Ci(r):o).saveView=n.saveView.bind(Ci(n)),n.viewChange=n.viewChange.bind(Ci(n)),n.updateMapCode=n.updateMapCode.bind(Ci(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ii(e,t)}(t,e),n=t,(r=[{key:"componentDidUpdate",value:function(e){this.props.map!==e.map&&this.mapEditor&&this.mapEditor.update()}},{key:"isPartitionedView",value:function(){return"new-doc"===this.props.designDocId?this.props.newDesignDocPartitioned:this.props.designDocPartitioned}},{key:"isCustomReduceSupported",value:function(){return!(this.props.isDbPartitioned&&this.props.reduce&&!this.props.reduce.startsWith("_")&&("new-doc"===this.props.designDocId?this.props.newDesignDocPartitioned:this.props.designDocPartitioned))}},{key:"saveView",value:function(e){if(e.preventDefault(),this.designDocSelector.validate())if(this.isCustomReduceSupported()){var t=this.isPartitionedView()&&this.props.partitionKey?encodeURIComponent(this.props.partitionKey):"",n=ie.urls("view","showView",this.props.database.safeID(),t,this.props.saveDesignDoc.safeID(),encodeURIComponent(this.props.viewName));this.props.saveView({database:this.props.database,isNewView:this.props.isNewView,viewName:this.props.viewName,designDoc:this.props.saveDesignDoc,designDocId:this.props.designDocId,isNewDesignDoc:this.props.isNewDesignDoc,originalViewName:this.props.originalViewName,originalDesignDocName:this.props.originalDesignDocName,map:this.mapEditor.getValue(),reduce:this.reduceEditor.getReduceValue(),designDocs:this.props.designDocs},n)}else ie.addNotification({msg:"Partitioned views do not support custom reduce functions.",type:"error",clear:!0})}},{key:"viewChange",value:function(e){this.props.changeViewName(e.target.value)}},{key:"updateMapCode",value:function(e){this.props.updateMapCode(e)}},{key:"getCancelLink",value:function(){var e=encodeURIComponent(this.props.database.id),t=this.props.partitionKey?encodeURIComponent(this.props.partitionKey):"";if("new-doc"===this.props.designDocId||this.props.isNewView)return"#"+ie.urls("allDocs","app",e,t);var n=this.props.designDocId.startsWith("_design/")?"_design/"+encodeURIComponent(this.props.designDocId.substring(8)):encodeURIComponent(this.props.designDocId),r=encodeURIComponent(this.props.viewName);return"#"+ie.urls("view","showView",e,t,n,r)}},{key:"render",value:function(){var e=this;if(this.props.isLoading)return ue.a.createElement("div",{className:"define-view"},ue.a.createElement(Li,null));var t=this.props.isNewView?"New View":"Edit View",n=this.props.isNewView?"Create Document and then Build Index":"Save Document and then Build Index";return ue.a.createElement("div",{className:"define-view"},ue.a.createElement("form",{className:"form-horizontal view-query-save",onSubmit:this.saveView},ue.a.createElement("h3",{className:"simple-header"},t),ue.a.createElement("div",{className:"new-ddoc-section"},ue.a.createElement(mi,{ref:function(t){e.designDocSelector=t},designDocList:this.props.designDocList,isDbPartitioned:this.props.isDbPartitioned,selectedDesignDocName:this.props.designDocId,selectedDesignDocPartitioned:this.props.designDocPartitioned,newDesignDocName:this.props.newDesignDocName,newDesignDocPartitioned:this.props.newDesignDocPartitioned,onSelectDesignDoc:this.props.selectDesignDoc,onChangeNewDesignDocName:this.props.updateNewDesignDocName,onChangeNewDesignDocPartitioned:this.props.updateNewDesignDocPartitioned,docLink:Ai("DESIGN_DOCS")})),ue.a.createElement("div",{className:"control-group"},ue.a.createElement("label",{htmlFor:"index-name"},ue.a.createElement("span",null,"Index name"),ue.a.createElement("a",{className:"help-link","data-bypass":"true",href:Ai("VIEW_FUNCS"),target:"_blank",rel:"noopener noreferrer"},ue.a.createElement("i",{className:"icon-question-sign"}))),ue.a.createElement("input",{type:"text",id:"index-name",value:this.props.viewName,onChange:this.viewChange,placeholder:"Index name"})),ue.a.createElement(Ri,{id:"map-function",ref:function(t){e.mapEditor=t},title:"Map function",docLink:Ai("MAP_FUNCS"),blur:this.updateMapCode,allowZenMode:!1,defaultCode:this.props.map}),ue.a.createElement(Si,Ni({ref:function(t){e.reduceEditor=t},customReducerSupported:this.isCustomReduceSupported()},this.props)),ue.a.createElement("div",{className:"padded-box"},ue.a.createElement("div",{className:"control-group"},ue.a.createElement(Pi,{id:"save-view",text:n}),ue.a.createElement("a",{href:this.getCancelLink(),className:"index-cancel-link"},"Cancel")))))}}])&&wi(n.prototype,r),o&&wi(n,o),t}(le.Component);xi.propTypes={isLoading:et.a.bool.isRequired,isNewView:et.a.bool.isRequired,database:et.a.object.isRequired,isDbPartitioned:et.a.bool.isRequired,designDocId:et.a.string.isRequired,newDesignDocName:et.a.string.isRequired,viewName:et.a.string.isRequired,isNewDesignDoc:et.a.bool.isRequired,originalViewName:et.a.string,originalDesignDocName:et.a.string,designDocs:et.a.object,saveDesignDoc:et.a.object,partitionKey:et.a.string,updateNewDesignDocName:et.a.func.isRequired,changeViewName:et.a.func.isRequired,updateMapCode:et.a.func.isRequired};var ki={CLEAR_INDEX:"CLEAR_INDEX",EDIT_INDEX:"EDIT_INDEX",EDIT_NEW_INDEX:"EDIT_NEW_INDEX",SELECT_REDUCE_CHANGE:"SELECT_REDUCE_CHANGE",VIEW_SAVED:"VIEW_SAVED",VIEW_CREATED:"VIEW_CREATED",DESIGN_DOC_CHANGE:"DESIGN_DOC_CHANGE",DESIGN_DOC_NEW_NAME_UPDATED:"DESIGN_DOC_NEW_NAME_UPDATED",DESIGN_DOC_NEW_PARTITIONED_UPDATED:"DESIGN_DOC_NEW_PARTITIONED_UPDATED",NEW_DESIGN_DOC:"NEW_DESIGN_DOC",VIEW_NAME_CHANGE:"VIEW_NAME_CHANGE",VIEW_ADD_DESIGN_DOC:"VIEW_ADD_DESIGN_DOC",VIEW_UPDATE_MAP_CODE:"VIEW_UPDATE_MAP_CODE",VIEW_UPDATE_REDUCE_CODE:"VIEW_UPDATE_REDUCE_CODE"},ji=function(e){return function(t){t({type:ki.EDIT_INDEX,options:e})}},Ui=function(e){return!e.isNewView&&e.originalDesignDocName===e.designDocId&&e.originalViewName!==e.viewName},Mi=function(e){return function(t){t({type:ki.VIEW_ADD_DESIGN_DOC,designDoc:e.toJSON()})}},qi=function(e,t,n,r,o){var a=_.extend({onSuccess:function(){},onError:function(e){var t=JSON.parse(e.responseText).reason;ie.addNotification({msg:"Delete failed: "+t,type:"error",clear:!0})}},o),i=e.get(n)||{};delete i[r];var s={};s[n]=i,e.set(s);var c,l=ie.getIndexTypePropNames(),u=_.some(l,(function(t){return e.get(t)&&_.keys(e.get(t)).length>0})),d=!1;return u?c=e.save():(c=e.destroy(),d=!0),c.then((function(){d&&t.remove(e.id),a.onSuccess()}),a.onError)},Vi=function(e,t){return e.find((function(e){return e.id===t})).dDocModel()},Fi=function(e,t,n,r,o,a){if("new-doc"===t){var i={_id:"_design/"+n,views:{},language:"javascript"},s=new Me.Doc(i,{database:o});return a&&s.setDDocPartitionedOption(r),s}var c=e.find((function(e){return e.id===t}));return c?c.dDocModel():null},Bi={helpers:{findDesignDoc:Vi,getDesignDoc:Fi},safeDeleteIndex:qi,selectReduceChanged:function(e){return function(t){t({type:ki.SELECT_REDUCE_CHANGE,reduceSelectedOption:e})}},changeViewName:function(e){return function(t){t({type:ki.VIEW_NAME_CHANGE,name:e})}},editIndex:ji,dispatchClearIndex:function(){ie.reduxDispatch({type:ki.CLEAR_INDEX})},dispatchFetchDesignDocsBeforeEdit:function(e){e.designDocs.fetch({reset:!0}).then((function(){ji(e)(ie.reduxDispatch)}),(function(t){var n="Error";if(t.responseJSON&&"not_found"===t.responseJSON.error){var r=e.designDocs.database.safeID();n="The ".concat(r," database does not exist"),ie.navigate("/",{trigger:!0})}ie.addNotification({msg:n,type:"error",clear:!0})}))},shouldRemoveDdocView:Ui,saveView:function(e,t){return function(n){var r=e.designDoc;r.setDdocView(e.viewName,e.map,e.reduce),ie.addNotification({msg:"Saving View...",type:"info",clear:!0}),Ui(e)&&r.removeDdocView(e.originalViewName),r.save().then((function(){if(ie.addNotification({msg:"View Saved.",type:"success",clear:!0}),!e.isNewView&&e.originalDesignDocName!==e.designDocId){var o=Vi(e.designDocs,e.originalDesignDocName);qi(o,e.designDocs,"views",e.originalViewName,{onSuccess:function(){ai.dispatchUpdateDesignDocs(e.designDocs)}})}"new-doc"===e.designDocId&&Mi(r),ai.dispatchUpdateDesignDocs(e.designDocs),n({type:ki.VIEW_SAVED}),ie.navigate(t,{trigger:!0})}),(function(e){ie.addNotification({msg:"Save failed. "+(e.responseJSON?"Reason: ".concat(e.responseJSON.reason):""),type:"error",clear:!0})}))}},addDesignDoc:Mi,deleteView:function(e){return qi(e.designDoc,e.designDocs,"views",e.indexName,{onSuccess:function(){if(e.isOnIndex){var t=ie.urls("allDocs","app",e.database.safeID());ie.navigate(t)}ai.dispatchUpdateDesignDocs(e.designDocs),ie.addNotification({msg:"The <code>"+_.escape(e.indexName)+"</code> view has been deleted.",type:"info",escape:!1,clear:!0}),ai.dispatchHideDeleteIndexModal()}})},cloneView:function(e){var t=Fi(e.designDocs,e.targetDesignDocName,e.newDesignDocName,e.newDesignDocPartitioned,e.database,e.isDbPartitioned),n=t.get("views");if(n&&_.has(n,e.newIndexName))ie.addNotification({msg:"That index name is already used in this design doc. Please enter a new name.",type:"error",clear:!0});else{n||(n={});var r=Vi(e.designDocs,"_design/"+e.sourceDesignDocName).toJSON();n[e.newIndexName]=r.views[e.sourceIndexName],t.set({views:n}),t.save().then((function(){e.onComplete(),ie.addNotification({msg:"The index has been cloned.",type:"success",clear:!0}),ai.dispatchUpdateDesignDocs(e.designDocs)}),(function(t){e.onComplete();var n=JSON.parse(t.responseText).reason;ie.addNotification({msg:"Clone failed: "+n,type:"error",clear:!0})}))}},gotoEditViewPage:function(e,t,n,r){ie.navigate("#"+ie.urls("view","edit",encodeURIComponent(e),t?encodeURIComponent(t):"",encodeURIComponent(n),encodeURIComponent(r)))},updateMapCode:function(e){return function(t){t({type:ki.VIEW_UPDATE_MAP_CODE,code:e})}},updateReduceCode:function(e){return function(t){t({type:ki.VIEW_UPDATE_REDUCE_CODE,code:e})}},selectDesignDoc:function(e){return function(t){t({type:ki.DESIGN_DOC_CHANGE,options:{value:e}})}},updateNewDesignDocName:function(e){return function(t){t({type:ki.DESIGN_DOC_NEW_NAME_UPDATED,options:{value:e}})}},updateNewDesignDocPartitioned:function(e){return function(t){t({type:ki.DESIGN_DOC_NEW_PARTITIONED_UPDATED,options:{value:e}})}}};function Hi(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function Ki(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hi(n,!0).forEach((function(t){Gi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hi(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Gi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Xi="function (doc) {\n  emit(doc._id, 1);\n}",Wi="function (keys, values, rereduce) {\n  if (rereduce) {\n    return sum(values);\n  } else {\n    return values.length;\n  }\n}",zi=["_sum","_count","_stats","_approx_count_distinct"],Yi=zi.concat(["CUSTOM","NONE"]),Qi={designDocs:new Backbone.Collection,isLoading:!0,view:{reduce:"",map:Xi},database:{id:"0"},designDocId:"",isNewDesignDoc:!1,newDesignDocName:"",newDesignDocPartitioned:!0,isNewView:!1,viewName:"",originalViewName:"",originalDesignDocName:"",reduceOptions:Yi};function Zi(e,t){var n=Ki({},e,{isLoading:!1,newDesignDocName:"",isNewView:t.isNewView,viewName:t.viewName||"viewName",isNewDesignDoc:t.isNewDesignDoc||!1,designDocs:t.designDocs,designDocId:t.designDocId,originalDesignDocName:t.designDocId,database:t.database});return n.originalViewName=n.viewName,n.view=function(e){if(e.isNewView||e.isNewDesignDoc)return{reduce:"",map:Xi};return e.designDocs.find((function(t){return e.designDocId==t.id})).dDocModel().get("views")[e.viewName]}(n),n}function Ji(e){return e.view.reduce?$i(e)?"CUSTOM":e.view.reduce:"NONE"}function $i(e){return!!e.view.reduce&&!(-1!==zi.indexOf(e.view.reduce))}function es(e,t){if("new-doc"===e.designDocId){var n={_id:"_design/"+e.newDesignDocName,views:{},language:"javascript"},r=new Me.Doc(n,{database:e.database});return t&&r.setDDocPartitionedOption(e.newDesignDocPartitioned),r}if(!e.designDocs)return null;var o=e.designDocs.find((function(t){return t.id===e.designDocId}));return o?o.dDocModel():null}function ts(e){return e.designDocs?e.designDocs.filter((function(e){return!e.isMangoDoc()})).map((function(e){return e.id})):[]}var ns=Object(tt.b)((function(e,t){var n,r,o,a=e.indexEditor,i=e.databases,s=(n=a,r=i.isDbPartitioned,!!(o=n.designDocs.find((function(e){return n.designDocId===e.id})))&&_n.isDDocPartitioned(o.get("doc"),r));return{database:a.database,isNewView:a.isNewView,viewName:a.viewName,designDocs:a.designDocs,designDocList:ts(a),originalViewName:a.originalViewName,originalDesignDocName:a.originalDesignDocName,isNewDesignDoc:a.isNewDesignDoc,designDocId:a.designDocId,designDocPartitioned:s,newDesignDocName:a.newDesignDocName,newDesignDocPartitioned:a.newDesignDocPartitioned,saveDesignDoc:es(a,i.isDbPartitioned),map:a.view.map,isLoading:a.isLoading,reduce:a.view.reduce,reduceOptions:a.reduceOptions,reduceSelectedOption:Ji(a),hasCustomReduce:$i(a),hasReduce:!!a.view.reduce,isDbPartitioned:i.isDbPartitioned,partitionKey:t.partitionKey}}),(function(e){return{saveView:function(t,n){e(Bi.saveView(t,n))},changeViewName:function(t){e(Bi.changeViewName(t))},updateMapCode:function(t){e(Bi.updateMapCode(t))},selectDesignDoc:function(t){e(Bi.selectDesignDoc(t))},updateNewDesignDocName:function(t){e(Bi.updateNewDesignDocName(t))},updateNewDesignDocPartitioned:function(t){e(Bi.updateNewDesignDocPartitioned(t))},updateReduceCode:function(t){e(Bi.updateReduceCode(t))},selectReduceChanged:function(t){e(Bi.selectReduceChanged(t))}}}))(xi),rs=Zo.StyledSelect,os={IndexEditorContainer:ns,IndexEditor:xi,ReduceEditor:Si,DesignDocSelector:mi,StyledSelect:rs};function as(e){return(as="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function is(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ss(e){return(ss=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ls(e,t){return(ls=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function us(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ds=os.DesignDocSelector,ps=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=ss(t).call(this,e),n=!o||"object"!==as(o)&&"function"!=typeof o?cs(r):o,us(cs(n),"submit",(function(){n.designDocSelector.validate()&&(""!==n.props.newIndexName?n.props.submit():ie.addNotification({msg:"Please enter the new index name.",type:"error",clear:!0}))})),us(cs(n),"close",(function(e){e&&e.preventDefault(),n.props.close()})),us(cs(n),"setNewIndexName",(function(e){n.props.setNewCloneIndexName(e.target.value)})),n.props.setNewCloneIndexName(""),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ls(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this;return ue.a.createElement(Tt.f,{dialogClassName:"clone-index-modal",show:this.props.visible,onHide:this.close},ue.a.createElement(Tt.f.Header,{closeButton:!0},ue.a.createElement(Tt.f.Title,null,this.props.title)),ue.a.createElement(Tt.f.Body,null,ue.a.createElement("form",{className:"form",method:"post",onSubmit:this.submit},ue.a.createElement("p",null,"Select the design document where the cloned ",this.props.indexLabel," will be created, and then enter a name for the cloned ",this.props.indexLabel,"."),ue.a.createElement("div",{className:"row"},ue.a.createElement(ds,{ref:function(t){return e.designDocSelector=t},designDocList:this.props.designDocArray,isDbPartitioned:this.props.isDbPartitioned,selectedDesignDocName:this.props.selectedDesignDoc,selectedDesignDocPartitioned:this.props.selectedDesignDocPartitioned,newDesignDocName:this.props.newDesignDocName,newDesignDocPartitioned:this.props.newDesignDocPartitioned,onSelectDesignDoc:this.props.selectDesignDoc,onChangeNewDesignDocName:this.props.updateNewDesignDocName,onChangeNewDesignDocPartitioned:this.props.updateNewDesignDocPartitioned})),ue.a.createElement("div",{className:"clone-index-name-row"},ue.a.createElement("label",{className:"new-index-title-label",htmlFor:"new-index-name"},this.props.indexLabel," Name"),ue.a.createElement("input",{type:"text",id:"new-index-name",value:this.props.newIndexName,onChange:this.setNewIndexName,placeholder:"New view name"})))),ue.a.createElement(Tt.f.Footer,null,ue.a.createElement("a",{href:"#",className:"cancel-link",onClick:this.close,"data-bypass":"true"},"Cancel"),ue.a.createElement("button",{onClick:this.submit,"data-bypass":"true",className:"btn btn-primary save"},ue.a.createElement("i",{className:"icon fonticon-ok-circled"})," Clone ",this.props.indexLabel)))}}])&&is(n.prototype,r),o&&is(n,o),t}(ue.a.Component);function fs(e){return(fs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ms(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hs(e){return(hs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ys(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bs(e,t){return(bs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}us(ps,"propTypes",{visible:et.a.bool.isRequired,title:et.a.string,close:et.a.func.isRequired,submit:et.a.func.isRequired,designDocArray:et.a.array.isRequired,selectedDesignDoc:et.a.string.isRequired,newDesignDocName:et.a.string.isRequired,newIndexName:et.a.string.isRequired,indexLabel:et.a.string.isRequired,selectDesignDoc:et.a.func.isRequired,updateNewDesignDocName:et.a.func.isRequired,setNewCloneIndexName:et.a.func.isRequired}),us(ps,"defaultProps",{title:"Clone Index",visible:!1});var Es=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,o=(e=hs(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==fs(o)&&"function"!=typeof o?ys(r):o,gs(ys(n),"state",{placement:"bottom"}),gs(ys(n),"setPlacement",(function(e){var t=document.getElementById(e).getBoundingClientRect().top+150>window.innerHeight?"top":"bottom";n.setState({placement:t})})),gs(ys(n),"createItems",(function(){var e=n.props.items.sort();return _.map(e,(function(e,t){var r=ie.urls(n.props.urlNamespace,"app",encodeURIComponent(n.props.database.id),encodeURIComponent(n.props.designDocName));n.props.selectedPartitionKey&&(r=ie.urls("partitioned_"+n.props.urlNamespace,"app",encodeURIComponent(n.props.database.id),encodeURIComponent(n.props.selectedPartitionKey),encodeURIComponent(n.props.designDocName)));var o=n.props.selectedIndex===e?"active":"";return ue.a.createElement("li",{className:o,key:t},ue.a.createElement("a",{id:n.props.designDocName+"_"+e,href:"#/"+r+encodeURIComponent(e),className:"toggle-view"},e),ue.a.createElement(Tt.h,{trigger:"click",onEnter:n.setPlacement.bind(ys(n),n.props.designDocName+"_"+e),placement:n.state.placement,rootClose:!0,ref:function(e){return n.itemOverlay=e},overlay:ue.a.createElement(Tt.i,{id:"index-menu-component-popover"},ue.a.createElement("ul",null,ue.a.createElement("li",{onClick:n.indexAction.bind(ys(n),"edit",{indexName:e,onEdit:n.props.onEdit})},ue.a.createElement("span",{className:"fonticon fonticon-file-code-o"}),"Edit"),ue.a.createElement("li",{onClick:n.indexAction.bind(ys(n),"clone",{indexName:e,onClone:n.props.onClone})},ue.a.createElement("span",{className:"fonticon fonticon-files-o"}),"Clone"),ue.a.createElement("li",{onClick:n.indexAction.bind(ys(n),"delete",{indexName:e,onDelete:n.props.onDelete})},ue.a.createElement("span",{className:"fonticon fonticon-trash"}),"Delete")))},ue.a.createElement("span",{className:"index-menu-toggle fonticon fonticon-wrench2"})))}))})),gs(ys(n),"indexAction",(function(e,t,r){switch(r.preventDefault(),n.itemOverlay.hide(),e){case"delete":n.props.showDeleteIndexModal(t.indexName,n.props.designDocName,n.props.indexLabel,t.onDelete);break;case"clone":n.props.showCloneIndexModal(t.indexName,n.props.designDocName,n.props.indexLabel,t.onClone);break;case"edit":t.onEdit(n.props.database.id,n.props.selectedPartitionKey,n.props.designDocName,t.indexName)}})),gs(ys(n),"toggle",(function(e){e.preventDefault(),n.props.toggle(n.props.designDocName,n.props.title)})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bs(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){if(0===this.props.items.length)return null;var e="accordion-header index-group-header",t="index-list accordion-body collapse";this.props.isExpanded&&(e+=" down",t+=" in");var n=this.props.title,r="nav-design-function-"+this.props.designDocName+this.props.selector;return ue.a.createElement("li",{id:r},ue.a.createElement("a",{className:e,"data-toggle":"collapse",onClick:this.toggle},ue.a.createElement("div",{className:"fonticon-play"}),n),ue.a.createElement(Tt.c,{in:this.props.isExpanded},ue.a.createElement("ul",{className:t},this.createItems())))}}])&&ms(n.prototype,r),o&&ms(n,o),t}(ue.a.Component);function _s(e){return(_s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Os(e){return(Os=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ss(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ds(e,t){return(Ds=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ns(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}gs(Es,"propTypes",{urlNamespace:et.a.string.isRequired,indexLabel:et.a.string.isRequired,database:et.a.object.isRequired,designDocName:et.a.string.isRequired,items:et.a.array.isRequired,isExpanded:et.a.bool.isRequired,selectedIndex:et.a.string.isRequired,onDelete:et.a.func.isRequired,onClone:et.a.func.isRequired,showDeleteIndexModal:et.a.func.isRequired,showCloneIndexModal:et.a.func.isRequired,isPartitioned:et.a.bool.isRequired,selectedPartitionKey:et.a.string});var ws=Zo.MenuDropDown,Ts=function(e){function t(e){var n,r,o;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=Os(t).call(this,e),n=!o||"object"!==_s(o)&&"function"!=typeof o?Ss(r):o,Ns(Ss(n),"indexList",(function(){return _.map(n.state.updatedSidebarListTypes,(function(e,t){var r=_.has(n.props.toggledSections,e.name)&&n.props.toggledSections[e.name],o="";return n.props.selectedNavInfo.designDocSection===e.name&&(o=n.props.selectedNavInfo.indexName),ue.a.createElement(Es,{icon:e.icon,isExpanded:r,urlNamespace:e.urlNamespace,indexLabel:e.indexLabel,onEdit:e.onEdit,onDelete:e.onDelete,onClone:e.onClone,selectedIndex:o,toggle:n.props.toggle,database:n.props.database,designDocName:n.props.designDocName,key:t,title:e.name,selector:e.selector,items:_.keys(n.props.designDoc[e.selector]),isPartitioned:n.props.isPartitioned,selectedPartitionKey:n.props.selectedPartitionKey,showDeleteIndexModal:n.props.showDeleteIndexModal,showCloneIndexModal:n.props.showCloneIndexModal})}))})),Ns(Ss(n),"toggle",(function(e){e.preventDefault(),n.props.toggle(n.props.designDocName)})),Ns(Ss(n),"getNewButtonLinks",(function(){var e=n.props.selectedPartitionKey?encodeURIComponent(n.props.selectedPartitionKey):"",t=ie.urls("databaseBaseURL","app",encodeURIComponent(n.props.database.id))+(e?"/_partition/"+e:""),r=n.props.designDocName;return[{title:"Add New",links:ie.getExtensions("sidebar:links").reduce((function(e,o){return n.props.isPartitioned&&!o.showForPartitionedDDocs||e.push({title:o.title,url:"#"+t+"/"+o.url+"/"+encodeURIComponent(r),icon:"fonticon-plus-circled"}),e}),[{title:"New View",url:"#"+ie.urls("new","addView",encodeURIComponent(n.props.database.id),e,encodeURIComponent(r)),icon:"fonticon-plus-circled"}])}]})),n.state={updatedSidebarListTypes:n.props.sidebarListTypes},_.isEmpty(n.state.updatedSidebarListTypes)||_.has(n.state.updatedSidebarListTypes[0],"selector")&&"views"!==n.state.updatedSidebarListTypes[0].selector){var a=n.state.updatedSidebarListTypes;a.unshift({selector:"views",name:"Views",urlNamespace:"view",indexLabel:"view",onDelete:Bi.deleteView,onClone:Bi.cloneView,onEdit:Bi.gotoEditViewPage}),n.state={updatedSidebarListTypes:a}}return n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ds(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.getNewButtonLinks(),t="design-doc-section accordion-header",n="design-doc-body accordion-body collapse";this.props.isExpanded&&(t+=" down",n+=" in");var r=this.props.designDocName,o=this.props.selectedPartitionKey?encodeURIComponent(this.props.selectedPartitionKey):"",a=ie.urls("designDocs","app",encodeURIComponent(this.props.database.id),o,r),i="metadata"===this.props.selectedNavInfo.designDocSection?"active":"",s=this.props.isPartitioned?"Partitioned design document":"Global design document",c=this.props.isPartitioned?"fonticon-documents":"fonticon-document";return ue.a.createElement("li",{className:"nav-header"},ue.a.createElement("div",{id:"sidebar-tab-"+r,className:t},ue.a.createElement("div",{id:"nav-header-"+r,onClick:this.toggle,className:"accordion-list-item"},ue.a.createElement("div",{className:"fonticon-play"}),ue.a.createElement("p",{className:"design-doc-name"},ue.a.createElement("span",{title:"_design/"+r},ue.a.createElement("i",{className:c,title:s}),r))),ue.a.createElement("div",{className:"new-button add-dropdown"},ue.a.createElement(ws,{links:e}))),ue.a.createElement(Tt.c,{in:this.props.isExpanded},ue.a.createElement("ul",{className:n,id:this.props.designDocName},ue.a.createElement("li",{className:i},ue.a.createElement("a",{href:"#/"+a,className:"toggle-view accordion-header"},"Metadata")),this.indexList())))}}])&&vs(n.prototype,r),o&&vs(n,o),t}(ue.a.Component);function Cs(e){return(Cs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Is(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function As(e){return(As=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ps(e,t){return(Ps=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ls(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Ns(Ts,"propTypes",{database:et.a.object.isRequired,sidebarListTypes:et.a.array.isRequired,isExpanded:et.a.bool.isRequired,isPartitioned:et.a.bool.isRequired,selectedPartitionKey:et.a.string,selectedNavInfo:et.a.object.isRequired,toggledSections:et.a.object.isRequired,designDocName:et.a.string.isRequired,showDeleteIndexModal:et.a.func.isRequired,showCloneIndexModal:et.a.func.isRequired});var xs=function(e){function t(e){var n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=As(t).call(this,e),n=!o||"object"!==Cs(o)&&"function"!=typeof o?Rs(r):o,Ls(Rs(n),"designDocList",(function(){return _.map(n.props.designDocs,(function(e,t){var r=decodeURIComponent(e.safeId),o=_n.isDDocPartitioned(e,n.props.isDbPartitioned),a=!1,i={};_.has(n.props.toggledSections,r)&&(a=n.props.toggledSections[r].visible,i=n.props.toggledSections[r].indexGroups);var s={};return"designDoc"===n.props.selectedNav.navItem&&n.props.selectedNav.designDocName===r&&(s=n.props.selectedNav),ue.a.createElement(Ts,{toggle:n.props.toggle,sidebarListTypes:n.sidebarListTypes,isExpanded:a,toggledSections:i,selectedNavInfo:s,selectedPartitionKey:n.props.selectedPartitionKey,isPartitioned:o,key:t,designDoc:e,designDocName:r,database:n.props.database,showDeleteIndexModal:n.props.showDeleteIndexModal,showCloneIndexModal:n.props.showCloneIndexModal})}))}));var a=ie.getExtensions("sidebar:list");return n.sidebarListTypes=_.isUndefined(a)?[]:a,n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ps(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return ue.a.createElement("ul",{className:"nav nav-list"},this.designDocList())}}])&&Is(n.prototype,r),o&&Is(n,o),t}(ue.a.Component);function ks(e){return(ks="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function js(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Us(e){return(Us=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ms(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qs(e,t){return(qs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Vs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Ls(xs,"propTypes",{database:et.a.object.isRequired,toggle:et.a.func.isRequired,designDocs:et.a.array,toggledSections:et.a.object,selectedNav:et.a.shape({designDocName:et.a.string,designDocSection:et.a.string,indexName:et.a.string,navItem:et.a.string}).isRequired,isDbPartitioned:et.a.bool.isRequired,selectedPartitionKey:et.a.string,showDeleteIndexModal:et.a.func.isRequired,showCloneIndexModal:et.a.func.isRequired});var Fs=Zo.MenuDropDown,Bs=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,o=(e=Us(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==ks(o)&&"function"!=typeof o?Ms(r):o,Vs(Ms(n),"getNewButtonLinks",(function(){return _n.getNewButtonLinks(n.props.databaseName,n.props.selectedPartitionKey)})),Vs(Ms(n),"buildDocLinks",(function(){var e=ie.urls("base","app",n.props.databaseName);return ie.getExtensions("docLinks").map((function(t){return ue.a.createElement("li",{key:t.url,className:n.getNavItemClass(t.url)},ue.a.createElement("a",{id:t.url,href:e+t.url},t.title))}))})),Vs(Ms(n),"getNavItemClass",(function(e){return e===n.props.selectedNavItem?"active":""})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qs(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.buildDocLinks(),t=ie.url.encode(this.props.databaseName),n=this.props.selectedPartitionKey?encodeURIComponent(this.props.selectedPartitionKey):"",r="#"+ie.urls("changes","app",t,n,""),o="#"+ie.urls("permissions","app",t,n),a=ie.urls("allDocs","app",t,n,""),i=ie.urls("mango","query-app",t,n),s=ce.i18n.en_US["run-query-with-mango"],c=this.getNewButtonLinks();return ue.a.createElement("ul",{className:"nav nav-list"},ue.a.createElement("li",{className:this.getNavItemClass("all-docs")},ue.a.createElement("a",{id:"all-docs",href:"#/"+a,className:"toggle-view"},"All Documents"),ue.a.createElement("div",{id:"new-all-docs-button",className:"add-dropdown"},ue.a.createElement(Fs,{links:c}))),ue.a.createElement("li",{className:this.getNavItemClass("mango-query")},ue.a.createElement("a",{id:"mango-query",href:"#"+i,className:"toggle-view"},s)),ue.a.createElement("li",{className:this.getNavItemClass("permissions")},ue.a.createElement("a",{id:"permissions",href:o},"Permissions")),ue.a.createElement("li",{className:this.getNavItemClass("changes")},ue.a.createElement("a",{id:"changes",href:r},"Changes")),e,ue.a.createElement("li",{className:this.getNavItemClass("design-docs")},ue.a.createElement("a",{id:"design-docs",href:"#/"+a+'?startkey="_design"&endkey="_design0"',className:"toggle-view"},"Design Documents"),ue.a.createElement("div",{id:"new-design-docs-button",className:"add-dropdown"},ue.a.createElement(Fs,{links:c}))))}}])&&js(n.prototype,r),o&&js(n,o),t}(ue.a.Component);function Hs(e){return(Hs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ks(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gs(e){return(Gs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ws(e,t){return(Ws=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Vs(Bs,"propTypes",{databaseName:et.a.string.isRequired,selectedNavItem:et.a.string.isRequired,selectedPartitionKey:et.a.string});var Ys=Zo.DeleteDatabaseModal,Qs=Zo.LoadLines,Zs=Ea.ConfirmationModal,Js=$o.deleteDbModalStore,$s=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=Gs(t).call(this,e),n=!o||"object"!==Hs(o)&&"function"!=typeof o?Xs(r):o,zs(Xs(n),"onChange",(function(){var e=n.getDeleteDbStoreState();n.setState(e)})),zs(Xs(n),"showDeleteDatabaseModal",(function(e){yn.showDeleteDatabaseModal(e)})),zs(Xs(n),"deleteIndex",(function(){var e="designDoc"===n.props.selectedNav.navItem&&"_design/"+n.props.selectedNav.designDocName===n.props.deleteIndexModalDesignDoc.id&&n.props.selectedNav.indexName===n.props.deleteIndexModalIndexName;n.props.deleteIndexModalOnSubmit({isOnIndex:e,indexName:n.props.deleteIndexModalIndexName,designDoc:n.props.deleteIndexModalDesignDoc,designDocs:n.props.designDocs,database:n.props.database})})),zs(Xs(n),"cloneIndex",(function(){n.props.cloneIndexModalOnSubmit({sourceIndexName:n.props.cloneIndexSourceIndexName,sourceDesignDocName:n.props.cloneIndexSourceDesignDocName,targetDesignDocName:n.props.cloneIndexModalSelectedDesignDoc,newDesignDocName:n.props.cloneIndexModalNewDesignDocName,newDesignDocPartitioned:n.props.cloneIndexModalNewDesignDocPartitioned,isDbPartitioned:n.props.isDbPartitioned,newIndexName:n.props.cloneIndexModalNewIndexName,designDocs:n.props.designDocs,database:n.props.database,onComplete:n.props.hideCloneIndexModal})})),n.state=n.getDeleteDbStoreState(),n.deleteIndex=n.deleteIndex.bind(Xs(n)),n.cloneIndex=n.cloneIndex.bind(Xs(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ws(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){Js.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){Js.off("change",this.onChange,this)}},{key:"getDeleteDbStoreState",value:function(){return{deleteDbModalProperties:Js.getShowDeleteDatabaseModal()}}},{key:"render",value:function(){return this.props.isLoading?ue.a.createElement(Qs,null):ue.a.createElement("nav",{className:"sidenav"},ue.a.createElement(Bs,{selectedNavItem:this.props.selectedNav.navItem,databaseName:this.props.database.id,selectedPartitionKey:this.props.selectedPartitionKey}),ue.a.createElement(xs,{selectedNav:this.props.selectedNav,selectedPartitionKey:this.props.selectedPartitionKey,isDbPartitioned:this.props.isDbPartitioned,toggle:this.props.toggleContent,toggledSections:this.props.toggledSections,designDocs:this.props.designDocList,database:this.props.database,showDeleteIndexModal:this.props.showDeleteIndexModal,showCloneIndexModal:this.props.showCloneIndexModal}),ue.a.createElement(Ys,{showHide:this.showDeleteDatabaseModal,modalProps:this.state.deleteDbModalProperties}),ue.a.createElement(Zs,{title:"Confirm Deletion",visible:this.props.deleteIndexModalVisible,text:this.props.deleteIndexModalText,onClose:this.props.hideDeleteIndexModal,onSubmit:this.deleteIndex}),ue.a.createElement(ps,{visible:this.props.cloneIndexModalVisible,title:this.props.cloneIndexModalTitle,close:this.props.hideCloneIndexModal,submit:this.cloneIndex,designDocArray:this.props.availableDesignDocIds,selectedDesignDoc:this.props.cloneIndexModalSelectedDesignDoc,selectedDesignDocPartitioned:this.props.cloneIndexModalSelectedDesignDocPartitioned,newDesignDocName:this.props.cloneIndexModalNewDesignDocName,newDesignDocPartitioned:this.props.cloneIndexModalNewDesignDocPartitioned,newIndexName:this.props.cloneIndexModalNewIndexName,indexLabel:this.props.cloneIndexModalIndexLabel,selectDesignDoc:this.props.selectDesignDoc,updateNewDesignDocName:this.props.updateNewDesignDocName,updateNewDesignDocPartitioned:this.props.updateNewDesignDocPartitioned,setNewCloneIndexName:this.props.setNewCloneIndexName,isDbPartitioned:this.props.isDbPartitioned}))}}])&&Ks(n.prototype,r),o&&Ks(n,o),t}(ue.a.Component);zs($s,"propTypes",{selectedNav:et.a.shape({designDocName:et.a.string,designDocSection:et.a.string,indexName:et.a.string,navItem:et.a.string}).isRequired});var ec={SidebarController:$s,DesignDoc:Ts,CloneIndexModal:ps};function tc(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function nc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tc(n,!0).forEach((function(t){rc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tc(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var oc={designDocs:new Backbone.Collection,designDocList:[],selected:{navItem:"all-docs",designDocName:"",designDocSection:"",indexName:""},loading:!0,toggledSections:{},deleteIndexModalVisible:!1,deleteIndexModalDesignDocName:"",deleteIndexModalText:"",deleteIndexModalIndexName:"",deleteIndexModalOnSubmit:function(){},cloneIndexModalVisible:!1,cloneIndexDesignDocProp:"",cloneIndexModalTitle:"",cloneIndexModalSelectedDesignDoc:"",cloneIndexModalNewDesignDocName:"",cloneIndexModalNewDesignDocPartitioned:!0,cloneIndexModalNewIndexName:"",cloneIndexModalSourceIndexName:"",cloneIndexModalSourceDesignDocName:"",cloneIndexModalIndexLabel:"",cloneIndexModalOnSubmit:function(){}};function ac(e){if(!e)return[];var t=e.toJSON();return(t=_.filter(t,(function(e){return!_.has(e.doc,"language")||"query"!==e.doc.language}))).map((function(e){return e.safeId=ce.utils.safeURLName(e._id.replace(/^_design\//,"")),_.extend(e,e.doc)}))}function ic(e,t){var n=e.designDocs.find((function(t){return e.cloneIndexModalSelectedDesignDoc==t.id}));return!!n&&_n.isDDocPartitioned(n.get("doc"),t)}function sc(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function cc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var lc=function(e){var t=e.designDocs.filter((function(e){return!e.isMangoDoc()}));return _.map(t,(function(e){return e.id}))},uc=function(e){var t=e.designDocs.find((function(t){return"_design/"+e.deleteIndexModalDesignDocName===t.id}));return t?t.dDocModel():null},dc=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sc(n,!0).forEach((function(t){cc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sc(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({designDocName:"",designDocSection:"",indexName:"",navItem:""},e)},pc=Object(tt.b)((function(e,t){var n,r=e.sidebar,o=e.databases;return{database:(n=r,n.loading?{}:n.database),selectedNav:dc(t.selectedNavItem),designDocs:r.designDocs,designDocList:r.designDocList,availableDesignDocIds:lc(r),toggledSections:r.toggledSections,isLoading:r.loading||o.isLoadingDbInfo,selectedPartitionKey:t.selectedPartitionKey,isDbPartitioned:o.isDbPartitioned,deleteIndexModalVisible:r.deleteIndexModalVisible,deleteIndexModalText:r.deleteIndexModalText,deleteIndexModalOnSubmit:r.deleteIndexModalOnSubmit,deleteIndexModalIndexName:r.deleteIndexModalIndexName,deleteIndexModalDesignDoc:uc(r),cloneIndexModalVisible:r.cloneIndexModalVisible,cloneIndexModalTitle:r.cloneIndexModalTitle,cloneIndexModalSelectedDesignDoc:r.cloneIndexModalSelectedDesignDoc,cloneIndexModalSelectedDesignDocPartitioned:ic(r,o.isDbPartitioned),cloneIndexModalNewDesignDocName:r.cloneIndexModalNewDesignDocName,cloneIndexModalNewDesignDocPartitioned:r.cloneIndexModalNewDesignDocPartitioned,cloneIndexModalOnSubmit:r.cloneIndexModalOnSubmit,cloneIndexDesignDocProp:r.cloneIndexDesignDocProp,cloneIndexModalNewIndexName:r.cloneIndexModalNewIndexName,cloneIndexSourceIndexName:r.cloneIndexModalSourceIndexName,cloneIndexSourceDesignDocName:r.cloneIndexModalSourceDesignDocName,cloneIndexModalIndexLabel:r.cloneIndexModalIndexLabel}}),(function(e){return{toggleContent:function(t,n){e(ai.toggleContent(t,n))},hideCloneIndexModal:function(){e(ai.hideCloneIndexModal())},hideDeleteIndexModal:function(){e(ai.hideDeleteIndexModal())},showDeleteIndexModal:function(t,n,r,o){e(ai.showDeleteIndexModal(t,n,r,o))},showCloneIndexModal:function(t,n,r,o){e(ai.showCloneIndexModal(t,n,r,o))},selectDesignDoc:function(t){e(ai.selectDesignDoc(t))},updateNewDesignDocName:function(t){e(ai.updateNewDesignDocName(t))},updateNewDesignDocPartitioned:function(t){e(ai.updateNewDesignDocPartitioned(t))},setNewCloneIndexName:function(t){e(ai.setNewCloneIndexName(t))}}}))(ec.SidebarController);function fc(e,t){var n=_n.getNewButtonLinks(e,t);return function(e){return _n.getModifyDatabaseLinks(e)}(e).concat(n)}var mc=function(e){var t=e.url,n=e.icon,r=e.onClick,o=e.children;return ue.a.createElement("li",{role:"presentation"},ue.a.createElement("a",{className:"faux-header__doc-header-dropdown-item",onClick:r,href:t},ue.a.createElement("i",{className:n})," ",o))},hc=function(e){var t=e.dbName,n=function(e){return e.map((function(e,t){if(e.title&&e.links){var n=e.links.map((function(e){return ue.a.createElement(mc,{key:e.title,onClick:e.onClick,icon:e.icon,url:e.url},e.title)}));return[ue.a.createElement("li",{key:e.title,className:"header-label"},e.title),n]}return ue.a.createElement(mc,{icon:e.icon,url:e.url,onClick:e.onClick,key:t},e.title)}))}(fc(t,e.partitionKey));return ue.a.createElement("div",{className:"faux-header__doc-header-left"},ue.a.createElement("button",{type:"button",className:"faux-header__doc-header-backlink",onClick:function(){ie.navigate("#/_all_dbs")}},ue.a.createElement("i",{className:"faux-header__doc-header-backlink__icon fonticon fonticon-left-open"})),ue.a.createElement("div",{className:"faux-header__doc-header-title flex-fill",title:t},t),ue.a.createElement(Tt.d,{id:"faux-header__doc-header-left-1"},ue.a.createElement(Tt.d.Toggle,{noCaret:!0,className:"faux-header__doc-header-dropdown-toggle"},ue.a.createElement("i",{className:"faux-header__doc-header-dropdown-toggle-icon fonticon-vertical-ellipsis"})),ue.a.createElement(Tt.d.Menu,{className:"faux-header__doc-header-dropdown-itemwrapper"},n)))};hc.propTypes={dbName:et.a.string.isRequired,partitionKey:et.a.string};var yc=hc,bc=n(53),gc=n.n(bc);n(208);function Ec(e){return(Ec="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vc(e,t){return!t||"object"!==Ec(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Oc(e){return(Oc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sc(e,t){return(Sc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Dc=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),vc(this,Oc(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sc(e,t)}(t,e),n=t,(r=[{key:"willEnter",value:function(){return{opacity:Object(Gr.spring)(1,Gr.presets.gentle),height:Object(Gr.spring)(160,Gr.presets.gentle)}}},{key:"willLeave",value:function(){return{opacity:Object(Gr.spring)(0,Gr.presets.gentle),height:Object(Gr.spring)(0,Gr.presets.gentle)}}},{key:"getStyles",value:function(e){return!e&&this.props.codeVisible?[{key:"1",style:this.willEnter()}]:e||this.props.codeVisible?e.map((function(e){return{key:"1",style:e.style}})):[{key:"1",style:this.willLeave()}]}},{key:"getChildren",value:function(e){var t=this,n=e.map((function(e){var n=e.style;return!1===t.props.codeVisible&&0===n.opacity?null:ue.a.createElement("div",{key:"1",style:{opacity:n.opacity,height:n.height+"px"}},ue.a.createElement(Ea.CodeFormat,{code:t.props.code}))}));return ue.a.createElement("span",null,n)}},{key:"render",value:function(){return ue.a.createElement(Gr.TransitionMotion,{styles:this.getStyles(),willLeave:this.willLeave,willEnter:this.willEnter},this.getChildren.bind(this))}}])&&_c(n.prototype,r),o&&_c(n,o),t}(ue.a.Component);function Nc(e){return(Nc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tc(e,t){return!t||"object"!==Nc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Cc(e){return(Cc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ic(e,t){return(Ic=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Dc.propTypes={code:et.a.object.isRequired,codeVisible:et.a.bool.isRequired};var Ac=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Tc(this,Cc(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ic(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.deleted,n=e.id,r=e.databaseName;if(t)return ue.a.createElement("span",{className:"js-doc-id"},n);var o="#"+ie.urls("document","app",r,n);return ue.a.createElement("a",{href:o,className:"js-doc-link"},n)}}])&&wc(n.prototype,r),o&&wc(n,o),t}(ue.a.Component);function Rc(e){return(Rc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Lc(e,t){return!t||"object"!==Rc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xc(e){return(xc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kc(e,t){return(kc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var jc=Zo.Copy,Uc=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Lc(this,xc(t).call(this,e))).state={codeVisible:!1},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kc(e,t)}(t,e),n=t,(r=[{key:"toggleJSON",value:function(e){e.preventDefault(),this.setState({codeVisible:!this.state.codeVisible})}},{key:"getChangesCode",value:function(){return this.state.codeVisible?ue.a.createElement(Ea.CodeFormat,{key:"changesCodeSection",code:this.getChangeCode()}):null}},{key:"getChangeCode",value:function(){return{changes:this.props.change.changes,doc:this.props.change.doc}}},{key:"showCopiedMessage",value:function(e){var t="The document ID has been copied to your clipboard.";"seq"===e&&(t="The document seq number has been copied to your clipboard."),ie.addNotification({msg:t,type:"info",clear:!0})}},{key:"render",value:function(){var e=this,t=this.state.codeVisible,n=this.props,r=n.change,o=n.databaseName,a="change-wrapper"+(r.isNew?" new-change-row":"");return ue.a.createElement("div",{className:a},ue.a.createElement("div",{className:"change-box","data-id":r.id},ue.a.createElement("div",{className:"row-fluid"},ue.a.createElement("div",{className:"span2"},"seq"),ue.a.createElement("div",{className:"span8 change-sequence"},r.seq),ue.a.createElement("div",{className:"span2 text-right"},ue.a.createElement(jc,{uniqueKey:gc.a.v4(),text:r.seq.toString(),onClipboardClick:function(){return e.showCopiedMessage("seq")}}))),ue.a.createElement("div",{className:"row-fluid"},ue.a.createElement("div",{className:"span2"},"id"),ue.a.createElement("div",{className:"span8"},ue.a.createElement(Ac,{id:r.id,deleted:r.deleted,databaseName:o})),ue.a.createElement("div",{className:"span2 text-right"},ue.a.createElement(jc,{uniqueKey:gc.a.v4(),text:r.id,onClipboardClick:function(){return e.showCopiedMessage("id")}}))),ue.a.createElement("div",{className:"row-fluid"},ue.a.createElement("div",{className:"span2"},"deleted"),ue.a.createElement("div",{className:"span10"},r.deleted?"True":"False")),ue.a.createElement("div",{className:"row-fluid"},ue.a.createElement("div",{className:"span2"},"changes"),ue.a.createElement("div",{className:"span10"},ue.a.createElement("button",{type:"button",className:"btn btn-small btn-secondary",onClick:this.toggleJSON.bind(this)},t?"Close JSON":"View JSON"))),ue.a.createElement(Dc,{codeVisible:this.state.codeVisible,code:this.getChangeCode()})))}}])&&Pc(n.prototype,r),o&&Pc(n,o),t}(ue.a.Component);function Mc(e){return(Mc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vc(e,t){return!t||"object"!==Mc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fc(e){return(Fc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bc(e,t){return(Bc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Uc.propTypes={change:et.a.object,databaseName:et.a.string.isRequired};var Hc=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Vc(this,Fc(t).call(this,e))).props.loadChanges(n.props.databaseName),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bc(e,t)}(t,e),n=t,(r=[{key:"showingSubsetMsg",value:function(){var e=this.props,t=e.isShowingSubset,n=e.changes,r="";if(t){var o=n.length;r=ue.a.createElement("p",{className:"changes-result-limit"},"Limiting results to latest ",ue.a.createElement("b",null,o)," changes.")}return r}},{key:"getRows",value:function(){var e=this.props,t=e.changes,n=e.loaded,r=e.databaseName;return!t.length&&n?ue.a.createElement("p",{className:"no-doc-changes"},"There are no document changes to display."):t.map((function(e,t){return ue.a.createElement(Uc,{change:e,key:t,databaseName:r})}))}},{key:"render",value:function(){return ue.a.createElement("div",null,ue.a.createElement("div",{className:"js-changes-view"},this.showingSubsetMsg(),this.getRows()))}}])&&qc(n.prototype,r),o&&qc(n,o),t}(ue.a.Component);Hc.propTypes={changes:et.a.array.isRequired,loaded:et.a.bool.isRequired,databaseName:et.a.string.isRequired,isShowingSubset:et.a.bool.isRequired,loadChanges:et.a.func.isRequired};var Kc,Gc={UPDATE_CHANGES:"UPDATE_CHANGES",ADD_CHANGES_FILTER_ITEM:"ADD_CHANGES_FILTER_ITEM",REMOVE_CHANGES_FILTER_ITEM:"REMOVE_CHANGES_FILTER_ITEM",UPDATE_CHANGES_FILTER:"UPDATE_CHANGES_FILTER",TOGGLE_CHANGES_CODE_VISIBILITY:"TOGGLE_CHANGES_CODE_VISIBILITY"},Xc=function(e,t,n){var r={limit:100};Kc&&(r.since=n,r.timeout=6e4,r.feed="longpoll");var o=ce.utils.queryParams(r),a=ce.utils.safeURLName(t),i=ie.urls("changes","server",a,"?"+o);v(i).then((function(t){if(t.error)throw new Error(t.reason||t.error);Wc(t,e)})).catch((function(e){ie.addNotification({msg:"Error loading list of changes. Reason: "+e.message,type:"error",clear:!0})}))},Wc=function(e,t){var n=_n.getSeqNum(e.last_seq);t({type:Gc.UPDATE_CHANGES,changes:e.results,seqNum:n})},zc=function(e){return function(t){t({type:Gc.ADD_CHANGES_FILTER_ITEM,filter:e})}},Yc=function(e){return function(t){t({type:Gc.REMOVE_CHANGES_FILTER_ITEM,filter:e})}},Qc=function(e){return function(t){Kc=null,Xc(t,e)}},Zc=Object(tt.b)((function(e,t){var n=e.changes;return{changes:n.filteredChanges,loaded:n.isLoaded,databaseName:t.databaseName,isShowingSubset:n.showingSubset}}),(function(e){return{loadChanges:function(t){e(Qc(t))}}}))(Hc);function Jc(e){return(Jc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function el(e){return(el=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nl(e,t){return(nl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var rl=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=el(t).call(this,e))||"object"!==Jc(o)&&"function"!=typeof o?tl(r):o).state={filter:"",error:!1},n.submitForm=n.submitForm.bind(tl(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nl(e,t)}(t,e),n=t,(r=[{key:"submitForm",value:function(e){if(e.preventDefault(),e.stopPropagation(),this.props.hasFilter(this.state.filter)){this.setState({error:!0});var t=this;setTimeout((function(){t.setState({error:!1})}),1e3)}else this.props.addFilter(this.state.filter),this.setState({filter:"",error:!1})}},{key:"componentDidMount",value:function(){this.focusFilterField()}},{key:"componentDidUpdate",value:function(){this.focusFilterField()}},{key:"focusFilterField",value:function(){this.addItem.focus()}},{key:"inputClassNames",value:function(){var e="js-changes-filter-field";return this.state.error&&(e+=" errorHighlight"),e}},{key:"render",value:function(){var e=this;return ue.a.createElement("form",{className:"form-inline js-filter-form",onSubmit:this.submitForm},ue.a.createElement("fieldset",null,ue.a.createElement("i",{className:"fonticon-filter"}),ue.a.createElement("input",{type:"text",ref:function(t){return e.addItem=t},className:this.inputClassNames(),placeholder:"Sequence or ID",onChange:function(t){return e.setState({filter:t.target.value})},value:this.state.filter}),ue.a.createElement("button",{type:"submit",className:"btn btn-secondary"},"Filter"),ue.a.createElement("div",{className:"help-block"})))}}])&&$c(n.prototype,r),o&&$c(n,o),t}(ue.a.Component);function ol(e){return(ol="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function al(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function il(e){return(il=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cl(e,t){return(cl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}rl.propTypes={addFilter:et.a.func.isRequired,hasFilter:et.a.func.isRequired,tooltips:et.a.string},rl.defaultProps={tooltip:""};var ll=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=il(t).call(this,e))||"object"!==ol(o)&&"function"!=typeof o?sl(r):o).addFilter=n.addFilter.bind(sl(n)),n.hasFilter=n.hasFilter.bind(sl(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cl(e,t)}(t,e),n=t,(r=[{key:"addFilter",value:function(e){_.isEmpty(e)||this.props.addFilter(e)}},{key:"hasFilter",value:function(e){return-1!==this.props.filters.indexOf(e)}},{key:"render",value:function(){var e=this;return ue.a.createElement("div",{className:"changes-header"},ue.a.createElement(rl,{filter:function(t){return e.props.removeFilter(t)},addFilter:this.addFilter,hasFilter:this.hasFilter}),ue.a.createElement(Zo.BadgeList,{elements:this.props.filters,removeBadge:function(t){return e.props.removeFilter(t)}}))}}])&&al(n.prototype,r),o&&al(n,o),t}(ue.a.Component);ll.propTypes={filters:et.a.array.isRequired,addFilter:et.a.func.isRequired,removeFilter:et.a.func.isRequired};var ul=Object(tt.b)((function(e){return{filters:e.changes.filters}}),(function(e){return{addFilter:function(t){e(zc(t))},removeFilter:function(t){e(Yc(t))}}}))(ll);function dl(e){return(dl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fl(e){return(fl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ml(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hl(e,t){return(hl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var yl=Zo.LoadLines,bl=Zo.Copy,gl=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=fl(t).call(this,e))||"object"!==dl(o)&&"function"!=typeof o?ml(r):o,function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ml(n),"showCopiedMessage",(function(){ie.addNotification({type:"success",msg:"The MD5 sha has been copied to your clipboard.",clear:!0})})),n.fetchDDocInfo(),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hl(e,t)}(t,e),n=t,(r=[{key:"componentDidUpdate",value:function(e){this.props.designDocInfo!==e.designDocInfo&&this.fetchDDocInfo()}},{key:"componentWillUnmount",value:function(){this.props.stopRefresh()}},{key:"fetchDDocInfo",value:function(){this.props.fetchDesignDocInfo({designDocName:this.props.designDocName,designDocInfo:this.props.designDocInfo})}},{key:"render",value:function(){if(this.props.isLoading)return ue.a.createElement(yl,null);var e=this.props.viewIndex,t=e.sizes,n=t.active?t.active.toLocaleString("en"):0,r=t.external?t.external.toLocaleString("en"):0;return ue.a.createElement("div",{className:"metadata-page"},ue.a.createElement("header",null,ue.a.createElement("h2",null,"_design/",this.props.designDocName," Metadata")),ue.a.createElement("section",{className:"container"},ue.a.createElement("h3",null,"Index Information"),ue.a.createElement("ul",null,ue.a.createElement("li",null,ue.a.createElement("span",{className:"item-title"},"Language:"),ue.a.createElement("span",{className:"capitalize"},e.language)),ue.a.createElement("li",null,ue.a.createElement("span",{className:"item-title"},"Currently being updated?"),e.updater_running?"Yes":"No"),ue.a.createElement("li",null,ue.a.createElement("span",{className:"item-title"},"Currently running compaction?"),e.compact_running?"Yes":"No"),ue.a.createElement("li",null,ue.a.createElement("span",{className:"item-title"},"Waiting for a commit?"),e.waiting_commit?"Yes":"No")),ue.a.createElement("ul",null,ue.a.createElement("li",null,ue.a.createElement("span",{className:"item-title"},"Clients waiting for the index:"),e.waiting_clients),ue.a.createElement("li",null,ue.a.createElement("span",{className:"item-title"},"Update sequence on DB:"),e.update_seq),ue.a.createElement("li",null,ue.a.createElement("span",{className:"item-title"},"Processed purge sequence:"),e.purge_seq),ue.a.createElement("li",null,ue.a.createElement("span",{className:"item-title"},"Actual data size (bytes):"),n),ue.a.createElement("li",null,ue.a.createElement("span",{className:"item-title"},"Data size on disk (bytes):"),r)),ue.a.createElement("ul",null,ue.a.createElement("li",null,ue.a.createElement("span",{className:"item-title"},"MD5 Signature:"),ue.a.createElement(bl,{uniqueKey:gc.a.v4(),text:e.signature,onClipboardClick:this.showCopiedMessage})))))}}])&&pl(n.prototype,r),o&&pl(n,o),t}(ue.a.Component);gl.propTypes={isLoading:et.a.bool.isRequired,viewIndex:et.a.object,designDocName:et.a.string.isRequired,stopRefresh:et.a.func.isRequired,fetchDesignDocInfo:et.a.func.isRequired};var El,_l={DESIGN_DOC_MONITOR:"DESIGN_DOC_MONITOR",DESIGN_FETCHING:"DESIGN_FETCHING",DESIGN_REFRESH:"DESIGN_REFRESH"},vl=function(e,t){Sl(),El=window.setInterval((function(){Ol(e.designDocInfo,t)}),5e3),t({type:_l.DESIGN_DOC_MONITOR,options:e})},Ol=function(e,t){e.fetch().then((function(){t({type:_l.DESIGN_REFRESH,designDocInfo:e})}))},Sl=function(){El&&(window.clearInterval(El),El=void 0)},Dl={fetchDesignDocInfo:function(e){var t=e.designDocName,n=e.designDocInfo;return function(e){return e({type:_l.DESIGN_FETCHING}),n.fetch().then((function(){vl({designDocName:t,designDocInfo:n},e)}))}},stopRefresh:Sl},Nl=Object(tt.b)((function(e,t){var n=e.designDocInfo;return{isLoading:n.isLoading,viewIndex:n.viewIndex,designDocInfo:t.designDocInfo,designDocName:t.designDocName}}),(function(e){return{fetchDesignDocInfo:function(t){e(Dl.fetchDesignDocInfo(t))},stopRefresh:function(){Dl.stopRefresh()}}}))(gl);function wl(e){return(wl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Cl(e){return(Cl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Il(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Al(e,t){return(Al=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Rl=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=Cl(t).call(this,e))||"object"!==wl(o)&&"function"!=typeof o?Il(r):o).toggleStable=n.toggleStable.bind(Il(n)),n.onUpdateChange=n.onUpdateChange.bind(Il(n)),n.toggleIncludeDocs=n.toggleIncludeDocs.bind(Il(n)),n.updateOptions=[{value:"true",label:"true"},{value:"lazy",label:"lazy"},{value:"false",label:"false"}],n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Al(e,t)}(t,e),n=t,(r=[{key:"toggleIncludeDocs",value:function(){this.props.toggleIncludeDocs(this.props.includeDocs)}},{key:"onUpdateChange",value:function(e){this.props.changeUpdateField(e.target.value)}},{key:"groupLevelChange",value:function(e){this.props.updateGroupLevel(e.target.value)}},{key:"groupLevel",value:function(){return this.props.reduce?ue.a.createElement("label",{className:"drop-down inline",id:"qoGroupLevelGroup"},"Group Level",ue.a.createElement("select",{onChange:this.groupLevelChange.bind(this),id:"qoGroupLevel",value:this.props.groupLevel,name:"group_level",className:"input-small"},ue.a.createElement("option",{value:"0"},"None"),ue.a.createElement("option",{value:"1"},"1"),ue.a.createElement("option",{value:"2"},"2"),ue.a.createElement("option",{value:"3"},"3"),ue.a.createElement("option",{value:"4"},"4"),ue.a.createElement("option",{value:"5"},"5"),ue.a.createElement("option",{value:"6"},"6"),ue.a.createElement("option",{value:"7"},"7"),ue.a.createElement("option",{value:"8"},"8"),ue.a.createElement("option",{value:"9"},"9"),ue.a.createElement("option",{value:"exact"},"Exact"))):null}},{key:"toggleReduce",value:function(){this.props.toggleReduce(this.props.reduce)}},{key:"toggleStable",value:function(){this.props.toggleStable(this.props.stable)}},{key:"includeDocsOption",value:function(){var e=this.props,t=e.includeDocs,n=e.reduce;return ue.a.createElement("div",{className:"checkbox inline"},ue.a.createElement("input",{disabled:n,onChange:this.toggleIncludeDocs,id:"qoIncludeDocs",name:"include_docs",type:"checkbox",checked:t}),ue.a.createElement("label",{className:n?"disabled":"",htmlFor:"qoIncludeDocs",id:"qoIncludeDocsLabel"},"Include Docs"))}},{key:"reduceOption",value:function(){var e=this.props,t=e.showReduce,n=e.reduce;return t?ue.a.createElement("span",null,ue.a.createElement("div",{className:"checkbox inline"},ue.a.createElement("input",{id:"qoReduce",name:"reduce",onChange:this.toggleReduce.bind(this),type:"checkbox",checked:n}),ue.a.createElement("label",{htmlFor:"qoReduce"},"Reduce")),this.groupLevel()):null}},{key:"stableOption",value:function(){var e=this.props,t=e.enableStable,n=e.stable;return t||(n=!1),ue.a.createElement("div",{className:"checkbox inline"},ue.a.createElement("input",{onChange:this.toggleStable,id:"qoStable",name:"stable",type:"checkbox",checked:n,disabled:!t}),ue.a.createElement("label",{className:t?"":"disabled",htmlFor:"qoStable",id:"qoStableLabel"},"Stable"))}},{key:"updateOption",value:function(){var e=this.props.update,t=this.updateOptions.map((function(e){return ue.a.createElement("option",{key:e.value,value:e.value},e.label)}));return ue.a.createElement("div",{className:"dropdown inline"},ue.a.createElement("label",{className:"drop-down"},"Update",ue.a.createElement("select",{className:"input-small",id:"qoUpdate",value:e,onChange:this.onUpdateChange},t)))}},{key:"render",value:function(){return ue.a.createElement("div",{className:"query-group",id:"query-options-main-fields"},ue.a.createElement("span",{className:"add-on"},"Query Options",ue.a.createElement("a",{className:"help-link",href:this.props.docURL,target:"_blank",rel:"noopener noreferrer","data-bypass":"true"},ue.a.createElement("i",{className:"icon-question-sign"}))),ue.a.createElement("div",{className:"row-fluid fieldsets"},this.includeDocsOption(),this.reduceOption()),ue.a.createElement("div",{className:"row-fluid fieldsets"},this.stableOption(),this.updateOption()))}}])&&Tl(n.prototype,r),o&&Tl(n,o),t}(ue.a.Component);function Pl(e){return(Pl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ll(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xl(e,t){return!t||"object"!==Pl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kl(e){return(kl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jl(e,t){return(jl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Rl.propTypes={toggleIncludeDocs:et.a.func.isRequired,includeDocs:et.a.bool.isRequired,reduce:et.a.bool.isRequired,toggleReduce:et.a.func,updateGroupLevel:et.a.func,docURL:et.a.string.isRequired,stable:et.a.bool.isRequired,toggleStable:et.a.func.isRequired,update:et.a.string.isRequired,changeUpdateField:et.a.func.isRequired,showReduce:et.a.bool.isRequired,enableStable:et.a.bool.isRequired};var Ul=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),xl(this,kl(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jl(e,t)}(t,e),n=t,(r=[{key:"toggleByKeys",value:function(){this.props.toggleByKeys()}},{key:"toggleBetweenKeys",value:function(){this.props.toggleBetweenKeys()}},{key:"updateBetweenKeys",value:function(){this.props.updateBetweenKeys({startkey:this.startkey.value,endkey:this.endkey.value,include:this.props.betweenKeys.include})}},{key:"updateInclusiveEnd",value:function(){this.props.updateBetweenKeys({include:!this.props.betweenKeys.include,startkey:this.props.betweenKeys.startkey,endkey:this.props.betweenKeys.endkey})}},{key:"updateByKeys",value:function(e){this.props.updateByKeys(e.target.value)}},{key:"render",value:function(){var e=this,t="controls-group well js-query-keys-wrapper ",n="row-fluid js-keys-section ",r=n,o="drop-down btn ",a=o;return this.props.showByKeys||this.props.showBetweenKeys||(t+="hide"),this.props.showByKeys?o+="active":n+="hide",this.props.showBetweenKeys?a+="active":r+="hide",ue.a.createElement("div",{className:"query-group",id:"query-options-key-search"},ue.a.createElement("div",{className:"add-on"},"Keys"),ue.a.createElement("div",{className:"btn-group toggle-btns row-fluid"},ue.a.createElement("label",{style:{width:"101px"},id:"byKeys",onClick:this.toggleByKeys.bind(this),className:o},"By Key(s)"),ue.a.createElement("label",{style:{width:"101px"},id:"betweenKeys",onClick:this.toggleBetweenKeys.bind(this),className:a},"Between Keys")),ue.a.createElement("div",{className:t},ue.a.createElement("div",{className:n,id:"js-showKeys"},ue.a.createElement("div",{className:"controls controls-row"},ue.a.createElement("label",{htmlFor:"keys-input",className:"drop-down"},"A key, or an array of keys."),ue.a.createElement("textarea",{value:this.props.byKeys,onChange:this.updateByKeys.bind(this),id:"keys-input",className:"input-xxlarge",rows:"5",type:"text",placeholder:'Enter either a single key ["123"] or an array of keys ["123", "456"]. A key value is the first parameter emitted in a map function. For example emit("123", 1) the key is "123".'}),ue.a.createElement("div",{id:"keys-error",className:"inline-block js-keys-error"}))),ue.a.createElement("div",{className:r,id:"js-showStartEnd"},ue.a.createElement("div",{className:"controls controls-row"},ue.a.createElement("div",null,ue.a.createElement("label",{htmlFor:"startkey",className:"drop-down"},"Start key"),ue.a.createElement("input",{id:"startkey",ref:function(t){return e.startkey=t},type:"text",onChange:this.updateBetweenKeys.bind(this),value:this.props.betweenKeys.startkey,placeholder:'e.g., "1234"'})),ue.a.createElement("div",null,ue.a.createElement("label",{htmlFor:"endkey",className:"drop-down"},"End key"),ue.a.createElement("input",{id:"endkey",ref:function(t){return e.endkey=t},onChange:this.updateBetweenKeys.bind(this),value:this.props.betweenKeys.endkey,type:"text",placeholder:'e.g., "1234"'}),ue.a.createElement("div",{className:"controls include-end-key-row checkbox controls-row inline"},ue.a.createElement("input",{id:"qoIncludeEndKeyInResults",type:"checkbox",onChange:this.updateInclusiveEnd.bind(this),checked:this.props.betweenKeys.include}),ue.a.createElement("label",{htmlFor:"qoIncludeEndKeyInResults"},"Include End Key in results")))))))}}])&&Ll(n.prototype,r),o&&Ll(n,o),t}(ue.a.Component);function Ml(e){return(Ml="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ql(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vl(e,t){return!t||"object"!==Ml(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fl(e){return(Fl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bl(e,t){return(Bl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Hl=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Vl(this,Fl(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bl(e,t)}(t,e),n=t,(r=[{key:"updateSkip",value:function(e){e.preventDefault();var t=e.target.value;/^\d*$/.test(t)||(ie.addNotification({msg:"Skip can only be a number",type:"error"}),t=this.props.skip),this.props.updateSkip(t)}},{key:"updateLimit",value:function(e){e.preventDefault(),this.props.updateLimit(e.target.value)}},{key:"toggleDescending",value:function(){this.props.toggleDescending(this.props.descending)}},{key:"render",value:function(){return ue.a.createElement("div",{className:"query-group",id:"query-options-additional-params"},ue.a.createElement("div",{className:"add-on additionalParams"},"Additional Parameters"),ue.a.createElement("div",{className:"row-fluid fieldsets"},ue.a.createElement("div",{className:"dropdown inline"},ue.a.createElement("label",{className:"drop-down"},"Limit",ue.a.createElement("select",{id:"qoLimit",onChange:this.updateLimit.bind(this),name:"limit",value:this.props.limit,className:"input-small"},ue.a.createElement("option",{value:"none"},"None"),ue.a.createElement("option",{value:5},"5"),ue.a.createElement("option",{value:10},"10"),ue.a.createElement("option",{value:20},"20"),ue.a.createElement("option",{value:30},"30"),ue.a.createElement("option",{value:50},"50"),ue.a.createElement("option",{value:100},"100"),ue.a.createElement("option",{value:500},"500"))))),ue.a.createElement("div",{className:"row-fluid fieldsets"},ue.a.createElement("div",{className:"checkbox inline"},ue.a.createElement("input",{id:"qoDescending",type:"checkbox",onChange:this.toggleDescending.bind(this),checked:this.props.descending}),ue.a.createElement("label",{htmlFor:"qoDescending"},"Descending")),ue.a.createElement("div",{className:"dropdown inline"},ue.a.createElement("label",{htmlFor:"qoSkip",className:"drop-down"},"Skip",ue.a.createElement("input",{value:this.props.skip,onChange:this.updateSkip.bind(this),className:"input-small",type:"number",id:"qoSkip",placeholder:"# of rows"})))))}}])&&ql(n.prototype,r),o&&ql(n,o),t}(ue.a.Component);function Kl(e){return(Kl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xl(e,t){return!t||"object"!==Kl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Wl(e){return(Wl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zl(e,t){return(zl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Yl=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Xl(this,Wl(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zl(e,t)}(t,e),n=t,(r=[{key:"hideTray",value:function(){this.props.onCancel()}},{key:"render",value:function(){return ue.a.createElement("div",{className:"controls-group query-group"},ue.a.createElement("div",{id:"button-options",className:"controls controls-row"},ue.a.createElement("button",{type:"submit",className:"btn btn-secondary"},"Run Query"),ue.a.createElement("a",{onClick:this.hideTray.bind(this),className:"btn btn-cancelDark"},"Cancel")))}}])&&Gl(n.prototype,r),o&&Gl(n,o),t}(ue.a.Component);function Ql(e){return(Ql="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jl(e,t){return!t||"object"!==Ql(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $l(e){return($l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eu(e,t){return(eu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Yl.propTypes={onCancel:et.a.func.isRequired};var tu=Zo.ToggleHeaderButton,nu=Zo.TrayContents,ru=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=Jl(this,$l(t).call(this,e));var r=e.ddocsOnly,o=e.queryOptionsApplyFilterOnlyDdocs;return r&&o(),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&eu(e,t)}(t,e),n=t,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props,n=t.ddocsOnly,r=t.queryOptionsApplyFilterOnlyDdocs,o=t.queryOptionsRemoveFilterOnlyDdocs;!n&&e.ddocsOnly?r():n&&!e.ddocsOnly&&o()}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.ddocsOnly,n=e.queryOptionsRemoveFilterOnlyDdocs;t&&n()}},{key:"executeQuery",value:function(e){e&&e.preventDefault(),this.closeTray();var t=this.props,n=t.queryOptionsExecute,r=t.queryOptionsParams,o=t.perPage,a=t.resetPagination,i=t.selectedLayout,s=t.changeLayout;a(o);var c=i===fr.LAYOUT_ORIENTATION.METADATA;c&&r.include_docs?s(fr.LAYOUT_ORIENTATION.TABLE):c||r.include_docs||s(fr.LAYOUT_ORIENTATION.METADATA),n(r,o)}},{key:"toggleTrayVisibility",value:function(){this.props.queryOptionsToggleVisibility(!this.props.contentVisible)}},{key:"closeTray",value:function(){this.props.queryOptionsToggleVisibility(!1)}},{key:"getTray",value:function(){return ue.a.createElement(nu,{closeTray:this.closeTray.bind(this),contentVisible:this.props.contentVisible,className:"query-options",id:"query-options-tray",container:this},ue.a.createElement("form",{onSubmit:this.executeQuery.bind(this),className:"js-view-query-update custom-inputs"},ue.a.createElement(Rl,{includeDocs:this.props.includeDocs,toggleIncludeDocs:this.props.queryOptionsToggleIncludeDocs,showReduce:this.props.showReduce,reduce:this.props.reduce,toggleReduce:this.props.queryOptionsToggleReduce,groupLevel:this.props.groupLevel,updateGroupLevel:this.props.queryOptionsUpdateGroupLevel,docURL:ie.constants.DOC_URLS.GENERAL,enableStable:this.props.enableStable,stable:this.props.stable,toggleStable:this.props.queryOptionsToggleStable,update:this.props.update,changeUpdateField:this.props.queryOptionsChangeUpdate}),ue.a.createElement(Ul,{key:1,showByKeys:this.props.showByKeys,showBetweenKeys:this.props.showBetweenKeys,toggleByKeys:this.props.queryOptionsToggleByKeys,toggleBetweenKeys:this.props.queryOptionsToggleBetweenKeys,betweenKeys:this.props.betweenKeys,updateBetweenKeys:this.props.queryOptionsUpdateBetweenKeys,byKeys:this.props.byKeys,updateByKeys:this.props.queryOptionsUpdateByKeys}),ue.a.createElement(Hl,{descending:this.props.descending,toggleDescending:this.props.queryOptionsToggleDescending,skip:this.props.skip,updateSkip:this.props.queryOptionsUpdateSkip,updateLimit:this.props.queryOptionsUpdateLimit,limit:this.props.limit}),ue.a.createElement(Yl,{onCancel:this.closeTray.bind(this)})))}},{key:"showAsActive",value:function(){var e=this.props,t=e.reduce,n=e.betweenKeys,r=e.byKeys,o=e.descending,a=e.skip,i=e.limit,s=e.stable,c=e.update;return!!(n&&n.startkey||r||i&&"none"!=i||a||t||o||s||"true"!==c)}},{key:"render",value:function(){return ue.a.createElement("div",{id:"header-query-options"},ue.a.createElement("div",{id:"query-options"},ue.a.createElement("div",null,ue.a.createElement(tu,{toggleCallback:this.toggleTrayVisibility.bind(this),containerClasses:"header-control-box control-toggle-queryoptions",title:"Query Options",fonticon:"fonticon-gears",text:"Options",active:this.showAsActive()}),this.getTray())))}}])&&Zl(n.prototype,r),o&&Zl(n,o),t}(ue.a.Component);ru.propTypes={contentVisible:et.a.bool.isRequired,queryOptionsApplyFilterOnlyDdocs:et.a.func.isRequired,queryOptionsRemoveFilterOnlyDdocs:et.a.func.isRequired,queryOptionsExecute:et.a.func.isRequired,queryOptionsParams:et.a.object.isRequired,perPage:et.a.number.isRequired,resetPagination:et.a.func.isRequired,selectedLayout:et.a.string.isRequired,changeLayout:et.a.func.isRequired,queryOptionsToggleVisibility:et.a.func.isRequired,queryOptionsToggleStable:et.a.func.isRequired,queryOptionsChangeUpdate:et.a.func.isRequired,stable:et.a.bool.isRequired,update:et.a.string.isRequired};var ou={INDEX_RESULTS_NEW_RESULTS:"INDEX_RESULTS_NEW_RESULTS",INDEX_RESULTS_RESET:"INDEX_RESULTS_RESET",INDEX_RESULTS_SELECT_DOC:"INDEX_RESULTS_SELECT_DOC",INDEX_RESULTS_CLEAR_RESULTS:"INDEX_RESULTS_CLEAR_RESULTS",INDEX_RESULTS_TOOGLE_SELECT_ALL_DOCUMENTS:"INDEX_RESULTS_TOOGLE_SELECT_ALL_DOCUMENTS",INDEX_RESULTS_SELECT_NEW_FIELD_IN_TABLE:"INDEX_RESULTS_SELECT_NEW_FIELD_IN_TABLE",INDEX_RESULTS_CLEAR_SELECTED_ITEMS:"INDEX_RESULTS_CLEAR_SELECTED_ITEMS",INDEX_RESULTS_TOGGLE_PRIORITIZED_TABLE_VIEW:"INDEX_RESULTS_TOGGLE_PRIORITIZED_TABLE_VIEW",INDEX_RESULTS_REDUX_NEW_RESULTS:"INDEX_RESULTS_REDUX_NEW_RESULTS",INDEX_RESULTS_REDUX_IS_LOADING:"INDEX_RESULTS_REDUX_IS_LOADING",INDEX_RESULTS_REDUX_CHANGE_LAYOUT:"INDEX_RESULTS_REDUX_CHANGE_LAYOUT",INDEX_RESULTS_REDUX_TOGGLE_SHOW_ALL_COLUMNS:"INDEX_RESULTS_REDUX_TOGGLE_SHOW_ALL_COLUMNS",INDEX_RESULTS_REDUX_SET_PER_PAGE:"INDEX_RESULTS_REDUX_SET_PER_PAGE",INDEX_RESULTS_REDUX_PAGINATE_NEXT:"INDEX_RESULTS_REDUX_PAGINATE_NEXT",INDEX_RESULTS_REDUX_PAGINATE_PREVIOUS:"INDEX_RESULTS_REDUX_PAGINATE_PREVIOUS",INDEX_RESULTS_REDUX_NEW_SELECTED_DOCS:"INDEX_RESULTS_REDUX_NEW_SELECTED_DOCS",INDEX_RESULTS_REDUX_CHANGE_TABLE_HEADER_ATTRIBUTE:"INDEX_RESULTS_REDUX_CHANGE_TABLE_HEADER_ATTRIBUTE",INDEX_RESULTS_REDUX_RESET_STATE:"INDEX_RESULTS_REDUX_RESET_STATE",INDEX_RESULTS_REDUX_NEW_QUERY_OPTIONS:"INDEX_RESULTS_REDUX_NEW_QUERY_OPTIONS",INDEX_RESULTS_REDUX_PARTITION_PARAM_NOT_SUPPORTED:"INDEX_RESULTS_REDUX_PARTITION_PARAM_NOT_SUPPORTED",INDEX_RESULTS_REDUX_PARTITION_PARAM_MANDATORY:"INDEX_RESULTS_REDUX_PARTITION_PARAM_MANDATORY",INDEX_RESULTS_SET_STYLE:"INDEX_RESULTS_SET_STYLE"},au=function(e,t,n){void 0===e&&(e="server");var r=ce.utils.getSafeIdForDoc(t);r||(r="");var o=encodeURIComponent(n);return ie.urls("document",e,o,r,"?conflicts=true")},iu=function(e,t){if(e)return t!==fr.INDEX_RESULTS_DOC_TYPE.MANGO_INDEX&&(!!Object.keys(e).length&&!!e._id)},su=function(e,t){return t===fr.INDEX_RESULTS_DOC_TYPE.MANGO_INDEX?"special"!==e.type:!!((e._id||e.id)&&(e._rev||e.value&&e.value.rev))},cu=function(e,t){return!!e.find((function(e){return su(e,t)}))},lu=function(){if(window.localStorage){var e=ce.utils.localStorageGet("fauxton:perpageredux");if(e)return parseInt(e,10)}return ie.constants.MISC.DEFAULT_PAGE_SIZE},uu=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fr.INDEX_RESULTS_DOC_TYPE.VIEW;return t===fr.INDEX_RESULTS_DOC_TYPE.VIEW?e.id||e._id:t===fr.INDEX_RESULTS_DOC_TYPE.MANGO_INDEX?"special"===e.type?"_all_docs":e.ddoc:t===fr.INDEX_RESULTS_DOC_TYPE.MANGO_QUERY?e._id:e.id||e._id},du=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fr.INDEX_RESULTS_DOC_TYPE.VIEW;return t===fr.INDEX_RESULTS_DOC_TYPE.VIEW?e.value?e.value.rev:e._rev:t!==fr.INDEX_RESULTS_DOC_TYPE.MANGO_INDEX&&t===fr.INDEX_RESULTS_DOC_TYPE.MANGO_QUERY?e._rev:void 0},pu=function(e){return"Reason: "+(e&&e.message||"n/a")},fu=function(){return{type:ou.INDEX_RESULTS_REDUX_RESET_STATE}},mu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:ou.INDEX_RESULTS_REDUX_NEW_SELECTED_DOCS,selectedDocs:e}},hu=function(e){return{type:ou.INDEX_RESULTS_REDUX_CHANGE_LAYOUT,layout:e}};n(317);function yu(){return(yu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function bu(){return(bu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var gu=function(e,t,n){var r=function(e,t){var n={},r=(t.skip||0)+t.limit;n.skip=Math.max(e.skip,t.skip||0),n.limit=e.limit,e.conflicts&&(n.conflicts=!0);var o=r-n.skip;return{params:bu({},t,n),totalDocsRemaining:o}}(t,n),o=r.params,a=r.totalDocsRemaining;return o.limit=Math.min(o.limit,1e4),function(t){return t({type:ou.INDEX_RESULTS_REDUX_IS_LOADING}),e(o).then((function(e){var n=e.docs,r=e.docType,i=e.executionStats,s=e.warning,c=e.layout,l=function(e,t,n){var r=!1;return t&&e.length>t?e.splice(t):e.length===n&&(e.splice(n-1),r=!0),{finalDocList:e,canShowNext:r}}(n,a,o.limit),u=l.finalDocList,d=l.canShowNext;c&&t(hu(c)),t(function(e,t,n,r,o,a){return{type:ou.INDEX_RESULTS_REDUX_NEW_RESULTS,docs:e,params:t,canShowNext:n,docType:r,executionStats:o,warning:a}}(u,o,d,r,i,s))})).catch((function(e){e&&-1!==e.message.indexOf("`partition` parameter is not supported")?t({type:ou.INDEX_RESULTS_REDUX_PARTITION_PARAM_NOT_SUPPORTED}):e&&-1!==e.message.indexOf("`partition` parameter is mandatory")?t({type:ou.INDEX_RESULTS_REDUX_PARTITION_PARAM_MANDATORY}):ie.addNotification({msg:"Error running query. "+pu(e),type:"error",clear:!0}),t(fu())}))}},Eu=function(e){var t="Failed to delete your document!";e&&(t="Failed to delete: "+e.join(", ")),ie.addNotification({msg:t,type:"error",clear:!0})},_u=function(e,t,n,r,o,a,i){return!!function(e){var t=e.length,n=1===t?"Are you sure you want to delete this doc?":"Are you sure you want to delete these "+t+" docs?";return 0===t?(window.alert("Please select the document rows you want to delete."),!1):!!window.confirm(n)}(n)&&function(s){var c,l;if(i===fr.INDEX_RESULTS_DOC_TYPE.MANGO_INDEX)l={docids:n.map((function(e){return e._id}))},c=function(e,t){var n=ie.urls("mango","index-server-bulk-delete",encodeURIComponent(e));return S(n,t)}(e,l);else{if(i!==fr.INDEX_RESULTS_DOC_TYPE.VIEW&&i!==fr.INDEX_RESULTS_DOC_TYPE.MANGO_QUERY)throw new Error("Invalid document type: "+i);c=function(e,t){var n=ie.urls("bulk_docs","server",e);return S(n,t)}(e,l={docs:n})}return c.then((function(e){e.error?Eu():(vu(e,n,r,i),s(mu()),s(gu(t,o,a)))}))}},vu=function(e,t,n,r){ie.addNotification({msg:"Successfully deleted your docs",clear:!0});var o=[];r===fr.INDEX_RESULTS_DOC_TYPE.MANGO_INDEX?e.fail&&(o=e.fail.map((function(e){return e.id}))):o=e.filter((function(e){return!!e.error})).map((function(e){return e.id}));var a=!!t.map((function(e){return e._id})).find((function(e){return/_design/.test(e)}));o.length>0&&Eu(o),n&&a&&ai.dispatchUpdateDesignDocs(n)};function Ou(){return(Ou=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Su=function(e){return{type:ou.INDEX_RESULTS_REDUX_SET_PER_PAGE,perPage:e}},Du=function(e,t,n,r){return t=function(e,t,n){return Ou({},e,{limit:n+1,skip:t.skip||0})}(t,n,r),function(o){o(Su(r)),o(gu(e,t,n))}},Nu=function(e,t,n,r){return t=function(e,t){return Ou({},e,{skip:e.skip+t})}(t,r),function(r){r({type:ou.INDEX_RESULTS_REDUX_PAGINATE_NEXT}),r(gu(e,t,n))}},wu=function(e,t,n,r){return t=function(e,t){return Ou({},e,{skip:Math.max(e.skip-t,0)})}(t,r),function(r){r({type:ou.INDEX_RESULTS_REDUX_PAGINATE_PREVIOUS}),r(gu(e,t,n))}},Tu=function(e){return{type:ou.INDEX_RESULTS_REDUX_NEW_QUERY_OPTIONS,options:e}},Cu=function(e){return Tu({includeDocs:!e})};function Iu(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function Au(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ru=function(e){var t,n=e.def,r=e.type,o=[];return(o=n.fields.reduce((function(e,t,n){return 0===n?e.push(r+": "+Object.keys(t)[0]):e.push(Object.keys(t)[0]),e}),[])).length||(o=(t=ie.getExtensions("mango:additionalIndexes")[0])?t.createHeader({def:n,type:r}):[r+": "+(n.selector?JSON.stringify(n.selector):"{}")]),o.join(", ")},Pu=function(e){return JSON.stringify(e,null,3)},Lu=function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Iu(n,!0).forEach((function(t){Au(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Iu(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);return delete t.ddoc,delete t.name,JSON.stringify(t,null," ")},xu=function(e,t){var n=t.databaseName,r=t.docType,o=t.deleteEnabled,a=void 0===o||o,i=e.map((function(e){if("MangoIndex"===r)return{header:Ru(e),content:Lu(e),id:"special"===e.type?"_all_docs":e.ddoc,keylabel:"",url:e.id?au("app",e.id,n):null,isDeletable:!!a&&"special"!==e.type,isEditable:!1};var t=uu(e,r);return{header:t,content:JSON.stringify(e,null," "),id:t||e.key&&e.key.toString(),_rev:du(e,r),keylabel:"id",url:t?au("app",t,n):null,isDeletable:a,isEditable:!0}}));return{displayedFields:null,hasBulkDeletableDoc:cu(e,r),results:i}},ku=function(e){var t=[];e.forEach((function(e){Object.keys(e).forEach((function(e){t.push(e)}))}));var n=(t=_.uniq(t)).indexOf("_id");return-1!==n&&(t.splice(n,1),t.unshift("_id")),t},ju=function(e){return e.sort((function(e,t){return function e(t,n,r){return t[r]===n[r]?r<2?e(t,n,r+1):0:1===r?t[r]<n[r]?-1:1:t[r]<n[r]?1:-1}(e,t,0)}))},Uu=function(e,t){var n,r=null,o=t.selectedFieldsTableView,a=t.showAllFieldsTableView,i=e.map((function(e){return e.doc||e}));n=ku(i),o&&0===o.length&&(o=function(e,t){var n=e.reduce((function(e,t){return e=e.concat(Object.keys(t))}),[]);return delete(n=_.countBy(n,(function(e){return e}))).id,delete n._rev,n=Object.keys(n).reduce((function(e,t){return e.push([n[t],t]),e}),[]),(n=(n=ju(n)).slice(0,t)).reduce((function(e,t){return e.push(t[1]),e}),[])}(i,5));var s,c,l=_.without(n,"_attachments");return s=o,c=l,r=_.without.bind(void 0,c).apply(void 0,s),a&&(r=null,o=l),{schema:n,normalizedDocs:i,selectedFieldsTableView:o,notSelectedFieldsTableView:r}},Mu=function(e,t){var n=fr.LAYOUT_ORIENTATION.METADATA===t.selectedLayout,r=n?function(e){var t=ku(e);return{schema:t,normalizedDocs:e,selectedFieldsTableView:t,notSelectedFieldsTableView:null}}(e):Uu(e,t),o=r.schema,a=r.normalizedDocs,i=r.selectedFieldsTableView,s=r.notSelectedFieldsTableView,c=a.map((function(e){return{content:e,id:uu(e,t.docType),_rev:du(e,t.docType),header:"",keylabel:"",url:e._id||e.id?au("app",e._id||e.id,t.databaseName):null,isDeletable:!!t.deleteEnabled&&su(e,t.docType),isEditable:iu(e,t.docType)}}));return{notSelectedFields:s,selectedFields:i,hasBulkDeletableDoc:!!t.deleteEnabled&&cu(a,t.docType),schema:o,results:c,displayedFields:n?null:{shown:_.uniq(i).length,allFieldCount:_.without(o,"_attachments").length}}};function qu(e){return(qu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vu(){return(Vu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Fu(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function Bu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fu(n,!0).forEach((function(t){Hu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fu(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Hu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ku={noResultsWarning:"",docs:[],selectedDocs:[],isLoading:!1,tableView:{selectedFieldsTableView:[],showAllFieldsTableView:!1},isEditable:!0,selectedLayout:fr.LAYOUT_ORIENTATION.METADATA,textEmptyIndex:"No Documents Found",docType:fr.INDEX_RESULTS_DOC_TYPE.VIEW,resultsStyle:function(){var e=ce.utils.localStorageGet("fauxton:results_style");e||(e={textOverflow:fr.INDEX_RESULTS_STYLE.TEXT_OVERFLOW_TRUNCATED,fontSize:fr.INDEX_RESULTS_STYLE.FONT_SIZE_MEDIUM});return e}(),fetchParams:{limit:lu()+1,skip:0},pagination:{pageStart:1,currentPage:1,perPage:lu(),canShowNext:!1},queryOptionsPanel:{isVisible:!1,showByKeys:!1,showBetweenKeys:!1,includeDocs:!1,betweenKeys:{include:!0,startkey:"",endkey:""},byKeys:"",descending:!1,skip:"",limit:"none",reduce:!1,groupLevel:"exact",showReduce:!1,stable:!1,update:"true"}};var Gu=function(e){return"query"!==e.language},Xu=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.docs,o={databaseName:t,selectedLayout:e.selectedLayout,selectedFieldsTableView:e.tableView.selectedFieldsTableView,showAllFieldsTableView:e.tableView.showAllFieldsTableView,docType:e.docType,deleteEnabled:n},a=r.filter(Gu);return fr.LAYOUT_ORIENTATION.JSON===o.selectedLayout?xu(a,o):Mu(a,o)},Wu=function(e){return e.selectedLayout===fr.LAYOUT_ORIENTATION.TABLE},zu=function(e){return!!Yu(e)&&e.pagination.pageStart+e.docs.length-1},Yu=function(e){return!e.isLoading&&e.docs.length>0},Qu=function(e){if(0===e.docs.length||0===e.selectedDocs.length)return!1;for(var t=function(t){var n=e.docs[t];if(!su(n,e.docType))return"continue";return e.selectedDocs.some((function(t){return uu(n,e.docType)===t._id}))?void 0:{v:!1}},n=0;n<e.docs.length;n++){var r=t(n);switch(r){case"continue":continue;default:if("object"===qu(r))return r.v}}return!0},Zu=function(e){return e.selectedDocs.length>0},Ju=function(e){return e.selectedDocs.length},$u=function(e){return e.pagination.currentPage>1},ed=function(e,t){return Xu(e,t).displayedFields||{}},td=function(e){var t=e.queryOptionsPanel,n={};if(t.includeDocs&&(n.include_docs=t.includeDocs),t.showBetweenKeys){var r=t.betweenKeys;n.inclusive_end=r.include,r.startkey&&""!=r.startkey&&(n.start_key=r.startkey),r.endkey&&""!=r.endkey&&(n.end_key=r.endkey)}else t.showByKeys&&t.byKeys.trim()&&(n.keys=t.byKeys.replace(/\r?\n/g,""));return"none"!==t.limit&&(n.limit=parseInt(t.limit,10)),t.skip&&(n.skip=parseInt(t.skip,10)),t.descending&&(n.descending=t.descending),t.reduce&&(n.reduce=!0,"exact"===t.groupLevel?n.group=!0:n.group_level=t.groupLevel),void 0!==t.update&&"true"!==t.update&&(n.update=t.update),!0===t.stable&&(n.stable=t.stable),n},nd=function(e){return e.docs},rd=function(e){return e.selectedDocs},od=function(e){return e.isEditable},ad=function(e){return e.selectedLayout},id=function(e){return e.textEmptyIndex},sd=function(e){return e.docType},cd=function(e){return e.tableView.showAllFieldsTableView},ld=function(e){return e.pagination.canShowNext},ud=function(e){return e.pagination.perPage},dd=function(e){return e.fetchParams},pd=function(e){return e.resultsStyle},fd=function(e,t,n){return!_n.isViewSelected(t)||!_n.selectedItemIsPartitionedView(e,t,n)},md=Object(tt.b)((function(e,t){var n,r,o=e.indexResults,a=e.sidebar,i=e.databases,s=o.queryOptionsPanel;return{contentVisible:s.isVisible,includeDocs:s.includeDocs,showReduce:(n=a.designDocList,r=t.selectedNavItem,_n.selectedViewContainsReduceFunction(n,r)),reduce:s.reduce,groupLevel:s.groupLevel,showByKeys:s.showByKeys,showBetweenKeys:s.showBetweenKeys,betweenKeys:s.betweenKeys,byKeys:s.byKeys,descending:s.descending,skip:s.skip,limit:s.limit,enableStable:fd(a.designDocList,t.selectedNavItem,i.isDbPartitioned),stable:s.stable,update:s.update,fetchParams:dd(o),queryOptionsParams:td(o),perPage:ud(o),selectedLayout:ad(o),ddocsOnly:t.ddocsOnly}}),(function(e,t){return{resetPagination:function(t){e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie.constants.MISC.DEFAULT_PAGE_SIZE;return Su(e)}(t))},queryOptionsToggleReduce:function(t){e(function(e){return Tu(e?{reduce:!e}:{reduce:!e,includeDocs:!1})}(t))},queryOptionsUpdateGroupLevel:function(t){e(function(e){return Tu({groupLevel:e})}(t))},queryOptionsToggleByKeys:function(t){e(function(e){return Tu({showByKeys:!e,showBetweenKeys:!!e})}(t))},queryOptionsToggleBetweenKeys:function(t){e(function(e){return Tu({showBetweenKeys:!e,showByKeys:!!e})}(t))},queryOptionsUpdateBetweenKeys:function(t){e(function(e){return Tu({betweenKeys:e})}(t))},queryOptionsUpdateByKeys:function(t){e(function(e){return Tu({byKeys:e})}(t))},queryOptionsToggleDescending:function(t){e(function(e){return Tu({descending:!e})}(t))},queryOptionsUpdateSkip:function(t){e(function(e){return Tu({skip:e})}(t))},queryOptionsUpdateLimit:function(t){e(function(e){return Tu({limit:e})}(t))},queryOptionsToggleIncludeDocs:function(t){e(Cu(t))},queryOptionsToggleVisibility:function(t){e(function(e){return Tu({isVisible:e})}(t))},queryOptionsExecute:function(n,r){e(function(e,t,n){var r=function(e){return{limit:e+1,skip:0}}(n);return gu(e,r,t)}(t.queryDocs,n,r))},queryOptionsApplyFilterOnlyDdocs:function(){e(Tu({betweenKeys:{include:!1,startkey:'"_design"',endkey:'"_design0"'},showBetweenKeys:!0,showByKeys:!1}))},queryOptionsRemoveFilterOnlyDdocs:function(){e(Tu({betweenKeys:{},showBetweenKeys:!1,showByKeys:!1}))},queryOptionsToggleStable:function(t){e(function(e){return Tu({stable:!e})}(t))},queryOptionsChangeUpdate:function(t){e(function(e){return Tu({update:e.toString()})}(t))},changeLayout:function(t){e(hu(t))},resetState:function(){e(fu())}}}))(ru),hd=md;md.propTypes={queryDocs:et.a.func.isRequired};var yd=function(e){var t=e.database,n=e.loadOptions;return ue.a.createElement("div",null,ue.a.createElement(Zo.ThrottledReactSelectAsync,{className:"jump-to-doc",name:"jump-to-doc",placeholder:"Document ID",loadOptions:n,clearable:!1,ignoreCase:!1,ignoreAccents:!1,cache:!1,onChange:function(e){var n=e.value,r=ie.urls("document","app",ce.utils.safeURLName(t.id),ce.utils.safeURLName(n));setTimeout((function(){return ie.navigate(r,{trigger:!0})}))}}))};yd.propTypes={database:et.a.object.isRequired,loadOptions:et.a.func.isRequired};var bd=yd,gd=function(e,t){return function(n,r){var o="?"+ce.utils.queryParams({startkey:JSON.stringify(n),endkey:JSON.stringify(n+"香"),limit:30}),a=t?ie.urls("partitioned_allDocs","server",e.safeID(),encodeURIComponent(t),o):ie.urls("allDocs","server",e.safeID(),o);v(a).then((function(e){var t=[];e.error||(t=e.rows.map((function(e){return{value:e.id,label:e.id}})));r(null,{options:t})}))}},Ed=function(e){var t=e.database,n=e.hideQueryOptions,r=e.hideJumpToDoc,o=e.queryDocs,a=e.ddocsOnly,i=e.selectedNavItem,s=e.partitionKey;return ue.a.createElement("div",{className:"header-right right-db-header flex-layout flex-row"},ue.a.createElement("div",{className:"faux-header__searchboxwrapper"},ue.a.createElement("div",{className:"faux-header__searchboxcontainer"},r?null:ue.a.createElement(bd,{key:JSON.stringify(t+s),cache:!1,loadOptions:gd(t,s),database:t}))),n?null:ue.a.createElement(hd,{ddocsOnly:a,queryDocs:o,selectedNavItem:i}))};Ed.propTypes={database:et.a.object.isRequired,hideQueryOptions:et.a.bool,isRedux:et.a.bool,queryDocs:et.a.func,selectedNavItem:et.a.object,partitionKey:et.a.string},Ed.defaultProps={hideQueryOptions:!1};var _d=Ed;function vd(e){return(vd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Od(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sd(e,t){return!t||"object"!==vd(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Dd(e){return(Dd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nd(e,t){return(Nd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var wd=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Sd(this,Dd(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nd(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e,t,n,r=this.props,o=r.selectedLayout,a=r.docType,i=r.queryOptionsParams,s=r.fetchUrl;if(a===fr.INDEX_RESULTS_DOC_TYPE.VIEW)e=ue.a.createElement(Tt.a,{className:o===fr.LAYOUT_ORIENTATION.METADATA?"active":"",onClick:this.toggleLayout.bind(this,fr.LAYOUT_ORIENTATION.METADATA)},"Metadata");else if(a===fr.INDEX_RESULTS_DOC_TYPE.MANGO_INDEX)return null;var c=s&&-1!==s.indexOf("/_all_docs"),l=a===fr.INDEX_RESULTS_DOC_TYPE.MANGO_QUERY;return(c||l||!i.reduce)&&(n=ue.a.createElement(Tt.a,{className:o===fr.LAYOUT_ORIENTATION.TABLE?"active":"",onClick:this.toggleLayout.bind(this,fr.LAYOUT_ORIENTATION.TABLE)},ue.a.createElement("i",{className:"fonticon-table"})," Table"),t=ue.a.createElement(Tt.a,{className:o===fr.LAYOUT_ORIENTATION.JSON?"active":"",onClick:this.toggleLayout.bind(this,fr.LAYOUT_ORIENTATION.JSON)},ue.a.createElement("i",{className:"fonticon-json"})," JSON")),ue.a.createElement("div",{className:"alternative-header"},ue.a.createElement(Tt.b,{className:"two-sides-toggle-button"},n,e,t))}},{key:"toggleLayout",value:function(e){var t=this.props,n=t.changeLayout,r=t.selectedLayout,o=t.fetchDocs,a=t.fetchParams,i=t.queryOptionsParams,s=t.queryOptionsToggleIncludeDocs;if(e!==r)return n(e),i.include_docs=e!==fr.LAYOUT_ORIENTATION.METADATA,e===fr.LAYOUT_ORIENTATION.TABLE?a.conflicts=!0:delete a.conflicts,s(!i.include_docs),void o(a,i)}}])&&Od(n.prototype,r),o&&Od(n,o),t}(ue.a.Component);function Td(e){return(Td="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Id(e){return(Id=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ad(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rd(e,t){return(Rd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ld=Zo.MenuDropDown,xd=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=Id(t).call(this,e))||"object"!==Td(o)&&"function"!=typeof o?Ad(r):o).toggleTextOverflow=n.toggleTextOverflow.bind(Ad(n)),n.setFontSize=n.setFontSize.bind(Ad(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rd(e,t)}(t,e),n=t,(r=[{key:"toggleTextOverflow",value:function(){this.props.resultsStyle.textOverflow===fr.INDEX_RESULTS_STYLE.TEXT_OVERFLOW_FULL?this.props.updateStyle({textOverflow:fr.INDEX_RESULTS_STYLE.TEXT_OVERFLOW_TRUNCATED}):this.props.updateStyle({textOverflow:fr.INDEX_RESULTS_STYLE.TEXT_OVERFLOW_FULL})}},{key:"setFontSize",value:function(e){this.props.updateStyle({fontSize:e})}},{key:"getDensitySection",value:function(){var e="Show full values";return this.props.resultsStyle.textOverflow===fr.INDEX_RESULTS_STYLE.TEXT_OVERFLOW_FULL&&(e="Truncate values"),{title:"Display density",links:[{title:e,onClick:this.toggleTextOverflow}]}}},{key:"getFontSizeSection",value:function(){var e=this;return{title:"Font size",links:[{title:"Small",onClick:function(){e.setFontSize(fr.INDEX_RESULTS_STYLE.FONT_SIZE_SMALL)},icon:this.props.resultsStyle.fontSize===fr.INDEX_RESULTS_STYLE.FONT_SIZE_SMALL?"fonticon-ok":""},{title:"Medium",onClick:function(){e.setFontSize(fr.INDEX_RESULTS_STYLE.FONT_SIZE_MEDIUM)},icon:this.props.resultsStyle.fontSize===fr.INDEX_RESULTS_STYLE.FONT_SIZE_MEDIUM?"fonticon-ok":""},{title:"Large",onClick:function(){e.setFontSize(fr.INDEX_RESULTS_STYLE.FONT_SIZE_LARGE)},icon:this.props.resultsStyle.fontSize===fr.INDEX_RESULTS_STYLE.FONT_SIZE_LARGE?"fonticon-ok":""}]}}},{key:"render",value:function(){var e=[];return this.props.showDensity&&e.push(this.getDensitySection()),this.props.showFontSize&&e.push(this.getFontSizeSection()),ue.a.createElement("div",{className:"toolbar-dropdown"},ue.a.createElement(Ld,{id:"result-style-menu",links:e,icon:"fonticon-mixer",hideArrow:!0,toggleType:"button"}))}}])&&Cd(n.prototype,r),o&&Cd(n,o),t}(ue.a.Component);function kd(e){return(kd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ud(e,t){return!t||"object"!==kd(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Md(e){return(Md=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qd(e,t){return(qd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Pd(xd,"defaultProps",{showDensity:!0,showFontSize:!0}),Pd(xd,"propTypes",{resultsStyle:et.a.object.isRequired,updateStyle:et.a.func.isRequired,showDensity:et.a.bool,showFontSize:et.a.bool});var Vd=Zo.BulkActionComponent,Fd=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ud(this,Md(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qd(e,t)}(t,e),n=t,(r=[{key:"shouldComponentUpdate",value:function(e){return null!=e.isListDeletable}},{key:"render",value:function(){var e=this.props,t=e.hasResults,n=e.isListDeletable,r=e.removeItem,o=e.allDocumentsSelected,a=e.hasSelectedItem,i=e.toggleSelectAll,s=e.isLoading,c=e.databaseName,l=e.partitionKey,u=null;(n&&t||s)&&(u=ue.a.createElement(Vd,{removeItem:r,isChecked:o,hasSelectedItem:a,toggleSelect:i,disabled:s,title:"Select all docs that can be..."}));var d=null,p=this.props.selectedLayout!==fr.LAYOUT_ORIENTATION.JSON,f=null;(t||s)&&(d=ue.a.createElement(wd,this.props),f=ue.a.createElement(xd,{updateStyle:this.props.updateResultsStyle,resultsStyle:this.props.resultsStyle,showDensity:p}));var m=null;return c&&(m=ue.a.createElement("div",{className:"document-result-screen__toolbar-flex-container"},ue.a.createElement("a",{href:_n.getNewDocUrl(c,l),className:"btn save document-result-screen__toolbar-create-btn btn-primary"},"Create Document"))),ue.a.createElement("div",{className:"document-result-screen__toolbar"},u,d,f,m)}}])&&jd(n.prototype,r),o&&jd(n,o),t}(ue.a.Component);function Bd(e){var t=e.text,n=e.isWarning,r=ue.a.createElement("div",{className:"no-results-screen-warning"},ue.a.createElement("i",{className:"fonticon-attention-circled"}),t);return ue.a.createElement("div",{className:"no-results-screen"},n?r:null,ue.a.createElement("div",{className:"watermark-logo"}),n?null:ue.a.createElement("h3",null,t))}function Hd(e){return(Hd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gd(e,t){return!t||"object"!==Hd(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xd(e){return(Xd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wd(e,t){return(Wd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Fd.propTypes={removeItem:et.a.func.isRequired,allDocumentsSelected:et.a.bool.isRequired,hasSelectedItem:et.a.bool.isRequired,toggleSelectAll:et.a.func.isRequired,isLoading:et.a.bool.isRequired,hasResults:et.a.bool.isRequired,isListDeletable:et.a.bool,partitionKey:et.a.string,docType:et.a.string,resultsStyle:et.a.object.isRequired,updateResultsStyle:et.a.func.isRequired},Bd.propTypes={text:et.a.string.isRequired};var zd=Zo.Copy,Yd=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Gd(this,Xd(t).call(this,e))).state={checked:n.props.isSelected},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wd(e,t)}(t,e),n=t,(r=[{key:"onChange",value:function(){this.props.docChecked(this.props.el.id,this.props.el._rev)}},{key:"getRowContents",value:function(e,t){var n=e.content;return this.props.data.selectedFields.map(function(e,r){var o="tableview-data-cell-"+t+e+r+n[e],a=-1!==["object","boolean"].indexOf(Hd(n[e]))?JSON.stringify(n[e],null,"  "):n[e],i=wt()({showall:this.props.textOverflow===fr.INDEX_RESULTS_STYLE.TEXT_OVERFLOW_FULL,"small-font":this.props.fontSize===fr.INDEX_RESULTS_STYLE.FONT_SIZE_SMALL,"large-font":this.props.fontSize===fr.INDEX_RESULTS_STYLE.FONT_SIZE_LARGE});return ue.a.createElement("td",{key:o,title:a,className:i,onClick:this.onClick.bind(this)},a)}.bind(this))}},{key:"maybeGetCheckboxCell",value:function(e,t){return ue.a.createElement("td",{className:"tableview-checkbox-cell",key:"tableview-checkbox-cell-"+t},e.isDeletable?ue.a.createElement("input",{id:"checkbox-"+this.props.docIdentifier,checked:this.props.isSelected,type:"checkbox",onChange:this.onChange.bind(this)}):null)}},{key:"getAdditionalInfoRow",value:function(e){var t=Object.keys(e._attachments||{}).length,n=null,r=null,o=Object.keys(e._conflicts||{}).length,a=null,i=null;return t&&(r=1===t?t+" Attachment":t+" Attachments",n=ue.a.createElement("div",{style:{display:"inline",marginLeft:"5px"},title:r},ue.a.createElement("i",{className:"icon fonticon-paperclip"}),t)),o&&(i=1===o?o+" Conflict":o+" Conflicts",a=ue.a.createElement("div",{className:"tableview-conflict","data-conflicts-indicator":!0,style:{display:"inline"},title:i},ue.a.createElement("i",{style:{fontSize:"17px"},className:"icon icon-code-fork"}),o)),ue.a.createElement("td",{className:"tableview-el-last",onClick:this.onClick.bind(this)},a,n)}},{key:"getCopyButton",value:function(e){var t=JSON.stringify(e,null,"  ");return ue.a.createElement("td",{title:t,className:"tableview-el-copy"},ue.a.createElement(zd,{title:t,text:t,uniqueKey:gc.a.v4(),onClipboardClick:this.showCopiedMessage}))}},{key:"showCopiedMessage",value:function(){ie.addNotification({msg:"The document content has been copied to the clipboard.",type:"success",clear:!0})}},{key:"onClick",value:function(e){this.props.onClick(this.props.el._id,this.props.el,e)}},{key:"render",value:function(){var e=this.props.index,t=this.props.el.content,n=this.props.el;return ue.a.createElement("tr",{key:"tableview-content-row-"+e},this.maybeGetCheckboxCell(n,e),this.getCopyButton(t),this.getRowContents(n,e),this.getAdditionalInfoRow(t))}}])&&Kd(n.prototype,r),o&&Kd(n,o),t}(ue.a.Component);function Qd(e){var t=e.selectedField,n=e.notSelectedFields,r=e.index,o=e.changeField,a=e.selectedFields,i=n.map((function(e){return{value:e,label:e}}));return ue.a.createElement("div",{className:"table-container-autocomplete"},ue.a.createElement("div",{className:"table-select-wrapper"},ue.a.createElement(Bo.a,{value:t,options:i,clearable:!1,onChange:function(e){o({newSelectedRow:e.value,index:r},a)}})))}function Zd(e){return(Zd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $d(e,t){return!t||"object"!==Zd(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ep(e){return(ep=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tp(e,t){return(tp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Yd,"defaultProps",{textOverflow:fr.INDEX_RESULTS_STYLE.TEXT_OVERFLOW_TRUNCATED}),Yd.propTypes={docIdentifier:et.a.string.isRequired,docChecked:et.a.func.isRequired,isSelected:et.a.bool.isRequired,index:et.a.number.isRequired,data:et.a.object.isRequired,onClick:et.a.func.isRequired,textOverflow:et.a.string};var np=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),$d(this,ep(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tp(e,t)}(t,e),n=t,(r=[{key:"getContentRows",value:function(){var e=this.props.data.results,t=this.props.resultsStyle,n=t.textOverflow,r=t.fontSize;return e.map(function(e,t){return ue.a.createElement(Yd,{onClick:this.props.onClick,key:"tableview-row-component-"+t,index:t,el:e,docIdentifier:e.id||"tableview-row-component-"+t,docChecked:this.props.docChecked,isSelected:this.props.isSelected(e.id),data:this.props.data,textOverflow:n,fontSize:r})}.bind(this))}},{key:"getOptionFieldRows",value:function(e){return this.props.data.notSelectedFields?e.map(function(e,t){return ue.a.createElement("th",{key:"header-el-"+t},this.getDropdown(e,this.props.data.schema,t,this.props.changeField,this.props.data.selectedFields))}.bind(this)):e.map((function(e,t){return ue.a.createElement("th",{key:"header-el-"+t},e)}))}},{key:"getDropdown",value:function(e,t,n,r,o){return ue.a.createElement(Qd,{selectedField:e,notSelectedFields:t,index:n,changeField:r,selectedFields:o})}},{key:"getHeader",value:function(){var e=this.props.data.selectedFields,t=this.getOptionFieldRows(e);return ue.a.createElement("tr",{key:"tableview-content-row-header"},ue.a.createElement("th",{className:"tableview-header-el-checkbox"}),ue.a.createElement("th",{className:"tableview-el-copy"}),t,ue.a.createElement("th",{className:"tableview-el-last"}))}},{key:"render",value:function(){return ue.a.createElement("div",{className:"table-view-docs"},ue.a.createElement("table",{className:"table table-striped"},ue.a.createElement("thead",null,this.getHeader()),ue.a.createElement("tbody",null,this.getContentRows())))}}])&&Jd(n.prototype,r),o&&Jd(n,o),t}(ue.a.Component);function rp(e){return(rp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function op(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ap(e,t){return!t||"object"!==rp(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ip(e){return(ip=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sp(e,t){return(sp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var cp=Zo.LoadLines,lp=Zo.Document,up=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ap(this,ip(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sp(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){prettyPrint()}},{key:"componentDidUpdate",value:function(){prettyPrint()}},{key:"onClick",value:function(e,t){t.url&&ie.navigate(t.url)}},{key:"getUrlFragment",value:function(e){return this.props.isEditable?ue.a.createElement("a",{href:e},ue.a.createElement("i",{className:"fonticon-pencil"})):null}},{key:"getDocumentList",value:function(){var e=this,t=function(){},n=this.props.results.results;return _.map(n,(function(n,r){return ue.a.createElement(lp,{key:n.id+r,doc:n,onClick:e.props.isEditable?e.onClick:t,keylabel:n.keylabel,docContent:n.content,docType:e.props.docType,checked:e.props.isSelected(n.id),header:n.header,docChecked:e.props.docChecked,isDeletable:n.isDeletable,docIdentifier:n.id,resultsStyle:e.props.resultsStyle},n.url?e.getUrlFragment("#".concat(n.url)):n.url)}))}},{key:"getDocumentStyleView",value:function(){var e="view";return this.props.isListDeletable&&(e="".concat(e," show-select")),ue.a.createElement("div",{className:e},ue.a.createElement("div",{id:"doc-list"},this.getDocumentList()))}},{key:"getTableStyleView",value:function(){return ue.a.createElement("div",null,ue.a.createElement(np,{onClick:this.onClick,docChecked:this.props.docChecked,isSelected:this.props.isSelected,isListDeletable:this.props.isListDeletable,data:this.props.results,isLoading:this.props.isLoading,removeItem:this.props.removeItem,isChecked:this.props.allDocumentsSelected,hasSelectedItem:this.props.hasSelectedItem,toggleSelect:this.toggleSelectAll,changeField:this.props.changeTableHeaderAttribute,resultsStyle:this.props.resultsStyle,title:"Select all docs that can be..."}))}},{key:"getMainView",value:function(){return this.props.isLoading?ue.a.createElement("div",{className:"loading-lines-wrapper"},ue.a.createElement(cp,null)):!this.props.noResultsWarning&&this.props.hasResults?this.props.selectedLayout===fr.LAYOUT_ORIENTATION.JSON?this.getDocumentStyleView():this.getTableStyleView():void 0}},{key:"getNoResultScreen",value:function(){if(!this.props.isLoading){if(this.props.noResultsWarning)return ue.a.createElement(Bd,{text:this.props.noResultsWarning,isWarning:!0});if(!this.props.hasResults)return ue.a.createElement(Bd,{text:this.props.textEmptyIndex})}}},{key:"render",value:function(){return ue.a.createElement("div",{className:"document-result-screen"},this.getNoResultScreen(),ue.a.createElement(Fd,this.props),this.getMainView())}}])&&op(n.prototype,r),o&&op(n,o),t}(ue.a.Component);function dp(e){return(dp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pp(){return(pp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function fp(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function mp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fp(n,!0).forEach((function(t){hp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fp(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bp(e,t){return!t||"object"!==dp(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gp(e){return(gp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ep(e,t){return(Ep=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _p=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),bp(this,gp(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ep(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.fetchDocs,n=e.fetchParams,r=e.queryOptionsParams;e.fetchAtStartup&&t(n,r)}},{key:"UNSAFE_componentWillUpdate",value:function(e){var t=e.fetchDocs,n=e.fetchParams,r=e.queryOptionsParams,o=e.ddocsOnly,a=e.fetchUrl,i=e.resetState,s=e.partitionKey;this.props.ddocsOnly===o&&this.props.fetchUrl===a&&this.props.partitionKey===s||(i(),t(mp({},n,{skip:0}),mp({},r,{reduce:void 0,group:void 0,group_level:void 0})))}},{key:"componentWillUnmount",value:function(){(0,this.props.resetState)()}},{key:"deleteSelectedDocs",value:function(){var e=this.props,t=e.bulkDeleteDocs,n=e.fetchParams;t(e.selectedDocs,n,e.queryOptionsParams)}},{key:"isSelected",value:function(e){return this.props.selectedDocs.findIndex((function(t){return e===t._id}))>-1}},{key:"docChecked",value:function(e,t){if(e){var n=this.props;(0,n.selectDoc)({_id:e,_rev:t},n.selectedDocs)}}},{key:"toggleSelectAll",value:function(){var e=this.props,t=e.docs,n=e.selectedDocs,r=e.allDocumentsSelected;(0,e.bulkCheckOrUncheck)(t,n,r)}},{key:"render",value:function(){var e=this.props.results;return ue.a.createElement(up,pp({removeItem:this.deleteSelectedDocs.bind(this),isSelected:this.isSelected.bind(this),docChecked:this.docChecked.bind(this),isListDeletable:e.hasBulkDeletableDoc,toggleSelectAll:this.toggleSelectAll.bind(this)},this.props))}}])&&yp(n.prototype,r),o&&yp(n,o),t}(ue.a.Component);_p.propTypes={fetchAtStartup:et.a.bool.isRequired,fetchDocs:et.a.func.isRequired};var vp=Object(tt.b)((function(e,t){var n,r=e.indexResults;return{noResultsWarning:r.noResultsWarning,docs:nd(r),selectedDocs:rd(r),isLoading:(n=r,n.isLoading),hasResults:Yu(r),results:Xu(r,t.databaseName,t.deleteEnabled),isEditable:od(r),selectedLayout:ad(r),allDocumentsSelected:Qu(r),hasSelectedItem:Zu(r),numDocsSelected:Ju(r),textEmptyIndex:id(r),docType:sd(r),fetchParams:dd(r),queryOptionsParams:td(r),partitionKey:t.partitionKey,resultsStyle:pd(r)}}),(function(e,t){return{fetchDocs:function(n,r){e(gu(t.queryDocs,n,r))},selectDoc:function(t,n){e(function(e,t){var n=t.findIndex((function(t){return t._id===e._id}));return n>-1?t.splice(n,1):(e._deleted=!0,t.push(e)),mu(t)}(t,n))},bulkDeleteDocs:function(n,r,o){e(_u(t.databaseName,t.queryDocs,n,t.designDocs,r,o,t.docType))},changeLayout:function(t){e(hu(t))},bulkCheckOrUncheck:function(n,r,o){e(function(e,t,n,r){return e.forEach((function(e){if(su(e,r)){var o=t.findIndex((function(t){return uu(e,r)===t._id}));n?t.splice(o,1):-1===o&&t.push({_id:uu(e,r),_rev:du(e,r),_deleted:!0})}})),mu(t)}(n,r,o,t.docType))},changeTableHeaderAttribute:function(t,n){e(function(e,t){return t[e.index]=e.newSelectedRow,{type:ou.INDEX_RESULTS_REDUX_CHANGE_TABLE_HEADER_ATTRIBUTE,selectedFieldsTableView:t}}(t,n))},resetState:function(){e(fu())},queryOptionsToggleIncludeDocs:function(t){e(Cu(t))},updateResultsStyle:function(t){e(function(e){return{type:ou.INDEX_RESULTS_SET_STYLE,resultsStyle:e}}(t))}}}))(_p),Op=vp;function Sp(e){var t=e.nextClicked,n=e.previousClicked,r="",o="";return e.canShowPrevious||(r="disabled"),e.canShowNext||(o="disabled"),ue.a.createElement("div",{className:"documents-pagination"},ue.a.createElement("ul",{className:"pagination"},ue.a.createElement("li",{className:r},ue.a.createElement("a",{id:"previous",onClick:n,className:"icon fonticon-left-open",href:"#","data-bypass":"true"})),ue.a.createElement("li",{className:o},ue.a.createElement("a",{id:"next",onClick:t,className:"icon fonticon-right-open",href:"#","data-bypass":"true"}))))}function Dp(e){return(Dp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Np(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wp(e,t){return!t||"object"!==Dp(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Tp(e){return(Tp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Cp(e,t){return(Cp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}vp.propTypes={queryDocs:et.a.func.isRequired,docType:et.a.string.isRequired},Sp.propTypes={nextClicked:et.a.func.isRequired,previousClicked:et.a.func.isRequired,canShowPrevious:et.a.bool.isRequired,canShowNext:et.a.bool.isRequired};var Ip=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),wp(this,Tp(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cp(e,t)}(t,e),n=t,(r=[{key:"getAmountShownFields",value:function(){var e=this.props.displayedFields;return e.shown===e.allFieldCount?ue.a.createElement("div",{className:"pull-left shown-fields"},"Showing ",e.shown," columns."):ue.a.createElement("div",{className:"pull-left shown-fields"},"Showing ",e.shown," of ",e.allFieldCount," columns.")}},{key:"render",value:function(){var e=this.props,t=e.prioritizedEnabled,n=e.toggleShowAllColumns;return ue.a.createElement("div",{className:"footer-table-control"},this.getAmountShownFields(),ue.a.createElement("div",{className:"footer-doc-control-prioritized-wrapper pull-left"},ue.a.createElement("label",{htmlFor:"footer-doc-control-prioritized"},ue.a.createElement("input",{id:"footer-doc-control-prioritized",checked:t,onChange:n,type:"checkbox"}),"Show all columns.")))}}])&&Np(n.prototype,r),o&&Np(n,o),t}(ue.a.Component);function Ap(e){return(Ap="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pp(e,t){return!t||"object"!==Ap(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Lp(e){return(Lp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xp(e,t){return(xp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Ip.propTypes={prioritizedEnabled:et.a.bool.isRequired,displayedFields:et.a.object.isRequired,toggleShowAllColumns:et.a.func.isRequired};var kp=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Pp(this,Lp(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xp(e,t)}(t,e),n=t,(r=[{key:"getPageNumberText",value:function(){var e=this.props,t=e.docs,n=e.pageStart,r=e.pageEnd;return 0===t.length?ue.a.createElement("span",null,"Showing 0 documents."):ue.a.createElement("span",null,"Showing document ",n," - ",r,".")}},{key:"perPageChange",value:function(e){var t=this.props;(0,t.updatePerPageResults)(e,t.fetchParams,t.queryOptionsParams)}},{key:"nextClicked",value:function(e){e.preventDefault();var t=this.props,n=t.canShowNext,r=t.fetchParams,o=t.queryOptionsParams,a=t.paginateNext,i=t.perPage;n&&a(r,o,i)}},{key:"previousClicked",value:function(e){e.preventDefault();var t=this.props,n=t.canShowPrevious,r=t.fetchParams,o=t.queryOptionsParams,a=t.paginatePrevious,i=t.perPage;n&&a(r,o,i)}},{key:"render",value:function(){var e=this.props,t=e.showPrioritizedEnabled,n=e.hasResults,r=e.prioritizedEnabled,o=e.displayedFields,a=e.perPage,i=e.canShowNext,s=e.canShowPrevious,c=e.toggleShowAllColumns;return ue.a.createElement("footer",{className:"index-pagination pagination-footer"},ue.a.createElement(Sp,{nextClicked:this.nextClicked.bind(this),previousClicked:this.previousClicked.bind(this),canShowNext:i,canShowPrevious:s}),ue.a.createElement("div",{className:"footer-controls"},ue.a.createElement("div",{className:"page-controls"},t&&n?ue.a.createElement(Ip,{prioritizedEnabled:r,displayedFields:o,toggleShowAllColumns:c}):null),ue.a.createElement(aa,{perPageChange:this.perPageChange.bind(this),perPage:a}),ue.a.createElement("div",{className:"current-docs"},this.getPageNumberText())))}}])&&Rp(n.prototype,r),o&&Rp(n,o),t}(ue.a.Component),jp=Object(tt.b)((function(e,t){var n,r=e.indexResults;return{docs:nd(r),selectedDocs:rd(r),hasResults:Yu(r),pageStart:(n=r,n.pagination.pageStart),pageEnd:zu(r),perPage:ud(r),prioritizedEnabled:cd(r),showPrioritizedEnabled:Wu(r),displayedFields:ed(r,t.databaseName),canShowNext:ld(r),canShowPrevious:$u(r),fetchParams:dd(r),queryOptionsParams:td(r)}}),(function(e,t){return{toggleShowAllColumns:function(){e({type:ou.INDEX_RESULTS_REDUX_TOGGLE_SHOW_ALL_COLUMNS})},updatePerPageResults:function(n,r,o){e(Du(t.queryDocs,r,o,n))},paginateNext:function(n,r,o){e(Nu(t.queryDocs,n,r,o))},paginatePrevious:function(n,r,o){e(wu(t.queryDocs,n,r,o))}}}))(kp),Up=jp;jp.propTypes={queryDocs:et.a.func.isRequired};var Mp=Object(tt.b)((function(e,t){var n=e.indexResults,r=t.docUrl,o=t.endpoint,a=t.endpointAddQueryOptions;if(r||(r=ie.constants.DOC_URLS.GENERAL),o&&a){var i=ce.utils.queryString(td(n));i&&(o=-1==o.indexOf("?")?"".concat(o,"?").concat(i):"".concat(o,"&").concat(i))}return{docUrl:r,endpoint:o}}))(bt),qp=Mp;function Vp(e){return(Vp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bp(e){return(Bp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kp(e,t){return(Kp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Mp.propTypes={databaseName:et.a.string,docUrl:et.a.string,endpoint:et.a.string,endpointAddQueryOptions:et.a.bool};var Gp=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=Bp(t).call(this,e))||"object"!==Vp(o)&&"function"!=typeof o?Hp(r):o).state={editorValue:"",editMode:!1},n.onModeSwitchClick=n.onModeSwitchClick.bind(Hp(n)),n.onBlur=n.onBlur.bind(Hp(n)),n.startEdit=n.startEdit.bind(Hp(n)),n.onKeyPress=n.onKeyPress.bind(Hp(n)),n.onChange=n.onChange.bind(Hp(n)),n.props.checkDbPartitioned(n.props.databaseName),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kp(e,t)}(t,e),n=t,(r=[{key:"onModeSwitchClick",value:function(e){e&&e.preventDefault&&e.preventDefault(),!this.props.globalMode&&this.props.onGlobalModeSelected?this.props.onGlobalModeSelected():this.props.partitionKey?this.props.onPartitionKeySelected(this.state.editorValue):this.startEdit()}},{key:"startEdit",value:function(){var e=this;this.setState({editMode:!0,editorValue:this.props.partitionKey}),setTimeout((function(){return e.textInput.focus()}))}},{key:"updatePartitionKey",value:function(){this.setState({editMode:!1});var e=this.state.editorValue.trim();e?this.props.onPartitionKeySelected(e):this.props.onGlobalModeSelected()}},{key:"onBlur",value:function(e){e&&e.preventDefault&&e.preventDefault(),this.updatePartitionKey()}},{key:"onKeyPress",value:function(e){"Enter"===e.key&&this.updatePartitionKey()}},{key:"onChange",value:function(e){this.setState({editorValue:e.target.value})}},{key:"globalHeader",value:function(){return ue.a.createElement("button",{onClick:this.onModeSwitchClick,title:"Partition Key Selector",className:"button partition-selector__switch"},ue.a.createElement("i",{className:"fonticon-filter"}),"No partition selected")}},{key:"partitionHeader",value:function(){var e=this,t=ue.a.createElement("input",{type:"text",style:{padding:2,fontSize:16,margin:0,display:this.state.editMode?"block":"none"},onKeyPress:this.onKeyPress,onChange:this.onChange,onBlur:this.onBlur,value:this.state.editorValue,ref:function(t){e.textInput=t}}),n="Click to select a partition",r="partition-selector__key";return""!==this.props.partitionKey&&(n=this.props.partitionKey,r+=" partition-selector__key--active"),ue.a.createElement(ue.a.Fragment,null,ue.a.createElement("button",{onClick:this.onModeSwitchClick,title:"Partition Key Selector",className:"button partition-selector__switch button partition-selector__switch--active"},ue.a.createElement("i",{className:"fonticon-filter"})),ue.a.createElement("div",{className:r},ue.a.createElement("span",{onClick:this.startEdit,style:{display:this.state.editMode?"none":"block"}},n),t))}},{key:"render",value:function(){if(!this.props.selectorVisible)return null;var e=this.props.globalMode&&!this.state.editMode;return ue.a.createElement("div",{className:"partition-selector"},e?this.globalHeader():this.partitionHeader())}}])&&Fp(n.prototype,r),o&&Fp(n,o),t}(ue.a.Component);Gp.defaultProps={partitionKey:"",globalMode:!0},Gp.propTypes={selectorVisible:et.a.bool.isRequired,partitionKey:et.a.string.isRequired,checkDbPartitioned:et.a.func.isRequired,onPartitionKeySelected:et.a.func.isRequired,onGlobalModeSelected:et.a.func,globalMode:et.a.bool};var Xp={PARTITON_KEY_SHOW_SELECTOR:"PARTITON_KEY_SHOW_SELECTOR",PARTITON_KEY_HIDE_SELECTOR:"PARTITON_KEY_HIDE_SELECTOR"},Wp=Object(tt.b)((function(e,t){return{selectorVisible:e.partitionKey.selectorVisible,databaseName:t.databaseName,partitionKey:t.partitionKey,onPartitionKeySelected:t.onPartitionKeySelected,globalMode:t.globalMode}}),(function(e){return{checkDbPartitioned:function(t){e(function(e){return function(t){t({type:Xp.PARTITON_KEY_HIDE_SELECTOR}),Xe(e).then((function(e){e.props&&!0===e.props.partitioned&&t({type:Xp.PARTITON_KEY_SHOW_SELECTOR})}))}}(t))}}}))(Gp),zp=Wp;Wp.propTypes={databaseName:et.a.string.isRequired,partitionKey:et.a.string.isRequired,onPartitionKeySelected:et.a.func.isRequired,onGlobalModeSelected:et.a.func.isRequired,globalMode:et.a.bool};var Yp=function(e){var t=e.hideQueryOptions,n=e.hideJumpToDoc,r=e.database,o=e.dbName,a=e.dropDownLinks,i=e.docURL,s=e.endpoint,c=e.endpointAddQueryOptions,l=e.fetchUrl,u=e.ddocsOnly,d=e.queryDocs,p=e.selectedNavItem,f=e.showPartitionKeySelector,m=e.partitionKey,h=e.onPartitionKeySelected,y=e.onGlobalModeSelected,b=e.globalMode,g=null;return f&&(g=ue.a.createElement(zp,{databaseName:o,partitionKey:m,onPartitionKeySelected:h,onGlobalModeSelected:y,globalMode:b})),ue.a.createElement("header",{className:"two-panel-header"},ue.a.createElement("div",{className:"flex-layout flex-row"},ue.a.createElement("div",{id:"header-docs-left"},ue.a.createElement(yc,{dbName:o,partitionKey:m,dropDownLinks:a})),ue.a.createElement("div",{className:"right-header-wrapper flex-layout flex-row flex-body"},ue.a.createElement("div",{style:{flex:1,padding:"18px 6px 12px 12px"}},g),ue.a.createElement("div",{id:"right-header",className:"flex-fill"},ue.a.createElement(_d,{hideQueryOptions:t,hideJumpToDoc:n,database:r,fetchUrl:l,ddocsOnly:u,queryDocs:d,partitionKey:m,selectedNavItem:p})),ue.a.createElement(qp,{docURL:i,endpoint:s,endpointAddQueryOptions:c}),ue.a.createElement("div",{id:"notification-center-btn",className:"flex-fill"},ue.a.createElement(dt,null)))))};Yp.propTypes={dbName:et.a.string.isRequired,dropDownLinks:et.a.array.isRequired,docURL:et.a.string,endpoint:et.a.string,showIncludeAllDocs:et.a.bool,hideQueryOptions:et.a.bool,hideJumpToDoc:et.a.bool,database:et.a.object.isRequired,queryDocs:et.a.func,selectedNavItem:et.a.object,showPartitionKeySelector:et.a.bool.isRequired,partitionKey:et.a.string,onPartitionKeySelected:et.a.func,onGlobalModeSelected:et.a.func,globalMode:et.a.bool},Yp.defaultProps={hideHeaderBar:!1,showPartitionKeySelector:!1};var Qp=function(e){var t=e.hideFooter,n=e.lowerContent,r=e.upperContent,o=e.fetchUrl,a=e.databaseName,i=e.queryDocs,s=e.selectedNavItem,c=e.partitionKey;return ue.a.createElement("div",{className:"with-sidebar tabs-with-sidebar content-area"},ue.a.createElement("aside",{id:"sidebar-content",className:"scrollable"},ue.a.createElement(pc,{selectedNavItem:s,selectedPartitionKey:c})),ue.a.createElement("section",{id:"dashboard-content",className:"flex-layout flex-col"},ue.a.createElement("div",{id:"dashboard-upper-content"},r),ue.a.createElement("div",{id:"dashboard-lower-content",className:"flex-body"},n),ue.a.createElement("div",{id:"footer"},t?null:ue.a.createElement(Up,{databaseName:a,fetchUrl:o,queryDocs:i}))))};Qp.defaultProps={hideFooter:!1},Qp.propTypes={hideFooter:et.a.bool,lowerContent:et.a.object,upperContent:et.a.object,selectedNavItem:et.a.object};var Zp=function(e){var t=e.database,n=e.designDocs,r=e.docURL,o=e.endpoint,a=e.dbName,i=e.dropDownLinks,s=e.fetchUrl,c=e.ddocsOnly,l=e.deleteEnabled,u=void 0===l||l,d=e.selectedNavItem,p=e.partitionKey,f=e.onPartitionKeySelected,m=e.onGlobalModeSelected,h=e.globalMode,y=(d.navItem,function(e){return function(e,t,n){yu(n,{reduce:void 0,group:void 0,group_level:void 0});var r=ce.utils.queryString(n),o="".concat(e).concat(-1!==e.indexOf("?")?"&":"?").concat(r);return v(o).then((function(e){if(e.error)throw new Error("("+e.error+") "+e.reason);return{docs:e.rows,docType:fr.INDEX_RESULTS_DOC_TYPE.VIEW}}))}(s,0,e)});_n.isViewSelected(d)&&(y=function(e){return function(e,t){void 0===t.reduce&&(t.reduce=!1),t.include_docs&&t.reduce&&(t.reduce=!1,t.group=void 0,t.group_level=void 0),-1!==e.indexOf("/_partition/")&&(t.stable=void 0,t.conflicts=void 0);var n=ce.utils.queryString(t),r="".concat(e).concat(-1!==e.indexOf("?")?"&":"?").concat(n);return v(r).then((function(e){if(e.error)throw new Error("("+e.error+") "+e.reason);return{docs:e.rows,docType:fr.INDEX_RESULTS_DOC_TYPE.VIEW,layout:void 0}}))}(s,e)});var b=ue.a.createElement(Op,{fetchUrl:s,designDocs:n,ddocsOnly:c,databaseName:a,fetchAtStartup:!0,queryDocs:y,docType:fr.INDEX_RESULTS_DOC_TYPE.VIEW,deleteEnabled:u,partitionKey:p});return ue.a.createElement("div",{id:"dashboard",className:"with-sidebar"},ue.a.createElement(Yp,{docURL:r,endpoint:o,endpointAddQueryOptions:!0,dbName:a,dropDownLinks:i,database:t,fetchUrl:s,ddocsOnly:c,queryDocs:y,selectedNavItem:d,showPartitionKeySelector:!c,partitionKey:p,onPartitionKeySelected:f,onGlobalModeSelected:m,globalMode:h}),ue.a.createElement(Qp,{lowerContent:b,fetchUrl:s,databaseName:a,queryDocs:y,selectedNavItem:d,partitionKey:p}))},Jp=function(e){var t=e.docURL,n=e.database,r=e.endpoint,o=e.dbName,a=e.dropDownLinks,i=e.selectedNavItem,s=e.partitionKey;return ue.a.createElement("div",{id:"dashboard",className:"with-sidebar"},ue.a.createElement(Yp,{docURL:t,endpoint:r,dbName:o,dropDownLinks:a,database:n,hideQueryOptions:!0}),ue.a.createElement(Qp,{upperContent:ue.a.createElement(ul,null),lowerContent:ue.a.createElement(Zc,{databaseName:o}),hideFooter:!0,selectedNavItem:i,partitionKey:s}))},$p=function(e){var t=e.showEditView,n=e.database,r=e.docURL,o=e.endpoint,a=e.dbName,i=e.dropDownLinks,s=e.selectedNavItem,c=e.designDocInfo,l=e.partitionKey,u=t?ue.a.createElement(os.IndexEditorContainer,{partitionKey:l}):ue.a.createElement(Nl,{designDocInfo:c,designDocName:s.designDocName});return ue.a.createElement("div",{id:"dashboard",className:"with-sidebar"},ue.a.createElement(Yp,{endpoint:o,docURL:r,dbName:a,dropDownLinks:i,database:n,partitionKey:l,queryDocs:function(){},hideQueryOptions:!0,hideJumpToDoc:!0}),ue.a.createElement(Qp,{lowerContent:u,hideFooter:!0,selectedNavItem:s,partitionKey:l}))};$p.defaultProps={showEditView:!0},$p.propTypes={showEditView:et.a.bool,docURL:et.a.string.isRequired,endpoint:et.a.string,dbName:et.a.string.isRequired,dropDownLinks:et.a.array.isRequired,designDocInfo:et.a.object};var ef,tf=ii.extend({routes:{"database/:database/_partition/:partitionkey/_all_docs":{route:"partitionedAllDocs",roles:["fx_loggedIn"]},"database/:database/_all_docs(:extra)":{route:"globalAllDocs",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/_design/:ddoc/_info":{route:"designDocMetadata",roles:["fx_loggedIn"]},"database/:database/_design/:ddoc/_info":{route:"designDocMetadataNoPartition",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionKey/_changes":{route:"changes",roles:["fx_loggedIn"]},"database/:database/_changes":{route:"changes",roles:["fx_loggedIn"]}},initialize:function(e,t){this.initViews(t[0])},initViews:function(e){this.databaseName=e,this.database=new ri.Model({id:this.databaseName}),this.createDesignDocsCollection(),this.addSidebar()},designDocMetadataNoPartition:function(e,t){return this.designDocMetadata(e,"",t)},designDocMetadata:function(e,t,n){var r=new Me.DdocInfo({_id:"_design/"+n},{database:this.database}),o=new si("designDoc",{designDocName:n,designDocSection:"metadata"});Je.fetchSelectedDatabaseInfo(e);var a=this.getCrumbs(this.database);return ue.a.createElement($p,{showEditView:!1,docURL:r.documentation(),endpoint:r.url("apiurl"),dbName:this.database.id,dropDownLinks:a,database:this.database,selectedNavItem:o,designDocInfo:r,partitionKey:t})},globalAllDocs:function(e,t){return this.allDocs(e,"",t)},partitionedAllDocs:function(e,t){return this.allDocs(e,t)},allDocs:function(e,t,n){var r=this.createParams(n).docParams,o=t?ie.urls("partitioned_allDocs","server",encodeURIComponent(e),encodeURIComponent(t)):ie.urls("allDocsSanitized","server",e);this.database.buildAllDocs(r);var a=!!(r.startkey&&r.startkey.indexOf("_design")>-1),i="all-docs";a&&(i="design-docs");var s=new si(i);yn.showDeleteDatabaseModal({showDeleteModal:!1,dbId:""});var c=t?ie.urls("partitioned_allDocs","apiurl",encodeURIComponent(e),encodeURIComponent(t)):this.database.allDocs.urlRef("apiurl",{}),l=ie.constants.DOC_URLS.GENERAL,u=this.getCrumbs(this.database);return Je.fetchSelectedDatabaseInfo(e),ue.a.createElement(Zp,{docURL:l,endpoint:c,dbName:this.database.id,dropDownLinks:u,database:this.database,designDocs:this.designDocs,fetchUrl:o,ddocsOnly:a,selectedNavItem:s,partitionKey:t,onPartitionKeySelected:function(t){var n=ie.urls("partitioned_allDocs","app",encodeURIComponent(e),encodeURIComponent(t));ie.navigate("#/"+n)},onGlobalModeSelected:function(){var t=ie.urls("allDocs","app",encodeURIComponent(e));ie.navigate("#/"+t)},globalMode:""===t})},changes:function(e,t){var n=new si("changes");return Je.fetchSelectedDatabaseInfo(e),ue.a.createElement(Jp,{endpoint:ie.urls("changes","apiurl",this.database.id,""),docURL:this.database.documentation(),dbName:this.database.id,dropDownLinks:this.getCrumbs(this.database),database:this.database,selectedNavItem:n,partitionKey:t})}}),nf={RESET_DOC:"RESET_DOC",DOC_LOADED:"DOC_LOADED",SHOW_CLONE_DOC_MODAL:"SHOW_CLONE_DOC_MODAL",HIDE_CLONE_DOC_MODAL:"HIDE_CLONE_DOC_MODAL",SHOW_DELETE_DOC_CONFIRMATION_MODAL:"SHOW_DELETE_DOC_CONFIRMATION_MODAL",HIDE_DELETE_DOC_CONFIRMATION_MODAL:"HIDE_DELETE_DOC_CONFIRMATION_MODAL",SHOW_UPLOAD_MODAL:"SHOW_UPLOAD_MODAL",HIDE_UPLOAD_MODAL:"HIDE_UPLOAD_MODAL",RESET_UPLOAD_MODAL:"RESET_UPLOAD_MODAL",SHOW_STRING_EDIT_MODAL:"SHOW_STRING_EDIT_MODAL",HIDE_STRING_EDIT_MODAL:"HIDE_STRING_EDIT_MODAL",FILE_UPLOAD_SUCCESS:"FILE_UPLOAD_SUCCESS",FILE_UPLOAD_ERROR:"FILE_UPLOAD_ERROR",START_FILE_UPLOAD:"START_FILE_UPLOAD",SET_FILE_UPLOAD_PERCENTAGE:"SET_FILE_UPLOAD_PERCENTAGE"},rf=function(e){return function(t){var n=e.doc;t({type:nf.RESET_DOC}),n.fetch().then((function(){t({type:nf.DOC_LOADED,options:{doc:n}}),e.onLoaded&&e.onLoaded()}),(function(t){404===t.status&&af("The ".concat(n.id," document does not exist.")),ie.navigate(ie.urls("allDocs","app",e.database.id,""))}))}},of=function(){return function(e){e({type:nf.HIDE_CLONE_DOC_MODAL})}};function af(e){ie.addNotification({msg:e,type:"error",clear:!0})}var sf=function(e){ie.reduxDispatch(rf(e))},cf=function(e,t,n,r){t?(ie.addNotification({msg:"Saving document.",clear:!0}),e.save().then((function(){n(e.prettyJSON()),r?ie.navigate(r,{trigger:!0}):ie.navigate("#/"+ie.urls("allDocs","app",ie.url.encode(e.database.id)),{trigger:!0})})).fail((function(e){ie.addNotification({msg:"Save failed: "+JSON.parse(e.responseText).reason,type:"error",fade:!1,clear:!0})}))):e.validationError&&"Cannot change a documents id."===e.validationError?(af("You cannot edit the _id of an existing document. Try this: Click 'Clone Document', then change the _id on the clone before saving."),delete e.validationError):af("Please fix the JSON errors and try saving again.")},lf=function(){return function(e){e({type:nf.SHOW_CLONE_DOC_MODAL})}},uf=of,df=function(e,t,n){of(),t.copy(n).then((function(){var t=ie.urls("document","app",e.safeID(),encodeURIComponent(n));ie.navigate(t,{trigger:!0}),ie.addNotification({msg:"Document has been duplicated."})}),(function(e){var t="Could not duplicate document, reason: ".concat(e.responseText,".");ie.addNotification({msg:t,type:"error"})}))},pf=function(){return function(e){e({type:nf.SHOW_DELETE_DOC_CONFIRMATION_MODAL})}},ff=function(){return function(e){e({type:nf.HIDE_DELETE_DOC_CONFIRMATION_MODAL})}},mf=function(e){var t=e.database.safeID(),n="?rev="+e.get("_rev"),r=ie.urls("document","server",t,e.safeID(),n);O(r).then((function(e){if(e.error)throw new Error(e.reason||e.error);ie.addNotification({msg:"Your document has been successfully deleted.",type:"success",clear:!0}),ie.navigate(ie.urls("allDocs","app",t,""))})).catch((function(e){ie.addNotification({msg:"Failed to delete your document. Reason: "+e.message,type:"error",clear:!0})}))},hf=function(){return function(e){e({type:nf.SHOW_UPLOAD_MODAL})}},yf=function(){return function(e){e({type:nf.HIDE_UPLOAD_MODAL})}},bf=function(e){return function(t){if(0!==e.files.length){t({type:nf.START_FILE_UPLOAD});var n="?rev="+e.rev,r=e.doc.getDatabase().safeID(),o=e.doc.safeID(),a=e.files[0],i=ie.urls("document","attachment",r,o,encodeURIComponent(a.name),n),s=function(e){t({type:nf.FILE_UPLOAD_ERROR,options:{error:e}})},c=new XMLHttpRequest;ef=c,c.withCredentials=!0,c.upload&&(c.upload.onprogress=function(e){if(e.lengthComputable){var n=e.loaded/e.total*100;t({type:nf.SET_FILE_UPLOAD_PERCENTAGE,options:{percent:n}})}}),c.onloadend=function(){ef=void 0},c.onerror=function(){s("Error uploading file")},c.onload=function(n){if(c.status>=200&&c.status<300)a=e.doc,t(rf({doc:a,onLoaded:function(){t({type:nf.FILE_UPLOAD_SUCCESS}),ie.addNotification({msg:"Document saved successfully.",type:"success",clear:!0})}}));else{var r="Error uploading file. ";if(n.responseText)try{var o=JSON.parse(n.responseText);o.error&&(r+="Reason: "+(o.reason||o.error))}catch(e){}s(r)}var a},c.open("PUT",i),c.setRequestHeader("X-Requested-With","XMLHttpRequest"),c.setRequestHeader("Content-Type",a.type||"application/octet-stream"),c.setRequestHeader("Accept","application/json"),c.send(a)}else t({type:nf.FILE_UPLOAD_ERROR,options:{error:"Please select a file to be uploaded."}})}},gf=function(){ef&&ef.abort()},Ef=function(){return function(e){e({type:nf.RESET_UPLOAD_MODAL})}};function _f(e){return(_f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Of(e){return(Of=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Df(e,t){return(Df=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Nf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var wf=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,o=(e=Of(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==_f(o)&&"function"!=typeof o?Sf(r):o,Nf(Sf(n),"getAttachmentList",(function(){var e=encodeURIComponent(n.props.doc.database.get("id")),t=encodeURIComponent(n.props.doc.get("_id"));return _.map(n.props.doc.get("_attachments"),(function(n,r){var o=ie.urls("document","attachment",e,t,encodeURIComponent(r));return ue.a.createElement(Tt.e,{key:r,href:o,target:"_blank","data-bypass":"true"},ue.a.createElement("strong",null,r),ue.a.createElement("span",{className:"attachment-delimiter"},"-"),ue.a.createElement("span",null,n.content_type,n.content_type?", ":"",I.formatSize(n.length)))}))})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Df(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return!(this.props.isLoading||!this.props.doc.get("_attachments"))&&ue.a.createElement("div",{className:"panel-section view-attachments-section btn-group"},ue.a.createElement(Tt.d,{id:"view-attachments-menu"},ue.a.createElement(Tt.d.Toggle,{noCaret:!0,className:"panel-button dropdown-toggle btn","data-bypass":"true"},ue.a.createElement("i",{className:"icon icon-paper-clip"}),ue.a.createElement("span",{className:"button-text"},"View Attachments"),ue.a.createElement("span",{className:"caret"})),ue.a.createElement(Tt.d.Menu,null,this.getAttachmentList())))}}])&&vf(n.prototype,r),o&&vf(n,o),t}(ue.a.Component);function Tf(e){return(Tf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function If(e){return(If=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Af(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rf(e,t){return(Rf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Nf(wf,"propTypes",{isLoading:et.a.bool.isRequired,doc:et.a.object}),Nf(wf,"defaultProps",{isLoading:!0,doc:{}});var Lf=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,o=(e=If(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==Tf(o)&&"function"!=typeof o?Af(r):o,Pf(Af(n),"state",{uuid:null}),Pf(Af(n),"cloneDoc",(function(){n.props.onSubmit&&n.props.onSubmit(),n.props.cloneDoc(n.props.database,n.props.doc,n.state.uuid)})),Pf(Af(n),"closeModal",(function(e){e&&e.preventDefault(),n.props.hideCloneDocModal()})),Pf(Af(n),"docIDChange",(function(e){n.setState({uuid:e.target.value})})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rf(e,t)}(t,e),n=t,(r=[{key:"componentDidUpdate",value:function(){var e=this;null===this.state.uuid&&I.getUUID().then((function(t){if(t.uuids){var n={uuid:t.uuids[0]},r=e.props.doc?e.props.doc.attributes._id.indexOf(":"):-1;if(r>=0){var o=e.props.doc.attributes._id.substring(0,r);n.uuid=o+":"+n.uuid}e.setState(n)}})).catch((function(){}))}},{key:"render",value:function(){var e=this;return null!==this.state.uuid&&ue.a.createElement(Tt.f,{dialogClassName:"clone-doc-modal",show:this.props.visible,onHide:this.closeModal},ue.a.createElement(Tt.f.Header,{closeButton:!0},ue.a.createElement(Tt.f.Title,null,"Clone Document")),ue.a.createElement(Tt.f.Body,null,ue.a.createElement("form",{className:"form",onSubmit:function(t){t.preventDefault(),e.cloneDoc()}},ue.a.createElement("p",null,"Document cloning copies the saved version of the document. Unsaved document changes will be discarded."),ue.a.createElement("p",null,"You can modify the following generated ID for your new document."),ue.a.createElement("input",{ref:function(t){return e.newDocId=t},type:"text",autoFocus:!0,className:"input-block-level",onChange:this.docIDChange,value:this.state.uuid}))),ue.a.createElement(Tt.f.Footer,null,ue.a.createElement("a",{href:"#","data-bypass":"true",className:"cancel-link",onClick:this.closeModal},"Cancel"),ue.a.createElement("button",{className:"btn btn-primary save",onClick:this.cloneDoc},ue.a.createElement("i",{className:"icon-repeat"})," Clone Document")))}}])&&Cf(n.prototype,r),o&&Cf(n,o),t}(ue.a.Component);function xf(e){return(xf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jf(e,t){return!t||"object"!==xf(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Uf(e){return(Uf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mf(e,t){return(Mf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Pf(Lf,"propTypes",{visible:et.a.bool.isRequired,doc:et.a.object,database:et.a.object.isRequired,onSubmit:et.a.func.isRequired,hideCloneDocModal:et.a.func.isRequired,cloneDoc:et.a.func.isRequired});var Vf=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),jf(this,Uf(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mf(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e="icon "+this.props.iconClass;return ue.a.createElement("div",{className:"panel-section"},ue.a.createElement("button",{className:"panel-button ".concat(this.props.className),title:this.props.title,onClick:this.props.onClick},ue.a.createElement("i",{className:e}),ue.a.createElement("span",null,this.props.title)))}}])&&kf(n.prototype,r),o&&kf(n,o),t}(ue.a.Component);function Ff(e){return(Ff="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bf(){return(Bf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Hf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kf(e){return(Kf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xf(e,t){return(Xf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}qf(Vf,"propTypes",{title:et.a.string.isRequired,onClick:et.a.func.isRequired,className:et.a.string}),qf(Vf,"defaultProps",{title:"",iconClass:"",onClick:function(){},className:""});var zf=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,o=(e=Kf(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==Ff(o)&&"function"!=typeof o?Gf(r):o,Wf(Gf(n),"closeModal",(function(e){e&&e.preventDefault(),n.props.inProgress&&n.props.cancelUpload(),n.props.hideUploadModal(),n.props.resetUploadModal()})),Wf(Gf(n),"upload",(function(){n.props.uploadAttachment({doc:n.props.doc,rev:n.props.doc.get("_rev"),files:n.attachments.files})})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xf(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t="alert alert-error";""===this.props.errorMessage&&(t+=" hide");var n="progress progress-info",r={disabled:"disabled"};return this.props.inProgress||(n+=" hide",r={}),ue.a.createElement(Tt.f,{dialogClassName:"upload-file-modal",show:this.props.visible,onHide:this.closeModal},ue.a.createElement(Tt.f.Header,{closeButton:!0},ue.a.createElement(Tt.f.Title,null,"Upload Attachment")),ue.a.createElement(Tt.f.Body,null,ue.a.createElement("div",{className:t},this.props.errorMessage),ue.a.createElement("div",null,ue.a.createElement("form",{ref:function(t){return e.uploadForm=t},className:"form"},ue.a.createElement("p",null,"Select a file to upload as an attachment to this document. Uploading a file saves the document as a new revision."),ue.a.createElement("input",Bf({ref:function(t){return e.attachments=t},type:"file",name:"_attachments"},r)),ue.a.createElement("br",null)),ue.a.createElement("div",{className:n},ue.a.createElement("div",{className:"bar",style:{width:this.props.uploadPercentage+"%"}})))),ue.a.createElement(Tt.f.Footer,null,ue.a.createElement("a",{href:"#","data-bypass":"true",className:"cancel-link",onClick:this.closeModal},"Cancel"),ue.a.createElement("button",Bf({href:"#",id:"upload-btn","data-bypass":"true",className:"btn btn-primary save",onClick:this.upload},r),ue.a.createElement("i",{className:"icon icon-upload"})," Upload Attachment")))}}])&&Hf(n.prototype,r),o&&Hf(n,o),t}(ue.a.Component);function Yf(e){return(Yf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zf(e){return(Zf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $f(e,t){return($f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function em(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Wf(zf,"propTypes",{visible:et.a.bool.isRequired,doc:et.a.object,inProgress:et.a.bool.isRequired,uploadPercentage:et.a.number.isRequired,errorMessage:et.a.string,cancelUpload:et.a.func.isRequired,hideUploadModal:et.a.func.isRequired,resetUploadModal:et.a.func.isRequired,uploadAttachment:et.a.func.isRequired});var tm=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,o=(e=Zf(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==Yf(o)&&"function"!=typeof o?Jf(r):o,em(Jf(n),"getCodeEditor",(function(){if(n.props.isLoading)return ue.a.createElement(Zo.LoadLines,null);var e=n.props.doc.attributes;n.props.isDbPartitioned&&(-1!==e._id.indexOf(":")||e._id.startsWith("_design")||(e._id=":"+e._id));var t=JSON.stringify(e,null,"  "),r=[{name:"save",bindKey:{win:"Ctrl-S",mac:"Ctrl-S"},exec:n.saveDoc}];return ue.a.createElement(Zo.CodeEditor,{id:"doc-editor",ref:function(e){return n.docEditor=e},defaultCode:t,mode:"json",autoFocus:!0,editorCommands:r,notifyUnsavedChanges:!0,stringEditModalEnabled:!0})})),em(Jf(n),"saveDoc",(function(){n.props.saveDoc(n.props.doc,n.checkDocIsValid(),n.onSaveComplete,n.props.previousUrl)})),em(Jf(n),"onSaveComplete",(function(){n.getEditor().clearChanges()})),em(Jf(n),"hideDeleteDocModal",(function(){n.props.hideDeleteDocModal()})),em(Jf(n),"deleteDoc",(function(){n.props.hideDeleteDocModal(),n.props.deleteDoc(n.props.doc)})),em(Jf(n),"getEditor",(function(){return n.docEditor?n.docEditor.getEditor():null})),em(Jf(n),"checkDocIsValid",(function(){if(n.getEditor().hasErrors())return!1;var e=JSON.parse(n.getEditor().getValue());return n.props.doc.clear().set(e,{validate:!0}),!n.props.doc.validationError})),em(Jf(n),"clearChanges",(function(){n.docEditor.clearChanges()})),em(Jf(n),"getExtensionIcons",(function(){var e=ie.getExtensions("DocEditor:icons");return _.map(e,(function(e,t){return ue.a.createElement(e,{doc:n.props.doc,key:t,database:n.props.database})}))})),em(Jf(n),"getButtonRow",(function(){return!n.props.isNewDoc&&ue.a.createElement("div",null,ue.a.createElement(wf,{doc:n.props.doc,isLoading:n.props.isLoading}),ue.a.createElement("div",{className:"doc-editor-extension-icons"},n.getExtensionIcons()),n.props.conflictCount?ue.a.createElement(Vf,{title:"Conflicts (".concat(n.props.conflictCount,")"),iconClass:"icon-columns",className:"conflicts",onClick:function(){ie.navigate(ie.urls("revision-browser","app",n.props.database.safeID(),n.props.doc.id))}}):null,ue.a.createElement(Vf,{className:"upload",title:"Upload Attachment",iconClass:"icon-circle-arrow-up",onClick:n.props.showUploadModal}),ue.a.createElement(Vf,{title:"Clone Document",iconClass:"icon-repeat",onClick:n.props.showCloneDocModal}),ue.a.createElement(Vf,{title:"Delete",iconClass:"icon-trash",onClick:n.props.showDeleteDocModal}))})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$f(e,t)}(t,e),n=t,(r=[{key:"UNSAFE_componentWillUpdate",value:function(e){(this.props.numFilesUploaded!==e.numFilesUploaded||this.props.doc&&this.props.doc.hasChanged()||this.props.doc&&e.doc&&this.props.doc.id!==e.doc.id)&&(this.getEditor().setValue(JSON.stringify(e.doc.attributes,null,"  ")),this.onSaveComplete())}},{key:"render",value:function(){var e=this,t=this.props.isNewDoc?"Create Document":"Save Changes",n=this.props.previousUrl?this.props.previousUrl:ie.urls("allDocs","app",ie.url.encode(this.props.database.id));return ue.a.createElement("div",null,ue.a.createElement("div",{id:"doc-editor-actions-panel"},ue.a.createElement("div",{className:"doc-actions-left"},ue.a.createElement("button",{className:"save-doc btn btn-primary save",type:"button",onClick:this.saveDoc},ue.a.createElement("i",{className:"icon fonticon-ok-circled"})," ",t),ue.a.createElement("div",null,ue.a.createElement("a",{href:"#/".concat(n),className:"js-back cancel-button"},"Cancel"))),ue.a.createElement("div",{className:"alignRight"},this.getButtonRow())),ue.a.createElement("div",{className:"code-region"},ue.a.createElement("div",{className:"bgEditorGutter"}),ue.a.createElement("div",{id:"editor-container",className:"doc-code"},this.getCodeEditor())),ue.a.createElement(zf,{ref:function(t){return e.uploadModal=t},visible:this.props.isUploadModalVisible,doc:this.props.doc,inProgress:this.props.uploadInProgress,uploadPercentage:this.props.uploadPercentage,errorMessage:this.props.uploadErrorMessage,cancelUpload:this.props.cancelUpload,hideUploadModal:this.props.hideUploadModal,resetUploadModal:this.props.resetUploadModal,uploadAttachment:this.props.uploadAttachment}),ue.a.createElement(Lf,{doc:this.props.doc,database:this.props.database,visible:this.props.isCloneDocModalVisible,onSubmit:this.clearChanges,hideCloneDocModal:this.props.hideCloneDocModal,cloneDoc:this.props.cloneDoc}),ue.a.createElement("span",{id:"hey"},"bb"),ue.a.createElement(Ea.ConfirmationModal,{title:"Confirm Deletion",visible:this.props.isDeleteDocModalVisible,text:"Are you sure you want to delete this document?",onClose:this.hideDeleteDocModal,onSubmit:this.deleteDoc,successButtonLabel:"Delete Document"}))}}])&&Qf(n.prototype,r),o&&Qf(n,o),t}(ue.a.Component);em(tm,"defaultProps",{database:{},isNewDoc:!1}),em(tm,"propTypes",{isLoading:et.a.bool.isRequired,isNewDoc:et.a.bool.isRequired,isDbPartitioned:et.a.bool.isRequired,doc:et.a.object,conflictCount:et.a.number.isRequired,previousUrl:et.a.string,saveDoc:et.a.func.isRequired,isCloneDocModalVisible:et.a.bool.isRequired,database:et.a.object,showCloneDocModal:et.a.func.isRequired,hideCloneDocModal:et.a.func.isRequired,cloneDoc:et.a.func.isRequired,isDeleteDocModalVisible:et.a.bool.isRequired,showDeleteDocModal:et.a.func.isRequired,hideDeleteDocModal:et.a.func.isRequired,deleteDoc:et.a.func.isRequired,isUploadModalVisible:et.a.bool.isRequired,uploadInProgress:et.a.bool.isRequired,uploadPercentage:et.a.number.isRequired,uploadErrorMessage:et.a.string,numFilesUploaded:et.a.number.isRequired,showUploadModal:et.a.func.isRequired,hideUploadModal:et.a.func.isRequired,cancelUpload:et.a.func.isRequired,resetUploadModal:et.a.func.isRequired,uploadAttachment:et.a.func.isRequired});var nm=Object(tt.b)((function(e,t){var n=e.docEditor,r=e.databases;return{isLoading:n.isLoading||r.isLoadingDbInfo,isNewDoc:t.isNewDoc,isDbPartitioned:r.isDbPartitioned,doc:n.doc,database:t.database,conflictCount:n.docConflictCount,previousUrl:t.previousUrl,isCloneDocModalVisible:n.cloneDocModalVisible,isDeleteDocModalVisible:n.deleteDocModalVisible,isUploadModalVisible:n.uploadModalVisible,uploadInProgress:n.uploadInProgress,uploadPercentage:n.uploadPercentage,uploadErrorMessage:n.uploadErrorMessage,numFilesUploaded:n.numFilesUploaded}}),(function(e){return{saveDoc:function(e,t,n,r){cf(e,t,n,r)},showCloneDocModal:function(){e(lf())},hideCloneDocModal:function(){e(uf())},cloneDoc:function(e,t,n){df(e,t,n)},showDeleteDocModal:function(){e(pf())},hideDeleteDocModal:function(){e(ff())},deleteDoc:function(e){mf(e)},showUploadModal:function(){e(hf())},hideUploadModal:function(){e(yf())},cancelUpload:function(){gf()},resetUploadModal:function(){e(Ef())},uploadAttachment:function(t){e(bf(t))}}}))(tm),rm=function(e){var t=e.onClick,n=e.forward?"fonticon-right-open":"fonticon-left-open";return ue.a.createElement("div",{style:{height:"20px",width:"11px",marginTop:"7px"},className:n,onClick:t})};rm.propTypes={onClick:et.a.func.isRequired};var om=function(e){var t=e.options,n=e.selected,r=e.onRevisionClick,o=e.onBackwardClick,a=e.onForwardClick;return ue.a.createElement("div",{className:"conflicting-revs-dropdown"},ue.a.createElement(rm,{backward:!0,onClick:o}),ue.a.createElement("div",{style:{width:"345px",margin:"0 5px"}},ue.a.createElement(Bo.a,{name:"form-field-name",value:n,options:t,clearable:!1,onChange:r})),ue.a.createElement(rm,{forward:!0,onClick:a}))};om.propTypes={options:et.a.array.isRequired,selected:et.a.string.isRequired,onRevisionClick:et.a.func.isRequired,onBackwardClick:et.a.func.isRequired,onForwardClick:et.a.func.isRequired};var am=om;function im(e){return(im="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cm(e){return(cm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function um(e,t){return(um=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var dm=Zo.ConfirmButton,pm=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=cm(t).call(this,e))||"object"!==im(o)&&"function"!=typeof o?lm(r):o).state={checked:!1},n.close=n.close.bind(lm(n)),n.onDeleteConflicts=n.onDeleteConflicts.bind(lm(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&um(e,t)}(t,e),n=t,(r=[{key:"close",value:function(){this.props.toggleConfirmModal(!1,null)}},{key:"onDeleteConflicts",value:function(){var e=this.state.checked;this.props.onConfirm(this.props.docToWin,e)}},{key:"render",value:function(){var e=this;return ue.a.createElement(Tt.f,{dialogClassName:"delete-conflicts-modal",show:this.props.show,onHide:this.close},ue.a.createElement(Tt.f.Header,{closeButton:!1},ue.a.createElement(Tt.f.Title,null,"Solve Conflicts")),ue.a.createElement(Tt.f.Body,null,ue.a.createElement("p",null,ue.a.createElement("i",{className:"icon-warning-sign"})," Do you want to delete all conflicting revisions for this document?")),ue.a.createElement(Tt.f.Footer,null,ue.a.createElement("div",{style:{float:"left",marginTop:"10px"}},ue.a.createElement("label",null,ue.a.createElement("input",{style:{margin:"0 5px 3px 0"},onChange:function(){e.setState({checked:!e.state.checked})},type:"checkbox"}),"Do not show this warning message again")),ue.a.createElement("a",{style:{marginRight:"10px",cursor:"pointer"},onClick:this.close,"data-bypass":"true"},"Cancel"),ue.a.createElement(dm,{onClick:this.onDeleteConflicts,text:"Delete Revisions",buttonType:"btn-danger"})))}}])&&sm(n.prototype,r),o&&sm(n,o),t}(ue.a.Component);function fm(e){return(fm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hm(e){return(hm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ym(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bm(e,t){return(bm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}pm.propTypes={onConfirm:et.a.func.isRequired,toggleConfirmModal:et.a.func.isRequired};var gm=Zo.ConfirmButton,Em=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=hm(t).call(this,e))||"object"!==fm(o)&&"function"!=typeof o?ym(r):o).state={showModal:!1},n.selectAsWinner=n.selectAsWinner.bind(ym(n)),n.onSelectAsWinnerClickOurs=n.onSelectAsWinnerClick.bind(ym(n),n.props.ours),n.onSelectAsWinnerClickTheirs=n.onSelectAsWinnerClick.bind(ym(n),n.props.theirs),n.onRevisionClick=n.onRevisionClick.bind(ym(n)),n.onForwardClick=n.onForwardClick.bind(ym(n)),n.onBackwardClick=n.onBackwardClick.bind(ym(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bm(e,t)}(t,e),n=t,(r=[{key:"onRevisionClick",value:function(e){this.props.chooseLeaves(this.props.ours,e.value)}},{key:"onForwardClick",value:function(){var e=this.props.conflictingRevs,t=e.indexOf(this.props.theirs._rev),n=e[t+1];n&&this.props.chooseLeaves(this.props.ours,n)}},{key:"onBackwardClick",value:function(){var e=this.props.conflictingRevs,t=e.indexOf(this.props.theirs._rev),n=e[t-1];n&&this.props.chooseLeaves(this.props.ours,n)}},{key:"selectAsWinner",value:function(e,t){t&&ce.utils.localStorageSet("deleteConflictsHideModal",!0),this.props.selectRevAsWinner(e._id,e._rev,this.props.tree)}},{key:"onSelectAsWinnerClick",value:function(e){!0===ce.utils.localStorageGet("deleteConflictsHideModal")?this.selectAsWinner(e):this.props.toggleConfirmModal(!0,e)}},{key:"render",value:function(){var e=this.props.tree,t={paddingRight:"30px"};return ue.a.createElement("div",{className:"revision-browser-controls"},ue.a.createElement(pm,{toggleConfirmModal:this.props.toggleConfirmModal,onConfirm:this.selectAsWinner,docToWin:this.props.docToWin,show:this.props.showConfirmModal}),ue.a.createElement("table",{style:{margin:"10px 60px",width:"100%"}},ue.a.createElement("tbody",null,ue.a.createElement("tr",{style:{height:"60px"}},ue.a.createElement("td",{style:t},"Server-Selected Rev: "),ue.a.createElement("td",{style:t},ue.a.createElement("div",{style:{lineHeight:"36px",height:"36px",width:"337px",color:"#000",backgroundColor:"#ffbbbb"}},ue.a.createElement("b",{style:{paddingLeft:"10px"}},e.winner))),ue.a.createElement("td",null,ue.a.createElement(gm,{onClick:this.onSelectAsWinnerClickOurs,style:{marginRight:"10px",width:"220px"},text:"Delete Other Conflicts",buttonType:"btn-secondary",customIcon:"icon-trophy"}))),ue.a.createElement("tr",{style:{height:"60px"}},ue.a.createElement("td",{style:t},"Conflicting Revisions: "),ue.a.createElement("td",{style:t},ue.a.createElement(am,{onRevisionClick:this.onRevisionClick,onForwardClick:this.onForwardClick,onBackwardClick:this.onBackwardClick,options:this.props.dropdownData,selected:this.props.theirs._rev})),ue.a.createElement("td",null,ue.a.createElement(gm,{"data-id":"button-select-theirs",onClick:this.onSelectAsWinnerClickTheirs,style:{marginRight:"10px",width:"220px"},text:"Select as Winner",buttonType:"btn-secondary",customIcon:"icon-trophy"}))))))}}])&&mm(n.prototype,r),o&&mm(n,o),t}(ue.a.Component);function _m(e){return(_m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Om(e,t){return!t||"object"!==_m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Sm(e){return(Sm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Dm(e,t){return(Dm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Em.propTypes={tree:et.a.object.isRequired,ours:et.a.object.isRequired,conflictingRevs:et.a.array.isRequired},n(628);var Nm=mn.a.acequire("ace/ext/static_highlight");n(182);var wm=mn.a.acequire("ace/mode/json").Mode;n(183);var Tm=mn.a.acequire("ace/theme/idle_fingers"),Cm=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Om(this,Sm(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dm(e,t)}(t,e),n=t,(r=[{key:"componentDidUpdate",value:function(){this.hightlightAfterRender()}},{key:"componentDidMount",value:function(){this.hightlightAfterRender()}},{key:"hightlightAfterRender",value:function(){var e=function(e){return JSON.stringify(e,null,"  ")},t=new wm,n=this.revLeftOurs,r=this.revRightTheirs,o=Nm.render(e(this.props.ours),t,Tm,0,!0);n.innerHTML=o.html;var a=Nm.render(e(this.props.theirs),t,Tm,0,!0);r.innerHTML=a.html}},{key:"render",value:function(){var e=this,t=this.props,n=t.ours,r=t.theirs;return n&&r?ue.a.createElement("div",{className:"revision-split-area"},ue.a.createElement("div",{"data-id":"ours",style:{width:"50%"}},ue.a.createElement("div",{style:{marginBottom:"20px"}},n._rev," (Server-Selected Rev)"),ue.a.createElement("pre",{ref:function(t){return e.revLeftOurs=t}})),ue.a.createElement("div",{"data-id":"theirs",style:{width:"50%"}},ue.a.createElement("div",{style:{marginBottom:"20px"}},r._rev),ue.a.createElement("pre",{ref:function(t){return e.revRightTheirs=t}}))):ue.a.createElement("div",null)}}])&&vm(n.prototype,r),o&&vm(n,o),t}(ue.a.Component),Im=n(220),Am=(n(630),function(e){var t=e.ours,n=e.theirs;if(!t||!n)return ue.a.createElement("div",null);var r=Im.diff(t,n),o=Im.formatters.html.format(r,t);return ue.a.createElement("div",{className:"revision-diff-area"},ue.a.createElement("div",{style:{marginTop:"30px"},dangerouslySetInnerHTML:{__html:o}}))});Am.propTypes={ours:et.a.object,theirs:et.a.object,currentRev:et.a.string};var Rm=Am;function Pm(e){return(Pm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xm(e){return(xm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function km(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jm(e,t){return(jm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Um=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=xm(t).call(this,e))||"object"!==Pm(o)&&"function"!=typeof o?km(r):o).toggleDiffViewFalse=n.toggleDiffView.bind(km(n),!1),n.toggleDiffViewTrue=n.toggleDiffView.bind(km(n),!0),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jm(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.props.toggleConfirmModal(!1,null),this.props.initDiffEditor()}},{key:"toggleDiffView",value:function(e){this.props.toggleDiffView(e)}},{key:"render",value:function(){var e=this.props,t=e.tree,n=e.ours,r=e.theirs,o=e.conflictingRevs,a=e.isDiffViewEnabled;return t.length||r?r&&o.length?ue.a.createElement("div",{className:"revision-wrapper scrollable"},ue.a.createElement(Em,this.props),ue.a.createElement("div",{className:"revision-view-controls"},ue.a.createElement(Tt.b,{className:"two-sides-toggle-button"},ue.a.createElement(Tt.a,{style:{width:"120px"},className:a?"active":"",onClick:this.toggleDiffViewTrue},ue.a.createElement("i",{className:"icon-columns"})," Diff"),ue.a.createElement(Tt.a,{style:{width:"120px"},className:a?"":"active",onClick:this.toggleDiffViewFalse},ue.a.createElement("i",{className:"icon-file-text"})," Document"))),a?ue.a.createElement(Rm,{ours:n,theirs:r}):ue.a.createElement(Cm,{ours:n,theirs:r})):ue.a.createElement("div",{style:{textAlign:"center",color:"#fff"}},ue.a.createElement("h2",null,"No conflicts")):ue.a.createElement(vr,null)}}])&&Lm(n.prototype,r),o&&Lm(n,o),t}(ue.a.Component),Mm="REV_TREE_LOADED",qm="REV_BROWSER_DIFF_DOCS_READY",Vm="REV_BROWSER_DIFF_ENABLE_DIFF_VIEW",Fm="REV_BROWSER_SHOW_CONFIRM_MODAL";function Bm(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function Hm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bm(n,!0).forEach((function(t){Km(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bm(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Km(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Gm,Xm={tree:[],doc:{},conflictDoc:!1,conflictingRevs:[],databaseName:"",ours:null,theirs:null,isDiffViewEnabled:!0,showConfirmModal:!1,docToWin:null},Wm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xm,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.options;switch(n){case"REV_TREE_LOADED":var o=r.tree,a=r.doc,i=r.conflictDoc,s=r.conflictingRevs,c=r.databaseName;return Hm({},e,{tree:o,doc:a,conflictDoc:i,conflictingRevs:s,databaseName:c,theirs:i,ours:a});case"REV_BROWSER_DIFF_DOCS_READY":return Hm({},e,{theirs:r.theirs});case"REV_BROWSER_DIFF_ENABLE_DIFF_VIEW":return Hm({},e,{isDiffViewEnabled:r.enableDiff});case"REV_BROWSER_SHOW_CONFIRM_MODAL":return Hm({},e,{showConfirmModal:r.show,docToWin:r.docToWin});default:return e}},zm=function(e){return e.doc},Ym=function(e){return e.conflictDoc},Qm=function(e){return e.conflictingRevs},Zm=function(e){return e.databaseName},Jm=function(e){return e.ours},$m=function(e){return e.theirs},eh=function(e){return e.showConfirmModal},th=function(e){return e.conflictingRevs.map((function(e){return{value:e,label:e}}))},nh=function(e){return e.isDiffViewEnabled},rh=function(e){return e.docToWin},oh=n(329),ah=n.n(oh),ih=n(222),sh=n(331);function ch(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}ih.a.plugin(sh.a);function lh(e,t,n){return e.reduce((function(e,n){return n[0]!==t&&e.push(n[0]),e}),[]).filter((function(e){return-1===n.indexOf(e)}))}var uh=function(e,t,n,r,o){return{type:Mm,options:{tree:e,doc:t,conflictDoc:r,conflictingRevs:n,databaseName:o}}},dh=function(e,t){return{type:qm,options:{theirs:t,ours:e}}},ph=function(e,t){return{type:Fm,options:{show:e,docToWin:t}}};var fh=Object(tt.b)((function(e,t){var n,r=e.revisionBrowser;return{docId:t.docId,tree:(n=r,n.tree),doc:zm(r),conflictDoc:Ym(r),conflictingRevs:Qm(r),databaseName:Zm(r),ours:Jm(r),theirs:$m(r),showConfirmModal:eh(r),dropdownData:th(r),isDiffViewEnabled:nh(r),docToWin:rh(r)}}),(function(e,t){return{toggleConfirmModal:function(t,n){e(ph(t,n))},initDiffEditor:function(){var n,r;e((n=t.databaseName,r=t.docId,function(e){var t=ie.urls("databaseBaseURL","apiurl",n);Gm=Object(ih.a)(t),Promise.all([Gm.get(r),ah()(Gm,r)]).then((function(t){var r=ch(t,2),o=r[0],a=r[1],i=lh(a.paths,a.winner,Object.keys(a.deleted)),s=i[0];if(!s)return e(uh(a,o,i,null,n));Gm.get(o._id,{rev:s}).then((function(t){e(uh(a,o,i,t,n))}))}))}))},chooseLeaves:function(t,n){e(function(e,t){return function(n){Gm.get(e._id,{rev:t}).then((function(t){n(dh(e,t))}))}}(t,n))},selectRevAsWinner:function(n,r,o){var a,i,s,c;e((a=t.databaseName,i=n,s=o.paths,c=r,function(e){var t=lh(s,c,[]),n=function(e,t){return{docs:t.map((function(t){return{_id:e,_rev:t,_deleted:!0}}))}}(i,t);S(ie.urls("bulk_docs","server",a,""),n).then((function(t){if(t.error)return ie.addNotification({msg:"Failed to delete clean up conflicts!",type:"error",clear:!0});ie.addNotification({msg:"Conflicts successfully solved.",clear:!0}),e(ph(!1,null)),ie.navigate(ie.urls("allDocs","app",a,""))}))}))},toggleDiffView:function(t){e(function(e){return{type:Vm,options:{enableDiff:e}}}(t))}}}))(Um),mh={DocEditorRouteObject:ie.RouteObject.extend({selectedHeader:"Databases",roles:["fx_loggedIn"],initialize:function(e,t){this.databaseName=t[0],this.docId=t[1],this.database=this.database||new ri.Model({id:this.databaseName}),this.doc=new Me.NewDoc(null,{database:this.database})},routes:{"database/:database/:doc/conflicts":"revisionBrowser","database/:database/:doc/code_editor":"codeEditor","database/:database/_design/:ddoc/conflicts":"revBrowserForDesignDoc","database/:database/_design/:ddoc":"showDesignDoc","database/:database/_local/:doc":"showLocalDoc","database/:database/:doc":"codeEditor","database/:database/_new":"codeEditorNewDoc","database/:database/_new?(:extra)":"codeEditorNewDoc"},revisionBrowser:function(e,t){var n=ie.urls("allDocs","app",ie.url.encode(this.database.safeID())),r=ie.urls("document","app",this.database.safeID(),this.docId),o=[{name:this.database.safeID(),link:n},{name:this.docId+" > Conflicts"}];return ue.a.createElement(Dt,{crumbs:o,endpoint:this.doc.url("apiurl"),docURL:r,component:ue.a.createElement(fh,{docId:t,databaseName:e})})},revBrowserForDesignDoc:function(e,t){return this.revisionBrowser(e,"_design/"+t)},codeEditorNewDoc:function(e,t){return this.codeEditor(e,null,t)},codeEditor:function(e,t,n){var r=ce.getParams(n),o=[{name:e,link:ie.urls("allDocs","app",ie.url.encode(e))},{name:t||"New Document"}];if(this.database=new ri.Model({id:e}),t)this.doc=new Me.Doc({_id:t},{database:this.database,fetchConflicts:!0});else{var a=r?r.partitionKey:void 0;this.doc=new Me.NewDoc(null,{database:this.database,partitionKey:a})}Je.fetchSelectedDatabaseInfo(e),sf({doc:this.doc,database:this.database});var i=void 0,s=ie.router.lastPages.filter((function(e){return-1!==e.indexOf("/_all_docs")||e.match(/_design\/(\S)*\/_/)||-1!==e.indexOf("/_find")}));return s.length>0&&(i=s[s.length-1]),ue.a.createElement(Dt,{crumbs:o,endpoint:this.doc.url("apiurl"),docURL:this.doc.documentation(),partitionKey:r.partitionKey,component:ue.a.createElement(nm,{database:this.database,isNewDoc:!t,previousUrl:i})})},showLocalDoc:function(e,t){return this.codeEditor(e,"_local/"+t)},showDesignDoc:function(e,t){return this.codeEditor(e,"_design/"+t)}})},hh=ii.extend({routes:{"database/:database/_partition/:partitionkey/new_view":{route:"createView",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/new_view/:designDoc":{route:"createView",roles:["fx_loggedIn"]},"database/:database/new_view":{route:"createViewNoPartition",roles:["fx_loggedIn"]},"database/:database/new_view/:designDoc":{route:"createViewNoPartition",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/_design/:ddoc/_view/:view":{route:"showPartitionedView",roles:["fx_loggedIn"]},"database/:database/_design/:ddoc/_view/:view":{route:"showGlobalView",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/_design/:ddoc/_view/:view/edit":{route:"editView",roles:["fx_loggedIn"]},"database/:database/_design/:ddoc/_view/:view/edit":{route:"editViewNoPartition",roles:["fx_loggedIn"]}},initialize:function(e,t){var n=t[0];this.databaseName=n,this.database=new ri.Model({id:n}),this.createDesignDocsCollection(),this.addSidebar()},showGlobalView:function(e,t,n){return this.showView(e,"",t,n)},showPartitionedView:function(e,t,n,r){return this.showView(e,t,n,r)},showView:function(e,t,n,r){r=r.replace(/\?.*$/,""),Bi.dispatchClearIndex(),Bi.dispatchFetchDesignDocsBeforeEdit({viewName:r,isNewView:!1,database:this.database,designDocs:this.designDocs,designDocId:"_design/"+n}),Je.fetchSelectedDatabaseInfo(e);var o=new si("designDoc",{designDocName:n,designDocSection:"Views",indexName:r});ai.dispatchExpandSelectedItem(o);var a=t?encodeURIComponent(t):"",i=ie.urls("view","server",encodeURIComponent(e),a,encodeURIComponent(n),encodeURIComponent(r)),s=ie.urls("view","apiurl",encodeURIComponent(e),a,encodeURIComponent(n),encodeURIComponent(r)),c=ie.constants.DOC_URLS.GENERAL,l=this.getCrumbs(this.database);return ue.a.createElement(Zp,{docURL:c,endpoint:s,dbName:this.database.id,dropDownLinks:l,database:this.database,fetchUrl:i,ddocsOnly:!1,deleteEnabled:!1,selectedNavItem:o,partitionKey:t,onPartitionKeySelected:function(t){var o=ie.urls("partitioned_view","app",encodeURIComponent(e),encodeURIComponent(t),encodeURIComponent(n));ie.navigate("#/"+o+encodeURIComponent(r))},onGlobalModeSelected:function(){var t=ie.urls("view","app",encodeURIComponent(e),encodeURIComponent(n));ie.navigate("#/"+t+encodeURIComponent(r))},globalMode:""===t})},createViewNoPartition:function(e,t){return this.createView(e,"",t)},createView:function(e,t,n){var r=!0,o="new-doc";n&&(o="_design/"+n,r=!1),Bi.dispatchFetchDesignDocsBeforeEdit({viewName:"new-view",isNewView:!0,database:this.database,designDocs:this.designDocs,designDocId:o,isNewDesignDoc:r}),Je.fetchSelectedDatabaseInfo(e);var a=new si(""),i=this.getCrumbs(this.database);return ue.a.createElement($p,{showIncludeAllDocs:!0,docURL:ie.constants.DOC_URLS.GENERAL,dbName:this.database.id,dropDownLinks:i,database:this.database,selectedNavItem:a,partitionKey:t})},editViewNoPartition:function(e,t,n){return this.editView(e,"",t,n)},editView:function(e,t,n,r){Bi.dispatchFetchDesignDocsBeforeEdit({viewName:r,isNewView:!1,database:this.database,designDocs:this.designDocs,designDocId:"_design/"+n}),Je.fetchSelectedDatabaseInfo(e);var o=new si("designDoc",{designDocName:n,designDocSection:"Views",indexName:r});ai.dispatchExpandSelectedItem(o);var a=ie.constants.DOC_URLS.GENERAL,i=ie.urls("view","apiurl",e,n,r),s=this.getCrumbs(this.database);return ue.a.createElement($p,{showIncludeAllDocs:!0,docURL:a,endpoint:i,dbName:this.database.id,dropDownLinks:s,database:this.database,selectedNavItem:o,partitionKey:t})}});function yh(e){return(yh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gh(e,t){return!t||"object"!==yh(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Eh(e){return(Eh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _h(e,t){return(_h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var vh=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),gh(this,Eh(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_h(e,t)}(t,e),n=t,(r=[{key:"humanizeDuration",value:function(e){if(e<1e3)return Math.round(e)+" ms";var t=e/1e3;if(t<60)return Math.floor(t)+" seconds";var n=Math.floor(t/60);return n+"minute, "+(t-=60*n)+"seconds"}},{key:"getWarning",value:function(e,t){return e&&!t&&e.results_returned&&(e.total_docs_examined||e.total_quorum_docs_examined)/e.results_returned>10?"The number of documents examined is high in proportion to the number of results returned. Consider adding an index to improve this.":t}},{key:"warningPopupComponent",value:function(e){if(e)return ue.a.createElement("div",{className:"warning"},ue.a.createElement("i",{className:"fonticon-attention-circled"})," ",e)}},{key:"executionStatsLine",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=0!==t||n?"true":"false";return ue.a.createElement("div",{"data-status":o},e+": ",ue.a.createElement("span",{className:"value"},t.toLocaleString()," ",r))}},{key:"executionStatsPopupComponent",value:function(e){return e?ue.a.createElement("div",{className:"execution-stats-popup-component"},this.executionStatsLine("documents examined",e.total_docs_examined),this.executionStatsLine("documents examined (quorum)",e.total_quorum_docs_examined),this.executionStatsLine("results returned",e.results_returned,!0),this.executionStatsLine("execution time",e.execution_time_ms,!1,"ms")):null}},{key:"popup",value:function(e,t){return ue.a.createElement(Tt.i,{id:"popover-execution-stats",title:"Execution Statistics"},ue.a.createElement("div",{className:"execution-stats-popup"},this.executionStatsPopupComponent(e),this.warningPopupComponent(t)))}},{key:"render",value:function(){var e=this.props,t=e.executionStats,n=e.warning,r=this.getWarning(t,n),o=null;r&&(o=ue.a.createElement("i",{className:"fonticon-attention-circled"}));var a=null;t?a=ue.a.createElement("span",{className:"execution-stats-component"},"Executed in ",this.humanizeDuration(t.execution_time_ms)):r&&(a=ue.a.createElement("span",{className:"execution-stats-component"},"Warning"));var i=this.popup(t,r);return ue.a.createElement(Tt.h,{trigger:["hover","focus","click"],placement:"right",overlay:i},ue.a.createElement("span",{className:"execution-stats"},o,a))}}])&&bh(n.prototype,r),o&&bh(n,o),t}(ue.a.Component);function Oh(e){return(Oh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sh(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function Dh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sh(n,!0).forEach((function(t){Nh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sh(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Nh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Th(e,t){return!t||"object"!==Oh(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ch(e){return(Ch=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ih(e,t){return(Ih=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}vh.propTypes={executionStats:et.a.object,warning:et.a.string};var Ah=Zo.PaddedBorderedBox,Rh=Zo.CodeEditorPanel,Ph=ce.helpers.getDocUrl,Lh=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Th(this,Ch(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ih(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this;prettyPrint(),this.props.loadQueryHistory({databaseName:this.props.databaseName}),this.props.clearResults();var t=this.codeEditor.codeEditor.editor;t.commands.byName.runQuery||t.commands.addCommand({name:"runQuery",bindKey:{win:"Ctrl-Enter",mac:"Command-Option-Enter"},exec:function(){e.runQuery({preventDefault:function(){}})},readOnly:!0})}},{key:"componentDidUpdate",value:function(e){prettyPrint(),e.history!=this.props.history&&this.setEditorValue(this.props.history[0].value)}},{key:"setEditorValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.codeEditor.getEditor().setValue(e)}},{key:"getEditorValue",value:function(){return this.codeEditor.getValue()}},{key:"editorHasErrors",value:function(){return this.codeEditor.getEditor().hasErrors()}},{key:"onHistorySelected",value:function(e){this.setEditorValue(e.value)}},{key:"editor",value:function(){var e=this;return ue.a.createElement("div",{className:"mango-editor-wrapper"},ue.a.createElement("form",{className:"form-horizontal",onSubmit:function(t){e.runQuery(t)}},ue.a.createElement("div",{className:"padded-box"},ue.a.createElement(Bo.a,{className:"mango-select",options:this.props.history,ref:function(t){return e.history=t},placeholder:"Query history",searchable:!1,clearable:!1,autosize:!1,onChange:function(t){e.onHistorySelected(t)}})),ue.a.createElement(Ah,null,ue.a.createElement(Rh,{id:"query-field",ref:function(t){return e.codeEditor=t},title:this.props.editorTitle,docLink:Ph("MANGO_SEARCH"),defaultCode:this.props.queryFindCode})),ue.a.createElement("div",{className:"padded-box"},ue.a.createElement("div",{className:"control-group"},ue.a.createElement("button",{type:"submit",id:"create-index-btn",className:"btn btn-primary btn-space"},"Run Query"),ue.a.createElement("button",{type:"button",id:"explain-btn",className:"btn btn-secondary btn-space",onClick:function(t){e.runExplain(t)}},"Explain"),ue.a.createElement("a",{className:"edit-link",style:{},onClick:function(t){e.manageIndexes(t)}},"manage indexes")),ue.a.createElement("div",null,ue.a.createElement(vh,this.props)))))}},{key:"render",value:function(){return this.props.isLoading?ue.a.createElement("div",{className:"mango-editor-wrapper"},ue.a.createElement(Zo.LoadLines,null)):this.editor()}},{key:"notifyOnQueryError",value:function(){return!!this.editorHasErrors()&&(ie.addNotification({msg:"Please fix the Javascript errors and try again.",type:"error",clear:!0}),!0)}},{key:"manageIndexes",value:function(e){e.preventDefault(),this.props.manageIndexes();var t=this.props.partitionKey?encodeURIComponent(this.props.partitionKey):"",n="#"+ie.urls("mango","index-app",encodeURIComponent(this.props.databaseName),t);ie.navigate(n)}},{key:"runExplain",value:function(e){e.preventDefault(),this.notifyOnQueryError()||this.props.runExplainQuery({databaseName:this.props.databaseName,partitionKey:this.props.partitionKey,queryCode:this.getEditorValue()})}},{key:"runQuery",value:function(e){e.preventDefault(),this.notifyOnQueryError()||(this.props.clearResults(),this.props.runQuery({databaseName:this.props.databaseName,partitionKey:this.props.partitionKey,queryCode:JSON.parse(this.getEditorValue()),fetchParams:Dh({},this.props.fetchParams,{skip:0})}))}}])&&wh(n.prototype,r),o&&wh(n,o),t}(le.Component);Lh.propTypes={description:et.a.string.isRequired,editorTitle:et.a.string.isRequired,queryFindCode:et.a.string.isRequired,queryFindCodeChanged:et.a.bool,databaseName:et.a.string.isRequired,partitionKey:et.a.string,runExplainQuery:et.a.func.isRequired,runQuery:et.a.func.isRequired,manageIndexes:et.a.func.isRequired,loadQueryHistory:et.a.func.isRequired,clearResults:et.a.func.isRequired};var xh={MANGO_NEW_QUERY_FIND_CODE:"MANGO_NEW_QUERY_FIND_CODE",MANGO_LOAD_QUERY_HISTORY:"MANGO_LOAD_QUERY_HISTORY",MANGO_LOAD_INDEX_TEMPLATES:"MANGO_LOAD_INDEX_TEMPLATES",MANGO_NEW_QUERY_CREATE_INDEX_TEMPLATE:"MANGO_NEW_QUERY_CREATE_INDEX_TEMPLATE",MANGO_SAVE_INDEX_REQUEST:"MANGO_SAVE_INDEX_REQUEST",MANGO_SHOW_EXPLAIN_RESULTS:"MANGO_SHOW_EXPLAIN_RESULTS",MANGO_HIDE_EXPLAIN_RESULTS:"MANGO_HIDE_EXPLAIN_RESULTS"};function kh(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function jh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Uh=function(e,t){var n=ce.utils.queryString(t),r=ie.urls("mango","index-server",ce.utils.safeURLName(e));return r="".concat(r).concat(-1!==r.indexOf("?")?"&":"?").concat(n),v(r).then((function(e){if(e.error)throw new Error("("+e.error+") "+e.reason);return{docs:e.indexes,docType:fr.INDEX_RESULTS_DOC_TYPE.MANGO_INDEX,layout:fr.LAYOUT_ORIENTATION.JSON}}))},Mh=null,qh=function(e,t){var n=t.limit,r=t.limit-1,o=(Math.floor(t.skip/r)+1)*r-e.limit;return o>=0&&(n=r-o),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kh(n,!0).forEach((function(t){jh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kh(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{limit:n,skip:e.skip?t.skip+e.skip:t.skip})},Vh=function(e,t,n,r){var o=t?encodeURIComponent(t):"",a=ie.urls("mango","query-server",encodeURIComponent(e),o),i=qh(n,r);return S(a,i,{raw:!0})},Fh=function(e,t,n,r){return function(e){return null===Mh?new ie.Promise((function(t){Vh(e,"",{selector:{_id:{$gt:"a"}},execution_stats:!0},{limit:1}).then((function(e){Mh=200==e.status,t(Mh)}))})):Promise.resolve(Mh)}(e).then((function(o){return o&&(n.execution_stats=!0),Vh(e,t,n,r).then((function(e){return e.json()})).then((function(e){if(e.error)throw new Error("("+e.error+") "+e.reason);return{docs:e.docs,docType:fr.INDEX_RESULTS_DOC_TYPE.MANGO_QUERY,executionStats:e.execution_stats,warning:e.warning}}))}))},Bh={loadQueryHistory:function(e){return{type:xh.MANGO_LOAD_QUERY_HISTORY,options:e}},newQueryFindCode:function(e){return{type:xh.MANGO_NEW_QUERY_FIND_CODE,options:e}},showQueryExplain:function(e){return{type:xh.MANGO_SHOW_EXPLAIN_RESULTS,options:e}},hideQueryExplain:function(){return{type:xh.MANGO_HIDE_EXPLAIN_RESULTS}},newQueryCreateIndexTemplate:function(e){return{type:xh.MANGO_NEW_QUERY_CREATE_INDEX_TEMPLATE,options:e}},loadIndexTemplates:function(e){return{type:xh.MANGO_LOAD_INDEX_TEMPLATES,options:e}},requestSaveIndex:function(){return{type:xh.MANGO_SAVE_INDEX_REQUEST}},saveIndex:function(e){var t=this,n=e.databaseName,r=e.indexCode,o=e.fetchParams;return ie.addNotification({msg:"Saving index for query...",type:"info",clear:!0}),function(e){return e(t.requestSaveIndex()),function(e,t){var n=ie.urls("mango","index-server",ce.utils.safeURLName(e));return S(n,t,{rawBody:!0}).then((function(e){if(e.error)throw new Error("("+e.error+") "+e.reason);return e}))}(n,r).then((function(){var t="#"+ie.urls("mango","query-app",ce.utils.safeURLName(n),"");e(gu((function(e){return Uh(n,e)}),o,{})),ie.addNotification({msg:'Index is ready for querying. <a href="'+t+'">Run a Query.</a>',type:"success",clear:!0,escape:!1})})).catch((function(e){ie.addNotification({msg:"Failed to create index. "+t.errorReason(e),type:"error",clear:!0})}))}},errorReason:function(e){return"Reason: "+(e&&e.message||"n/a")},runExplainQuery:function(e){var t=this,n=e.databaseName,r=e.partitionKey,o=e.queryCode;return function(e){return function(e,t,n){var r=t?encodeURIComponent(t):"",o=ie.urls("mango","explain-server",encodeURIComponent(e),r);return S(o,n,{rawBody:!0}).then((function(e){if(e.error)throw new Error("("+e.error+") "+e.reason);return e}))}(n,r,o).then((function(n){e(t.showQueryExplain({explainPlan:n}))})).catch((function(){ie.addNotification({msg:"There was an error fetching the query plan.",type:"error",clear:!0})}))}}},Hh=function(e){var t=e.additionalIndexes;if(!t)return[];var n=ie.getExtensions("mango:additionalIndexes")[0];return n?t.filter((function(e){return-1!==e.get("type").indexOf(n.type)})):void 0},Kh=Object(tt.b)((function(e,t){var n,r,o=e.mangoQuery,a=e.indexResults;return{databaseName:t.databaseName,queryFindCode:Pu(o.queryFindCode),queryFindCodeChanged:o.queryFindCodeChanged,availableIndexes:(n=o,r=n.availableIndexes,r?r.filter((function(e){var t=e.type;return-1!==["json","special"].indexOf(t)})):[]),additionalIndexes:Hh(o),isLoading:o.isLoading,history:o.history,description:t.description,editorTitle:t.editorTitle,additionalIndexesText:t.additionalIndexesText,fetchParams:a.fetchParams,executionStats:a.executionStats,warning:a.warning,partitionKey:t.partitionKey}}),(function(e){return{loadQueryHistory:function(t){e(Bh.loadQueryHistory(t))},runExplainQuery:function(t){e(Bh.runExplainQuery(t))},runQuery:function(t){e(Bh.hideQueryExplain()),e(Bh.newQueryFindCode(t)),e(gu((function(e){return Fh(t.databaseName,t.partitionKey,t.queryCode,e)}),t.fetchParams,{}))},clearResults:function(){e(fu())},manageIndexes:function(){e(Bh.hideQueryExplain())}}}))(Lh);function Gh(e){return(Gh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xh(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function Wh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xh(n,!0).forEach((function(t){zh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xh(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qh(e){return(Qh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jh(e,t){return(Jh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $h=Zo.PaddedBorderedBox,ey=Zo.CodeEditorPanel,ty=Zo.ConfirmButton,ny=Zo.LoadLines,ry=ce.helpers.getDocUrl,oy=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=Qh(t).call(this,e))||"object"!==Gh(o)&&"function"!=typeof o?Zh(r):o).state={partitionedSelected:!0},n.onTemplateSelected=n.onTemplateSelected.bind(Zh(n)),n.onTogglePartitioned=n.onTogglePartitioned.bind(Zh(n)),n.saveIndex=n.saveIndex.bind(Zh(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jh(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){prettyPrint(),this.props.loadIndexTemplates(),this.props.clearResults(),this.props.loadIndexList({fetchParams:Wh({},this.props.fetchParams,{skip:0})})}},{key:"componentDidUpdate",value:function(e){prettyPrint(),e.templates!=this.props.templates&&this.setEditorValue(this.props.templates[0].value)}},{key:"setEditorValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(this.codeEditor)return this.codeEditor.getEditor().setValue(e)}},{key:"getEditorValue",value:function(){return this.codeEditor.getValue()}},{key:"editorHasErrors",value:function(){return this.codeEditor.getEditor().hasErrors()}},{key:"onTemplateSelected",value:function(e){this.setEditorValue(e.value)}},{key:"onTogglePartitioned",value:function(){this.setState({partitionedSelected:!this.state.partitionedSelected})}},{key:"partitionedCheckobx",value:function(){return this.props.isDbPartitioned?ue.a.createElement("label",null,ue.a.createElement("input",{id:"js-partitioned-index",type:"checkbox",checked:this.state.partitionedSelected,onChange:this.onTogglePartitioned,style:{margin:"0px 10px 0px 0px"}}),"Partitioned"):null}},{key:"editor",value:function(){var e=this,t=this.props.partitionKey?encodeURIComponent(this.props.partitionKey):"",n="#"+ie.urls("mango","query-app",encodeURIComponent(this.props.databaseName),t);return ue.a.createElement("div",{className:"mango-editor-wrapper"},ue.a.createElement("form",{className:"form-horizontal",onSubmit:this.saveIndex},ue.a.createElement("div",{className:"padded-box"},ue.a.createElement(Bo.a,{className:"mango-select",options:this.props.templates,ref:function(t){return e.templates=t},placeholder:"Examples",searchable:!1,clearable:!1,autosize:!1,onChange:this.onTemplateSelected})),ue.a.createElement($h,null,ue.a.createElement(ey,{id:"query-field",ref:function(t){return e.codeEditor=t},title:"Index",docLink:ry("MANGO_INDEX"),defaultCode:this.props.queryIndexCode}),this.partitionedCheckobx()),ue.a.createElement("div",{className:"padded-box"},ue.a.createElement("div",{className:"control-group"},ue.a.createElement(ty,{text:"Create index",id:"create-index-btn",showIcon:!1}),ue.a.createElement("a",{className:"edit-link",href:n},"edit query")))))}},{key:"render",value:function(){return this.props.isLoading?ue.a.createElement(ny,null):this.editor()}},{key:"saveIndex",value:function(e){e.preventDefault();var t=function(){ie.addNotification({msg:"Please fix the Javascript errors and try again.",type:"error",clear:!0})};if(this.editorHasErrors())t();else{var n=this.getEditorValue();if(this.props.isDbPartitioned)try{var r=JSON.parse(n);!0!==r.partitioned&&!1!==r.partitioned&&(r.partitioned=this.state.partitionedSelected),n=JSON.stringify(r)}catch(e){t()}this.props.saveIndex({databaseName:this.props.databaseName,indexCode:n,fetchParams:this.props.fetchParams})}}}])&&Yh(n.prototype,r),o&&Yh(n,o),t}(le.Component);oy.propTypes={isLoading:et.a.bool.isRequired,databaseName:et.a.string.isRequired,isDbPartitioned:et.a.bool.isRequired,saveIndex:et.a.func.isRequired,queryIndexCode:et.a.string.isRequired,partitionKey:et.a.string,loadIndexTemplates:et.a.func.isRequired,clearResults:et.a.func.isRequired,loadIndexList:et.a.func.isRequired},oy.defaultProps={isLoading:!0,isDbPartitioned:!1};var ay=Object(tt.b)((function(e,t){var n=e.mangoQuery,r=e.indexResults,o=e.databases;return{description:t.description,databaseName:t.databaseName,queryIndexCode:Pu(n.queryIndexCode),templates:n.queryIndexTemplates,fetchParams:r.fetchParams,partitionKey:t.partitionKey,isLoading:o.isLoadingDbInfo,isDbPartitioned:o.isDbPartitioned}}),(function(e,t){return{saveIndex:function(t){e(Bh.saveIndex(t))},loadIndexList:function(n){e(gu((function(e){return Uh(t.databaseName,e)}),n.fetchParams,{}))},clearResults:function(){e(fu())},loadIndexTemplates:function(){e(Bh.loadIndexTemplates())}}}))(oy);function iy(e){return(iy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cy(e,t){return!t||"object"!==iy(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ly(e){return(ly=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uy(e,t){return(uy=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var dy=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),cy(this,ly(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uy(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){prettyPrint()}},{key:"componentDidUpdate",value:function(){prettyPrint()}},{key:"render",value:function(){return ue.a.createElement("div",null,ue.a.createElement("pre",{className:"prettyprint"},JSON.stringify(this.props.explainPlan,null," ")))}}])&&sy(n.prototype,r),o&&sy(n,o),t}(le.Component);dy.propTypes={explainPlan:et.a.object.isRequired};var py={MangoIndexEditorContainer:ay,MangoQueryEditorContainer:Kh,ExplainPage:dy};function fy(e){return(fy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function my(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hy(e,t){return!t||"object"!==fy(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yy(e){return(yy=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function by(e,t){return(by=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var gy=function(e){var t=e.docURL,n=e.endpoint,r=e.databaseName,o=e.showPartitionKeySelector,a=e.partitionKey,i=e.onPartitionKeySelected,s=e.onGlobalModeSelected,c=e.globalMode,l=ue.a.createElement(qp,{docURL:t,endpoint:n,includeQueryOptionsParams:!1}),u=null;return o&&(u=ue.a.createElement(zp,{databaseName:r,partitionKey:a,onPartitionKeySelected:i,onGlobalModeSelected:s,globalMode:c})),ue.a.createElement("div",{className:"right-header-wrapper flex-layout flex-row flex-body"},ue.a.createElement("div",{style:{flex:1,padding:"18px 6px 12px 12px"}},u),ue.a.createElement("div",{id:"right-header",className:"flex-body"}),l,ue.a.createElement("div",{id:"notification-center-btn"},ue.a.createElement(dt,null)))},Ey=function(e){var t=e.databaseName,n=e.fetchUrl,r=e.queryDocs;return ue.a.createElement("div",{id:"footer"},ue.a.createElement(Up,{databaseName:t,fetchUrl:n,queryDocs:r}))},_y=function(e){var t=e.crumbs,n=e.docURL,r=e.endpoint,o=e.databaseName,a=e.partitionKey,i=e.showPartitionKeySelector,s=e.onPartitionKeySelected,c=e.onGlobalModeSelected,l=e.globalMode;return ue.a.createElement("div",{className:"header-wrapper flex-layout flex-row"},ue.a.createElement("div",{className:"flex-body faux__breadcrumbs-mango-header"},ue.a.createElement(mt,{crumbs:t})),ue.a.createElement(gy,{docURL:n,endpoint:r,databaseName:o,showPartitionKeySelector:i,partitionKey:a,onPartitionKeySelected:s,onGlobalModeSelected:c,globalMode:l}))};_y.defaultProps={crumbs:[]};var vy=function(e){var t=e.edit,n=e.designDocs,r=e.explainPlan,o=e.databaseName,a=e.fetchUrl,i=e.queryDocs,s=e.docType,c=e.partitionKey,l=t?ue.a.createElement(py.MangoIndexEditorContainer,{description:ce.i18n.en_US["mango-descripton-index-editor"],databaseName:o,partitionKey:c}):ue.a.createElement(py.MangoQueryEditorContainer,{description:ce.i18n.en_US["mango-descripton"],editorTitle:ce.i18n.en_US["mango-title-editor"],additionalIndexesText:ce.i18n.en_US["mango-additional-indexes-heading"],databaseName:o,partitionKey:c}),u=ue.a.createElement(Op,{fetchUrl:a,designDocs:n,ddocsOnly:!1,databaseName:o,fetchAtStartup:!1,queryDocs:i,docType:s,partitionKey:c}),d=ue.a.createElement(Ey,{databaseName:o,fetchUrl:a,queryDocs:i});return r&&(u=ue.a.createElement(py.ExplainPage,{explainPlan:r}),d=null),ue.a.createElement("div",{id:"two-pane-content",className:"flex-layout flex-row flex-body"},ue.a.createElement("div",{id:"left-content",className:"flex-body"},l),ue.a.createElement("div",{id:"right-content",className:"flex-body flex-layout flex-col"},ue.a.createElement("div",{id:"dashboard-lower-content",className:"flex-body"},u),d))},Oy=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),hy(this,yy(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&by(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.database,n=e.edit,r=e.docURL,o=e.crumbs,a=e.designDocs,i=e.fetchUrl,s=e.databaseName,c=e.queryFindCode,l=e.partitionKey,u=e.onPartitionKeySelected,d=e.onGlobalModeSelected,p=e.globalMode,f=this.props.endpoint;if(this.props.explainPlan){var m=l?encodeURIComponent(l):"";f=ie.urls("mango","explain-apiurl",encodeURIComponent(t),m)}var h=function(e){return Fh(s,l,c,e)},y=fr.INDEX_RESULTS_DOC_TYPE.MANGO_QUERY;return n&&(h=function(e){return Uh(s,e)},y=fr.INDEX_RESULTS_DOC_TYPE.MANGO_INDEX),ue.a.createElement("div",{id:"dashboard",className:"two-pane flex-layout flex-col"},ue.a.createElement(_y,{docURL:r,endpoint:f,crumbs:o,databaseName:s,partitionKey:l,showPartitionKeySelector:!n,onPartitionKeySelected:u,onGlobalModeSelected:d,globalMode:p}),ue.a.createElement(vy,{edit:n,designDocs:a,explainPlan:this.props.explainPlan,databaseName:s,fetchUrl:i,queryDocs:h,docType:y,partitionKey:l}))}}])&&my(n.prototype,r),o&&my(n,o),t}(le.Component),Sy=Object(tt.b)((function(e,t){var n=e.mangoQuery;return{explainPlan:n.explainPlan,queryFindCode:n.queryFindCode,partitionKey:t.partitionKey,databaseName:t.databaseName,onPartitionKeySelected:t.onPartitionKeySelected,onGlobalModeSelected:t.onGlobalModeSelected,globalMode:t.globalMode}}))(Oy),Dy={MangoIndexEditorAndQueryEditor:ie.RouteObject.extend({selectedHeader:"Databases",hideApiBar:!0,hideNotificationCenter:!0,routes:{"database/:database/_partition/:partitionkey/_index":{route:"createIndex",roles:["fx_loggedIn"]},"database/:database/_index":{route:"createIndexNoPartition",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/_find":{route:"findUsingIndex",roles:["fx_loggedIn"]},"database/:database/_find":{route:"findUsingIndexNoPartition",roles:["fx_loggedIn"]}},initialize:function(e,t){var n=t[0];this.databaseName=n,this.database=new Ve.Model({id:n})},findUsingIndexNoPartition:function(e){return this.findUsingIndex(e,"")},findUsingIndex:function(e,t){var n=t?encodeURIComponent(t):"",r=ie.urls("allDocs","app",encodeURIComponent(this.databaseName),n),o=t?"/".concat(n):"",a="/"+encodeURIComponent(this.databaseName)+o+"/_find",i=[{name:e,link:r},{name:ce.i18n.en_US["mango-title-editor"]}],s=ie.urls("mango","query-apiurl",encodeURIComponent(this.databaseName),n);return ue.a.createElement(Sy,{database:e,crumbs:i,docURL:ie.constants.DOC_URLS.MANGO_SEARCH,endpoint:s,edit:!1,databaseName:this.databaseName,fetchUrl:a,partitionKey:t,onPartitionKeySelected:function(t){var n=ie.urls("mango","query-app",encodeURIComponent(e),encodeURIComponent(t));ie.navigate("#/"+n)},onGlobalModeSelected:function(){var t=ie.urls("mango","query-app",encodeURIComponent(e));ie.navigate("#/"+t)},globalMode:""===t})},createIndexNoPartition:function(e){return this.createIndex(e,"")},createIndex:function(e,t){var n=new Ue.AllDocs(null,{database:this.database,paging:{pageSize:500},params:{startkey:"_design/",endkey:"_design0",include_docs:!0,limit:500}}),r=t?encodeURIComponent(t):"",o=ie.urls("allDocs","app",encodeURIComponent(this.databaseName),r),a=ie.urls("mango","index-apiurl",encodeURIComponent(this.databaseName),r),i=[{name:e,link:o},{name:ce.i18n.en_US["mango-indexeditor-title"]}];return Je.fetchSelectedDatabaseInfo(e),ue.a.createElement(Sy,{showIncludeAllDocs:!1,crumbs:i,docURL:ie.constants.DOC_URLS.MANGO_INDEX,endpoint:a,edit:!0,designDocs:n,databaseName:this.databaseName,partitionKey:t})}})};Ue.RouteObjects=[mh.DocEditorRouteObject,tf,hh,Dy.MangoIndexEditorAndQueryEditor];var Ny=Ue;function wy(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function Ty(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wy(n,!0).forEach((function(t){Cy(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wy(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Cy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Iy={isLoading:!0,viewIndex:void 0};var Ay={INDEX_TEMPLATES:[{label:"Single field (json)",code:{index:{fields:["foo"]},name:"foo-json-index",type:"json"}},{label:"Multiple fields (json)",code:{index:{fields:["foo","bar"]},name:"foo-bar-json-index",type:"json"}}]};function Ry(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function Py(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ry(n,!0).forEach((function(t){Ly(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ry(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ly(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xy={selector:{_id:{$gt:null}}},ky=function(e){var t="string"==typeof e?JSON.parse(e):e;return{label:JSON.stringify(t),value:Pu(t),className:"mango-select-entry"}},jy=function(){return[ky(xy)]},Uy=function(){return Ay.INDEX_TEMPLATES.map((function(e){var t=ky(e.code);return t.label=e.label||t.label,t}))},My=function(){var e=ie.getExtensions("mango:indexTemplates")[0];return e?e.filter((function(e){return!!e.code})).map((function(e){var t=ky(e.code);return t.label=e.label||t.label,t})):Uy()},qy={queryFindCode:xy,queryIndexCode:{index:{fields:["_id"]},type:"json"},queryFindCodeChanged:!1,explainPlan:void 0,history:jy(),historyKey:"default",queryIndexTemplates:Uy()},Vy=function(e){var t=e+"_queryhistory",n=ce.utils.localStorageGet(t);return n||((n=ie.getExtensions("mango:queryHistory")[0])?n.filter((function(e){return!!e.code})).map((function(e){var t=ky(e.code);return t.label=e.label||t.label,t})):jy())},Fy=function(e,t,n){var r=e.historyKey,o=e.history.slice(),a=ky(t);a.label=n||a.label;var i=o.findIndex((function(e){return e.value===a.value}));return i>-1&&o.splice(i,1),o.unshift(a),o.length>5&&o.splice(5,1),ce.utils.localStorageSet(r,o),o},By=function(e,t,n){var r=e.queryIndexTemplates.slice(),o=ky(t);o.label=n||o.label,r.find((function(e){return e.value===o.value}))||r.push(o)};function Hy(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function Ky(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hy(n,!0).forEach((function(t){Gy(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hy(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Gy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Xy={selectorVisible:!1};function Wy(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function zy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wy(n,!0).forEach((function(t){Yy(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wy(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Yy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Qy={doc:null,isLoading:!0,cloneDocModalVisible:!1,deleteDocModalVisible:!1,uploadModalVisible:!1,numFilesUploaded:0,uploadErrorMessage:"",uploadInProgress:!1,uploadPercentage:0,docConflictCount:0};function Zy(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function Jy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zy(n,!0).forEach((function(t){$y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zy(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var eb={isLoaded:!1,filters:[],changes:[],filteredChanges:[],maxChangesListed:100,showingSubset:!1,lastSequenceNum:null};function tb(e){e.showingSubset=!1;var t=0;e.filteredChanges=e.changes.filter((function(n){if(t>=e.maxChangesListed)return e.showingSubset=!0,!1;var r=JSON.stringify(n),o=e.filters.every((function(e){return new RegExp(e,"i").test(r)}));return o&&t++,o}))}n(637);function nb(e){return e||(e=""),e}function rb(e){return e?"/_partition/".concat(e):""}ie.addReducers({indexResults:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ku,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case ou.INDEX_RESULTS_SET_STYLE:var r=Bu({},t.resultsStyle,{},n.resultsStyle);return e=r,ce.utils.localStorageSet("fauxton:results_style",e),Bu({},t,{resultsStyle:r});case ou.INDEX_RESULTS_REDUX_RESET_STATE:return Bu({},Ku,{noResultsWarning:t.noResultsWarning,selectedLayout:t.selectedLayout,selectedDocs:[],fetchParams:{limit:lu()+1,skip:0},pagination:Vu({},Ku.pagination,{perPage:t.pagination.perPage}),queryOptionsPanel:Vu({},Ku.queryOptionsPanel,t.queryOptionsPanel,{reduce:!1,groupLevel:"exact",showReduce:!1}),isLoading:!1,resultsStyle:t.resultsStyle});case ou.INDEX_RESULTS_REDUX_IS_LOADING:return Bu({},t,{isLoading:!0});case ou.INDEX_RESULTS_REDUX_PARTITION_PARAM_NOT_SUPPORTED:return Vu({},t,{noResultsWarning:"The selected index does not support partitions. Switch back to global mode."});case ou.INDEX_RESULTS_REDUX_PARTITION_PARAM_MANDATORY:return Vu({},t,{noResultsWarning:"The selected index requires a partition key. Use the selector at the top to enter a partition key."});case ou.INDEX_RESULTS_REDUX_NEW_SELECTED_DOCS:return Bu({},t,{selectedDocs:n.selectedDocs});case ou.INDEX_RESULTS_REDUX_NEW_RESULTS:var o=t.selectedLayout;return n.docType===fr.INDEX_RESULTS_DOC_TYPE.MANGO_QUERY&&t.selectedLayout===fr.LAYOUT_ORIENTATION.METADATA&&(o=fr.LAYOUT_ORIENTATION.TABLE),Bu({},t,{docs:n.docs,isLoading:!1,noResultsWarning:"",isEditable:!0,fetchParams:Vu({},t.fetchParams,n.params),pagination:Vu({},t.pagination,{canShowNext:n.canShowNext}),docType:n.docType,selectedLayout:o,executionStats:n.executionStats,warning:n.warning});case ou.INDEX_RESULTS_REDUX_CHANGE_LAYOUT:return Bu({},t,{selectedLayout:n.layout});case ou.INDEX_RESULTS_REDUX_TOGGLE_SHOW_ALL_COLUMNS:return Bu({},t,{tableView:Vu({},t.tableView,{showAllFieldsTableView:!t.tableView.showAllFieldsTableView,cachedFieldsTableView:t.tableView.selectedFieldsTableView})});case ou.INDEX_RESULTS_REDUX_CHANGE_TABLE_HEADER_ATTRIBUTE:return Bu({},t,{tableView:Vu({},t.tableView,{selectedFieldsTableView:n.selectedFieldsTableView})});case ou.INDEX_RESULTS_REDUX_SET_PER_PAGE:return ce.utils.localStorageSet("fauxton:perpageredux",n.perPage),Bu({},t,{pagination:Vu({},Ku.pagination,{perPage:n.perPage})});case ou.INDEX_RESULTS_REDUX_PAGINATE_NEXT:return Bu({},t,{pagination:Vu({},t.pagination,{pageStart:t.pagination.pageStart+t.pagination.perPage,currentPage:t.pagination.currentPage+1})});case ou.INDEX_RESULTS_REDUX_PAGINATE_PREVIOUS:return Bu({},t,{pagination:Vu({},t.pagination,{pageStart:t.pagination.pageStart-t.pagination.perPage,currentPage:t.pagination.currentPage-1})});case ou.INDEX_RESULTS_REDUX_NEW_QUERY_OPTIONS:return n.options.includeDocs&&n.options.reduce?n.options.reduce=!1:n.options.includeDocs&&t.queryOptionsPanel.reduce?n.options.reduce=!1:n.options.reduce&&t.queryOptionsPanel.includeDocs&&(n.options.includeDocs=!1),Bu({},t,{queryOptionsPanel:Vu({},t.queryOptionsPanel,n.options)});default:return t}},mangoQuery:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qy,t=arguments.length>1?arguments[1]:void 0,n=t.options;switch(t.type){case xh.MANGO_SET_DB:return Py({},e,{database:n.database,historyKey:n.database?n.database.id:"default"});case xh.MANGO_LOAD_QUERY_HISTORY:var r=Vy(n.databaseName);return Py({},e,{history:r,historyKey:n.databaseName+"_queryhistory",queryFindCode:JSON.parse(r[0].value)});case xh.MANGO_NEW_QUERY_FIND_CODE:return Py({},e,{queryFindCode:n.queryCode,history:Fy(e,n.queryCode)});case xh.MANGO_RESET:return Py({},e,{getLoadingIndexes:n.isLoading});case xh.MANGO_LOAD_INDEX_TEMPLATES:var o=My();return Py({},e,{queryIndexTemplates:o,queryIndexCode:JSON.parse(o[0].value)});case xh.MANGO_NEW_QUERY_CREATE_INDEX_TEMPLATE:return Py({},e,{queryIndexCode:n.code,queryIndexTemplates:By(e,n.code,n.label)});case xh.MANGO_SHOW_EXPLAIN_RESULTS:return Py({},e,{explainPlan:n.explainPlan});case xh.MANGO_HIDE_EXPLAIN_RESULTS:return Py({},e,{explainPlan:!1});default:return e}},sidebar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oc,t=arguments.length>1?arguments[1]:void 0,n=t.options;switch(t.type){case oi.SIDEBAR_EXPAND_SELECTED_ITEM:return function(e,t){var n=t.selectedNavItem,r=nc({},e);return n.designDocName&&(_.has(e.toggledSections,n.designDocName)||(r.toggledSections[n.designDocName]={visible:!0,indexGroups:{}}),r.toggledSections[n.designDocName].visible=!0,n.designDocSection&&(r.toggledSections[n.designDocName].indexGroups[n.designDocSection]=!0)),r}(e,n);case oi.SIDEBAR_NEW_OPTIONS:return function(e,t){var n=nc({},e,{database:t.database,designDocs:t.designDocs,designDocList:ac(t.designDocs),loading:!1});return t.selectedNavItem&&(n.selected={navItem:t.selectedNavItem,designDocName:"",designDocSection:"",indexName:""}),n}(e,n);case oi.SIDEBAR_TOGGLE_CONTENT:return function(e,t,n){var r=nc({},e);if(!e.toggledSections[t])return r.toggledSections[t]={visible:!0,indexGroups:{}},r;if(n){var o=e.toggledSections[t].indexGroups[n];return _.isUndefined(o)?r.toggledSections[t].indexGroups[n]=!0:r.toggledSections[t].indexGroups[n]=!o,r}return r.toggledSections[t].visible=!e.toggledSections[t].visible,r}(e,t.designDoc,t.indexGroup);case oi.SIDEBAR_FETCHING:return nc({},e,{loading:!0});case oi.SIDEBAR_SHOW_DELETE_INDEX_MODAL:return nc({},e,{deleteIndexModalIndexName:n.indexName,deleteIndexModalDesignDocName:n.designDocName,deleteIndexModalVisible:!0,deleteIndexModalText:ue.a.createElement("div",null,"Are you sure you want to delete the ",ue.a.createElement("code",null,n.indexName)," ",n.indexLabel,"?"),deleteIndexModalOnSubmit:n.onDelete});case oi.SIDEBAR_HIDE_DELETE_INDEX_MODAL:return nc({},e,{deleteIndexModalVisible:!1});case oi.SIDEBAR_SHOW_CLONE_INDEX_MODAL:return nc({},e,{cloneIndexModalIndexLabel:n.indexLabel,cloneIndexModalTitle:n.cloneIndexModalTitle,cloneIndexModalSourceIndexName:n.sourceIndexName,cloneIndexModalSourceDesignDocName:n.sourceDesignDocName,cloneIndexModalSelectedDesignDoc:"_design/"+n.sourceDesignDocName,cloneIndexDesignDocProp:"",cloneIndexModalVisible:!0,cloneIndexModalOnSubmit:n.onSubmit});case oi.SIDEBAR_HIDE_CLONE_INDEX_MODAL:return nc({},e,{cloneIndexModalVisible:!1});case oi.SIDEBAR_CLONE_MODAL_DESIGN_DOC_CHANGE:return nc({},e,{cloneIndexModalSelectedDesignDoc:n.value});case oi.SIDEBAR_CLONE_MODAL_DESIGN_DOC_NEW_NAME_UPDATED:return nc({},e,{cloneIndexModalNewDesignDocName:n.value});case oi.SIDEBAR_CLONE_MODAL_DESIGN_DOC_NEW_PARTITIONED_UPDATED:return nc({},e,{cloneIndexModalNewDesignDocPartitioned:n.value});case oi.SIDEBAR_CLONE_MODAL_UPDATE_INDEX_NAME:return nc({},e,{cloneIndexModalNewIndexName:n.value});case oi.SIDEBAR_UPDATED_DESIGN_DOCS:return nc({},e,{designDocs:n.designDocs,designDocList:ac(n.designDocs),loading:!1});default:return e}},revisionBrowser:Wm,partitionKey:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xy;switch((arguments.length>1?arguments[1]:void 0).type){case Xp.PARTITON_KEY_SHOW_SELECTOR:return Ky({},e,{selectorVisible:!0});case Xp.PARTITON_KEY_HIDE_SELECTOR:return Ky({},e,{selectorVisible:!1});default:return e}},docEditor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qy,t=arguments.length>1?arguments[1]:void 0,n=t.options;switch(t.type){case nf.RESET_DOC:return zy({},Qy);case nf.DOC_LOADED:var r=n.doc.get("_conflicts")?n.doc.get("_conflicts").length:0;return n.doc.unset("_conflicts"),zy({},e,{isLoading:!1,doc:n.doc,docConflictCount:r});case nf.SHOW_CLONE_DOC_MODAL:return zy({},e,{cloneDocModalVisible:!0});case nf.HIDE_CLONE_DOC_MODAL:return zy({},e,{cloneDocModalVisible:!1});case nf.SHOW_DELETE_DOC_CONFIRMATION_MODAL:return zy({},e,{deleteDocModalVisible:!0});case nf.HIDE_DELETE_DOC_CONFIRMATION_MODAL:return zy({},e,{deleteDocModalVisible:!1});case nf.SHOW_UPLOAD_MODAL:return zy({},e,{uploadModalVisible:!0});case nf.HIDE_UPLOAD_MODAL:return zy({},e,{uploadModalVisible:!1});case nf.FILE_UPLOAD_SUCCESS:return zy({},e,{numFilesUploaded:e.numFilesUploaded+1});case nf.FILE_UPLOAD_ERROR:return zy({},e,{uploadInProgress:!1,uploadPercentage:0,uploadErrorMessage:n.error});case nf.RESET_UPLOAD_MODAL:return zy({},e,{uploadInProgress:!1,uploadPercentage:0,uploadErrorMessage:""});case nf.START_FILE_UPLOAD:return zy({},e,{uploadInProgress:!0,uploadPercentage:0,fileUploadErrorMsg:""});case nf.SET_FILE_UPLOAD_PERCENTAGE:return zy({},e,{uploadPercentage:n.percent});default:return e}},changes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:eb,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Gc.UPDATE_CHANGES:return e.lastSequenceNum!==t.seqNum?function(e,t,n){var r=Jy({},e,{lastSequenceNum:t,isLoaded:!0}),o=0===r.changes.length;r.changes.forEach((function(e){e.isNew=!1}));var a=n.map((function(e){var t=_n.getSeqNum(e.seq);return{id:e.id,seq:t,deleted:!!_.has(e,"deleted")&&e.deleted,changes:e.changes,doc:e.doc,isNew:!o}}));return r.changes=a.concat(r.changes),tb(r),r}(e,t.seqNum,t.changes):e;case Gc.ADD_CHANGES_FILTER_ITEM:return function(e,t){var n=e.filters.slice();n.push(t);var r=Jy({},e,{filters:n});return tb(r),r}(e,t.filter);case Gc.REMOVE_CHANGES_FILTER_ITEM:return function(e,t){var n=e.filters.slice(),r=n.indexOf(t);r>=0&&n.splice(r,1);var o=Jy({},e,{filters:n});return tb(o),o}(e,t.filter);default:return e}},designDocInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Iy,t=arguments.length>1?arguments[1]:void 0,n=t.options;switch(t.type){case _l.DESIGN_FETCHING:return Ty({},e,{isLoading:!0});case _l.DESIGN_DOC_MONITOR:return Ty({},e,{isLoading:!1,viewIndex:n.designDocInfo.get("view_index")});case _l.DESIGN_DOC_REFRESH:return Ty({},e,{viewIndex:n.designDocInfo.get("view_index")});default:return e}},indexEditor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qi,t=arguments.length>1?arguments[1]:void 0,n=t.options;switch(t.type){case ki.CLEAR_INDEX:return Ki({},Qi);case ki.EDIT_INDEX:case ki.EDIT_NEW_INDEX:return Zi(e,n);case ki.VIEW_NAME_CHANGE:return Ki({},e,{viewName:t.name});case ki.SELECT_REDUCE_CHANGE:var r=t.reduceSelectedOption;return"NONE"===r&&(r=""),"CUSTOM"===r&&(r=Wi),Ki({},e,{view:Ki({},e.view,{reduce:r})});case ki.DESIGN_DOC_CHANGE:return Ki({},e,{designDocId:n.value});case ki.VIEW_SAVED:case ki.VIEW_CREATED:return e;case ki.VIEW_ADD_DESIGN_DOC:return Ki({},e,{designDocId:t.designDoc._id});case ki.VIEW_UPDATE_MAP_CODE:return Ki({},e,{view:Ki({},e.view,{map:t.code})});case ki.VIEW_UPDATE_REDUCE_CODE:return Ki({},e,{view:Ki({},e.view,{reduce:t.code})});case ki.DESIGN_DOC_NEW_NAME_UPDATED:return Ki({},e,{newDesignDocName:n.value});case ki.DESIGN_DOC_NEW_PARTITIONED_UPDATED:return Ki({},e,{newDesignDocPartitioned:n.value});default:return e}}}),ie.registerUrls("allDocs",{server:function(e,t){return I.getServerUrl("/"+e+"/_all_docs"+nb(t))},app:function(e,t,n){return"database/"+e+rb(t)+"/_all_docs"+nb(n)},apiurl:function(e,t){return I.getApiUrl("/"+e+"/_all_docs"+nb(t))}}),ie.registerUrls("partitioned_allDocs",{app:function(e,t,n){return"database/"+e+"/_partition/"+t+"/_all_docs"+nb(n)},apiurl:function(e,t,n){return I.getApiUrl("/"+e+"/_partition/"+t+"/_all_docs"+nb(n))},server:function(e,t,n){return I.getServerUrl("/"+e+"/_partition/"+t+"/_all_docs"+nb(n))}}),ie.registerUrls("allDocsSanitized",{server:function(e,t){return e=encodeURIComponent(e),I.getServerUrl("/"+e+"/_all_docs"+nb(t))},app:function(e,t){return"database/"+(e=encodeURIComponent(e))+"/_all_docs"+nb(t)},apiurl:function(e,t){return e=encodeURIComponent(e),I.getApiUrl("/"+e+"/_all_docs"+nb(t))}}),ie.registerUrls("bulk_docs",{server:function(e,t){return I.getServerUrl("/"+encodeURIComponent(e)+"/_bulk_docs"+nb(t))},app:function(e,t){return"database/"+e+"/_bulk_docs"+nb(t)},apiurl:function(e,t){return I.getApiUrl("/"+e+"/_bulk_docs"+nb(t))}}),ie.registerUrls("revision-browser",{app:function(e,t){return"database/"+e+"/"+t+"/conflicts"}}),ie.registerUrls("designDocs",{server:function(e,t){return I.getServerUrl("/"+e+"/"+t+"/_info")},app:function(e,t,n){return"database/"+e+rb(t)+"/_design/"+ce.utils.safeURLName(n)+"/_info"},apiurl:function(e,t){return I.getApiUrl("/"+e+"/"+t+"/_info")}}),ie.registerUrls("view",{server:function(e,t,n,r){return I.getServerUrl("/"+e+rb(t)+"/_design/"+n+"/_view/"+r)},app:function(e,t){return"database/"+e+"/_design/"+t+"/_view/"},apiurl:function(e,t,n,r){return I.getApiUrl("/"+e+rb(t)+"/_design/"+n+"/_view/"+r)},edit:function(e,t,n,r){return"database/"+e+rb(t)+"/_design/"+n+"/_view/"+r+"/edit"},showView:function(e,t,n,r){return"/database/"+e+rb(t)+"/"+n+"/_view/"+r},fragment:function(e,t,n){return"database/"+e+t+"/_view/"+n}}),ie.registerUrls("partitioned_view",{server:function(e,t,n,r){return I.getServerUrl("/"+e+"/_partition/"+t+"/_design/"+n+"/_view/"+r)},app:function(e,t,n){return"database/"+e+"/_partition/"+t+"/_design/"+n+"/_view/"},apiurl:function(e,t,n,r){return I.getApiUrl("/"+e+"/_partition/"+t+"/_design/"+n+"/_view/"+r)}}),ie.registerUrls("document",{server:function(e,t,n){return _.isUndefined(n)&&(n=""),I.getServerUrl("/"+e+"/"+t+n)},attachment:function(e,t,n,r){return _.isUndefined(r)&&(r=""),I.getServerUrl("/"+e+"/"+t+"/"+n+r)},app:function(e,t){return"/database/"+e+"/"+t},apiurl:function(e,t){return t?I.getApiUrl("/"+e+"/"+t):I.getApiUrl("/"+e)},"web-index":function(e,t){return"/database/"+e+"/"+t}}),ie.registerUrls("new",{newDocument:function(e){return"/database/"+e+"/_new"},newView:function(e,t){return"/database/"+e+rb(t)+"/new_view"},addView:function(e,t,n){return"/database/"+e+rb(t)+"/new_view/"+n}}),ie.registerUrls("base",{server:function(e){return I.getServerUrl("/"+e+"/")},app:function(e){return"/database/"+e+"/"}}),ie.registerUrls("mango",{"index-server":function(e,t){return t||(t=""),I.getServerUrl("/"+e+"/_index"+t)},"index-apiurl":function(e,t,n){return n||(n=""),I.getApiUrl("/"+e+rb(t)+"/_index"+n)},"index-app":function(e,t,n){return n||(n=""),"database/"+e+rb(t)+"/_index"+n},"index-server-bulk-delete":function(e){return I.getServerUrl("/"+e+"/_index/_bulk_delete")},"query-server":function(e,t,n){return n||(n=""),I.getServerUrl("/"+e+rb(t)+"/_find"+n)},"query-apiurl":function(e,t,n){return n||(n=""),I.getApiUrl("/"+e+rb(t)+"/_find"+n)},"query-app":function(e,t,n){return n||(n=""),"database/"+e+rb(t)+"/_find"+n},"explain-server":function(e,t){return I.getServerUrl("/"+e+rb(t)+"/_explain")},"explain-apiurl":function(e,t){return I.getApiUrl("/"+e+rb(t)+"/_explain")}});var ob=Ny,ab=function(){return v(I.getServerUrl("/_membership")).then((function(e){if(!e.all_nodes){var t=e.reason?e.reason:"";throw new Error("Failed to load list of nodes."+t)}var n=e.all_nodes.reduce((function(t,n){var r=-1!==e.cluster_nodes.indexOf(n);return t.push({node:n,isInCluster:r}),t}),[]);return e.nodes_mapped=n,e}))},ib="CLUSTER_FETCH_NODES",sb={fetchNodes:function(){var e=this;ab().then((function(t){e.updateNodes({nodes:t.nodes_mapped})})).catch((function(e){ie.addNotification({type:"error",msg:e.message,clear:!0})}))},updateNodes:function(e){ie.reduxDispatch({type:ib,options:e})},navigateToNodeBasedOnNodeCount:function(e){ab().then((function(t){var n=t.all_nodes;return 1===n.length?ie.navigate(e+n[0]):ie.navigate("/cluster/disabled",{trigger:!0})})).catch((function(e){ie.addNotification({type:"error",msg:e.message,clear:!0})}))}};function cb(e){return(cb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ub(e){return(ub=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function db(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pb(e,t){return(pb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var fb=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,o=(e=ub(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==cb(o)&&"function"!=typeof o?db(r):o,function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(db(n),"getNodeType",(function(){var e=n.props.clusterState;return"cluster_finished"===e?"clustered":"single_node_enabled"===e?"single":"unknown state"})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pb(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.getNodeType();return ue.a.createElement("div",{className:"setup-screen"},ce.i18n.en_US["couchdb-productname"]," is configured for production usage as a ",e," node!",ue.a.createElement("br",null),ue.a.createElement("br",null),"Do you want to ",ue.a.createElement("a",{href:"#replication"},"replicate data"),"?")}}])&&lb(n.prototype,r),o&&lb(n,o),t}(ue.a.Component);fb.propTypes={clusterState:et.a.string};var mb="SETUP_SET_CLUSTERSTATUS",hb="SETUP_SET_USERNAME",yb="SETUP_SET_PASSWORD",bb="SETUP_BIND_ADDRESS_FOR_SINGLE_NODE",gb="SETUP_PORT_FOR_SINGLE_NODE",Eb="SETUP_PORT_ADDITIONAL_NODE",_b="SETUP_BIND_ADDRESS_ADDITIONAL_NODE",vb="SETUP_REMOTE_ADDRESS_ADDITIONAL_NODE",Ob="SETUP_RESET_ADDITIONAL_NODE",Sb="SETUP_ADD_NODE_TO_LIST",Db="SETUP_NODE_COUNT";function Nb(){return(Nb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function wb(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function Tb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wb(n,!0).forEach((function(t){Cb(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wb(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Cb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ib={clusterState:"",username:"",password:"",setupNode:{bindAddress:"0.0.0.0",port:5984,nodeCount:3},nodeList:[],additionalNode:{bindAddress:"0.0.0.0",port:5984,remoteAddress:"127.0.0.1"}};var Ab=function(e){return Tb({},e,{setupNode:Tb({},e.setupNode),additionalNode:Tb({},e.additionalNode)})},Rb=function(e,t,n){var r=Ab(e);return s.a.isNaN(n)?r:s.a.set(r,t,n)},Pb=function(e,t,n){var r=Ab(e);return s.a.set(r,t,n)},Lb=function(e){return e.additionalNode=Nb({},Ib.additionalNode),e},xb=function(e){return e.clusterState},kb=function(e){return e.nodeList},jb=function(){return ie.session.isAdminParty()},Ub=function(e){return e.username},Mb=function(e){return e.password},qb=function(e){return e.setupNode},Vb=function(e){return e.setupNode.bindAddress},Fb=Object(tt.b)((function(e){var t=e.setup;return{clusterState:xb(t)}}))(fb);function Bb(e){return(Bb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kb(e){return(Kb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xb(e,t){return(Xb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var zb,Yb=Zo.ConfirmButton,Qb=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,n=!(o=(e=Kb(t)).call.apply(e,[this].concat(i)))||"object"!==Bb(o)&&"function"!=typeof o?Gb(r):o,Wb(Gb(n),"redirectToSingleNodeSetup",(function(e){e.preventDefault(),ie.navigate("#setup/singlenode")})),Wb(Gb(n),"redirectToMultiNodeSetup",(function(e){e.preventDefault(),ie.navigate("#setup/multinode")})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xb(e,t)}(t,e),n=t,(r=[{key:"UNSAFE_componentWillMount",value:function(){this.props.getClusterState()}},{key:"render",value:function(){return"cluster_finished"===this.props.clusterState||"single_node_enabled"===this.props.clusterState?ue.a.createElement(fb,this.props):ue.a.createElement("div",{className:"setup-screen"},ue.a.createElement("h2",null,"Welcome to ",ce.i18n.en_US["couchdb-productname"],"!"),ue.a.createElement("p",null,"This wizard should be run directly on the node, rather than through a load-balancer."),ue.a.createElement("p",null,"You can configure a single node, or a multi-node CouchDB installation."),ue.a.createElement("div",null,ue.a.createElement(Yb,{onClick:this.redirectToMultiNodeSetup,showIcon:!1,text:"Configure a Cluster"}),ue.a.createElement(Yb,{onClick:this.redirectToSingleNodeSetup,showIcon:!1,id:"setup-btn-no-thanks",text:"Configure a Single Node"})))}}])&&Hb(n.prototype,r),o&&Hb(n,o),t}(ue.a.Component);function Zb(e){return s.a.isEmpty(e.username)?"Admin name is required":s.a.isEmpty(e.password)?"Admin password is required":e.bind_address&&"127.0.0.1"===e.bind_address&&!e.singlenode?"Bind address can not be 127.0.0.1":e.port&&s.a.isNaN(+e.port)?"Bind port must be a number":e.nodeCount&&s.a.isNaN(+e.nodeCount)?"Node count must be a number":!!(0===e.nodeCount||e.nodeCount&&e.nodeCount<1)&&"Node count must be >= 1"}Qb.propTypes={clusterState:et.a.string};var Jb={createAdmin:function(e){var t=e.name,n=e.password,r=e.node,o=I.getServerUrl("/_node/".concat(r,"/_config/admins/").concat(t));return D(o,n)},login:function(e){var t=I.getServerUrl("/_session");return w(t,ce.utils.queryParams(e))},logout:function(){zb=null;var e=I.getServerUrl("/_session");return T(e,ce.utils.queryParams({username:"_",password:"_"}))},getSession:function(){if(zb)return zb;var e=I.getServerUrl("/_session"),t=v(e).then((function(e){return e.userCtx.name&&(zb=t),e.userCtx}));return t}};function $b(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function eg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$b(n,!0).forEach((function(t){tg(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$b(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ng(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function rg(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ng(a,r,o,i,s,"next",e)}function s(e){ng(a,r,o,i,s,"throw",e)}i(void 0)}))}}var og=function(e,t){var n=t?" Error:"+t:"";ie.addNotification({msg:e+n,type:"error",fade:!1,clear:!0})},ag=function(e){return{type:hb,options:{value:e}}},ig=function(e){return{type:yb,options:{value:e}}},sg=function(e){return{type:gb,options:{value:e}}},cg=function(e){return{type:bb,options:{value:e}}},lg=Object(tt.b)((function(e){var t=e.setup;return{clusterState:xb(t)}}),(function(e){return{getClusterState:function(){e(function(){var e=rg(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ie.urls("cluster_setup","server"),e.next=3,v(n);case 3:r=e.sent,t({type:mb,options:{state:r.state}});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}}))(Qb);function ug(e){return(ug="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pg(e,t){return!t||"object"!==ug(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fg(e){return(fg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mg(e,t){return(mg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var hg=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),pg(this,fg(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mg(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e="Specify your Admin credentials";return this.props.isAdminParty&&(e="Create Admin credentials."),ue.a.createElement("div",{className:"setup-creds"},ue.a.createElement("div",null,ue.a.createElement("p",null,e)),ue.a.createElement("input",{className:"setup-username",onChange:this.props.onAlterUsername,placeholder:"Username",value:this.props.username,type:"text"}),ue.a.createElement("input",{className:"setup-password",onChange:this.props.onAlterPassword,placeholder:"Password",value:this.props.password,type:"password"}))}}])&&dg(n.prototype,r),o&&dg(n,o),t}(ue.a.Component);function yg(e){return(yg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gg(e){return(gg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Eg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _g(e,t){return(_g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}hg.propTypes={onAlterUsername:et.a.func.isRequired,onAlterPassword:et.a.func.isRequired,username:et.a.string.isRequired,password:et.a.string.isRequired,isAdminParty:et.a.bool};var Og=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,o=(e=gg(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==yg(o)&&"function"!=typeof o?Eg(r):o,vg(Eg(n),"handleIpChange",(function(e){n.props.onAlterBindAddress(e)})),vg(Eg(n),"handlePortChange",(function(e){n.props.onAlterPort(e)})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_g(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return ue.a.createElement("div",{className:"setup-opt-settings"},ue.a.createElement("p",null,"Bind address the node will listen on"),ue.a.createElement("input",{className:"setup-input-ip",value:this.props.ip,onChange:this.handleIpChange,placeholder:"IP Address",type:"text"}),ue.a.createElement("div",{className:"setup-port"},ue.a.createElement("p",null,"Port that the node will use"),ue.a.createElement("input",{className:"setup-input-port",value:this.props.port,onChange:this.handlePortChange,type:"text"})))}}])&&bg(n.prototype,r),o&&bg(n,o),t}(ue.a.Component);function Sg(e){return(Sg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dg(){return(Dg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ng(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wg(e){return(wg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cg(e,t){return(Cg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ig(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Og.propTypes={ip:et.a.string.isRequired,port:et.a.number.isRequired,onAlterBindAddress:et.a.func.isRequired,onAlterPort:et.a.func.isRequired};var Ag=Zo.ConfirmButton,Rg=function(e){function t(){var e,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=wg(t).call(this),e=!r||"object"!==Sg(r)&&"function"!=typeof r?Tg(n):r,Ig(Tg(e),"onChangeUsername",(function(t){return e.props.alterUsername(t.target.value)})),Ig(Tg(e),"onChangePassword",(function(t){return e.props.alterPassword(t.target.value)})),Ig(Tg(e),"onChangeBindAddress",(function(t){return e.props.alterBindAddress(t.target.value)})),Ig(Tg(e),"onChangePort",(function(t){return e.props.alterPort(t.target.value)})),Ig(Tg(e),"finishSingleNode",(function(t){t.preventDefault();var n=e.props,r={username:n.username,password:n.password},o={port:n.port,bindAddress:n.bindAddress};e.props.setupSingleNode(r,o)})),e.finishSingleNode=e.finishSingleNode.bind(Tg(e)),e.onChangeUsername=e.onChangeUsername.bind(Tg(e)),e.onChangePassword=e.onChangePassword.bind(Tg(e)),e.onChangeBindAddress=e.onChangeBindAddress.bind(Tg(e)),e.onChangePort=e.onChangePort.bind(Tg(e)),e}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cg(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return ue.a.createElement("div",{className:"setup-nodes"},ue.a.createElement("div",{className:"setup-setupnode-section"},ue.a.createElement(hg,Dg({},this.props,{onAlterUsername:this.onChangeUsername,onAlterPassword:this.onChangePassword})),ue.a.createElement(Og,Dg({},this.props,{onAlterPort:this.onChangePort,onAlterBindAddress:this.onChangeBindAddress,ip:this.props.bindAddress,port:this.props.port})),ue.a.createElement(Ag,Dg({},this.props,{onClick:this.finishSingleNode,text:"Configure Node"}))))}}])&&Ng(n.prototype,r),o&&Ng(n,o),t}(ue.a.Component);Rg.propTypes={username:et.a.string.isRequired,password:et.a.string.isRequired,port:et.a.number.isRequired,bindAddress:et.a.string.isRequired,isAdminParty:et.a.bool.isRequired};var Pg=Object(tt.b)((function(e){var t,n=e.setup;return{nodeList:kb(n),isAdminParty:jb(),setupNode:qb(n),username:Ub(n),password:Mb(n),port:(t=n,t.setupNode.port),bindAddress:Vb(n)}}),(function(e){return{alterUsername:function(t){e(ag(t))},alterPassword:function(t){e(ig(t))},alterBindAddress:function(t){e(cg(t))},alterPort:function(t){e(sg(t))},setupSingleNode:function(t,n){e(function(e,t){return rg(regeneratorRuntime.mark((function n(){var r,o,a,i,s,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=ie.urls("cluster_setup","server"),o={action:"enable_single_node",username:e.username,password:e.password,bind_address:t.bindAddress,port:t.port,singlenode:!0},!(a=Zb(o))){n.next=5;break}return n.abrupt("return",og(a));case 5:return n.prev=5,n.next=8,S(r,o,{raw:!0});case 8:if((i=n.sent).ok){n.next=15;break}return n.next=12,i.json();case 12:return s=n.sent,c=s.reason?s.reason:s.error,n.abrupt("return",og(c));case 15:return n.next=17,Jb.login({name:e.username,password:e.password});case 17:ie.addNotification({msg:"Single node setup successful.",type:"success",fade:!1,clear:!0}),ie.navigate("#setup/finish"),n.next=24;break;case 21:n.prev=21,n.t0=n.catch(5),og("The cluster has not been setuped successfully.",n.t0);case 24:case"end":return n.stop()}}),n,null,[[5,21]])})))}(t,n))}}}))(Rg);function Lg(e){return(Lg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kg(e){return(kg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ug(e,t){return(Ug=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Mg=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,o=(e=kg(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==Lg(o)&&"function"!=typeof o?jg(r):o,function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(jg(n),"handleNodeCountChange",(function(e){n.props.onAlterNodeCount(e)})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ug(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return ue.a.createElement("div",{className:"setup-node-count"},ue.a.createElement("p",null,"Number of nodes to be added to the cluster (including this one)"),ue.a.createElement("input",{className:"setup-input-nodecount",value:this.props.nodeCount,onChange:this.handleNodeCountChange,placeholder:"Value of cluster n",type:"text"}))}}])&&xg(n.prototype,r),o&&xg(n,o),t}(ue.a.Component);function qg(e){return(qg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vg(){return(Vg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Fg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bg(e){return(Bg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kg(e,t){return(Kg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Gg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Mg.propTypes={onAlterNodeCount:et.a.func.isRequired,nodeCount:et.a.number.isRequired};var Xg=Zo.ConfirmButton,Wg=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,o=(e=Bg(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==qg(o)&&"function"!=typeof o?Hg(r):o,Gg(Hg(n),"getNodeList",(function(){return n.props.nodeList.map((function(e,t){return ue.a.createElement("div",{key:t,className:"node-item"},e.remoteAddress,":",e.port)}))})),Gg(Hg(n),"_addNode",(function(){var e=n.props,t=e.username,r=e.password,o=e.setupNode,a=e.additionalNode;n.props.addNode(n.isAdminParty,{username:t,password:r},o,a)})),Gg(Hg(n),"_alterPortAdditionalNode",(function(e){n.props.alterPortAdditionalNode(e.target.value)})),Gg(Hg(n),"_alterBindAddressAdditionalNode",(function(e){n.props.alterBindAddressAdditionalNode(e.target.value)})),Gg(Hg(n),"_alterRemoteAddressAdditionalNode",(function(e){n.props.alterRemoteAddressAdditionalNode(e.target.value)})),Gg(Hg(n),"_alterUsername",(function(e){n.props.alterUsername(e.target.value)})),Gg(Hg(n),"_alterPassword",(function(e){n.props.alterPassword(e.target.value)})),Gg(Hg(n),"_alterBindAddressSetupNode",(function(e){n.props.alterBindAddressForSetupNode(e.target.value)})),Gg(Hg(n),"_alterPortSetupNode",(function(e){n.props.alterPortForSetupNode(e.target.value)})),Gg(Hg(n),"_alterNodeCount",(function(e){n.props.alterNodeCount(e.target.value)})),Gg(Hg(n),"_finishClusterSetup",(function(){n.props.finishClusterSetup("CouchDB Cluster set up!")})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kg(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.isAdminParty=jb()}},{key:"render",value:function(){var e=this.props,t=e.setupNode,n=e.additionalNode;return ue.a.createElement("div",{className:"setup-nodes"},"Setup your initial base-node, afterwards add the other nodes that you want to add",ue.a.createElement("div",{className:"setup-setupnode-section"},ue.a.createElement(hg,Vg({},this.props,{onAlterUsername:this._alterUsername,onAlterPassword:this._alterPassword})),ue.a.createElement(Og,Vg({},this.props,{onAlterPort:this._alterPortSetupNode,onAlterBindAddress:this._alterBindAddressSetupNode,ip:t.bindAddress,port:t.port})),ue.a.createElement(Mg,Vg({},this.props,{onAlterNodeCount:this._alterNodeCount,nodeCount:t.nodeCount}))),ue.a.createElement("hr",null),ue.a.createElement("div",{className:"setup-add-nodes-section"},ue.a.createElement("h2",null,"Add Nodes to the Cluster"),ue.a.createElement("p",null,"Remote host"),ue.a.createElement("input",{value:n.remoteAddress,onChange:this._alterRemoteAddressAdditionalNode,className:"input-remote-node",type:"text",placeholder:"IP Address"}),ue.a.createElement(Og,Vg({},this.props,{onAlterPort:this._alterPortAdditionalNode,onAlterBindAddress:this._alterBindAddressAdditionalNode,ip:n.bindAddress,port:n.port})),ue.a.createElement("div",{className:"setup-add-button"},ue.a.createElement(Xg,{onClick:this._addNode,showIcon:!1,id:"setup-btn-no-thanks",text:"Add Node"}))),ue.a.createElement("div",{className:"setup-nodelist"},this.getNodeList()),ue.a.createElement("div",{className:"centered setup-finish"},ue.a.createElement(Xg,{onClick:this._finishClusterSetup,showIcon:!1,text:"Configure Cluster"})))}}])&&Fg(n.prototype,r),o&&Fg(n,o),t}(ue.a.Component);Wg.propTypes={username:et.a.string.isRequired,password:et.a.string.isRequired,nodeList:et.a.array.isRequired,isAdminParty:et.a.bool.isRequired,setupNode:et.a.shape({bindAddress:et.a.string.isRequired,port:et.a.number.isRequired,nodeCount:et.a.number.isRequired}).isRequired,additionalNode:et.a.shape({bindAddress:et.a.string.isRequired,port:et.a.number.isRequired,remoteAddress:et.a.string.isRequired}).isRequired};var zg=Object(tt.b)((function(e){var t,n=e.setup;return{nodeList:kb(n),isAdminParty:jb(),setupNode:qb(n),username:Ub(n),password:Mb(n),additionalNode:(t=n,t.additionalNode)}}),(function(e){return{addNode:function(t,n,r,o){e(function(e,t,n,r){return function(){var o=rg(regeneratorRuntime.mark((function o(a){var i,s,c,l,u,d;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(i=ie.urls("cluster_setup","server"),s={action:"enable_cluster",username:t.username,password:t.password,bind_address:n.bindAddress,port:n.port,node_count:n.nodeCount,singlenode:!1},!(c=Zb(eg({username:t.username,password:t.password},n)))){o.next=5;break}return o.abrupt("return",og(c));case 5:if(l={action:"enable_cluster",username:t.username,password:t.password,bind_address:r.bindAddress,port:r.port,node_count:n.nodeCount,remote_node:r.remoteAddress,remote_current_user:t.username,remote_current_password:t.password},e&&(delete l.remote_current_user,delete l.remote_current_password),!(u=Zb(l))){o.next=10;break}return o.abrupt("return",og(u));case 10:return d=function(){var e=rg(regeneratorRuntime.mark((function e(){var n,o,s,c,u,d,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={action:"add_node",username:t.username,password:t.password,host:r.remoteAddress,port:r.port,singlenode:!1},e.next=3,S(i,l,{raw:!0});case 3:if((o=e.sent).ok){e.next=10;break}return e.next=7,o.json();case 7:return s=e.sent,c=s.reason?s.reason:s.error,e.abrupt("return",og(c));case 10:return e.next=12,S(i,n,{raw:!0});case 12:if((u=e.sent).ok){e.next=19;break}return e.next=16,u.json();case 16:return d=e.sent,p=d.reason?d.reason:d.error,e.abrupt("return",og(p));case 19:a({type:Sb,options:{value:{port:r.port,remoteAddress:r.remoteAddress}}}),ie.addNotification({msg:"Added node",type:"success",fade:!1,clear:!0});case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o.prev=11,o.next=14,S(i,s,{raw:!0});case 14:return o.next=16,Jb.login({name:t.username,password:t.password});case 16:return o.next=18,d();case 18:o.next=23;break;case 20:o.prev=20,o.t0=o.catch(11),og("An error occured while adding the node.",o.t0);case 23:case"end":return o.stop()}}),o,null,[[11,20]])})));return function(e){return o.apply(this,arguments)}}()}(t,n,r,o))},alterPortAdditionalNode:function(t){e(function(e){return{type:Eb,options:{value:e}}}(t))},alterBindAddressAdditionalNode:function(t){e(function(e){return{type:_b,options:{value:e}}}(t))},alterRemoteAddressAdditionalNode:function(t){e(function(e){return{type:vb,options:{value:e}}}(t))},alterUsername:function(t){e(ag(t))},alterPassword:function(t){e(ig(t))},alterBindAddressForSetupNode:function(t){e(cg(t))},alterPortForSetupNode:function(t){e(sg(t))},finishClusterSetup:function(t){var n;e((n=t,rg(regeneratorRuntime.mark((function e(){var t,r,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ie.urls("cluster_setup","server"),r={action:"finish_cluster"},e.prev=2,e.next=5,S(t,r,{raw:!0});case 5:if(!(o=e.sent).ok){e.next=11;break}ie.addNotification({msg:n,type:"success",fade:!1,clear:!0}),ie.navigate("#setup/finish"),e.next=15;break;case 11:return e.next=13,o.json();case 13:a=e.sent,og("The cluster is already finished",a.reason);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),og("There was an error. Please check your setup and try again.",e.t0);case 20:case"end":return e.stop()}}),e,null,[[2,17]])})))))},alterNodeCount:function(t){e(function(e){return{type:Db,options:{value:e}}}(t))}}}))(Wg),Yg={RouteObjects:[ie.RouteObject.extend({roles:["_admin"],selectedHeader:"Setup",routes:{setup:"setupInitView","setup/finish":"finishView","setup/singlenode":"setupSingleNode","setup/multinode":"setupMultiNode"},setupInitView:function(){var e=ie.urls("cluster_setup","apiurl");return sb.fetchNodes(),ue.a.createElement(Ot,{component:ue.a.createElement(lg,null),endpoint:e,docURL:ie.constants.DOC_URLS.SETUP,crumbs:[{name:"Setup "+ce.i18n.en_US["couchdb-productname"]}]})},setupSingleNode:function(){var e=ie.urls("cluster_setup","apiurl");return sb.fetchNodes(),ue.a.createElement(Ot,{component:ue.a.createElement(Pg,null),endpoint:e,docURL:ie.constants.DOC_URLS.SETUP,crumbs:[{name:"Setup "+ce.i18n.en_US["couchdb-productname"]}]})},setupMultiNode:function(){var e=ie.urls("cluster_setup","apiurl");return sb.fetchNodes(),ue.a.createElement(Ot,{component:ue.a.createElement(zg,null),endpoint:e,docURL:ie.constants.DOC_URLS.SETUP,crumbs:[{name:"Setup "+ce.i18n.en_US["couchdb-productname"]}]})},finishView:function(){var e=ie.urls("cluster_setup","apiurl");return ue.a.createElement(Ot,{component:ue.a.createElement(Fb,null),endpoint:e,docURL:ie.constants.DOC_URLS.SETUP,crumbs:[{name:"Setup "+ce.i18n.en_US["couchdb-productname"]}]})}})]};n(638);Yg.initialize=function(){ie.addHeaderLink({title:"Setup",href:"#/setup",icon:"fonticon-wrench"})},ie.addReducers({setup:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ib,t=arguments.length>1?arguments[1]:void 0,n=t.options;switch(t.type){case mb:return Pb(e,"clusterState",n.state);case hb:return Pb(e,"username",n.value);case yb:return Pb(e,"password",n.value);case bb:return Pb(e,"setupNode.bindAddress",n.value);case gb:return Rb(e,"setupNode.port",parseInt(n.value));case Eb:return Rb(e,"additionalNode.port",parseInt(n.value));case _b:return Pb(e,"additionalNode.bindAddress",n.value);case vb:return Pb(e,"additionalNode.remoteAddress",n.value);case Sb:var r=Ab(e);return r.nodeList.push(n.value),Lb(r),r;case Ob:return Lb(Ab(e));case Db:return Rb(e,"setupNode.nodeCount",parseInt(n.value));default:return e}}}),ie.registerUrls("cluster_setup",{server:function(){return ce.host+"/_cluster_setup"},app:function(){return"/_cluster_setup"},apiurl:function(){return window.location.origin+"/_cluster_setup"}});var Qg=Yg;function Zg(e){return(Zg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $g(e){return($g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tE(e,t){return(tE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function nE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var rE=Zo.TabElement,oE=Zo.TabElementWrapper,aE=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,o=(e=$g(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==Zg(o)&&"function"!=typeof o?eE(r):o,nE(eE(n),"checked",(function(e){return n.props.selectedRadio===e})),nE(eE(n),"onRadioClick",(function(e){var t=e.target.value;n.props.onRadioClick(t)})),nE(eE(n),"createFilterTabs",(function(){return n.props.radioNames.map((function(e,t){var r=n.checked(e);return ue.a.createElement(rE,{key:t,selected:r,text:e,onChange:n.onRadioClick})}))})),nE(eE(n),"searchTermChange",(function(e){var t=e.target.value;n.props.onSearch(t)})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tE(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.createFilterTabs();return ue.a.createElement(oE,null,e,ue.a.createElement("li",{className:"component-tab-list-element"},ue.a.createElement("input",{id:"active-tasks-search-box",className:"searchbox",type:"text",name:"search",placeholder:"Search for databases...",value:this.props.searchTerm,onChange:this.searchTermChange})))}}])&&Jg(n.prototype,r),o&&Jg(n,o),t}(ue.a.Component);function iE(e){return(iE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cE(e){return(cE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uE(e,t){return(uE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function dE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}nE(aE,"defaultProps",{radioNames:["All Tasks","Replication","Database Compaction","Indexer","View Compaction"]});var pE={getTimeInfo:function(e){return[ce.helpers.formatDate(e),ce.helpers.getDateFromNow(e)]},getDatabaseFieldMessage:function(e){var t=e.type,n=[];return"replication"===t?(n.push("From: "+e.source),n.push("To: "+e.target)):"indexer"===t?(n.push(e.database),n.push("(View: "+e.design_document+")")):n.push(e.database),n},getProgressMessage:function(e){var t=[],n=e.type;return _.has(e,"progress")&&t.push("Progress: "+e.progress+"%"),"indexer"===n?t.push("Processed "+e.changes_done+" of "+e.total_changes+" changes."):"replication"===n&&(t.push(e.docs_written+" docs written."),_.has(e,"changes_pending")&&t.push(e.changes_pending+" pending changes.")),_.has(e,"changes_done")&&t.push(e.changes_done+" Changes done."),t},getSourceSequence:function(e){return e.source_seq}},fE=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,n=!(o=(e=cE(t)).call.apply(e,[this].concat(i)))||"object"!==iE(o)&&"function"!=typeof o?lE(r):o,dE(lE(n),"getInfo",(function(e){return{type:e.type,objectField:pE.getDatabaseFieldMessage(e),started_on:pE.getTimeInfo(e.started_on),updated_on:pE.getTimeInfo(e.updated_on),pid:e.pid.replace(/[<>]/g,""),progress:pE.getProgressMessage(e)}})),dE(lE(n),"multilineMessage",(function(e,t){t||(t="");var n="multiline-active-tasks-message "+t;return e.map((function(e,t){return ue.a.createElement("p",{key:t,className:n},e)}))})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uE(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.getInfo(this.props.item),t=this.multilineMessage(e.objectField,"to-from-database"),n=this.multilineMessage(e.started_on,"time"),r=this.multilineMessage(e.updated_on,"time"),o=this.multilineMessage(e.progress);return ue.a.createElement("tr",null,ue.a.createElement("td",null,e.type),ue.a.createElement("td",null,t),ue.a.createElement("td",null,n),ue.a.createElement("td",null,r),ue.a.createElement("td",null,e.pid),ue.a.createElement("td",null,o))}}])&&sE(n.prototype,r),o&&sE(n,o),t}(ue.a.Component);function mE(e){return(mE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yE(e){return(yE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gE(e,t){return(gE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function EE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _E=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,o=(e=yE(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==mE(o)&&"function"!=typeof o?bE(r):o,EE(bE(n),"createRows",(function(){var e=""===n.props.searchTerm.trim();return 0===n.props.tasks.length||n.props.isLoading?e?n.noActiveTasks():n.noActiveTasksMatchFilter():n.props.tasks.map((function(e,t){return ue.a.createElement(fE,{key:t,item:e})}))})),EE(bE(n),"getType",(function(){var e=n.props.selectedRadio;return"All Tasks"===e?"":e})),EE(bE(n),"noActiveTasks",(function(){var e=n.getType(),t=ue.a.createElement("td",{colSpan:"6"},"No active ",e," tasks.");return n.props.isLoading&&(t=ue.a.createElement("td",{colSpan:"6"},"Loading tasks.")),ue.a.createElement("tr",{className:"no-matching-database-on-search"},t)})),EE(bE(n),"noActiveTasksMatchFilter",(function(){var e=n.getType();return ue.a.createElement("tr",{className:"no-matching-database-on-search"},ue.a.createElement("td",{colSpan:"6"},"No active ",e,' tasks match with filter: "',n.props.searchTerm,'"'))})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gE(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return ue.a.createElement("tbody",{className:"js-tasks-go-here"},this.createRows())}}])&&hE(n.prototype,r),o&&hE(n,o),t}(ue.a.Component);function vE(e){return(vE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function OE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function SE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function DE(e,t,n){return t&&SE(e.prototype,t),n&&SE(e,n),e}function NE(e,t){return!t||"object"!==vE(t)&&"function"!=typeof t?TE(e):t}function wE(e){return(wE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function TE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CE(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&IE(e,t)}function IE(e,t){return(IE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function AE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var RE=function(e){function t(e){var n;return OE(this,t),AE(TE(n=NE(this,wE(t).call(this,e))),"arrow",(function(){var e=n.props.sortByHeader,t=n.props.headerName,r=n.props.headerIsAscending?"icon icon-caret-up":"icon icon-caret-down";if(e===t)return ue.a.createElement("i",{className:r})})),AE(TE(n),"onTableHeaderClick",(function(){n.props.onTableHeaderClick(n.props.headerName)})),n.onTableHeaderClick=n.onTableHeaderClick.bind(TE(n)),n}return CE(t,e),DE(t,[{key:"render",value:function(){return ue.a.createElement("td",{className:"header-field ".concat(this.props.headerName," tableheader"),onClick:this.onTableHeaderClick},ue.a.createElement("label",{className:"header-field label-text active-tasks-header noselect"},this.props.displayName," ",this.arrow()))}}]),t}(ue.a.Component),PE=function(e){function t(){var e,n;OE(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return AE(TE(n=NE(this,(e=wE(t)).call.apply(e,[this].concat(o)))),"createTableHeadingFields",(function(){var e=n.props,t=e.onTableHeaderClick,r=e.sortByHeader,o=e.headerIsAscending;return n.props.headerNames.map((function(e){return ue.a.createElement(RE,{headerName:e[0],displayName:e[1],key:e[0],onTableHeaderClick:t,sortByHeader:r,headerIsAscending:o})}))})),n}return CE(t,e),DE(t,[{key:"render",value:function(){return ue.a.createElement("thead",null,ue.a.createElement("tr",null,this.createTableHeadingFields()))}}]),t}(ue.a.Component);function LE(e){return(LE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kE(e,t){return!t||"object"!==LE(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jE(e){return(jE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function UE(e,t){return(UE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}AE(PE,"defaultProps",{headerNames:[["type","Type"],["database","Database"],["started-on","Started on"],["updated-on","Updated on"],["pid","PID"],["progress","Status"]]});var ME=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),kE(this,jE(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&UE(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.tasks,n=e.selectedRadio,r=e.searchTerm,o=e.sortByHeader,a=e.onTableHeaderClick,i=e.headerIsAscending,s=e.isLoading;return ue.a.createElement("div",{id:"dashboard-lower-content"},ue.a.createElement("table",{id:"active-tasks-table",className:"table table-bordered table-striped active-tasks"},ue.a.createElement(PE,{onTableHeaderClick:a,sortByHeader:o,headerIsAscending:i}),ue.a.createElement(_E,{tasks:t,selectedRadio:n,isLoading:s,searchTerm:r})))}}])&&xE(n.prototype,r),o&&xE(n,o),t}(ue.a.Component);function qE(e){return(qE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function VE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function FE(e){return(FE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function BE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function HE(e,t){return(HE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function KE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var GE=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,o=(e=FE(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==qE(o)&&"function"!=typeof o?BE(r):o,KE(BE(n),"setNewSearchTerm",(function(e){n.props.setSearchTerm(e)})),KE(BE(n),"switchTab",(function(e){n.props.switchTab(e)})),KE(BE(n),"tableHeaderOnClick",(function(e){n.props.sortByColumnHeader(e)})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&HE(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.props.init()}},{key:"render",value:function(){var e=this.props,t=e.isLoading,n=e.tasks,r=e.searchTerm,o=e.selectedRadio,a=e.sortByHeader,i=e.headerIsAscending,s=this.setNewSearchTerm,c=this.tableHeaderOnClick;return ue.a.createElement("div",{id:"active-tasks-page",className:"scrollable"},ue.a.createElement("div",{className:"inner"},ue.a.createElement(aE,{searchTerm:r,selectedRadio:o,onSearch:s,onRadioClick:this.switchTab}),ue.a.createElement(ME,{isLoading:t,tasks:n,searchTerm:r,selectedRadio:o,onTableHeaderClick:c,sortByHeader:a,headerIsAscending:i})))}}])&&VE(n.prototype,r),o&&VE(n,o),t}(ue.a.Component);function XE(e){return(XE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function WE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zE(e){return(zE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function YE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QE(e,t){return(QE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ZE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var JE=Zo.Polling,$E=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,o=(e=zE(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==XE(o)&&"function"!=typeof o?YE(r):o,ZE(YE(n),"runPollingUpdate",(function(){n.props.runPollingUpdate()})),ZE(YE(n),"getPluralForLabel",(function(){return"1"===n.state.pollingInterval?"":"s"})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&QE(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e="active-tasks__polling-wrapper";return I.isIE1X()&&(e+=" "+e+"--ie1X"),ue.a.createElement("div",{className:e},ue.a.createElement(JE,{min:1,max:30,stepSize:1,startValue:15,valueUnits:"second",onPoll:this.runPollingUpdate}))}}])&&WE(n.prototype,r),o&&WE(n,o),t}(ue.a.Component),e_=[{name:"Active Tasks"}],t_=function(e){return ue.a.createElement(gt,null,ue.a.createElement(Et,{crumbs:e_,docURL:ie.constants.DOC_URLS.ACTIVE_TASKS,endpoint:I.getApiUrl("/_active_tasks")},ue.a.createElement($E,e)),ue.a.createElement(_t,null,ue.a.createElement(GE,e)))},n_={ACTIVE_TASKS_SWITCH_TAB:"ACTIVE_TASKS_SWITCH_TAB",ACTIVE_TASKS_SET_COLLECTION:"ACTIVE_TASKS_SET_COLLECTION",ACTIVE_TASKS_SET_SEARCH_TERM:"ACTIVE_TASKS_SET_SEARCH_TERM",ACTIVE_TASKS_SORT_BY_COLUMN_HEADER:"ACTIVE_TASKS_SORT_BY_COLUMN_HEADER",ACTIVE_TASKS_FETCH_AND_SET:"ACTIVE_TASKS_FETCH_AND_SET",ACTIVE_TASKS_SET_IS_LOADING:"ACTIVE_TASKS_SET_IS_LOADING",ACTIVE_TASKS_POLLING_COLLECTION:"ACTIVE_TASKS_POLLING_COLLECTION"},r_=function(){return v(I.getServerUrl("/_active_tasks")).then((function(e){if(e.error)throw new Error(e.reason);return e}))},o_=function(e){return{type:n_.ACTIVE_TASKS_SET_IS_LOADING,options:e}},a_=function(e){return{type:n_.ACTIVE_TASKS_FETCH_AND_SET,options:e}};function i_(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function s_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i_(n,!0).forEach((function(t){c_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i_(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l_={isLoading:!1,sortByHeader:"started-on",headerIsAscending:!0,selectedRadio:"All Tasks",searchTerm:"",tasks:[],filteredTasks:[]},u_=function(e,t){return s_({},e,{filteredTasks:d_(t,e.selectedRadio,e.sortbyHeader,e.tasks,e.headerIsAscending),searchTerm:t})},d_=function(e,t,n,r,o){return function(e,t,n){var r=Object(i.sortBy)(t,(function(t){var n=e;return Object(i.isUndefined)(t[n])&&(n="source"),t[n]}));return n?r:r.reverse()}(n,r.filter((function(n){return function(e,t){var n=t.toLowerCase().replace(" ","_");return e.type===n||"all_tasks"===n}(n,t)&&function(e,t){var n=new RegExp(t,"g"),r="";return Object(i.has)(e,"database")&&(r+=e.database),Object(i.has)(e,"source")&&(r+=e.source),Object(i.has)(e,"target")&&(r+=e.target),n.test(r)}(n,e)})),o)},p_=function(e,t,n){return e!==t||!n},f_=function(e){return e.headerIsAscending},m_=function(e){return e.isLoading},h_=function(e){return e.selectedRadio},y_=function(e){return e.sortByHeader},b_=function(e){return e.searchTerm},g_=Object(tt.b)((function(e){var t,n=e.activetasks;return{tasks:(t=n,t.filteredTasks),headerIsAscending:f_(n),selectedRadio:h_(n),sortByHeader:y_(n),searchTerm:b_(n),isLoading:m_(n)}}),(function(e){return{init:function(){return e((function(e){e(o_(!0)),r_().then((function(t){e(o_(!1)),e(a_(t))})).catch((function(e){ie.addNotification({msg:"Fetching active tasks failed: ".concat(e),type:"error"})}))}))},setSearchTerm:function(t){return e({type:n_.ACTIVE_TASKS_SET_SEARCH_TERM,options:t})},sortByColumnHeader:function(t){return e({type:n_.ACTIVE_TASKS_SORT_BY_COLUMN_HEADER,options:t})},switchTab:function(t){return e(function(e){return{type:n_.ACTIVE_TASKS_SWITCH_TAB,options:e}}(t))},runPollingUpdate:function(){return e((function(e){r_().then((function(t){e(a_(t))})).catch((function(e){ie.addNotification({msg:"Fetching active tasks failed: ".concat(e),type:"error"})}))}))}}}))(t_),E_={RouteObjects:[ie.RouteObject.extend({selectedHeader:"Active Tasks",routes:{"activetasks/:id":"showActiveTasks",activetasks:"showActiveTasks"},roles:["_admin"],showActiveTasks:function(){return ue.a.createElement(g_,null)}})]};n(639);E_.initialize=function(){ie.addHeaderLink({title:"Active Tasks",icon:"fonticon-activetasks",href:"#/activetasks"})},ie.addReducers({activetasks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l_,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.options;switch(n){case n_.ACTIVE_TASKS_FETCH_AND_SET:return s_({},e,{tasks:r,filteredTasks:d_(e.searchTerm,e.selectedRadio,e.sortByHeader,r,e.headerIsAscending)});case n_.ACTIVE_TASKS_SWITCH_TAB:var o=d_(e.searchTerm,r,e.sortByHeader,e.tasks,s);return s_({},e,{selectedRadio:r,filteredTasks:o});case n_.ACTIVE_TASKS_CHANGE_POLLING_INTERVAL:return s_({},e,{pollingIntervalSeconds:r});case n_.ACTIVE_TASKS_SET_SEARCH_TERM:return u_(e,r);case n_.ACTIVE_TASKS_SORT_BY_COLUMN_HEADER:var a=e.sortByHeader,i=r,s=p_(a,i,e.headerIsAscending),c=d_(e.searchTerm,e.selectedRadio,i,e.tasks,s);return s_({},e,{sortByHeader:i,headerIsAscending:s,filteredTasks:c});case n_.ACTIVE_TASKS_SET_IS_LOADING:return s_({},e,{isLoading:r})}return e}});var __=E_;function v_(e){return(v_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S_(e,t){return!t||"object"!==v_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function D_(e){return(D_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N_(e,t){return(N_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var w_=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),S_(this,D_(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N_(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return ue.a.createElement("div",{className:"config-warning-cluster-wrapper"},ue.a.createElement("div",{className:"config-warning-cluster-container"},ue.a.createElement("div",null,ue.a.createElement("div",{className:"config-warning-icon-container pull-left"},ue.a.createElement("i",{className:"fonticon-attention-circled"})),"It seems that you are running a cluster with ",this.props.nodes.length," nodes. For CouchDB 2.0 we recommend using a configuration management tools like Chef, Ansible, Puppet or Salt (in no particular order) to configure your nodes in a cluster.",ue.a.createElement("br",null),ue.a.createElement("br",null),ue.a.createElement("div",{className:"config-warning-other-text"},"We highly recommend against configuring nodes in your cluster using the HTTP API and suggest using a configuration management tool for all configurations."))))}}])&&O_(n.prototype,r),o&&O_(n,o),t}(ue.a.Component),T_=Object(tt.b)((function(e){return{nodes:e.clusters.nodes}}),null)(w_),C_={RouteObjects:[ie.RouteObject.extend({selectedHeader:"Configuration",routes:{"cluster/disabled":"showDisabledFeatureScreen"},showDisabledFeatureScreen:function(){return sb.fetchNodes(),ue.a.createElement(Ot,{component:ue.a.createElement(T_,null),endpoint:I.getServerUrl("/_membership"),docURL:ie.constants.DOC_URLS.MEMBERSHIP,crumbs:[{name:"Config disabled"}]})}})]};function I_(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function A_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I_(n,!0).forEach((function(t){R_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I_(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function R_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P_={nodes:[]};C_.initialize=function(){},ie.addReducers({clusters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P_,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.options;switch(n){case ib:return A_({},e,{nodes:r.nodes})}return e}});var L_=C_,x_=function(e){return I.getServerUrl("/_node/"+e+"/_config")},k_=function(e,t,n){var r="/_node/"+e+"/_config/"+encodeURIComponent(t)+"/"+encodeURIComponent(n);return I.getServerUrl(r)},j_=function(e,t,n,r){var o=k_(e,t,n);return D(o,r).then((function(e){if(e.error)throw new Error(e.reason||e.error);return e}))},U_={EDIT_CONFIG:"EDIT_CONFIG",LOADING_CONFIG:"LOADING_CONFIG",EDIT_OPTION:"EDIT_OPTION",CANCEL_EDIT:"CANCEL_EDIT",SAVING_OPTION:"SAVING_OPTION",OPTION_SAVE_SUCCESS:"OPTION_SAVE_SUCCESS",OPTION_SAVE_FAILURE:"OPTION_SAVE_FAILURE",DELETING_OPTION:"DELETING_OPTION",OPTION_DELETE_SUCCESS:"OPTION_DELETE_SUCCESS",OPTION_DELETE_FAILURE:"OPTION_DELETE_FAILURE",ADDING_OPTION:"ADDING_OPTION",OPTION_ADD_SUCCESS:"OPTION_ADD_SUCCESS",OPTION_ADD_FAILURE:"OPTION_ADD_FAILURE"},M_=function(e){return function(t){t({type:U_.LOADING_CONFIG}),function(e){var t=x_(e);return v(t).then((function(e){if(e.error)throw new Error(e.reason);return{sections:e}}))}(e).then((function(n){t({type:U_.EDIT_CONFIG,options:{sections:n.sections,node:e}})})).catch((function(n){ie.addNotification({msg:"Failed to load the configuration. "+n.message,type:"error",clear:!0}),t({type:U_.EDIT_CONFIG,options:{sections:[],node:e}})}))}},q_=function(e,t){t({type:U_.OPTION_SAVE_SUCCESS,options:e}),ie.addNotification({msg:"Option ".concat(e.optionName," saved"),type:"success"})},V_=function(e,t,n){n({type:U_.OPTION_SAVE_FAILURE,options:e}),ie.addNotification({msg:"Option save failed: ".concat(t),type:"error"})},F_=function(e,t){t({type:U_.OPTION_ADD_SUCCESS,options:e}),ie.addNotification({msg:"Option ".concat(e.optionName," added"),type:"success"})},B_=function(e,t,n){n({type:U_.OPTION_ADD_FAILURE,options:e}),ie.addNotification({msg:"Option add failed: ".concat(t),type:"error"})},H_=function(e,t){return function(n){n({type:U_.DELETING_OPTION,options:t});var r=t.sectionName,o=t.optionName;return function(e,t,n){var r=k_(e,t,n);return O(r).then((function(e){if(e.error)throw new Error(e.reason);return e}))}(e,r,o).then((function(){return K_(t,n)})).catch((function(e){return G_(t,e.message,n)}))}},K_=function(e,t){t({type:U_.OPTION_DELETE_SUCCESS,options:e}),ie.addNotification({msg:"Option ".concat(e.optionName," deleted"),type:"success"})},G_=function(e,t,n){n({type:U_.OPTION_DELETE_FAILURE,options:e}),ie.addNotification({msg:"Option delete failed: ".concat(t),type:"error"})};function X_(e){return(X_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z_(e,t){return!t||"object"!==X_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Y_(e){return(Y_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q_(e,t){return(Q_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Z_=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=z_(this,Y_(t).call(this,e))).state=n.getInitialState(),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q_(e,t)}(t,e),n=t,(r=[{key:"getInitialState",value:function(){return{sectionName:"",optionName:"",value:"",show:!1}}},{key:"isInputValid",value:function(){return""!==this.state.sectionName&&""!==this.state.optionName&&""!==this.state.value}},{key:"updateSectionName",value:function(e){this.setState({sectionName:e.target.value})}},{key:"updateOptionName",value:function(e){this.setState({optionName:e.target.value})}},{key:"updateValue",value:function(e){this.setState({value:e.target.value})}},{key:"reset",value:function(){this.setState(this.getInitialState())}},{key:"onAdd",value:function(){if(this.isInputValid()){var e={sectionName:this.state.sectionName,optionName:this.state.optionName,value:this.state.value};this.setState({show:!1}),this.props.onAdd(e)}}},{key:"togglePopover",value:function(){this.setState({show:!this.state.show})}},{key:"hidePopover",value:function(){this.setState({show:!1})}},{key:"getPopover",value:function(){return ue.a.createElement(Tt.i,{className:"tray",id:"add-option-popover",title:"Add Option"},ue.a.createElement("input",{className:"input-section-name",onChange:this.updateSectionName.bind(this),type:"text",name:"section",placeholder:"Section",autoComplete:"off",autoFocus:!0}),ue.a.createElement("input",{className:"input-option-name",onChange:this.updateOptionName.bind(this),type:"text",name:"name",placeholder:"Name"}),ue.a.createElement("input",{className:"input-value",onChange:this.updateValue.bind(this),type:"text",name:"value",placeholder:"Value"}),ue.a.createElement("a",{className:"btn btn-create",onClick:this.onAdd.bind(this)},"Create"))}},{key:"render",value:function(){var e=this;return ue.a.createElement("div",{id:"add-option-panel"},ue.a.createElement(Tt.a,{id:"add-option-button",onClick:this.togglePopover.bind(this),ref:function(t){return e.target=t}},ue.a.createElement("i",{className:"icon icon-plus header-icon"}),"Add Option"),ue.a.createElement(Tt.g,{show:this.state.show,onHide:this.hidePopover.bind(this),placement:"bottom",rootClose:!0,target:function(){return e.target}},this.getPopover()))}}])&&W_(n.prototype,r),o&&W_(n,o),t}(ue.a.Component);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Z_,"propTypes",{onAdd:et.a.func.isRequired});var J_=Object(tt.b)((function(){return{}}),(function(e,t){return{onAdd:function(n){e(function(e,t){return function(n){n({type:U_.ADDING_OPTION});var r=t.sectionName,o=t.optionName,a=t.value;return j_(e,r,o,a).then((function(){return F_(t,n)})).catch((function(e){return B_(t,e.message,n)}))}}(t.node,n))}}}))(Z_);function $_(e){return($_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ev(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tv(e){return(tv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rv(e,t){return(rv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ov(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var av=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,o=(e=tv(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==$_(o)&&"function"!=typeof o?nv(r):o,ov(nv(n),"state",{value:n.props.value}),ov(nv(n),"onChange",(function(e){n.setState({value:e.target.value})})),ov(nv(n),"onSave",(function(){n.state.value!==n.props.value?n.props.onSave(n.state.value):n.props.onCancelEdit()})),ov(nv(n),"getButtons",(function(){return n.props.saving?null:ue.a.createElement("span",null,ue.a.createElement("button",{className:"btn btn-primary fonticon-ok-circled btn-small btn-config-save",onClick:n.onSave.bind(nv(n))}),ue.a.createElement("button",{className:"btn fonticon-cancel-circled btn-small btn-config-cancel",onClick:n.props.onCancelEdit}))})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rv(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return this.props.editing?ue.a.createElement("td",null,ue.a.createElement("div",{className:"config-value-form"},ue.a.createElement("input",{onChange:this.onChange.bind(this),defaultValue:this.props.value,disabled:this.props.saving,autoFocus:!0,type:"text",className:"config-value-input"}),this.getButtons())):ue.a.createElement("td",{className:"config-show-value",onClick:this.props.onEdit},this.props.value)}}])&&ev(n.prototype,r),o&&ev(n,o),t}(ue.a.Component);function iv(e){return(iv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cv(e){return(cv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uv(e,t){return(uv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function dv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}ov(av,"propTypes",{value:et.a.string.isRequired,editing:et.a.bool.isRequired,onEdit:et.a.func.isRequired,onCancelEdit:et.a.func.isRequired,onSave:et.a.func.isRequired});var pv=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=cv(t).call(this,e),n=!o||"object"!==iv(o)&&"function"!=typeof o?lv(r):o,dv(lv(n),"onDelete",(function(){n.props.onDelete()})),dv(lv(n),"showModal",(function(){n.setState({show:!0})})),dv(lv(n),"hideModal",(function(){n.setState({show:!1})})),n.onDelete=n.onDelete.bind(lv(n)),n.showModal=n.showModal.bind(lv(n)),n.hideModal=n.hideModal.bind(lv(n)),n.state={show:!1},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uv(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return ue.a.createElement("td",{className:"text-center config-item-trash config-delete-value"},ue.a.createElement("i",{className:"icon icon-trash",onClick:this.showModal}),ue.a.createElement(Ea.ConfirmationModal,{text:"Are you sure you want to delete ".concat(this.props.sectionName,"/").concat(this.props.optionName,"?"),onClose:this.hideModal,onSubmit:this.onDelete,visible:this.state.show}))}}])&&sv(n.prototype,r),o&&sv(n,o),t}(ue.a.Component);function fv(e){return(fv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hv(e){return(hv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bv(e,t){return(bv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}dv(pv,"propTypes",{sectionName:et.a.string.isRequired,optionName:et.a.string.isRequired,onDelete:et.a.func.isRequired});var Ev=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,o=(e=hv(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==fv(o)&&"function"!=typeof o?yv(r):o,gv(yv(n),"onSave",(function(e){var t=n.props.option;t.value=e,n.props.onSave(t)})),gv(yv(n),"onDelete",(function(){n.props.onDelete(n.props.option)})),gv(yv(n),"onEdit",(function(){n.props.onEdit(n.props.option)})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bv(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return ue.a.createElement("tr",{className:"config-item"},ue.a.createElement("th",null,this.props.option.header&&this.props.option.sectionName),ue.a.createElement("td",null,this.props.option.optionName),ue.a.createElement(av,{value:this.props.option.value,editing:this.props.option.editing,saving:this.props.saving,onSave:this.onSave,onEdit:this.onEdit,onCancelEdit:this.props.onCancelEdit}),ue.a.createElement(pv,{optionName:this.props.option.optionName,sectionName:this.props.option.sectionName,onDelete:this.onDelete}))}}])&&mv(n.prototype,r),o&&mv(n,o),t}(ue.a.Component);function _v(e){return(_v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ov(e){return(Ov=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dv(e,t){return(Dv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Nv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}gv(Ev,"propTypes",{option:et.a.object.isRequired,saving:et.a.bool.isRequired,onSave:et.a.func.isRequired,onDelete:et.a.func.isRequired,onEdit:et.a.func.isRequired,onCancelEdit:et.a.func.isRequired});var wv=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,o=(e=Ov(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==_v(o)&&"function"!=typeof o?Sv(r):o,Nv(Sv(n),"createOptions",(function(){return _.map(n.props.options,(function(e){return ue.a.createElement(Ev,{option:e,saving:n.props.saving,onDelete:n.props.onDeleteOption,onSave:n.props.onSaveOption,onEdit:n.props.onEditOption,onCancelEdit:n.props.onCancelEdit,key:"".concat(e.sectionName,"/").concat(e.optionName)})}))})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dv(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.createOptions();return ue.a.createElement("table",{className:"config table table-striped table-bordered"},ue.a.createElement("thead",null,ue.a.createElement("tr",null,ue.a.createElement("th",{id:"config-section",width:"22%"},"Section"),ue.a.createElement("th",{id:"config-option",width:"22%"},"Option"),ue.a.createElement("th",{id:"config-value"},"Value"),ue.a.createElement("th",{id:"config-trash"}))),ue.a.createElement("tbody",null,e))}}])&&vv(n.prototype,r),o&&vv(n,o),t}(ue.a.Component);function Tv(e){return(Tv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Iv(e){return(Iv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Av(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rv(e,t){return(Rv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Nv(wv,"propTypes",{options:et.a.arrayOf(et.a.shape({editing:et.a.bool.isRequired,header:et.a.bool,optionName:et.a.string.isRequired,sectionName:et.a.string.isRequired,value:et.a.string})).isRequired,saving:et.a.bool.isRequired,onDeleteOption:et.a.func.isRequired,onEditOption:et.a.func.isRequired,onSaveOption:et.a.func.isRequired,onCancelEdit:et.a.func.isRequired});var Lv=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=Iv(t).call(this,e),n=!o||"object"!==Tv(o)&&"function"!=typeof o?Av(r):o,Pv(Av(n),"saveOption",(function(e){n.props.saveOption(n.props.node,e)})),Pv(Av(n),"deleteOption",(function(e){n.props.deleteOption(n.props.node,e)})),Pv(Av(n),"editOption",(function(e){n.props.editOption(e)})),Pv(Av(n),"cancelEdit",(function(){n.props.cancelEdit()})),n.props.fetchAndEditConfig(n.props.node),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rv(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return this.props.loading?ue.a.createElement("div",{className:"view"},ue.a.createElement(Zo.LoadLines,null)):ue.a.createElement(wv,{saving:this.props.saving,onDeleteOption:this.deleteOption,onSaveOption:this.saveOption,onEditOption:this.editOption,onCancelEdit:this.cancelEdit,options:this.props.options})}}])&&Cv(n.prototype,r),o&&Cv(n,o),t}(ue.a.Component);function xv(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function kv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xv(n,!0).forEach((function(t){jv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xv(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Pv(Lv,"propTypes",{options:et.a.array.isRequired,loading:et.a.bool.isRequired,saving:et.a.bool.isRequired,saveOption:et.a.func.isRequired,deleteOption:et.a.func.isRequired,editOption:et.a.func.isRequired,cancelEdit:et.a.func.isRequired,fetchAndEditConfig:et.a.func.isRequired});var Uv={sections:{},loading:!0,editSectionName:null,editOptionName:null,saving:!1};function Mv(e,t){var n=t.sectionName,r=t.optionName,o=t.value,a=kv({},e.sections);return a[n]||(a[n]={}),a[n][r]=o||!0,a}function qv(e,t){var n=t.sectionName,r=t.optionName,o=kv({},e.sections);return o[n]&&(o[n]=kv({},o[n]),delete o[n][r],0==Object.keys(o[n]).length&&delete o[n]),o}function Vv(e,t){var n=e.sections[t],r=Object.keys(n).map((function(r){return{editing:Fv(e,t,r),sectionName:t,optionName:r,value:n[r]}})).sort((function(e,t){return e.optionName<t.optionName?-1:e.optionName>t.optionName?1:0}));return r.length>0&&(r[0].header=!0),r}function Fv(e,t,n){return t===e.editSectionName&&n===e.editOptionName}var Bv=Object(tt.b)((function(e,t){var n,r=e.config;return{node:t.node,options:(n=r,Object.keys(n.sections).map((function(e){return{sectionName:e,options:Vv(n,e)}})).sort((function(e,t){return e.sectionName<t.sectionName?-1:e.sectionName>t.sectionName?1:0})).map((function(e){return e.options})).reduce((function(e,t){return e.concat(t)}),[])),loading:r.loading,saving:r.saving,editSectionName:r.editSectionName,editOptionName:r.editOptionName}}),(function(e){return{fetchAndEditConfig:function(t){e(M_(t))},saveOption:function(t,n){e(function(e,t){return function(n){n({type:U_.SAVING_OPTION,options:t});var r=t.sectionName,o=t.optionName,a=t.value;return j_(e,r,o,a).then((function(){return q_(t,n)})).catch((function(e){return V_(t,e.message,n)}))}}(t,n))},deleteOption:function(t,n){e(H_(t,n))},editOption:function(t){e(function(e){return function(t){t({type:U_.EDIT_OPTION,options:e})}}(t))},cancelEdit:function(t){e(function(e){return function(t){t({type:U_.CANCEL_EDIT,options:e})}}(t))}}}))(Lv),Hv=function(e){var t=e.active,n=e.link,r=e.title;return ue.a.createElement("li",{className:t?"active":""},ue.a.createElement("a",{href:"#".concat(n)},r))};Hv.propTypes={active:et.a.bool.isRequired,link:et.a.string.isRequired,icon:et.a.string,title:et.a.string.isRequired};var Kv=function(e){var t=e.sidebarItems,n=e.selectedTab,r=t.map((function(e){return ue.a.createElement(Hv,{key:e.title,active:n===e.title,title:e.title,link:e.link})}));return ue.a.createElement("nav",{className:"sidenav"},ue.a.createElement("ul",{className:"nav nav-list"},r))};function Gv(e){return(Gv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wv(e,t){return!t||"object"!==Gv(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zv(e){return(zv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yv(e,t){return(Yv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Qv=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Wv(this,zv(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yv(e,t)}(t,e),n=t,(r=[{key:"onOriginChange",value:function(e){"all"===e.target.value&&this.props.isAllOrigins||("selected"!==e.target.value||this.props.isAllOrigins)&&this.props.originChange("all"===e.target.value)}},{key:"render",value:function(){return this.props.corsEnabled?ue.a.createElement("div",null,ue.a.createElement("p",null,ue.a.createElement("strong",null," Origin Domains ")," "),ue.a.createElement("p",null,"Databases will accept requests from these domains: "),ue.a.createElement("label",{className:"radio"},ue.a.createElement("input",{type:"radio",checked:this.props.isAllOrigins,value:"all",onChange:this.onOriginChange.bind(this),name:"all-domains"})," All domains ( * )"),ue.a.createElement("label",{className:"radio"},ue.a.createElement("input",{type:"radio",checked:!this.props.isAllOrigins,value:"selected",onChange:this.onOriginChange.bind(this),name:"selected-domains"})," Restrict to specific domains")):null}}])&&Xv(n.prototype,r),o&&Xv(n,o),t}(le.Component);Qv.propTypes={corsEnabled:et.a.bool,isAllOrigins:et.a.bool,originChange:et.a.func.isRequired};var Zv=function(e){return!!Jv(e)||(ie.addNotification({msg:"Please enter a valid domain, starting with http/https.",type:"error",clear:!0}),!1)},Jv=function(e){return/^https?:\/\/(.+)(:\d{2,5})?$/.test(e)};function $v(e){return($v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tO(e,t){return!t||"object"!==$v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nO(e){return(nO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rO(e,t){return(rO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var oO=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=tO(this,nO(t).call(this,e))).state={origin:""},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rO(e,t)}(t,e),n=t,(r=[{key:"onInputChange",value:function(e){this.setState({origin:e.target.value})}},{key:"addOrigin",value:function(e){if(e.preventDefault(),!Zv(this.state.origin))return!1;var t=function(e){var t=document.createElement("a");return t.href=e,/:/.test(e)?t.protocol+"//"+t.host:t.protocol+"//"+t.hostname}(this.state.origin);this.props.addOrigin(t),this.setState({origin:""})}},{key:"onKeyUp",value:function(e){if(13==e.keyCode)return this.addOrigin(e)}},{key:"render",value:function(){return this.props.isVisible?ue.a.createElement("div",{id:"origin-domains-container"},ue.a.createElement("div",{className:"origin-domains"},ue.a.createElement("div",{className:"input-append"},ue.a.createElement("input",{type:"text",name:"new_origin_domain",placeholder:"https://example.com",onChange:this.onInputChange.bind(this),value:this.state.origin}),ue.a.createElement("button",{onClick:this.addOrigin.bind(this),className:"btn btn-secondary add-domain"},ue.a.createElement("i",{className:"icon fonticon-ok-circled"})," Add Domain")))):null}}])&&eO(n.prototype,r),o&&eO(n,o),t}(le.Component);function aO(e){return(aO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sO(e,t){return!t||"object"!==aO(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function cO(e){return(cO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lO(e,t){return(lO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}oO.propTypes={isVisible:et.a.bool.isRequired,addOrigin:et.a.func.isRequired};var uO=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=sO(this,cO(t).call(this,e))).state={edit:!1,updatedOrigin:n.props.origin},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lO(e,t)}(t,e),n=t,(r=[{key:"editOrigin",value:function(e){e.preventDefault(),this.setState({edit:!this.state.edit})}},{key:"updateOrigin",value:function(e){e.preventDefault(),Zv(this.state.updatedOrigin)&&(this.state.updatedOrigin&&this.props.origin!==this.state.updatedOrigin&&this.props.updateOrigin(this.state.updatedOrigin,this.props.origin),this.setState({edit:!1}))}},{key:"deleteOrigin",value:function(e){e.preventDefault(),this.props.deleteOrigin(this.props.origin)}},{key:"onInputChange",value:function(e){this.setState({updatedOrigin:e.target.value})}},{key:"onKeyUp",value:function(e){if(13===e.keyCode)return this.updateOrigin(e)}},{key:"createOriginDisplay",value:function(){return this.state.edit?ue.a.createElement("div",{className:"input-append edit-domain-section"},ue.a.createElement("input",{type:"text",name:"update_origin_domain",onChange:this.onInputChange.bind(this),onKeyUp:this.onKeyUp.bind(this),value:this.state.updatedOrigin}),ue.a.createElement("button",{onClick:this.updateOrigin.bind(this),className:"btn btn-primary update-origin"}," Update ")):ue.a.createElement("div",{className:"js-url url-display"},this.props.origin)}},{key:"render",value:function(){var e=this.createOriginDisplay();return ue.a.createElement("tr",null,ue.a.createElement("td",null,e),ue.a.createElement("td",{width:"30"},ue.a.createElement("span",null,ue.a.createElement("a",{className:"fonticon-pencil",onClick:this.editOrigin.bind(this),title:"Edit domain."}))),ue.a.createElement("td",{width:"30"},ue.a.createElement("span",null,ue.a.createElement("a",{href:"#","data-bypass":"true",className:"fonticon-trash",onClick:this.deleteOrigin.bind(this),title:"Delete domain."}))))}}])&&iO(n.prototype,r),o&&iO(n,o),t}(le.Component);function dO(e){return(dO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fO(e,t){return!t||"object"!==dO(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mO(e){return(mO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hO(e,t){return(hO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}uO.propTypes={origin:et.a.string.isRequired,updateOrigin:et.a.func.isRequired,deleteOrigin:et.a.func.isRequired};var yO=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),fO(this,mO(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hO(e,t)}(t,e),n=t,(r=[{key:"createRows",value:function(){var e=this;return this.props.origins.map((function(t,n){return ue.a.createElement(uO,{updateOrigin:e.props.updateOrigin,deleteOrigin:e.props.deleteOrigin,key:n,origin:t})}))}},{key:"render",value:function(){var e=this.props,t=e.origins,n=e.isVisible;if(!t)return null;if(!n||0===t.length)return null;var r=this.createRows();return ue.a.createElement("table",{id:"origin-domain-table",className:"table table-striped"},ue.a.createElement("tbody",null,r))}}])&&pO(n.prototype,r),o&&pO(n,o),t}(le.Component);function bO(e){return(bO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gO(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function EO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _O(e,t){return!t||"object"!==bO(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vO(e){return(vO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function OO(e,t){return(OO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}yO.propTypes={isVisible:et.a.bool.isRequired,origins:et.a.arrayOf(et.a.string),updateOrigin:et.a.func.isRequired,deleteOrigin:et.a.func.isRequired};var SO=Zo.LoadLines,DO=Ea.ConfirmationModal,NO=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),_O(this,vO(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&OO(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.props.fetchAndLoadCORSOptions()}},{key:"enableCorsChange",value:function(){var e=this.props,t=e.corsEnabled,n=e.origins,r=e.node;(!t||_.isEmpty(n)||window.confirm(ce.i18n.en_US["cors-disable-cors-prompt"]))&&this.props.saveCORS({corsEnabled:!t,origins:n,node:r})}},{key:"save",value:function(){this.props.saveCORS({corsEnabled:this.props.corsEnabled,origins:this.props.origins,node:this.props.node})}},{key:"originChange",value:function(e){(!e||_.isEmpty(this.props.origins)||window.confirm("Are you sure? Switching to all origin domains will overwrite your specific origin domains."))&&this.props.saveCORS({corsEnabled:this.props.corsEnabled,origins:e?["*"]:[],node:this.props.node})}},{key:"addOrigin",value:function(e){this.props.saveCORS({corsEnabled:this.props.corsEnabled,origins:this.props.origins.concat(e),node:this.props.node})}},{key:"updateOrigin",value:function(e,t){var n=this.props.origins.slice(),r=_.indexOf(n,t);-1!==r&&(n[r]=e,this.props.saveCORS({corsEnabled:this.props.corsEnabled,origins:n,node:this.props.node}))}},{key:"deleteOrigin",value:function(){var e=this.props,t=e.corsEnabled,n=e.origins,r=e.node,o=e.domainToDelete,a=this.props.origins.indexOf(o);if(-1!==a){var i=[].concat(gO(n.slice(0,a)),gO(n.slice(a+1)));this.props.saveCORS({corsEnabled:t,origins:i,node:r})}}},{key:"render",value:function(){var e=[this.props.corsEnabled,!this.props.isAllOrigins].every((function(e){return!0===e})),t=ue.a.createElement("div",{id:this.props.corsEnabled?"collapsing-container":""},ue.a.createElement(Qv,{corsEnabled:this.props.corsEnabled,originChange:this.originChange.bind(this),isAllOrigins:this.props.isAllOrigins}),ue.a.createElement(yO,{updateOrigin:this.updateOrigin.bind(this),deleteOrigin:this.props.showDeleteDomainConfirmation,isVisible:e,origins:this.props.origins}),ue.a.createElement(oO,{addOrigin:this.addOrigin.bind(this),isVisible:e}));this.props.isLoading&&(t=ue.a.createElement(SO,null));var n=ue.a.createElement("span",null,"Are you sure you want to delete ",ue.a.createElement("code",null,_.escape(this.props.domainToDelete)),"?");return ue.a.createElement("div",{className:"cors-page flex-body"},ue.a.createElement("header",{id:"cors-header"},ue.a.createElement("p",null,ce.i18n.en_US["cors-notice"])),ue.a.createElement("form",{id:"corsForm",onSubmit:this.save.bind(this)},ue.a.createElement("div",{className:"cors-enable"},this.props.corsEnabled?"CORS is currently enabled.":"CORS is currently disabled.",ue.a.createElement("br",null),ue.a.createElement("button",{type:"button",className:"enable-disable btn btn-secondary",onClick:this.enableCorsChange.bind(this),disabled:this.props.isLoading?"disabled":null},this.props.corsEnabled?"Disable CORS":"Enable CORS")),t),ue.a.createElement(DO,{title:"Confirm Deletion",visible:this.props.deleteDomainModalVisible,text:n,buttonClass:"btn-danger",onClose:this.props.hideDeleteDomainConfirmation,onSubmit:this.deleteOrigin.bind(this),successButtonLabel:"Delete Domain"}))}}])&&EO(n.prototype,r),o&&EO(n,o),t}(le.Component),wO={EDIT_CORS:"EDIT_CORS",CORS_SET_IS_LOADING:"CORS_SET_IS_LOADING",CORS_SHOW_DELETE_DOMAIN_MODAL:"CORS_SHOW_DELETE_DOMAIN_MODAL",CORS_HIDE_DELETE_DOMAIN_MODAL:"CORS_HIDE_DELETE_DOMAIN_MODAL"},TO=function(e,t,n,r){if(!t)throw new Error("node not set");return D(e+"/cors/"+n,r).then((function(e){if(e.error)throw new Error(e.reason);return e}))},CO=function(){return{type:wO.CORS_SET_IS_LOADING,isLoading:!1}},IO=function(e){return{type:wO.EDIT_CORS,options:e,isLoading:!1}},AO=function(){return{type:wO.CORS_HIDE_DELETE_DOMAIN_MODAL}},RO=function(e){return"Reason: "+(e&&e.message||"n/a")},PO=function(e){return _.isEmpty(e)?"":e.join(",")},LO={fetchAndLoadCORSOptions:function(e,t){return function(n){var r=v(e+"/cors").then((function(e){if(e.error)throw new Error(e.reason);return{origins:e.origins?e.origins.split(","):[],methods:e.methods,credentials:e.credentials,headers:e.headers}})),o=function(e){return v(e+"/httpd").then((function(e){if(e.error)throw new Error(e.reason);return e}))}(e);ie.Promise.join(r,o,(function(e,r){var o=IO({origins:e.origins,corsEnabled:"true"===r.enable_cors,node:t});n(o)})).catch((function(e){ie.addNotification({msg:"Could not load CORS settings.  "+RO(e),type:"error"})}))}},showLoadingBars:function(){return{type:wO.CORS_SET_IS_LOADING,isLoading:!0}},hideLoadingBars:CO,showDomainDeleteConfirmation:function(e){return{type:wO.CORS_SHOW_DELETE_DOMAIN_MODAL,domainToDelete:e}},hideDomainDeleteConfirmation:AO,loadCORSOptions:IO,sanitizeOrigins:PO,saveCors:function(e,t){return function(n){var r,o,a,i=[];return i.push(function(e,t,n){if(!t)throw new Error("node not set");return D(e+"/httpd/enable_cors",n.toString()).then((function(e){if(e.error)throw new Error(e.reason);return e}))}(e,t.node,t.corsEnabled)),t.corsEnabled&&(i.push((r=e,o=t.node,a=PO(t.origins),TO(r,o,"origins",a))),i.push(function(e,t){return TO(e,t,"credentials","true")}(e,t.node)),i.push(function(e,t){return TO(e,t,"headers","accept, authorization, content-type, origin, referer")}(e,t.node)),i.push(function(e,t){return TO(e,t,"methods","GET, PUT, POST, HEAD, DELETE")}(e,t.node))),ie.Promise.all(i).then((function(){ie.addNotification({msg:"CORS settings updated.",type:"success",clear:!0}),n(IO(t))})).catch((function(e){ie.addNotification({msg:"Error! Could not save your CORS settings. Please try again. "+RO(e),type:"error",clear:!0}),n(AO()),n(CO())}))}},overrideFetchAndLoadCORSOptions:function(e){LO.fetchAndLoadCORSOptions=e},overrideSaveCors:function(e){LO.saveCors=e}},xO=LO,kO={CORSContainer:Object(tt.b)((function(e){var t=e.cors;return{node:t.node,corsEnabled:t.corsEnabled,isAllOrigins:t.isAllOrigins,isLoading:t.isLoading,origins:t.origins,deleteDomainModalVisible:t.deleteDomainModalVisible,domainToDelete:t.domainToDelete}}),(function(e,t){return{saveCORS:function(n){e(xO.showLoadingBars()),e(xO.saveCors(t.url,n))},fetchAndLoadCORSOptions:function(){e(xO.fetchAndLoadCORSOptions(t.url,t.node))},showDeleteDomainConfirmation:function(t){e(xO.showDomainDeleteConfirmation(t))},hideDeleteDomainConfirmation:function(){e(xO.hideDomainDeleteConfirmation())}}}))(NO),CORSScreen:NO,OriginInput:oO,Origins:Qv,OriginTable:yO,OriginRow:uO},jO=function(e){var t=e.node,n=e.crumbs,r=e.docURL,o=e.endpoint;return ue.a.createElement("header",{className:"two-panel-header"},ue.a.createElement("div",{className:"flex-layout flex-row"},ue.a.createElement("div",{id:"breadcrumbs",className:"faux__config-breadcrumbs"},ue.a.createElement(mt,{crumbs:n})),ue.a.createElement("div",{className:"right-header-wrapper flex-layout flex-row flex-body"},ue.a.createElement("div",{id:"react-headerbar",className:"flex-body"}," "),ue.a.createElement("div",{id:"right-header",className:"flex-fill"},ue.a.createElement(J_,{node:t})),ue.a.createElement(bt,{docURL:r,endpoint:o}),ue.a.createElement("div",{id:"notification-center-btn",className:"flex-fill"},ue.a.createElement(dt,null)))))},UO=function(e){var t=e.showCors,n=e.docURL,r=e.node,o=e.endpoint,a=e.crumbs,i=[{title:"Main config",link:"_config/"+r},{title:"CORS",link:"_config/"+r+"/cors"}],s=t?"CORS":"Main config",c=t?ue.a.createElement(kO.CORSContainer,{node:r,url:o}):ue.a.createElement(Bv,{node:r});return ue.a.createElement("div",{id:"dashboard",className:"with-sidebar"},ue.a.createElement(jO,{docURL:n,endpoint:o,node:r,crumbs:a}),ue.a.createElement("div",{className:"with-sidebar tabs-with-sidebar content-area"},ue.a.createElement("aside",{id:"sidebar-content",className:"scrollable"},ue.a.createElement(Kv,{sidebarItems:i,selectedTab:s})),ue.a.createElement("section",{id:"dashboard-content",className:"flex-layout flex-col"},ue.a.createElement("div",{id:"dashboard-upper-content"}),ue.a.createElement("div",{id:"dashboard-lower-content",className:"flex-body"},c),ue.a.createElement("div",{id:"footer"}))))},MO=ie.RouteObject.extend({selectedHeader:"Configuration",routes:{_config:"checkNodes"},crumbs:[{name:"Config disabled"}],checkNodes:function(){sb.navigateToNodeBasedOnNodeCount("/_config/")}}),qO=ie.RouteObject.extend({roles:["_admin"],selectedHeader:"Configuration",routes:{"_config/:node":"configForNode","_config/:node/cors":"configCorsForNode"},initialize:function(){},configForNode:function(e){return ue.a.createElement(UO,{node:e,docURL:ie.constants.DOC_URLS.CONFIG,endpoint:x_(e),crumbs:[{name:"Config"}],showCors:!1})},configCorsForNode:function(e){return ue.a.createElement(UO,{node:e,docURL:ie.constants.DOC_URLS.CONFIG,endpoint:x_(e),crumbs:[{name:"Config"}],showCors:!0})}}),VO=ie.addon();VO.RouteObjects=[qO,MO];var FO=VO;n(640);FO.initialize=function(){ie.addHeaderLink({title:"Configuration",href:"#/_config",icon:"fonticon-cog",className:"config"})},ie.addReducers({config:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Uv,t=arguments.length>1?arguments[1]:void 0,n=t.options;switch(t.type){case U_.EDIT_CONFIG:return kv({},e,{sections:n.sections,loading:!1,editOptionName:null,editSectionName:null});case U_.EDIT_OPTION:return kv({},e,{editSectionName:n.sectionName,editOptionName:n.optionName});case U_.LOADING_CONFIG:return kv({},e,{loading:!0});case U_.CANCEL_EDIT:return kv({},e,{editOptionName:null,editSectionName:null});case U_.SAVING_OPTION:return kv({},e,{saving:!0});case U_.OPTION_SAVE_SUCCESS:return kv({},e,{editOptionName:null,editSectionName:null,sections:Mv(e,n),saving:!1});case U_.OPTION_SAVE_FAILURE:return kv({},e,{saving:!1});case U_.OPTION_ADD_SUCCESS:return kv({},e,{sections:Mv(e,n),saving:!1});case U_.OPTION_ADD_FAILURE:return kv({},e,{saving:!1});case U_.OPTION_DELETE_SUCCESS:return kv({},e,{sections:qv(e,n)});default:return e}}});var BO=FO,HO=n(91),KO=n.n(HO),GO={REPLICATION_SOURCE:{LOCAL:"REPLICATION_SOURCE_LOCAL",REMOTE:"REPLICATION_SOURCE_REMOTE"},REPLICATION_TARGET:{EXISTING_LOCAL_DATABASE:"REPLICATION_TARGET_EXISTING_LOCAL_DATABASE",EXISTING_REMOTE_DATABASE:"REPLICATION_TARGET_EXISTING_REMOTE_DATABASE",NEW_LOCAL_DATABASE:"REPLICATION_TARGET_NEW_LOCAL_DATABASE",NEW_REMOTE_DATABASE:"REPLICATION_TARGET_NEW_REMOTE_DATABASE"},REPLICATION_TYPE:{ONE_TIME:"REPLICATION_TYPE_ONE_TIME",CONTINUOUS:"REPLICATION_TYPE_CONTINUOUS"},REPLICATION_AUTH_METHOD:{NO_AUTH:"NO_AUTH",BASIC:"BASIC_AUTH"}};function XO(e){return(XO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function WO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zO(e,t){return!t||"object"!==XO(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function YO(e){return(YO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function QO(e,t){return(QO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ZO=Zo.StyledSelect,JO=function(e){var t=e.onChange,n=e.value;return ue.a.createElement("div",{className:"replication__section"},ue.a.createElement("div",{className:"replication__input-label"},"Database URL:"),ue.a.createElement("div",{className:""},ue.a.createElement("input",{type:"text",className:"replication__remote-connection-url",placeholder:"https://",value:n,onChange:function(e){return t(e.target.value)}})))};JO.propTypes={value:et.a.string.isRequired,onChange:et.a.func.isRequired};var $O=function(e){var t=e.value,n=e.onChange,r=e.databases.map((function(e){return{value:e,label:e}}));return ue.a.createElement("div",{className:"replication__section"},ue.a.createElement("div",{className:"replication__input-label"},"Name:"),ue.a.createElement("div",{className:"replication__input-react-select"},ue.a.createElement(Bo.a,{name:"source-name",value:t,placeholder:"Database name",options:r,clearable:!1,onChange:function(e){var t=e.value;return n(t)}})))};$O.propTypes={value:et.a.string.isRequired,databases:et.a.array.isRequired,onChange:et.a.func.isRequired};var eS=function(e){var t=e.replicationSource,n=e.databases,r=e.localSource,o=e.remoteSource,a=e.onChangeRemote,i=e.onChangeLocal;return t===GO.REPLICATION_SOURCE.LOCAL?ue.a.createElement($O,{value:r,databases:n,onChange:i}):ue.a.createElement(JO,{value:o,onChange:a})};eS.propTypes={replicationSource:et.a.string.isRequired,databases:et.a.array.isRequired,localSource:et.a.string.isRequired,remoteSource:et.a.string.isRequired,onChangeRemote:et.a.func.isRequired,onChangeLocal:et.a.func.isRequired};var tS=function(e){var t=e.onChange,n=e.value;return ue.a.createElement("div",{className:"replication__section"},ue.a.createElement("div",{className:"replication__input-label"},"Type:"),ue.a.createElement("div",{className:"replication__input-select"},ue.a.createElement(ZO,{selectContent:[{value:"",label:"Select source type"},{value:GO.REPLICATION_SOURCE.LOCAL,label:"Local database"},{value:GO.REPLICATION_SOURCE.REMOTE,label:"Remote database"}].map((function(e){return ue.a.createElement("option",{value:e.value,key:e.value},e.label)})),selectChange:function(e){return t(e.target.value)},selectId:"replication-source",selectValue:n})))};tS.propTypes={value:et.a.string.isRequired,onChange:et.a.func.isRequired};var nS=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),zO(this,YO(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&QO(e,t)}(t,e),n=t,(r=[{key:"getReplicationSourceRow",value:function(){var e=this.props,t=e.replicationSource,n=e.localSource,r=e.onLocalSourceChange,o=e.onRemoteSourceChange,a=e.remoteSource,i=e.databases;return t?ue.a.createElement(eS,{replicationSource:t,databases:i,localSource:n,remoteSource:a,onChangeLocal:r,onChangeRemote:o}):null}},{key:"render",value:function(){var e=this.props,t=e.replicationSource,n=e.onSourceSelect;return ue.a.createElement("div",null,ue.a.createElement("h3",null,"Source"),ue.a.createElement(tS,{onChange:n,value:t}),this.getReplicationSourceRow())}}])&&WO(n.prototype,r),o&&WO(n,o),t}(ue.a.Component);function rS(e){return(rS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function aS(e,t){return!t||"object"!==rS(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function iS(e){return(iS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sS(e,t){return(sS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}nS.propTypes={replicationSource:et.a.string.isRequired,localSource:et.a.string.isRequired,remoteSource:et.a.string.isRequired,databases:et.a.array.isRequired,onLocalSourceChange:et.a.func.isRequired,onRemoteSourceChange:et.a.func.isRequired};var cS=Zo.StyledSelect,lS=function(e){var t=e.value,n=e.onChange;return ue.a.createElement("div",{className:"replication__section"},ue.a.createElement("div",{className:"replication__input-label"},"Type:"),ue.a.createElement("div",{id:"replication-target",className:"replication__input-select"},ue.a.createElement(cS,{selectContent:[{value:"",label:"Select target type"},{value:GO.REPLICATION_TARGET.EXISTING_LOCAL_DATABASE,label:"Existing local database"},{value:GO.REPLICATION_TARGET.EXISTING_REMOTE_DATABASE,label:"Existing remote database"},{value:GO.REPLICATION_TARGET.NEW_LOCAL_DATABASE,label:"New local database"},{value:GO.REPLICATION_TARGET.NEW_REMOTE_DATABASE,label:"New remote database"}].map((function(e){return ue.a.createElement("option",{value:e.value,key:e.value},e.label)})),selectChange:function(e){return n(e.target.value)},selectId:"replication-target",selectValue:t})))};lS.propTypes={value:et.a.string.isRequired,onChange:et.a.func.isRequired};var uS=function(e){var t=e.onChange,n=e.value;return ue.a.createElement("div",null,ue.a.createElement("input",{type:"text",className:"replication__remote-connection-url",placeholder:"https://",value:n,onChange:function(e){return t(e.target.value)}}))};uS.propTypes={value:et.a.string.isRequired,onChange:et.a.func.isRequired};var dS=function(e){var t=e.onChange,n=e.value,r=e.databases.map((function(e){return{value:e,label:e}}));return ue.a.createElement("div",{id:"replication-target-local",className:"replication__input-react-select"},ue.a.createElement(Bo.a,{value:n,options:r,placeholder:"Database name",clearable:!1,onChange:function(e){var n=e.value;return t(n)}}))};dS.propTypes={value:et.a.string.isRequired,databases:et.a.array.isRequired,onChange:et.a.func.isRequired};var pS=function(e){var t=e.onChange,n=e.value;return ue.a.createElement("input",{type:"text",className:"replication__new-input",placeholder:"Database name",value:n,onChange:function(e){return t(e.target.value)}})};pS.propTypes={value:et.a.string.isRequired,onChange:et.a.func.isRequired};var fS=function(e){var t,n=e.replicationTarget,r=e.onLocalTargetChange,o=e.onRemoteTargetChange,a=e.localTarget,i=e.remoteTarget,s=e.databases;if(!n)return null;n===GO.REPLICATION_TARGET.NEW_LOCAL_DATABASE?(c="New database:",t=ue.a.createElement(pS,{value:a,onChange:r})):t=n===GO.REPLICATION_TARGET.EXISTING_LOCAL_DATABASE?ue.a.createElement(dS,{onChange:r,databases:s,value:a}):ue.a.createElement(uS,{onChange:o,value:i,newRemote:GO.REPLICATION_TARGET.NEW_REMOTE_DATABASE===n});var c="Name:";return n!==GO.REPLICATION_TARGET.NEW_REMOTE_DATABASE&&n!==GO.REPLICATION_TARGET.NEW_LOCAL_DATABASE||(c="New database:"),ue.a.createElement("div",{className:"replication__section"},ue.a.createElement("div",{className:"replication__input-label"},c),ue.a.createElement("div",null,t))};fS.propTypes={databases:et.a.array.isRequired,onLocalTargetChange:et.a.func.isRequired,onRemoteTargetChange:et.a.func.isRequired,remoteTarget:et.a.string.isRequired,localTarget:et.a.string.isRequired,replicationTarget:et.a.string.isRequired};var mS=function(e){var t=e.replicationTarget,n=e.targetDatabasePartitioned,r=e.onTargetDatabasePartitionedChange,o=e.allowNewPartitionedLocalDbs;if(!t)return null;if(t!==GO.REPLICATION_TARGET.NEW_LOCAL_DATABASE&&t!==GO.REPLICATION_TARGET.NEW_REMOTE_DATABASE)return null;var a=t===GO.REPLICATION_TARGET.NEW_LOCAL_DATABASE&&!o,i=a?"Local server does not support partitioned databases":"Creates a new partitioned database",s=ue.a.createElement(Tt.k,{id:"new-db-partitioned-tooltip"},i);return ue.a.createElement("div",{className:"replication__section"},ue.a.createElement("div",{className:"replication__input-label"},"New database options:"),ue.a.createElement("div",{className:wt()("replication__input-checkbox",{"replication__input-checkbox--disabled":a})},ue.a.createElement("input",{id:"target-db-is-partitioned",type:"checkbox",value:"true",checked:n,onChange:function(){r(!n)},disabled:a}),ue.a.createElement(Tt.h,{placement:"right",overlay:s},ue.a.createElement("label",{htmlFor:"target-db-is-partitioned"},"Partitioned"))))};mS.propTypes={onTargetDatabasePartitionedChange:et.a.func.isRequired,targetDatabasePartitioned:et.a.bool.isRequired,replicationTarget:et.a.string.isRequired,allowNewPartitionedLocalDbs:et.a.bool.isRequired};var hS=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),aS(this,iS(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sS(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.replicationTarget,n=e.onLocalTargetChange,r=e.onTargetChange,o=e.databases,a=e.localTarget,i=e.onRemoteTargetChange,s=e.remoteTarget,c=e.targetDatabasePartitioned,l=e.onTargetDatabasePartitionedChange,u=e.allowNewPartitionedLocalDbs;return ue.a.createElement("div",null,ue.a.createElement("h3",null,"Target"),ue.a.createElement(lS,{value:t,onChange:r}),ue.a.createElement(fS,{remoteTarget:s,replicationTarget:t,databases:o,localTarget:a,onRemoteTargetChange:i,onLocalTargetChange:n}),ue.a.createElement(mS,{replicationTarget:t,onTargetDatabasePartitionedChange:l,targetDatabasePartitioned:c,allowNewPartitionedLocalDbs:u}))}}])&&oS(n.prototype,r),o&&oS(n,o),t}(ue.a.Component);function yS(e){return(yS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gS(e,t){return!t||"object"!==yS(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ES(e){return(ES=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _S(e,t){return(_S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}hS.propTypes={databases:et.a.array.isRequired,onTargetChange:et.a.func.isRequired,onLocalTargetChange:et.a.func.isRequired,onRemoteTargetChange:et.a.func.isRequired,remoteTarget:et.a.string.isRequired,localTarget:et.a.string.isRequired,replicationTarget:et.a.string.isRequired};var vS=Zo.StyledSelect,OS=function(e){var t=e.value,n=e.onChange;return ue.a.createElement("div",{className:"replication__section"},ue.a.createElement("div",{className:"replication__input-label"},"Replication type:"),ue.a.createElement("div",{className:"replication__input-select"},ue.a.createElement(vS,{selectContent:[{value:GO.REPLICATION_TYPE.ONE_TIME,label:"One time"},{value:GO.REPLICATION_TYPE.CONTINUOUS,label:"Continuous"}].map((function(e){return ue.a.createElement("option",{value:e.value,key:e.value},e.label)})),selectChange:function(e){return n(e.target.value)},selectId:"replication-target",selectValue:t})))};OS.propTypes={value:et.a.string.isRequired,onChange:et.a.func.isRequired};var SS=function(e){var t=e.value,n=e.onChange;return ue.a.createElement("div",{className:"replication__section"},ue.a.createElement("div",{className:"replication__input-label"},"Replication document:"),ue.a.createElement("div",{className:"replication__doc-name"},ue.a.createElement("span",{className:"fonticon fonticon-cancel replication__doc-name-icon",title:"Clear field",onClick:function(){return n("")}}),ue.a.createElement("input",{type:"text",className:"replication__doc-name-input",placeholder:"Custom ID (optional)",value:t,onChange:function(e){return n(e.target.value)}})))};SS.propTypes={value:et.a.string.isRequired,onChange:et.a.func.isRequired};var DS=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),gS(this,ES(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_S(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.replicationType,n=e.replicationDocName,r=e.onDocChange,o=e.onTypeChange;return ue.a.createElement("div",null,ue.a.createElement("h3",null,"Options"),ue.a.createElement(OS,{onChange:o,value:t}),ue.a.createElement(SS,{onChange:r,value:n}))}}])&&bS(n.prototype,r),o&&bS(n,o),t}(ue.a.Component);DS.propTypes={replicationDocName:et.a.string.isRequired,replicationType:et.a.string.isRequired,onDocChange:et.a.func.isRequired,onTypeChange:et.a.func.isRequired};var NS=Zo.ConfirmButton,wS=function(e){var t=e.onClear,n=e.disabled,r=e.onClick;return ue.a.createElement("div",{className:"replication__button-row"},ue.a.createElement(NS,{customIcon:"fonticon-replicate",id:"replicate",text:"Start Replication",onClick:r,disabled:n}),ue.a.createElement("a",{className:"replication__clear-link",href:"#","data-bypass":"true",onClick:function(e){e.preventDefault(),t()}},"Clear"))};function TS(e){return(TS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function CS(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function IS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function AS(e,t,n){return t&&IS(e.prototype,t),n&&IS(e,n),e}function RS(e,t){return!t||"object"!==TS(t)&&"function"!=typeof t?LS(e):t}function PS(e){return(PS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function LS(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xS(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kS(e,t)}function kS(e,t){return(kS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}wS.propTypes={disabled:et.a.bool.isRequired,onClick:et.a.func.isRequired,onClear:et.a.func.isRequired};var jS=Zo.StyledSelect,US=function(e){function t(e){var n;return CS(this,t),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(LS(n=RS(this,PS(t).call(this,e))),"getAuthOptions",(function(){var e=ce.i18n.en_US["replication-user-password-auth-label"],t=[{value:GO.REPLICATION_AUTH_METHOD.NO_AUTH,label:"None"},{value:GO.REPLICATION_AUTH_METHOD.BASIC,label:e}];return n.customAuths.map((function(e){t.push({value:e.typeValue,label:e.typeLabel})})),t.map((function(e){return ue.a.createElement("option",{value:e.value,key:e.value},e.label)}))})),n.onChangeType=n.onChangeType.bind(LS(n)),n.onChangeValue=n.onChangeValue.bind(LS(n)),n.customAuths=ie.getExtensions("Replication:Auth"),n.customAuths||(n.customAuths=[]),n.customAuthTypes=n.customAuths.map((function(e){return e.typeValue})),n.customAuthHelp=ie.getExtensions("Replication:Auth-help"),n.customAuthHelp||(n.customAuthHelp=[]),n}return xS(t,e),AS(t,[{key:"onChangeType",value:function(e){this.props.onChangeAuthType(e)}},{key:"onChangeValue",value:function(e){this.props.onChangeAuth(e)}},{key:"getAuthInputFields",value:function(e,t){var n=this.props.authId;if(t==GO.REPLICATION_AUTH_METHOD.BASIC)return ue.a.createElement(MS,{onChange:this.onChangeValue,auth:e,authId:n});var r=this.customAuths.filter((function(e){return e.typeValue===t}));if(r&&r.length>0){var o=r[0].inputComponent;return ue.a.createElement(o,{onChange:this.onChangeValue,auth:e})}return null}},{key:"getHelpText",value:function(e){var t=this.customAuthHelp.filter((function(t){return e===t.authType})).map((function(e){return e.helpText}));return 0==t.length?null:ue.a.createElement("div",{className:"replication__section"},ue.a.createElement("div",{className:"replication__input-label"}),ue.a.createElement("div",{className:"replication__help-tile"},t[0]))}},{key:"render",value:function(){var e=this,t=this.props,n=t.credentials,r=t.authType,o=t.authId;return ue.a.createElement(ue.a.Fragment,null,ue.a.createElement("div",{className:"replication__section"},ue.a.createElement("div",{className:"replication__input-label"},"Authentication:"),ue.a.createElement("div",{className:"replication__input-select"},ue.a.createElement(jS,{selectContent:this.getAuthOptions(),selectChange:function(t){return e.onChangeType(t.target.value)},selectId:"select-"+o,selectValue:r}))),this.getAuthInputFields(n,r),this.getHelpText(r))}}]),t}(ue.a.Component);US.propTypes={authId:et.a.string.isRequired,authType:et.a.string.isRequired,credentials:et.a.object,onChangeAuth:et.a.func.isRequired,onChangeAuthType:et.a.func.isRequired},US.defaultProps={authType:GO.REPLICATION_AUTH_METHOD.NO_AUTH,onChangeAuthType:function(){},onChangeAuth:function(){}};var MS=function(e){function t(e){var n;return CS(this,t),(n=RS(this,PS(t).call(this,e))).updatePassword=n.updatePassword.bind(LS(n)),n.updateUsername=n.updateUsername.bind(LS(n)),n.state={username:e.auth&&e.auth.username?e.auth.username:"",password:e.auth&&e.auth.password?e.auth.password:""},n}return xS(t,e),AS(t,[{key:"updatePassword",value:function(e){this.setState({password:e}),this.props.onChange({username:this.state.username,password:e})}},{key:"updateUsername",value:function(e){this.setState({username:e}),this.props.onChange({username:e,password:this.state.password})}},{key:"render",value:function(){var e=this,t=ce.i18n.en_US["replication-username-input-placeholder"],n=ce.i18n.en_US["replication-password-input-placeholder"],r=this.props.authId;return ue.a.createElement(ue.a.Fragment,null,ue.a.createElement("div",{className:"replication__section"},ue.a.createElement("div",{className:"replication__input-label"}),ue.a.createElement("div",null,ue.a.createElement("input",{id:r+"-username",type:"text",placeholder:t,value:this.state.username,onChange:function(t){return e.updateUsername(t.target.value)},readOnly:this.props.usernameReadOnly}))),ue.a.createElement("div",{className:"replication__section"},ue.a.createElement("div",{className:"replication__input-label"}),ue.a.createElement("div",null,ue.a.createElement("input",{id:r+"-password",type:"password",placeholder:n,value:this.state.password,onChange:function(t){return e.updatePassword(t.target.value)}}))))}}]),t}(ue.a.Component);MS.propTypes={auth:et.a.object.isRequired,onChange:et.a.func.isRequired};var qS=Zo.ConfirmButton,VS=function(e){var t=e.visible,n=e.onClose,r=e.onClick,o=e.multipleDocs,a=e.isReplicationDB;if(!t)return null;var i="",s="Delete ".concat(a?"Document":"Replication Job"),c="Deleting a replication ".concat(a?"document":"job"," stops continuous replication\n          and incomplete one-time replication, but does not affect replicated documents.");return o>1&&(i="You are deleting <strong>".concat(o,"</strong> replication ").concat(a?"documents":"jobs","."),s="Delete ".concat(a?"Documents":"Replication Jobs")),ue.a.createElement(Tt.f,{dialogClassName:"replication_delete-doc-modal",show:t,onHide:function(){return n()}},ue.a.createElement(Tt.f.Header,{closeButton:!0},ue.a.createElement(Tt.f.Title,null,"Verify Deletion")),ue.a.createElement(Tt.f.Body,null,ue.a.createElement("p",{dangerouslySetInnerHTML:{__html:i}}),ue.a.createElement("p",null,c)),ue.a.createElement(Tt.f.Footer,null,ue.a.createElement("a",{className:"cancel-link",onClick:n},"Cancel"),ue.a.createElement(qS,{customIcon:"icon-trash",text:s,onClick:r})))};VS.propTypes={visible:et.a.bool.isRequired,isReplicationDB:et.a.bool.isRequired,onClick:et.a.func.isRequired,onClose:et.a.func.isRequired,multipleDocs:et.a.number.isRequired},VS.defaultProps={isReplicationDB:!0};var FS=function(e){var t=e.visible,n=e.onClose,r=e.errorMsg,o=e.status;if(!t)return null;var a="Replication Error",i=ue.a.createElement("p",null,"The replication job will be tried at increasing intervals");return"failed"===o.toLowerCase()&&(a="Replication Error - Failed",i=null),ue.a.createElement(Tt.f,{dialogClassName:"replication__error-doc-modal",show:t,onHide:function(){return n()}},ue.a.createElement(Tt.f.Header,{closeButton:!0},ue.a.createElement(Tt.f.Title,null,a)),ue.a.createElement(Tt.f.Body,null,ue.a.createElement("p",null,r),i),ue.a.createElement(Tt.f.Footer,null))};FS.propTypes={visible:et.a.bool.isRequired,onClick:et.a.func.isRequired,onClose:et.a.func.isRequired,errorMsg:et.a.string.isRequired};var BS=function(e){var t=e.visible,n=e.docId,r=e.onClose,o=e.onClick;return t?ue.a.createElement(Tt.f,{dialogClassName:"replication__error-doc-modal",show:t,onHide:function(){return r()}},ue.a.createElement(Tt.f.Header,{closeButton:!0},ue.a.createElement(Tt.f.Title,null,"Custom ID Conflict")),ue.a.createElement(Tt.f.Body,null,ue.a.createElement("p",null,"A replication document with ID ",ue.a.createElement("code",null,n)," already exists."),ue.a.createElement("p",null,"You can overwrite the existing document, or change the new replication job’s document ID."),ue.a.createElement("p",null,"If you overwrite the existing document, any replication job currently using the replication document will stop, and that job will not appear in Replicator DB Activity. Replicated documents will not be affected.")),ue.a.createElement(Tt.f.Footer,null,ue.a.createElement("button",{onClick:r,className:"btn replication__error-cancel"},"Change Document ID"),ue.a.createElement("button",{onClick:o,className:"btn replication__error-continue"},ue.a.createElement("i",{className:"icon icon-eraser"})," Overwrite Existing Document"))):null};function HS(e){return(HS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function KS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function GS(e){return(GS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function XS(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function WS(e,t){return(WS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}BS.propTypes={visible:et.a.bool.isRequired,onClick:et.a.func.isRequired,onClose:et.a.func.isRequired,docId:et.a.string.isRequired};var zS=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=GS(t).call(this,e))||"object"!==HS(o)&&"function"!=typeof o?XS(r):o).submit=n.submit.bind(XS(n)),n.checkAuth=n.checkAuth.bind(XS(n)),n.runReplicationChecks=n.runReplicationChecks.bind(XS(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&WS(e,t)}(t,e),n=t,(r=[{key:"checkAuth",value:function(){var e=this;this.props.hideConflictModal();var t=this.props,n=t.replicationSource,r=t.replicationTarget,o=t.sourceAuthType,a=t.targetAuthType,i=t.sourceAuth,s=t.targetAuth,c=n===GO.REPLICATION_SOURCE.LOCAL,l=r===GO.REPLICATION_TARGET.EXISTING_LOCAL_DATABASE||r===GO.REPLICATION_TARGET.NEW_LOCAL_DATABASE;if(!ie.session.isAdminParty()){if(c&&o===GO.REPLICATION_AUTH_METHOD.NO_AUTH)return void ie.addNotification({msg:"Missing credentials for local source database.",type:"error",clear:!0});if(l&&a===GO.REPLICATION_AUTH_METHOD.NO_AUTH)return void ie.addNotification({msg:"Missing credentials for local target database.",type:"error",clear:!0})}this.checkLocalAccountCredentials(o,i,"source",c).then((function(){e.checkLocalAccountCredentials(a,s,"target",l).then((function(){e.submit()}),(function(){}))}),(function(){}))}},{key:"checkLocalAccountCredentials",value:function(e,t,n,r){if(e!==GO.REPLICATION_AUTH_METHOD.BASIC||!r)return ie.Promise.resolve(!0);if(!t.username||!t.password){var o="Missing ".concat(n," credentials.");return ie.addNotification({msg:o,type:"error",clear:!0}),ie.Promise.reject(new Error(o))}return this.checkCredentials(t.username,t.password).then((function(e){if(e.error)throw e;return!0})).catch((function(e){throw ie.addNotification({msg:"Your username or password for ".concat(n," database is incorrect."),type:"error",clear:!0}),e}))}},{key:"checkCredentials",value:function(e,t){return E(I.getServerUrl("/"),"GET",{credentials:"omit",headers:{Authorization:"Basic "+KO.a.encode(e+":"+t)}})}},{key:"checkReplicationDocID",value:function(){var e=this,t=this.props,n=t.showConflictModal,r=t.replicationDocName,o=t.checkReplicationDocID;o(r).then((function(t){t?n():e.checkAuth()}))}},{key:"runReplicationChecks",value:function(){var e=this.props.replicationDocName;this.checkSourceTargetDatabases()&&(e?this.checkReplicationDocID():this.checkAuth())}},{key:"checkSourceTargetDatabases",value:function(){var e=this.props,t=e.remoteTarget,n=e.remoteSource,r=e.replicationSource,o=e.replicationTarget,a=e.localTarget,s=e.localSource,c=e.databases;if(o===GO.REPLICATION_TARGET.NEW_LOCAL_DATABASE&&-1!==_.indexOf(c,a))return ie.addNotification({msg:"The <code>"+a+"</code> database already exists locally. Please enter another database name.",type:"error",escape:!1,clear:!0}),!1;if(o===GO.REPLICATION_TARGET.NEW_LOCAL_DATABASE||o===GO.REPLICATION_TARGET.NEW_REMOTE_DATABASE){var l="";if(/\s/.test(a)?l="The target database may not contain any spaces.":/^_/.test(a)&&(l="The target database may not start with an underscore."),l)return ie.addNotification({msg:l,type:"error",escape:!1,clear:!0}),!1}if(r===GO.REPLICATION_SOURCE.REMOTE&&!Object(i.isEmpty)(n)){var u="";try{""===new URL(n).pathname.slice(1)&&(u="Invalid source database URL. Database name is missing.")}catch(e){u="Invalid source database URL."}if(u)return ie.addNotification({msg:u,type:"error",escape:!1,clear:!0}),!1}if((o===GO.REPLICATION_TARGET.NEW_REMOTE_DATABASE||o===GO.REPLICATION_TARGET.EXISTING_REMOTE_DATABASE)&&!Object(i.isEmpty)(t)){var d="";try{""===new URL(t).pathname.slice(1)&&(d="Invalid target database URL. Database name is missing.")}catch(e){d="Invalid target database URL."}if(d)return ie.addNotification({msg:d,type:"error",escape:!1,clear:!0}),!1}return!(t===n&&!Object(i.isEmpty)(t)||s===a&&!Object(i.isEmpty)(s))||(ie.addNotification({msg:"Cannot replicate a database to itself",type:"error",escape:!1,clear:!0}),!1)}},{key:"submit",value:function(){var e,t=this.props,n=t.replicationTarget,r=t.replicationSource,o=t.replicationType,a=t.replicationDocName,i=t.remoteTarget,s=t.remoteSource,c=t.localTarget,l=t.localSource,u=t.sourceAuthType,d=t.sourceAuth,p=t.targetAuthType,f=t.targetAuth,m=t.targetDatabasePartitioned;if(a){var h=this.props.docs.find((function(e){return e._id===a}));h&&(e=h._rev)}this.props.replicate({replicationTarget:n,replicationSource:r,replicationType:o,replicationDocName:a,localTarget:c,localSource:l,remoteTarget:i,remoteSource:s,_rev:e,sourceAuthType:u,sourceAuth:d,targetAuthType:p,targetAuth:f,targetDatabasePartitioned:m})}},{key:"confirmButtonEnabled",value:function(){var e=this.props,t=e.remoteSource,n=e.localSourceKnown,r=e.replicationSource,o=e.replicationTarget,a=e.localTargetKnown,i=e.localTarget;return!(e.submittedNoChange||!r||!o||r===GO.REPLICATION_SOURCE.LOCAL&&!n||o===GO.REPLICATION_TARGET.EXISTING_LOCAL_DATABASE&&!a||o===GO.REPLICATION_TARGET.NEW_LOCAL_DATABASE&&!i||r===GO.REPLICATION_SOURCE.REMOTE&&""===t)}},{key:"render",value:function(){var e=this.props,t=e.replicationSource,n=e.replicationTarget,r=e.replicationType,o=e.replicationDocName,a=e.conflictModalVisible,i=e.databases,s=e.localSource,c=e.remoteSource,l=e.remoteTarget,u=e.localTarget,d=e.targetDatabasePartitioned,p=e.allowNewPartitionedLocalDbs,f=e.updateFormField,m=e.clearReplicationForm,h=e.sourceAuthType,y=e.sourceAuth,b=e.targetAuthType,g=e.targetAuth;return ue.a.createElement("div",{style:{paddingBottom:20}},ue.a.createElement(nS,{replicationSource:t,localSource:s,databases:i,remoteSource:c,onSourceSelect:f("replicationSource"),onRemoteSourceChange:f("remoteSource"),onLocalSourceChange:f("localSource")}),ue.a.createElement(US,{credentials:y,authType:h,onChangeAuthType:f("sourceAuthType"),onChangeAuth:f("sourceAuth"),authId:"replication-source-auth"}),ue.a.createElement("hr",{className:"replication__seperator",size:"1"}),ue.a.createElement(hS,{replicationTarget:n,onTargetChange:f("replicationTarget"),databases:i,localTarget:u,remoteTarget:l,allowNewPartitionedLocalDbs:p,targetDatabasePartitioned:d,onRemoteTargetChange:f("remoteTarget"),onLocalTargetChange:f("localTarget"),onTargetDatabasePartitionedChange:f("targetDatabasePartitioned")}),ue.a.createElement(US,{credentials:g,authType:b,onChangeAuthType:f("targetAuthType"),onChangeAuth:f("targetAuth"),authId:"replication-target-auth"}),ue.a.createElement("hr",{className:"replication__seperator",size:"1"}),ue.a.createElement(DS,{replicationType:r,replicationDocName:o,onDocChange:f("replicationDocName"),onTypeChange:f("replicationType")}),ue.a.createElement(wS,{disabled:!this.confirmButtonEnabled(),onClick:this.runReplicationChecks,onClear:m}),ue.a.createElement(BS,{visible:a,onClick:this.checkAuth,onClose:this.props.hideConflictModal,docId:o}))}}])&&KS(n.prototype,r),o&&KS(n,o),t}(ue.a.Component);function YS(e){return(YS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var QS=null,ZS=function(e){return QS&&!e||(QS=new ie.Promise((function(e){var t=I.getServerUrl("/_scheduler/jobs");v(t,{raw:!0}).then((function(t){if(t.status>202)return e(!1);e(!0)}))}))),QS},JS=function(e){if(!e)return"";var t=new URL(e);return"".concat(t.origin,"/").concat(encodeURIComponent(t.pathname.slice(1)))},$S=function(e){if(!e)return"";var t=new URL(e);return"".concat(t.origin,"/").concat(decodeURIComponent(t.pathname.slice(1)))},eD=function(e){var t=e.lastIndexOf("@");return-1===t?e:(e.startsWith("https")?"https://":"http://")+e.slice(t+1)},tD=function(e){var t=e.replicationSource,n=e.localSource,r=e.remoteSource,o=e.sourceAuthType,a=e.sourceAuth,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location,s=i.origin,c=i.pathname,l={};if(t===GO.REPLICATION_SOURCE.LOCAL){var u=encodeURIComponent(n),d=I.getRootUrl({origin:s,pathname:c});l.url="".concat(d).concat(u)}else l.url=JS(eD(r));return rD(l,o,a),l},nD=function(e){var t=e.replicationTarget,n=e.localTarget,r=e.remoteTarget,o=e.targetAuthType,a=e.targetAuth,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location,s=i.origin,c=i.pathname,l={};if(t===GO.REPLICATION_TARGET.NEW_REMOTE_DATABASE||t===GO.REPLICATION_TARGET.EXISTING_REMOTE_DATABASE)l.url=JS(eD(r));else{var u=encodeURIComponent(n),d=I.getRootUrl({origin:s,pathname:c});l.url="".concat(d).concat(u)}return rD(l,o,a),l},rD=function(e,t,n){if(t&&t!==GO.REPLICATION_AUTH_METHOD.NO_AUTH)if(t===GO.REPLICATION_AUTH_METHOD.BASIC)e.headers=(o=n.username,a=n.password,o&&a?{Authorization:"Basic "+KO.a.encode(o+":"+a)}:{});else{var r=ie.getExtensions("Replication:Auth");r&&r.filter((function(e){return e.typeValue===t})).map((function(t){t.setCredentials&&t.setCredentials(e,n)}))}else e.headers={};var o,a},oD=function(e){return-1!==s.a.indexOf([GO.REPLICATION_TARGET.NEW_LOCAL_DATABASE,GO.REPLICATION_TARGET.NEW_REMOTE_DATABASE],e)},aD=function(e){return e===GO.REPLICATION_TYPE.CONTINUOUS},iD=function(e){var t=e.replicationTarget,n=e.replicationSource,r=e.replicationType,o=e.replicationDocName,a=e.localTarget,i=e.localSource,s=e.remoteTarget,c=e.remoteSource,l=e._rev,u=e.sourceAuthType,d=e.sourceAuth,p=e.targetAuthType,f=e.targetAuth,m=e.targetDatabasePartitioned,h={user_ctx:{name:ie.session.user().name,roles:["_admin","_reader","_writer"]},source:tD({replicationSource:n,localSource:i,remoteSource:c,sourceAuthType:u,sourceAuth:d}),target:nD({replicationTarget:t,replicationSource:n,remoteTarget:s,localTarget:a,targetAuthType:p,targetAuth:f}),create_target:oD(t),continuous:aD(r)};return m&&(h.create_target_params={partitioned:!0}),function(e,t,n){return e&&(n._id=e),t&&(n._rev=t),n}(o,l,h)},sD=function(e){var t=e;return e?("object"===YS(e)&&(t=e.url),function(e){try{var t=new URL(e);return"".concat(t.origin,"/").concat(decodeURIComponent(t.pathname.slice(1)))}catch(t){return e}}(t)):""},cD=function(e){return"error"===e.toLowerCase()||"crashing"===e.toLowerCase()?"retrying":e},lD=function(){return ZS().then((function(e){var t=I.getServerUrl("/_replicator/_all_docs?include_docs=true&limit=100"),n=v(t).then((function(e){return e.error?[]:e.rows.filter((function(e){return-1===e.id.indexOf("_design/")})).map((function(e){return e.doc})).map((function(e){return{_id:e._id,_rev:e._rev,selected:!1,source:sD(e.source),target:sD(e.target),createTarget:e.create_target,continuous:!0===e.continuous,status:e._replication_state,errorMsg:e._replication_state_reason?e._replication_state_reason:"",statusTime:new Date(e._replication_state_time),startTime:new Date(e._replication_start_time),url:"#/database/_replicator/".concat(encodeURIComponent(e._id)),raw:e}}))}));if(!e)return n;var r=uD();return ie.Promise.join(n,r,(function(e,t){return function(e,t){return e.map((function(e){var n=t.find((function(t){return t.doc_id===e._id}));return n?(e.status=cD(n.state),n.start_time&&(e.startTime=new Date(n.start_time)),n.last_updated&&(e.stateTime=new Date(n.last_updated)),e):e}))}(e,t)})).catch((function(){return[]}))}))},uD=function(){var e=I.getServerUrl("/_scheduler/docs?include_docs=true");return v(e).then((function(e){return e.error?[]:e.docs}))},dD=function(e){return new Promise((function(t){var n=I.getServerUrl("/_replicator/".concat(e));v(n).then((function(e){"not_found"!==e.error?t(!0):t(!1)}))}))},pD=function(){return ZS().then((function(e){if(!e)return[];var t=I.getServerUrl("/_scheduler/jobs");return v(t).then((function(e){return function(e){return e.jobs.filter((function(e){return null===e.database})).map((function(e){return{_id:e.id,source:sD(e.source.slice(0,e.source.length-1)),target:sD(e.target.slice(0,e.target.length-1)),startTime:new Date(e.start_time),statusTime:new Date(e.last_updated),status:cD(e.history[0].type),errorMsg:"",selected:!1,continuous:/continuous/.test(e.id),raw:e}}))}(e)}))}))};function fD(e){return(fD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mD(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yD(e,t,n){return t&&hD(e.prototype,t),n&&hD(e,n),e}function bD(e,t){return!t||"object"!==fD(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gD(e){return(gD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ED(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_D(e,t)}function _D(e,t){return(_D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var vD=function(e){var t,n;try{t=new URL(eD(e))}catch(e){return""}var r=I.getRootUrl();return n=function(e,t){try{var n=new URL(t),r=e.pathname.substring(n.pathname.length);return encodeURIComponent(r)}catch(e){return""}}(t,r),e.indexOf(window.location.hostname)>-1?ue.a.createElement("span",null,r,ue.a.createElement("a",{href:"#/database/".concat(n,"/_all_docs")},decodeURIComponent(n))):"".concat(t.origin).concat(t.pathname)},OD=function(e){function t(e){var n;return mD(this,t),(n=bD(this,gD(t).call(this,e))).state={modalVisible:!1},n}return ED(t,e),yD(t,[{key:"showModal",value:function(){this.setState({modalVisible:!0})}},{key:"closeModal",value:function(){this.setState({modalVisible:!1})}},{key:"getErrorIcon",value:function(){var e=this.props.status;return"error"!==e&&"retrying"!==e?null:ue.a.createElement("span",null,ue.a.createElement("a",{"data-bypass":"true",className:"replication__row-btn replication__row-btn--warning icon-exclamation-sign",onClick:this.showModal.bind(this),title:"View error message"}),ue.a.createElement(FS,{onClick:this.closeModal.bind(this),onClose:this.closeModal.bind(this),errorMsg:this.props.errorMsg,visible:this.state.modalVisible,status:e}))}},{key:"render",value:function(){var e=this.props,t=e.statusTime,n=e.status,r=m()(t),o=ue.a.createElement("span",null,n);if(r.isValid()){var a=r.format("MMM Do, h:mm a"),i=ue.a.createElement(Tt.k,{id:""},"Last updated: ",a);o=ue.a.createElement(Tt.h,{placement:"top",overlay:i},ue.a.createElement("span",null,n))}return ue.a.createElement("td",{className:"replication__row-status replication__row-status--".concat(n)},o,this.getErrorIcon())}}]),t}(ue.a.Component);OD.propTypes={statusTime:et.a.any,status:et.a.string,errorMsg:et.a.string.isRequired},OD.defaultProps={status:""};var SD=function(e){var t=e.onlyDeleteAction,n=e._id,r=e.url,o=e.deleteDocs,a=[];return t||(a.push(ue.a.createElement("li",{className:"replication__row-list",key:1},ue.a.createElement("a",{href:"#replication/id/".concat(encodeURIComponent(n)),className:"replication__row-btn icon-wrench replication__row-btn--no-left-pad",title:"Edit replication","data-bypass":"true"}))),a.push(ue.a.createElement("li",{className:"replication__row-list",key:2},ue.a.createElement("a",{className:"replication__row-btn fonticon-document",title:"Edit replication document",href:r,"data-bypass":"true"})))),a.push(ue.a.createElement("li",{className:"replication__row-list",key:3},ue.a.createElement("a",{className:"replication__row-btn icon-trash ".concat(t?"replication__row-btn--no-left-pad":""," "),title:"Delete ".concat(t?"job":"document"," ").concat(n),onClick:function(){return o(n)}}))),ue.a.createElement("ul",{className:"replication__row-actions-list"},a)};SD.propTypes={_id:et.a.string.isRequired,url:et.a.string,error:et.a.bool.isRequired,errorMsg:et.a.string.isRequired,deleteDocs:et.a.func.isRequired};var DD=function(e){var t=e._id,n=e.source,r=e.target,o=e.type,a=e.startTime,i=e.status,s=e.statusTime,c=e.url,l=e.selected,u=e.selectDoc,d=e.errorMsg,p=e.deleteDocs,f=e.onlyDeleteAction,h=e.showStateRow,y=m()(a),b=y.isValid()?y.format("MMM Do, h:mm a"):"",g=null;return h&&(g=ue.a.createElement(OD,{statusTime:s,status:i,errorMsg:d})),ue.a.createElement("tr",{className:"replication__table-row"},ue.a.createElement("td",{className:"replication__table-col"},ue.a.createElement("input",{checked:l,type:"checkbox",onChange:function(){return u(t)}})," "),ue.a.createElement("td",{className:"replication__table-col"},vD(n)),ue.a.createElement("td",{className:"replication__table-col"},vD(r)),ue.a.createElement("td",{className:"replication__table-col"},b),ue.a.createElement("td",{className:"replication__table-col"},o),g,ue.a.createElement("td",{className:"replication__table-col"},ue.a.createElement(SD,{onlyDeleteAction:f,deleteDocs:p,_id:t,url:c,error:"error"===i||"retrying"===i,errorMsg:d})))};DD.propTypes={_id:et.a.string.isRequired,source:et.a.string.isRequired,target:et.a.string.isRequired,type:et.a.string.isRequired,status:et.a.string,url:et.a.string,statusTime:et.a.object.isRequired,startTime:et.a.object,selected:et.a.bool.isRequired,selectDoc:et.a.func.isRequired,errorMsg:et.a.string.isRequired,deleteDocs:et.a.func.isRequired,onlyDeleteAction:et.a.bool.isRequired,showStateRow:et.a.bool.isRequired};var ND=function(e){var t=e.isSelected,n=e.deleteDocs,r=e.someDocsSelected,o=e.onCheck,a=r?ue.a.createElement("button",{onClick:function(){return n()},className:"bulk-select-trash fonticon fonticon-trash",title:"Delete all selected"}):null;return ue.a.createElement("div",{className:"replication__bulk-select-wrapper"},ue.a.createElement("div",{className:"replication__bulk-select-header"},ue.a.createElement("input",{className:"replication__bulk-select-input",checked:t,type:"checkbox",onChange:o})),a)};ND.propTypes={isSelected:et.a.bool.isRequired,someDocsSelected:et.a.bool.isRequired,onCheck:et.a.func.isRequired,deleteDocs:et.a.func.isRequired};var wD=function(e){var t=e.msg;return ue.a.createElement("tr",null,ue.a.createElement("td",{colSpan:"7",className:"replication__empty-row"},t))};wD.defaultProps={msg:"There is no replicator-db activity or history to display."};var TD=function(e){function t(e){return mD(this,t),bD(this,gD(t).call(this,e))}return ED(t,e),yD(t,[{key:"sort",value:function(e,t,n){var r=!1,o=n.sort((function(t,n){return t[e]<n[e]?(r=!0,-1):t[e]>n[e]?(r=!0,1):0}));return!t&&r&&o.reverse(),o}},{key:"renderRows",value:function(){var e=this;return 0===this.props.docs.length?ue.a.createElement(wD,null):this.sort(this.props.column,this.props.descending,this.props.docs).map((function(t,n){return ue.a.createElement(DD,{key:n,_id:t._id,selected:t.selected,selectDoc:e.props.selectDoc,source:t.source,target:t.target,type:!0===t.continuous?"Continuous":"One time",status:t.status,statusTime:t.statusTime,startTime:t.startTime,url:t.url,deleteDocs:e.props.deleteDocs,errorMsg:t.errorMsg,doc:t,onlyDeleteAction:e.props.onlyDeleteAction,showStateRow:e.props.showStateRow})}))}},{key:"iconDirection",value:function(e){return e!==this.props.column||this.props.descending?"fonticon-down-dir":"fonticon-up-dir"}},{key:"onSort",value:function(e){var t=this;return function(){t.props.changeSort({descending:e!==t.props.column||!t.props.descending,column:e})}}},{key:"isSelected",value:function(e){return e===this.props.column?"replication__table--selected":""}},{key:"stateCol",value:function(){return this.props.showStateRow?ue.a.createElement("th",{className:"replication__table-header-status",onClick:this.onSort("status")},"State",ue.a.createElement("span",{className:"replication__table-header-icon ".concat(this.iconDirection("status")," ").concat(this.isSelected("status"))})):null}},{key:"render",value:function(){return ue.a.createElement(Tt.j,{striped:!0},ue.a.createElement("thead",null,ue.a.createElement("tr",null,ue.a.createElement("th",{className:"replication__table-bulk-select"},ue.a.createElement(ND,{isSelected:this.props.allDocsSelected,onCheck:this.props.selectAllDocs,someDocsSelected:this.props.someDocsSelected,deleteDocs:this.props.deleteDocs})),ue.a.createElement("th",{className:"replication__table-header-source",onClick:this.onSort("source")},"Source",ue.a.createElement("span",{className:"replication__table-header-icon ".concat(this.iconDirection("source")," ").concat(this.isSelected("source"))})),ue.a.createElement("th",{className:"replication__table-header-target",onClick:this.onSort("target")},"Target",ue.a.createElement("span",{className:"replication__table-header-icon ".concat(this.iconDirection("target")," ").concat(this.isSelected("target"))})),ue.a.createElement("th",{className:"replication__table-header-time",onClick:this.onSort("statusTime")},"Start Time",ue.a.createElement("span",{className:"replication__table-header-icon ".concat(this.iconDirection("statusTime")," ").concat(this.isSelected("statusTime"))})),ue.a.createElement("th",{className:"replication__table-header-type",onClick:this.onSort("continuous")},"Type",ue.a.createElement("span",{className:"replication__table-header-icon ".concat(this.iconDirection("continuous")," ").concat(this.isSelected("continuous"))})),this.stateCol(),ue.a.createElement("th",{className:"replication__table-header-actions"},"Actions"))),ue.a.createElement("tbody",null,this.renderRows()))}}]),t}(ue.a.Component);TD.defaultProps={onlyDeleteAction:!1,showStateRow:!0};var CD=function(e){var t=e.value,n=e.onChange;return ue.a.createElement("div",{className:"replication__filter"},ue.a.createElement("i",{className:"replication__filter-icon fonticon-filter"}),ue.a.createElement("input",{type:"text",placeholder:"Filter replications",className:"replication__filter-input",value:t,onChange:function(e){n(e.target.value)}}))};CD.propTypes={value:et.a.string.isRequired,onChange:et.a.func.isRequired};var ID=function(e){var t=e.filter,n=e.onFilterChange;return ue.a.createElement("div",{className:"replication__activity_header"},ue.a.createElement("div",null),ue.a.createElement(CD,{value:t,onChange:n}),ue.a.createElement("a",{href:"#/replication/_create",className:"btn save replication__activity_header-btn btn-primary"},ue.a.createElement("i",{className:"icon fonticon-plus-circled"}),"New Replication"))};function AD(e){return(AD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function RD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function PD(e,t){return!t||"object"!==AD(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function LD(e){return(LD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xD(e,t){return(xD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}ID.propTypes={filter:et.a.string.isRequired,onFilterChange:et.a.func.isRequired};var kD=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=PD(this,LD(t).call(this,e))).state={modalVisible:!1,unconfirmedDeleteDocId:null},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xD(e,t)}(t,e),n=t,(r=[{key:"closeModal",value:function(){this.setState({modalVisible:!1,unconfirmedDeleteDocId:null})}},{key:"showModal",value:function(e){this.setState({modalVisible:!0,unconfirmedDeleteDocId:e})}},{key:"confirmDeleteDocs",value:function(){var e=this,t=[];if(this.state.unconfirmedDeleteDocId){var n=this.props.docs.find((function(t){return t._id===e.state.unconfirmedDeleteDocId}));t.push(n)}else t=this.props.docs.filter((function(e){return e.selected}));this.props.deleteDocs(t),this.closeModal()}},{key:"numDocsSelected",value:function(){return this.props.docs.filter((function(e){return e.selected})).length}},{key:"render",value:function(){var e=this.props,t=e.onFilterChange,n=e.activitySort,r=e.changeActivitySort,o=e.docs,a=e.filter,i=e.selectAllDocs,s=e.someDocsSelected,c=e.allDocsSelected,l=e.selectDoc,u=this.state.modalVisible;return ue.a.createElement("div",{className:"replication__activity"},ue.a.createElement("p",{className:"replication__activity-caveat"},"Replications must have a replication document to display in the following table."),ue.a.createElement(ID,{filter:a,onFilterChange:t}),ue.a.createElement(TD,{someDocsSelected:s,allDocsSelected:c,selectAllDocs:i,docs:o,selectDoc:l,deleteDocs:this.showModal.bind(this),descending:n.descending,column:n.column,changeSort:r}),ue.a.createElement(VS,{isReplicationDB:!0,multipleDocs:this.numDocsSelected(),visible:u,onClose:this.closeModal.bind(this),onClick:this.confirmDeleteDocs.bind(this)}))}}])&&RD(n.prototype,r),o&&RD(n,o),t}(ue.a.Component);function jD(e){return(jD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function UD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function MD(e,t){return!t||"object"!==jD(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qD(e){return(qD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function VD(e,t){return(VD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}kD.propTypes={docs:et.a.array.isRequired,filter:et.a.string.isRequired,selectAllDocs:et.a.func.isRequired,allDocsSelected:et.a.bool.isRequired,someDocsSelected:et.a.bool.isRequired,selectDoc:et.a.func.isRequired,onFilterChange:et.a.func.isRequired,deleteDocs:et.a.func.isRequired,activitySort:et.a.object.isRequired,changeActivitySort:et.a.func.isRequired};var FD=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=MD(this,qD(t).call(this,e))).state={modalVisible:!1,unconfirmedDeleteDocId:null},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&VD(e,t)}(t,e),n=t,(r=[{key:"closeModal",value:function(){this.setState({modalVisible:!1,unconfirmedDeleteDocId:null})}},{key:"showModal",value:function(e){this.setState({modalVisible:!0,unconfirmedDeleteDocId:e})}},{key:"confirmDeleteDocs",value:function(){var e=this,t=[];if(this.state.unconfirmedDeleteDocId){var n=this.props.docs.find((function(t){return t._id===e.state.unconfirmedDeleteDocId}));t.push(n)}else t=this.props.docs.filter((function(e){return e.selected}));this.props.deleteDocs(t),this.closeModal()}},{key:"numDocsSelected",value:function(){return this.props.docs.filter((function(e){return e.selected})).length}},{key:"render",value:function(){var e=this.props,t=e.onFilterChange,n=e.activitySort,r=e.changeActivitySort,o=e.docs,a=e.filter,i=e.selectAllDocs,s=e.someDocsSelected,c=e.allDocsSelected,l=e.selectDoc,u=this.state.modalVisible;return ue.a.createElement("div",{className:"replication__activity"},ue.a.createElement("p",{className:"replication__activity-caveat"},"Active _replicate jobs are displayed. Completed and failed jobs are not."),ue.a.createElement(ID,{filter:a,onFilterChange:t}),ue.a.createElement(TD,{onlyDeleteAction:!0,showStateRow:!1,someDocsSelected:s,allDocsSelected:c,selectAllDocs:i,docs:o,selectDoc:l,deleteDocs:this.showModal.bind(this),descending:n.descending,column:n.column,changeSort:r}),ue.a.createElement(VS,{isReplicationDB:!1,multipleDocs:this.numDocsSelected(),visible:u,onClose:this.closeModal.bind(this),onClick:this.confirmDeleteDocs.bind(this)}))}}])&&UD(n.prototype,r),o&&UD(n,o),t}(ue.a.Component);function BD(e){return(BD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function HD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function KD(e,t){return!t||"object"!==BD(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function GD(e){return(GD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function XD(e,t){return(XD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}FD.propTypes={docs:et.a.array.isRequired,filter:et.a.string.isRequired,selectAllDocs:et.a.func.isRequired,allDocsSelected:et.a.bool.isRequired,someDocsSelected:et.a.bool.isRequired,selectDoc:et.a.func.isRequired,onFilterChange:et.a.func.isRequired,deleteDocs:et.a.func.isRequired,activitySort:et.a.object.isRequired,changeActivitySort:et.a.func.isRequired};var WD=Zo.LoadLines,zD=Zo.Polling,YD=Zo.RefreshBtn,QD=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),KD(this,GD(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&XD(e,t)}(t,e),n=t,(r=[{key:"loadReplicationInfo",value:function(e,t){this.props.initReplicator(e.routeLocalSource,e.localSource),this.getAllActivity(),this.loadReplicationStateFrom(e,t)}},{key:"loadReplicationStateFrom",value:function(e,t){e.replicationId&&e.replicationId!==t.replicationId&&(this.props.clearReplicationForm(),this.props.getReplicationStateFrom(e.replicationId))}},{key:"getAllActivity",value:function(){this.props.getReplicationActivity(),this.props.getReplicateActivity()}},{key:"componentDidMount",value:function(){this.props.checkForNewApi(),this.props.getDatabasesList(),this.loadReplicationInfo(this.props,{})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.loadReplicationStateFrom(e,this.props),"new replication"!==this.props.tabSection&&"new replication"===e.tabSection&&this.props.clearReplicationForm()}},{key:"componentWillUnmount",value:function(){this.props.clearReplicationForm()}},{key:"showSection",value:function(){var e=this.props,t=e.replicationSource,n=e.replicationTarget,r=e.replicationType,o=e.replicationDocName,a=e.databases,i=e.localSource,s=e.remoteSource,c=e.remoteTarget,l=e.localTarget,u=e.statusDocs,d=e.statusFilter,p=e.loading,f=e.allDocsSelected,m=e.someDocsSelected,h=e.showConflictModal,y=e.localSourceKnown,b=e.localTargetKnown,g=e.updateFormField,E=e.authenticated,_=e.activityLoading,v=e.submittedNoChange,O=e.activitySort,S=e.tabSection,D=e.replicateInfo,N=e.replicateLoading,w=e.replicateFilter,T=e.allReplicateSelected,C=e.someReplicateSelected,I=e.hideConflictModal,A=e.isConflictModalVisible,R=e.filterDocs,P=e.filterReplicate,L=e.replicate,x=e.clearReplicationForm,k=e.selectAllDocs,j=e.changeActivitySort,U=e.selectDoc,M=e.deleteDocs,q=e.deleteReplicates,V=e.selectAllReplicates,F=e.selectReplicate,B=e.sourceAuthType,H=e.sourceAuth,K=e.targetAuthType,G=e.targetAuth,X=e.targetDatabasePartitioned,W=e.allowNewPartitionedLocalDbs;return"new replication"===S?p?ue.a.createElement(WD,null):ue.a.createElement(zS,{docs:u,localTargetKnown:b,localSourceKnown:y,clearReplicationForm:x,replicate:L,replicationSource:t,replicationTarget:n,replicationType:r,replicationDocName:o,databases:a,localSource:i,remoteSource:s,remoteTarget:c,localTarget:l,sourceAuthType:B,sourceAuth:H,targetAuthType:K,targetAuth:G,targetDatabasePartitioned:X,allowNewPartitionedLocalDbs:W,updateFormField:g,conflictModalVisible:A,hideConflictModal:I,showConflictModal:h,checkReplicationDocID:dD,authenticated:E,submittedNoChange:v}):"_replicate"===S?N?ue.a.createElement(WD,null):ue.a.createElement(FD,{docs:D,filter:w,onFilterChange:P,selectDoc:F,selectAllDocs:V,allDocsSelected:T,someDocsSelected:C,activitySort:O,changeActivitySort:j,deleteDocs:q}):_?ue.a.createElement(WD,null):ue.a.createElement(kD,{docs:u,filter:d,onFilterChange:R,selectAllDocs:k,selectDoc:U,allDocsSelected:f,someDocsSelected:m,deleteDocs:M,activitySort:O,changeActivitySort:j})}},{key:"getHeaderComponents",value:function(){if("new replication"===this.props.tabSection)return null;var e="right-header-flex";return I.isIE1X()&&(e+=" "+e+"--ie1X"),ue.a.createElement("div",{className:e},ue.a.createElement(zD,{min:60,max:600,startValue:300,stepSize:60,onPoll:this.getAllActivity.bind(this)}),ue.a.createElement(YD,{refresh:this.getAllActivity.bind(this)}))}},{key:"getTabElements",value:function(){var e=this.props.tabSection,t=[ue.a.createElement(fo,{key:1,selected:"activity"===e,text:"Replicator DB Activity",onChange:this.onTabChange.bind(this,"activity","#/replication")})];return this.props.supportNewApi&&t.push(ue.a.createElement(fo,{key:2,selected:"_replicate"===e,text:"_replicate Activity",onChange:this.onTabChange.bind(this,"_replicate","#/replication/_replicate")})),t}},{key:"onTabChange",value:function(e,t){ie.navigate(t)}},{key:"getCrumbs",value:function(){return"new replication"===this.props.tabSection?[{name:"Job Configuration"}]:[{name:"Replication"}]}},{key:"getTabs",value:function(){return"new replication"===this.props.tabSection?null:ue.a.createElement(ho,null,this.getTabElements())}},{key:"render",value:function(){return this.props.checkingAPI?ue.a.createElement(WD,null):ue.a.createElement(gt,null,ue.a.createElement(Et,{crumbs:this.getCrumbs()},this.getHeaderComponents()),ue.a.createElement(_t,null,ue.a.createElement("div",{className:"template-content flex-body flex-layout flex-col"},this.getTabs(),ue.a.createElement("div",{className:"replication__page flex-layout flex-col"},this.showSection()))))}}])&&HD(n.prototype,r),o&&HD(n,o),t}(ue.a.Component),ZD="INIT_REPLICATION",JD="REPLICATION_DATABASES_LOADED",$D="REPLICATION_UPDATE_FORM_FIELD",eN="REPLICATION_CLEAR_FORM",tN="REPLICATION_STARTING",nN="REPLICATION_STATUS",rN="REPLICATION_FETCHING_STATUS",oN="REPLICATION_FILTER_DOCS",aN="REPLICATION_TOGGLE_ALL_DOCS",iN="REPLICATION_TOGGLE_DOC",sN="REPLICATION_SET_STATE_FROM_DOC",cN="REPLICATION_SHOW_CONFLICT_MODAL",lN="REPLICATION_HIDE_CONFLICT_MODAL",uN="REPLICATION_CHANGE_ACTIVITY_SORT",dN="REPLICATION_CLEAR_SELECTED_DOCS",pN="REPLICATION_CHANGE_TAB_SECTION",fN="REPLICATION_FETCHING_REPLICATE_STATUS",mN="REPLICATION_REPLICATE_STATUS",hN="REPLICATION_SUPPORT_NEW_API",yN="REPLICATION_FILTER_REPLICATE",bN="REPLICATION_TOGGLE_ALL_REPLICATE",gN="REPLICATION_TOGGLE_REPLICATE",EN="REPLICATION_CLEAR_SELECTED_REPLICATES",_N="REPLICATION_FETCHING_FORM_STATE",vN=function(e){var t=s.a.isString(e)?e.trim().replace(/\/$/,""):e.url;return new URL(t).pathname.slice(1).split("/").pop()},ON=function e(t){return function(n){var r=iD(t),o=I.getServerUrl("/_replicator"),a=S(o,r),i=vN(r.source),s=vN(r.target);n({type:tN});var c=function(e){ie.addNotification({msg:e.reason,type:"error",clear:!0})};return a.then((function(e){if(!e.ok)throw e;ie.addNotification({msg:"Replication from <code>".concat(decodeURIComponent(i),"</code> to <code>").concat(decodeURIComponent(s),"</code> has been scheduled."),type:"success",escape:!1,clear:!0}),n(SN()),ie.navigate("#/replication")})).catch((function(r){if(r.error&&"not_found"===r.error)return function(){var e=I.getServerUrl("/_replicator");return D(e).then((function(e){if(!e.ok)throw{reason:"Failed to create the _replicator database."};return!0}))}().then((function(){return e(t)(n)})).catch(c);c(r)}))}},SN=function(){return function(e){e({type:rN}),ZS().then((function(e){return lD()})).then((function(t){e({type:nN,options:t})}))}},DN=function(){return function(e){ZS().then((function(t){t&&(e({type:fN}),pD().then((function(t){e({type:mN,options:t})})))}))}},NN=function(e){return function(t){var n=e.map((function(e){var t=e.raw;return t._deleted=!0,t}));ie.addNotification({msg:"Deleting doc".concat(n.length>1?"s":"","."),type:"success",escape:!1,clear:!0});var r=I.getServerUrl("/_replicator/_bulk_docs");S(r,{docs:n},{raw:!0}).then((function(e){if(!e.ok)throw e;return e})).then((function(){var n="The selected documents have been deleted.";1===e.length&&(n="Document <code>".concat(e[0]._id,"</code> has been deleted")),ie.addNotification({msg:n,type:"success",escape:!1,clear:!0}),t({type:dN}),t(SN())})).catch((function(e){e.json().then((function(e){ie.addNotification({msg:e.reason,type:"error",clear:!0})}))}))}},wN=function(e){return function(t){ie.addNotification({msg:"Deleting _replicate".concat(e.length>1?"s":"","."),type:"success",escape:!1,clear:!0}),function(e){var t=e.map((function(e){var t={replication_id:e._id,cancel:!0},n=I.getServerUrl("/_replicate");return S(n,t)}));return ie.Promise.all(t)}(e).then((function(){var n="The selected replications have been deleted.";1===e.length&&(n="Replication <code>".concat(e[0]._id,"</code> has been deleted")),t({type:EN}),t(DN()),ie.addNotification({msg:n,type:"success",escape:!1,clear:!0})}),(function(e){var t=JSON.parse(e.responseText);ie.addNotification({msg:t.reason,type:"error",clear:!0})}))}},TN=function(e){var t={type:GO.REPLICATION_AUTH_METHOD.NO_AUTH,creds:{}};if(e.headers&&e.headers.Authorization){var n=e.headers.Authorization.substring(6),r=KO.a.decode(n);return t.type=GO.REPLICATION_AUTH_METHOD.BASIC,t.creds={username:r.split(":")[0],password:r.split(":")[1]},t}var o=ie.getExtensions("Replication:Auth"),a=void 0,i=void 0;return o&&o.map((function(t){!a&&t.getCredentials&&(a=t.getCredentials(e),i=t.typeValue)})),a&&(t.type=i,t.creds=a),t},CN=function(){return function(e){ZS().then((function(t){e({type:hN,options:t})}))}};function IN(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function AN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?IN(n,!0).forEach((function(t){RN(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IN(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function RN(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var PN=function(e){ce.utils.localStorageSet("replication-activity-sort",e)},LN=function(){var e=ce.utils.localStorageGet("replication-activity-sort");return e||(e={descending:!1,column:"statusTime"}),PN(e),e},xN={remoteSource:"remoteSource",remoteTarget:"remoteTarget",localTarget:"localTarget",replicationType:"replicationType",replicationDocName:"replicationDocName",replicationSource:"replicationSource",replicationTarget:"replicationTarget",localSource:"localSource",sourceAuthType:"sourceAuthType",sourceAuth:"sourceAuth",targetAuthType:"targetAuthType",targetAuth:"targetAuth",targetDatabasePartitioned:"targetDatabasePartitioned"},kN={loading:!1,databases:[],replicationSource:"",localSource:"",remoteSource:"",sourceAuthType:GO.REPLICATION_AUTH_METHOD.NO_AUTH,sourceAuth:{},replicationTarget:"",localTarget:"",remoteTarget:"",targetAuthType:GO.REPLICATION_AUTH_METHOD.NO_AUTH,targetAuth:{},targetDatabasePartitioned:!1,isConflictModalVisible:!1,replicationType:GO.REPLICATION_TYPE.ONE_TIME,replicationDocName:"",submittedNoChange:!1,statusDocs:[],statusFilteredStatusDocs:[],statusFilter:"",replicateFilter:"",allDocsSelected:!1,allReplicateSelected:!1,username:"",password:"",activityLoading:!1,tabSection:"new replication",supportNewApi:!1,fetchingReplicateInfo:!1,replicateInfo:[],checkingAPI:!0,activitySort:LN()},jN=function(e){var t=AN({},e);return Object.values(xN).forEach((function(e){t[e]="sourceAuth"===e||"targetAuth"===e?{}:"targetDatabasePartitioned"!==e&&""})),t.sourceAuthType=GO.REPLICATION_AUTH_METHOD.NO_AUTH,t.targetAuthType=GO.REPLICATION_AUTH_METHOD.NO_AUTH,t},UN=function(e,t,n){var r=AN({},e,{submittedNoChange:!1});if(r[xN[t]]=n,t===xN.sourceAuthType||t===xN.replicationSource){var o=r[xN.sourceAuthType]===GO.REPLICATION_AUTH_METHOD.BASIC,a=r[xN.replicationSource]===GO.REPLICATION_SOURCE.LOCAL,i=!r[xN.sourceAuth]||!r[xN.sourceAuth].username;o&&a&&i&&(r[xN.sourceAuth]={username:ie.session.user().name,password:""})}else if(t===xN.targetAuthType||t===xN.replicationTarget){var s=r[xN.targetAuthType]===GO.REPLICATION_AUTH_METHOD.BASIC,c=r[xN.replicationTarget]===GO.REPLICATION_TARGET.EXISTING_LOCAL_DATABASE||r[xN.replicationTarget]===GO.REPLICATION_TARGET.NEW_LOCAL_DATABASE,l=!r[xN.targetAuth]||!r[xN.targetAuth].username;s&&c&&l&&(r[xN.targetAuth]={username:ie.session.user().name,password:""})}return r},MN=function(e,t){var n=e.statusDocs.find((function(e){return e._id===t}));return n?(n.selected=!n.selected,AN({},e,{allDocsSelected:!1})):e},qN=function(e){var t=AN({},e,{allDocsSelected:!e.allDocsSelected});return rw(t).forEach((function(e){return e.selected=t.allDocsSelected})),t},VN=function(e,t){var n=AN({},e),r=n._replicateInfo.find((function(e){return e._id===t}));if(!r)return n;r.selected=!r.selected,n._allReplicateSelected=!1},FN=function(e){var t=AN({},e,{allReplicateSelected:!e.allReplicateSelected});return yw(t).forEach((function(e){return e.selected=t.allReplicateSelected})),t},BN=function(e,t){var n=AN({},e,{loading:!1});return Object.keys(t).reduce((function(e,n){return UN(e,n,t[n])}),n)},HN=function(e){return e.activityLoading},KN=function(e){return e.databases},GN=function(e){return e.replicationSource},XN=function(e){return e.localSource},WN=function(e){return-1!==_.indexOf(e.databases,e.localSource)},zN=function(e){return e.remoteSource},YN=function(e){return e.replicationTarget},QN=function(e){return e.localTarget},ZN=function(e){return-1!==_.indexOf(e.databases,e.localTarget)},JN=function(e){return e.remoteTarget},$N=function(e){return e.isConflictModalVisible},ew=function(e){return e.replicationType},tw=function(e){return e.replicationDocName},nw=function(e){return e.submittedNoChange},rw=function(e){return e.statusDocs.filter((function(t){return Object.values(t).filter((function(t){return t?t.toString().toLowerCase().match(e.statusFilter):null})).length>0}))},ow=function(e){return e.statusFilter},aw=function(e){return e.replicateFilter},iw=function(e){return e.allDocsSelected},sw=function(e){return rw(e).some((function(e){return e.selected}))},cw=function(e){return e.username},lw=function(e){return e.password},uw=function(e){return e.activitySort},dw=function(e){return e.checkingAPI},pw=function(e){return e.supportNewApi},fw=function(e){return e.fetchingReplicateInfo},mw=function(e){return e.allReplicateSelected},hw=function(e){return yw(e).some((function(e){return e.selected}))},yw=function(e){return e.replicateInfo.filter((function(t){return Object.values(t).filter((function(t){return!!t&&t.toString().toLowerCase().match(e._replicateFilter)})).length>0}))},bw=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kN,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.options;switch(n){case ZD:var o=AN({},e,{loading:!0});return r.localSource&&(o.localSource=r.localSource,o.replicationSource=GO.REPLICATION_SOURCE.LOCAL,o.remoteSource="",o.replicationTarget="",o.localTarget="",o.remoteTarget=""),o;case JD:return AN({},e,{loading:!1,databases:r.databases});case _N:return AN({},e,{loading:!0});case $D:return UN(e,r.fieldName,r.value);case eN:return jN(e);case tN:return AN({},e,{submittedNoChange:!0});case rN:return AN({},e,{activityLoading:!0});case nN:return AN({},e,{activityLoading:!1,statusDocs:r});case oN:return AN({},e,{statusFilter:r});case yN:return AN({},e,{replicateFilter:r});case iN:return MN(e,r);case aN:return qN(e);case gN:return VN(e,r);case bN:return FN(e);case sN:return BN(e,r);case cN:return AN({},e,{isConflictModalVisible:!0});case lN:return AN({},e,{isConflictModalVisible:!1});case uN:return PN(r),AN({},e,{activitySort:LN()});case dN:return AN({},e,{allDocsSelected:!1});case pN:return AN({},e,{tabSection:r});case hN:return AN({},e,{checkingApi:!1,supportNewApi:r});case fN:return AN({},e,{fetchingReplicateInfo:!0});case mN:return AN({},e,{fetchingReplicateInfo:!1,replicateInfo:r});case EN:return AN({},e,{allReplicateSelected:!1});default:return e}},gw=Object(tt.b)((function(e,t){var n,r=e.replication;return{allowNewPartitionedLocalDbs:e.databases.partitionedDatabasesAvailable,routeLocalSource:t.routeLocalSource,replicationId:t.replicationId,tabSection:t.section,loading:(n=r,n.isLoading),activityLoading:HN(r),databases:KN(r),replicationSource:GN(r),localSource:XN(r),localSourceKnown:WN(r),remoteSource:zN(r),sourceAuthType:r.sourceAuthType,sourceAuth:r.sourceAuth,replicationTarget:YN(r),localTarget:QN(r),localTargetKnown:ZN(r),remoteTarget:JN(r),targetAuthType:r.targetAuthType,targetAuth:r.targetAuth,targetDatabasePartitioned:r.targetDatabasePartitioned,isConflictModalVisible:$N(r),replicationType:ew(r),replicationDocName:tw(r),submittedNoChange:nw(r),statusDocs:rw(r),statusFilter:ow(r),replicateFilter:aw(r),allDocsSelected:iw(r),someDocsSelected:sw(r),username:cw(r),password:lw(r),activitySort:uw(r),checkingApi:dw(r),supportNewApi:pw(r),replicateLoading:fw(r),replicateInfo:yw(r),allReplicateSelected:mw(r),someReplicateSelected:hw(r)}}),(function(e){return{checkForNewApi:function(){return e(CN())},updateFormField:function(t){return function(n){e(function(e,t){return{type:$D,options:{fieldName:e,value:t}}}(t,n))}},clearReplicationForm:function(){return e({type:eN})},initReplicator:function(t){return e(function(e,t){return function(n){e&&e!==t&&n({type:ZD,options:{localSource:e}})}}(t))},getReplicationActivity:function(){return e(SN())},getReplicateActivity:function(){return e(DN())},getReplicationStateFrom:function(t){return e(function(e){return function(t){t({type:_N});var n=I.getServerUrl("/_replicator/".concat(encodeURIComponent(e)));v(n).then((function(e){var n={replicationDocName:e._id,replicationType:e.continuous?GO.REPLICATION_TYPE.CONTINUOUS:GO.REPLICATION_TYPE.ONE_TIME},r=_.isObject(e.source)?e.source.url:e.source,o=_.isObject(e.target)?e.target.url:e.target;if(r.indexOf(window.location.hostname)>-1){var a=new URL(r);n.replicationSource=GO.REPLICATION_SOURCE.LOCAL,n.localSource=decodeURIComponent(a.pathname.slice(1))}else n.replicationSource=GO.REPLICATION_SOURCE.REMOTE,n.remoteSource=$S(r);var i=TN(e.source);if(n.sourceAuthType=i.type,n.sourceAuth=i.creds,o.indexOf(window.location.hostname)>-1){var s=new URL(o);n.replicationTarget=GO.REPLICATION_TARGET.EXISTING_LOCAL_DATABASE,n.localTarget=decodeURIComponent(s.pathname.slice(1))}else n.replicationTarget=GO.REPLICATION_TARGET.EXISTING_REMOTE_DATABASE,n.remoteTarget=$S(o);var c,l=TN(e.target);n.targetAuthType=l.type,n.targetAuth=l.creds,n.targetDatabasePartitioned=!(!(c=e.create_target_params)||!0!==c.partitioned),t({type:sN,options:n})})).catch((function(e){ie.addNotification({msg:e.reason,type:"error",clear:!0})}))}}(t))},getDatabasesList:function(){return e((function(e){var t=I.getServerUrl("/_all_dbs");v(t).then((function(t){e({type:JD,options:{databases:t}})}))}))},replicate:function(t){return e(ON(t))},showConflictModal:function(){return e({type:cN})},hideConflictModal:function(){return e({type:lN})},filterReplicate:function(t){return e(function(e){return{type:yN,options:e}}(t))},filterDocs:function(t){return e(function(e){return{type:oN,options:e}}(t))},selectDoc:function(t){return e({type:iN,options:t})},deleteDocs:function(t){return e(NN(t))},selectAllDocs:function(){return e({type:aN})},changeActivitySort:function(t){return e(function(e){return{type:uN,options:e}}(t))},selectAllReplicates:function(){return e({type:bN})},deleteReplicates:function(t){return e(wN(t))},selectReplicate:function(t){return e({type:gN,options:t})}}}))(QD),Ew={RouteObjects:[ie.RouteObject.extend({routes:{"replication/_create":"createView","replication/_create/:dbname":"createView","replication/id/:id":"createViewFromId",replication:"activityView","replication/_replicate":"replicateView"},selectedHeader:"Replication",roles:["fx_loggedIn"],setActivityCrumbs:function(){this.crumbs=[{name:"Replication"}]},setCreateReplicationCrumbs:function(){this.crumbs=[{name:"Replication",link:"replication"},{name:"New Replication"}]},createView:function(e){var t=e||"";return ue.a.createElement(gw,{routeLocalSource:t,section:"new replication"})},createViewFromId:function(e){return ue.a.createElement(gw,{replicationId:e,section:"new replication"})},activityView:function(){return ue.a.createElement(gw,{section:"activity"})},replicateView:function(){return ue.a.createElement(gw,{section:"_replicate"})}})]};n(641);Ew.initialize=function(){ie.addHeaderLink({title:"Replication",href:"#/replication",icon:"fonticon-replicate"}),ie.session.isAuthenticated().then((function(){CN()}))},ie.addReducers({replication:bw}),ie.registerUrls("replication",{app:function(e){return"#/replication/_create/"+e},api:function(){return I.getApiUrl("/_replicator")}});var _w=Ew,vw={SEARCH_INDEX_DESIGN_DOCS_LOADED:"SEARCH_INDEX_DESIGN_DOCS_LOADED",SEARCH_INDEX_INIT:"SEARCH_INDEX_INIT",SEARCH_INDEX_SELECT_TAB:"SEARCH_INDEX_SELECT_TAB",SEARCH_INDEX_SET_NAME:"SEARCH_INDEX_SET_NAME",SEARCH_INDEX_SET_ANALYZER_TYPE:"SEARCH_INDEX_SET_ANALYZER_TYPE",SEARCH_INDEX_ADD_ANALYZER_ROW:"SEARCH_INDEX_ADD_ANALYZER_ROW",SEARCH_INDEX_REMOVE_ANALYZER_ROW:"SEARCH_INDEX_REMOVE_ANALYZER_ROW",SEARCH_INDEX_SET_ANALYZER_ROW_FIELD_NAME:"SEARCH_INDEX_SET_ANALYZER_ROW_FIELD_NAME",SEARCH_INDEX_SET_ANALYZER_ROW:"SEARCH_INDEX_SET_ANALYZER_ROW",SEARCH_INDEX_SET_DEFAULT_MULTIPLE_ANALYZER:"SEARCH_INDEX_SET_DEFAULT_MULTIPLE_ANALYZER",SEARCH_INDEX_INIT_EDIT_SEARCH_INDEX:"SEARCH_INDEX_INIT_EDIT_SEARCH_INDEX",SEARCH_INDEX_PREVIEW_MODEL_UPDATED:"SEARCH_INDEX_PREVIEW_MODEL_UPDATED",SEARCH_INDEX_PREVIEW_REQUEST_MADE:"SEARCH_INDEX_PREVIEW_REQUEST_MADE",SEARCH_INDEX_PREVIEW_REQUEST_ERROR:"PREVIEW_MODEL_REQUEST_ERROR",SEARCH_INDEX_SELECT_DESIGN_DOC:"SEARCH_INDEX_SELECT_DESIGN_DOC",SEARCH_INDEX_SET_SINGLE_ANALYZER:"SEARCH_INDEX_SET_SINGLE_ANALYZER",SEARCH_INDEX_SET_SEARCH_QUERY:"SEARCH_INDEX_SET_SEARCH_QUERY",SEARCH_INDEX_SET_LOADING:"SEARCH_INDEX_SET_LOADING",SEARCH_INDEX_CLEAR:"SEARCH_INDEX_CLEAR",SEARCH_INDEX_UPDATE_INDEX_FUNCTION:"SEARCH_INDEX_UPDATE_INDEX_FUNCTION",SEARCH_INDEX_NEW_DESIGN_DOC_NAME_UPDATED:"SEARCH_INDEX_NEW_DESIGN_DOC_NAME_UPDATED",SEARCH_INDEX_NEW_DESIGN_DOC_PARTITONED_UPDATED:"SEARCH_INDEX_NEW_DESIGN_DOC_PARTITONED_UPDATED",SEARCH_INDEX_PARTITION_PARAM_NOT_SUPPORTED:"SEARCH_INDEX_PARTITION_PARAM_NOT_SUPPORTED",SEARCH_INDEX_PARTITION_PARAM_MANDATORY:"SEARCH_INDEX_PARTITION_PARAM_MANDATORY"},Ow={ANALYZER_SINGLE:"single",ANALYZER_MULTIPLE:"multiple",DEFAULT_SEARCH_INDEX_NAME:"newSearch",DEFAULT_ANALYZER_TYPE:"single",DEFAULT_ANALYZER:"standard",DEFAULT_SEARCH_INDEX_FUNCTION:'function (doc) {\n  index("name", doc.name);\n}',SEARCH_MANGO_INDEX_TEMPLATES:[{label:"Single field (json)",code:{index:{fields:["foo"]},name:"foo-json-index",type:"json"}},{label:"Multiple fields (json)",code:{index:{fields:["foo","bar"]},name:"foo-bar-json-index",type:"json"}},{label:"Single field (text)",code:{index:{fields:[{name:"foo",type:"string"}]},name:"foo-text",type:"text"}},{label:"All fields (text)",code:{index:{default_field:{enabled:!1},index_array_lengths:!1},name:"all-text",type:"text"}},{label:"All fields with default field (text)",code:{index:{index_array_lengths:!1},name:"all-text",type:"text"}}]};function Sw(e){return(Sw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Dw={};Dw.Doc=Me.Doc.extend({setIndex:function(e,t,n){if(!this.isDdoc())return!1;var r=this.get("indexes");return r||(r={}),r[e]||(r[e]={}),n&&(r[e].analyzer=n),r[e].index=t,this.set({indexes:r})},getIndex:function(e){return this.get("indexes")[e].index},getAnalyzer:function(e){return this.get("indexes")[e].analyzer},analyzerType:function(e){return"object"===Sw(this.getAnalyzer(e))?Ow.ANALYZER_MULTIPLE:Ow.ANALYZER_SINGLE},dDocModel:function(){if(!this.isDdoc())return!1;var e=this.get("doc");return!!e&&new Dw.Doc(e,{database:this.database})}}),Dw.AllDocs=Me.AllDocs.extend({model:Dw.Doc});var Nw=Dw;var ww=function(e,t,n,r,o){var a=function(e,t,n,r,o){var a=t?encodeURIComponent(t):"";return ie.urls("search","server",encodeURIComponent(e),a,encodeURIComponent(n),encodeURIComponent(r),"?limit=10&q="+encodeURIComponent(o))}(e,t,n,r,o);return v(a).then((function(e){if(e.error)throw new Error(e.reason);return e.rows}))};function Tw(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Cw=function(e,t,n,r,o,a){return a({type:vw.SEARCH_INDEX_PREVIEW_REQUEST_MADE}),ww(e,t,n,r,o).then((function(e){a({type:vw.SEARCH_INDEX_PREVIEW_MODEL_UPDATED,options:{searchResults:e}})})).catch((function(t){a({type:vw.SEARCH_INDEX_PREVIEW_REQUEST_ERROR}),t&&-1!==t.message.indexOf("`partition` not supported")?a(Iw()):t&&-1!==t.message.indexOf("`partition` parameter is mandatory")?a(Aw()):ie.addNotification({msg:"Search failed: "+t.message,type:"error",clear:!0}),-1!==t.message.indexOf("not found")&&ie.navigate(ie.urls("allDocsSanitized","app",e),{trigger:!0})}))},Iw=function(){return{type:vw.SEARCH_INDEX_PARTITION_PARAM_NOT_SUPPORTED}},Aw=function(){return{type:vw.SEARCH_INDEX_PARTITION_PARAM_MANDATORY}};var Rw={dispatchInitNewSearchIndex:function(e){ie.reduxDispatch({type:vw.SEARCH_INDEX_CLEAR}),ie.reduxDispatch({type:vw.SEARCH_INDEX_SET_LOADING,options:{loading:!0}}),e.designDocs.fetch().then((function(){ie.reduxDispatch({type:vw.SEARCH_INDEX_DESIGN_DOCS_LOADED,options:{designDocs:e.designDocs,defaultDDoc:e.defaultDDoc,database:e.database}})}))},dispatchInitSearchIndex:function(e){if(ie.reduxDispatch({type:vw.SEARCH_INDEX_SET_LOADING,options:{loading:!0}}),ie.reduxDispatch({type:vw.SEARCH_INDEX_INIT,options:{databaseName:e.databaseName,partitionKey:e.partitionKey,ddocName:e.designDoc,indexName:e.indexName,searchQuery:e.query?e.query:""}}),e.query)return Cw(e.databaseName,e.partitionKey,e.designDoc,e.indexName,e.query,ie.reduxDispatch)},dispatchEditSearchIndex:function(e){var t=new ob.DdocInfo({_id:e.ddocID},{database:e.database});ie.reduxDispatch({type:vw.SEARCH_INDEX_SET_LOADING,options:{loading:!0}}),ie.Promise.all([e.designDocs.fetch(),t.fetch()]).then((function(n){var r=Tw(n,1)[0].rows.find((function(e){return e._id===t.id})).doc;if(!r.indexes||!r.indexes[e.indexName])throw Error('Index "'.concat(e.indexName,'" not found'));ie.reduxDispatch({type:vw.SEARCH_INDEX_INIT_EDIT_SEARCH_INDEX,options:{indexName:e.indexName,database:e.database,ddocInfo:t,designDocs:e.designDocs}})})).catch((function(t){var n=t.message?t.message:"";ie.addNotification({msg:'There was a problem editing the search index "'.concat(e.indexName,'". ')+n,type:"error",clear:!0})}))},selectTab:function(e){return function(t){t({type:vw.SEARCH_INDEX_SELECT_TAB,options:{tab:e}})}},setSearchIndexName:function(e){return function(t){t({type:vw.SEARCH_INDEX_SET_NAME,options:{value:e}})}},setAnalyzerType:function(e){return function(t){t({type:vw.SEARCH_INDEX_SET_ANALYZER_TYPE,options:{value:e}})}},addAnalyzerRow:function(e){return function(t){t({type:vw.SEARCH_INDEX_ADD_ANALYZER_ROW,options:{analyzer:e}})}},removeAnalyzerRow:function(e){return function(t){t({type:vw.SEARCH_INDEX_REMOVE_ANALYZER_ROW,options:{rowIndex:e}})}},setAnalyzerRowFieldName:function(e){return function(t){t({type:vw.SEARCH_INDEX_SET_ANALYZER_ROW_FIELD_NAME,options:{rowIndex:e.rowIndex,fieldName:e.fieldName}})}},setAnalyzer:function(e){return function(t){t({type:vw.SEARCH_INDEX_SET_ANALYZER_ROW,options:{rowIndex:e.rowIndex,analyzer:e.analyzer}})}},setDefaultMultipleAnalyzer:function(e){return function(t){t({type:vw.SEARCH_INDEX_SET_DEFAULT_MULTIPLE_ANALYZER,options:{analyzer:e}})}},selectDesignDoc:function(e){return function(t){t({type:vw.SEARCH_INDEX_SELECT_DESIGN_DOC,options:{value:e}})}},saveSearchIndex:function(e,t,n){if(e.setIndex(t.indexName,t.indexFunction,t.analyzerInfo),t.lastSavedDesignDocName===e.id&&t.lastSavedSearchIndexName!==t.indexName){var r=e.get("indexes")||{};delete r[t.lastSavedSearchIndexName],e.set({indexes:r})}e.save().then((function(){if(t.designDocs.add(e,{merge:!0}),ie.addNotification({msg:"The search index has been saved.",type:"success",clear:!0}),!t.isCreatingIndex&&t.lastSavedDesignDocName!==e.id){var r=Bi.helpers.findDesignDoc(t.designDocs,t.lastSavedDesignDocName);Bi.safeDeleteIndex(r,t.designDocs,"indexes",t.lastSavedSearchIndexName,{onSuccess:function(){ai.dispatchUpdateDesignDocs(t.designDocs)}})}ai.dispatchUpdateDesignDocs(t.designDocs),ie.navigate(n,{trigger:!0})}),(function(e){var t=JSON.parse(e.responseText).reason;ie.addNotification({msg:"Save failed: "+t,type:"error",clear:!0})}))},cloneSearchIndex:function(e){var t=function(e,t,n,r){if("new-doc"===t){var o={_id:"_design/"+n,indexes:{},language:"javascript"};return new Nw.Doc(o,{database:r})}var a=e.find((function(e){return e.id===t}));return a?a.dDocModel():null}(e.designDocs,e.targetDesignDocName,e.newDesignDocName,e.database),n=t.get("indexes");if(n&&_.has(n,e.newIndexName))ie.addNotification({msg:"That index name is already used in this design doc. Please enter a new name.",type:"error",clear:!0});else{n||(n={});var r=Bi.helpers.findDesignDoc(e.designDocs,"_design/"+e.sourceDesignDocName).toJSON();n[e.newIndexName]=r.indexes[e.sourceIndexName],t.set({indexes:n}),t.save().then((function(){e.onComplete(),ie.addNotification({msg:"The search index has been cloned.",type:"success",clear:!0}),ai.dispatchUpdateDesignDocs(e.designDocs)}),(function(t){e.onComplete();var n=JSON.parse(t.responseText).reason;ie.addNotification({msg:"Clone failed: "+n,type:"error",clear:!0})}))}},deleteSearchIndex:function(e){Bi.safeDeleteIndex(e.designDoc,e.designDocs,"indexes",e.indexName,{onSuccess:function(){if(e.isOnIndex){var t=ie.urls("allDocs","app",e.database.safeID());ie.navigate(t)}ai.dispatchUpdateDesignDocs(e.designDocs),ie.addNotification({msg:"The <code>"+_.escape(e.indexName)+"</code> search index has been deleted.",type:"info",escape:!1,clear:!0}),ai.dispatchHideDeleteIndexModal()}})},gotoEditSearchIndexPage:function(e,t,n,r){var o=t?encodeURIComponent(t):"";ie.navigate("#"+ie.urls("search","edit",encodeURIComponent(e),o,encodeURIComponent(n),encodeURIComponent(r)))},querySearch:function(e,t,n,r,o){var a=encodeURIComponent(e),i=encodeURIComponent(t),s=encodeURIComponent(n),c=encodeURIComponent(r),l=encodeURIComponent(o),u=t?ie.urls("partitioned_search","app",a,i,s,c):ie.urls("search","app",a,s,c);ie.navigate("".concat(u).concat(c,"?").concat(l),{trigger:!0})},setSearchQuery:function(e){return function(t){t({type:vw.SEARCH_INDEX_SET_SEARCH_QUERY,options:{query:e}})}},setSingleAnalyzer:function(e){return function(t){t({type:vw.SEARCH_INDEX_SET_SINGLE_ANALYZER,options:{analyzer:e}})}},updateNewDesignDocName:function(e){return function(t){t({type:vw.SEARCH_INDEX_NEW_DESIGN_DOC_NAME_UPDATED,options:{value:e}})}},updateNewDesignDocPartitioned:function(e){return function(t){t({type:vw.SEARCH_INDEX_NEW_DESIGN_DOC_PARTITONED_UPDATED,options:{value:e}})}},partitionParamNotSupported:Iw,partitionParamIsMandatory:Aw};function Pw(e){return(Pw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xw(e){return(xw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jw(e,t){return(jw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Uw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Mw=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,o=(e=xw(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==Pw(o)&&"function"!=typeof o?kw(r):o,Uw(kw(n),"querySearch",(function(e){if(e.preventDefault(),""===n.props.searchQuery.trim())return ie.addNotification({msg:"Please enter a search term.",type:"error",clear:!0}),void n.searchInput.focus();var t=n.props,r=t.databaseName,o=t.partitionKey,a=t.ddocName,i=t.indexName,s=t.searchQuery;n.props.querySearch(r,o,a,i,s)})),Uw(kw(n),"getRows",(function(){var e=encodeURIComponent(n.props.databaseName);return n.props.searchResults.map((function(t){var r={header:t.id,content:JSON.stringify(t,null,"  "),url:ie.urls("document","app",e,encodeURIComponent(t.id))};return ue.a.createElement(Zo.Document,{key:t.id,keylabel:"id:",doc:r,header:t.id,isDeletable:!1,docContent:r.content,onClick:n.onClick,docChecked:function(){},docIdentifier:t.id})}))})),Uw(kw(n),"onClick",(function(e,t){t.url&&ie.navigate(t.url)})),Uw(kw(n),"onType",(function(e){n.props.setSearchQuery(e.target.value)})),Uw(kw(n),"getResults",(function(){return n.props.hasActiveQuery?ue.a.createElement(Zo.LoadLines,null):n.props.noResultsWarning?ue.a.createElement("div",{"data-select":"search-result-set"},n.props.noResultsWarning):!!n.props.searchResults&&(0===n.props.searchResults.length?ue.a.createElement("div",{"data-select":"search-result-set"},"No results found."):ue.a.createElement("div",{id:"doc-list","data-select":"search-result-set"},n.getRows()))})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jw(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.searchInput.focus()}},{key:"componentDidUpdate",value:function(){prettyPrint()}},{key:"render",value:function(){var e=this,t=this.props.hasActiveQuery?"Querying...":"Query";return ue.a.createElement("div",null,ue.a.createElement("form",{id:"search-index-preview-form"},ue.a.createElement("span",{className:"input-append"},ue.a.createElement("input",{className:"span4",ref:function(t){return e.searchInput=t},type:"text",placeholder:"Enter your search query",onChange:this.onType,value:this.props.searchQuery}),ue.a.createElement("button",{className:"btn btn-primary",id:"search-index-query-button",type:"submit",disabled:this.props.hasActiveQuery,onClick:this.querySearch},t)),ue.a.createElement("a",{className:"help-link","data-bypass":"true",href:ie.constants.DOC_URLS.SEARCH_INDEX_QUERIES,target:"_blank",rel:"noopener noreferrer"},ue.a.createElement("i",{className:"icon-question-sign"}))),this.getResults())}}])&&Lw(n.prototype,r),o&&Lw(n,o),t}(ue.a.Component);Uw(Mw,"propTypes",{hasActiveQuery:et.a.bool.isRequired,searchQuery:et.a.string.isRequired,searchPerformed:et.a.bool.isRequired,querySearch:et.a.func.isRequired,setSearchQuery:et.a.func.isRequired,searchResults:et.a.array});var qw=Object(tt.b)((function(e){var t=e.search;return{databaseName:t.databaseName,partitionKey:t.partitionKey,ddocName:t.ddocName,indexName:t.indexName,hasActiveQuery:t.hasActiveQuery,searchQuery:t.searchQuery,searchPerformed:t.searchPerformed,searchResults:t.searchResults,noResultsWarning:t.noResultsWarning}}),(function(e){return{querySearch:function(e,t,n,r,o){Rw.querySearch(e,t,n,r,o)},setSearchQuery:function(t){e(Rw.setSearchQuery(t))}}}))(Mw);function Vw(e){return(Vw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bw(e){return(Bw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kw(e,t){return(Kw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Gw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Xw=Zo.StyledSelect,Ww=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,o=(e=Bw(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==Vw(o)&&"function"!=typeof o?Hw(r):o,Gw(Hw(n),"getAnalyzers",(function(){return["Standard","Keyword","Simple","Whitespace","Classic","Email"].map((function(e){return ue.a.createElement("option",{value:e.toLowerCase(),key:e},e)}))})),Gw(Hw(n),"getLanguages",(function(){return["Arabic","Armenian","Basque","Bulgarian","Brazilian","Catalan","Cjk","Chinese","Czech","Danish","Dutch","English","Finnish","French","Galician","German","Greek","Hindi","Hungarian","Indonesian","Irish","Italian","Japanese","Latvian","Norwegian","Persian","Polish","Portuguese","Romanian","Russian","Spanish","Swedish","Thai","Turkish"].map((function(e){return ue.a.createElement("option",{value:e.toLowerCase(),key:e},e)}))})),Gw(Hw(n),"getLabel",(function(){return""===n.props.label?null:ue.a.createElement("label",{htmlFor:n.props.id},n.props.label)})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kw(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=ue.a.createElement("optgroup",{label:"Language-specific",key:"languages"},this.getLanguages());return ue.a.createElement("div",{className:this.props.classes},this.getLabel(),ue.a.createElement(Xw,{selectChange:this.props.onChange,selectValue:this.props.defaultSelected,selectId:this.props.id,selectContent:[this.getAnalyzers(),e]}))}}])&&Fw(n.prototype,r),o&&Fw(n,o),t}(ue.a.Component);function zw(e){return(zw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qw(e){return(Qw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jw(e,t){return(Jw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Gw(Ww,"defaultProps",{defaultSelected:"standard",label:"Type",id:"analyzer-default",classes:"",onChange:function(){}}),Gw(Ww,"propTypes",{defaultSelected:et.a.string.isRequired,label:et.a.string.isRequired,id:et.a.string.isRequired,classes:et.a.string.isRequired,onChange:et.a.func.isRequired});var eT=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,o=(e=Qw(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==zw(o)&&"function"!=typeof o?Zw(r):o,$w(Zw(n),"deleteRow",(function(e){e.preventDefault(),n.props.removeAnalyzerRow(n.props.rowIndex)})),$w(Zw(n),"getFieldNameHeading",(function(e){return 0===n.props.rowIndex&&ue.a.createElement("label",{htmlFor:e},"Fieldname")})),$w(Zw(n),"changeFieldName",(function(e){n.props.setAnalyzerRowFieldName({rowIndex:n.props.rowIndex,fieldName:e.target.value})})),$w(Zw(n),"selectAnalyzer",(function(e){n.props.setAnalyzer({rowIndex:n.props.rowIndex,analyzer:e.target.value})})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jw(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e="analyzer-row-"+this.props.rowIndex,t=0===this.props.rowIndex?"Analyzer":"",n="span12";return this.props.showErrors&&!this.props.row.valid&&(n+=" unhappy"),ue.a.createElement("li",null,ue.a.createElement("div",{className:"row-fluid"},ue.a.createElement("div",{className:"span4"},this.getFieldNameHeading(e),ue.a.createElement("input",{type:"text",value:this.props.row.fieldName,className:n,onChange:this.changeFieldName})),ue.a.createElement(Ww,{id:e,label:t,defaultSelected:this.props.row.analyzer,classes:"span4",onChange:this.selectAnalyzer}),ue.a.createElement("div",{className:"span4"},ue.a.createElement("button",{className:"btn btn-danger delete-analyzer",onClick:this.deleteRow},"delete"))))}}])&&Yw(n.prototype,r),o&&Yw(n,o),t}(ue.a.Component);function tT(e){return(tT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rT(e){return(rT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oT(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aT(e,t){return(aT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function iT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}$w(eT,"propTypes",{rowIndex:et.a.number.isRequired,row:et.a.object.isRequired,showErrors:et.a.bool.isRequired,removeAnalyzerRow:et.a.func.isRequired,setAnalyzerRowFieldName:et.a.func.isRequired,setAnalyzer:et.a.func.isRequired});var sT=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=rT(t).call(this,e),n=!o||"object"!==tT(o)&&"function"!=typeof o?oT(r):o,iT(oT(n),"addRow",(function(e){e.preventDefault(),n.props.addAnalyzerRow(n.props.defaultAnalyzer)})),iT(oT(n),"getRows",(function(){return n.props.fields.map((function(e,t){return ue.a.createElement(eT,{row:e,key:e.key,rowIndex:t,showErrors:n.state.showErrors,setAnalyzer:n.props.setAnalyzer,setAnalyzerRowFieldName:n.props.setAnalyzerRowFieldName,removeAnalyzerRow:n.props.removeAnalyzerRow})}))})),iT(oT(n),"validate",(function(){n.setState({showErrors:!0});var e=!1,t=[],r=n.props.fields.every((function(n){return-1!==t.indexOf(n.fieldName)&&(e=!0),t.push(n.fieldName),n.valid}));return r&&!e||ie.addNotification({msg:"Fieldnames cannot be empty and must be unique.",type:"error",clear:!0}),r})),n.state={showErrors:!1},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&aT(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return ue.a.createElement("div",null,ue.a.createElement(Ww,{label:"Default",id:"defaultAnalyzer",defaultSelected:this.props.defaultAnalyzer,onChange:this.props.selectDefaultMultipleAnalyzer,isValidating:this.validate}),ue.a.createElement("ul",{id:"analyzer-fields",className:"unstyled"},this.getRows()),ue.a.createElement("button",{className:"addfield btn btn-small btn-primary",onClick:this.addRow},"Add Field"))}}])&&nT(n.prototype,r),o&&nT(n,o),t}(ue.a.Component);function cT(e){return(cT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uT(e){return(uT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dT(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pT(e,t){return(pT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}iT(sT,"propTypes",{addAnalyzerRow:et.a.func.isRequired,defaultAnalyzer:et.a.string.isRequired,selectDefaultMultipleAnalyzer:et.a.func.isRequired,fields:et.a.array.isRequired});var mT=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,o=(e=uT(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==cT(o)&&"function"!=typeof o?dT(r):o,fT(dT(n),"selectAnalyzerType",(function(e){n.props.setAnalyzerType(e.target.value)})),fT(dT(n),"validate",(function(){return n.props.analyzerType===Ow.ANALYZER_SINGLE||n.analyzerMultiple.validate()})),fT(dT(n),"getAnalyzerFieldsAsObject",(function(){return n.props.analyzerFields.reduce((function(e,t){return e[t.fieldName.replace(/["']/g,"")]=t.analyzer,e}),{})})),fT(dT(n),"getInfo",(function(){return n.props.analyzerType===Ow.ANALYZER_SINGLE?n.props.singleAnalyzer:{name:"perfield",default:n.props.defaultMultipleAnalyzer,fields:n.getAnalyzerFieldsAsObject()}})),fT(dT(n),"selectSingleAnalyzer",(function(e){n.props.setSingleAnalyzer(e.target.value)})),fT(dT(n),"selectDefaultMultipleAnalyzer",(function(e){n.props.setDefaultMultipleAnalyzer(e.target.value)})),fT(dT(n),"getAnalyzerType",(function(){return n.props.analyzerType===Ow.ANALYZER_SINGLE?ue.a.createElement(Ww,{label:"Type",defaultSelected:n.props.singleAnalyzer,onChange:n.selectSingleAnalyzer}):ue.a.createElement(sT,{ref:function(e){return n.analyzerMultiple=e},defaultAnalyzer:n.props.defaultMultipleAnalyzer,selectDefaultMultipleAnalyzer:n.selectDefaultMultipleAnalyzer,fields:n.props.analyzerFields,addAnalyzerRow:n.props.addAnalyzerRow,removeAnalyzerRow:n.props.removeAnalyzerRow,setAnalyzerRowFieldName:n.props.setAnalyzerRowFieldName,setAnalyzer:n.props.setAnalyzer})})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pT(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e="btn";this.props.analyzerType===Ow.ANALYZER_MULTIPLE&&(e+=" active");var t="btn";return this.props.analyzerType===Ow.ANALYZER_SINGLE&&(t+=" active"),ue.a.createElement("div",{className:"well"},ue.a.createElement("div",{className:"control-group"},ue.a.createElement("label",{htmlFor:"search-analyzer"},"Analyzer"),ue.a.createElement("div",{className:"btn-group toggle-btns",id:"analyzer"},ue.a.createElement("label",{style:{width:"82px"},htmlFor:"single-analyzer",className:t},"Single"),ue.a.createElement("input",{type:"radio",id:"single-analyzer",name:"search-analyzer",value:"single",checked:this.props.analyzerType===Ow.ANALYZER_SINGLE,onChange:this.selectAnalyzerType}),ue.a.createElement("input",{type:"radio",id:"multiple-analyzer",name:"search-analyzer",value:"multiple",checked:this.props.analyzerType===Ow.ANALYZER_MULTIPLE,onChange:this.selectAnalyzerType}),ue.a.createElement("label",{style:{width:"82px"},htmlFor:"multiple-analyzer",className:e},"Multiple"))),this.getAnalyzerType())}}])&&lT(n.prototype,r),o&&lT(n,o),t}(ue.a.Component);function hT(e){return(hT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yT(){return(yT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function bT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gT(e){return(gT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ET(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _T(e,t){return(_T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}fT(mT,"propTypes",{analyzerType:et.a.string.isRequired,analyzerFields:et.a.array.isRequired,defaultMultipleAnalyzer:et.a.string.isRequired,singleAnalyzer:et.a.string.isRequired,setAnalyzerType:et.a.func.isRequired,setSingleAnalyzer:et.a.func.isRequired,setDefaultMultipleAnalyzer:et.a.func.isRequired,addAnalyzerRow:et.a.func.isRequired});var OT=os.DesignDocSelector,ST=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,o=(e=gT(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==hT(o)&&"function"!=typeof o?ET(r):o,vT(ET(n),"updateSearchIndexName",(function(e){n.props.setSearchIndexName(e.target.value)})),vT(ET(n),"saveIndex",(function(e){if(e.preventDefault(),n.designDocSelector.validate()&&n.analyzer.validate())if(n.props.searchIndexName.trim()){var t=n.props.saveDoc.id.replace(/_design\//,""),r=n.props.partitionKey?encodeURIComponent(n.props.partitionKey):"",o=ie.urls("search","fragment",encodeURIComponent(n.props.database.id),r,encodeURIComponent(t),encodeURIComponent(n.props.searchIndexName));n.props.saveSearchIndex(n.props.saveDoc,{isCreatingIndex:n.props.isCreatingIndex,indexName:n.props.searchIndexName,designDocs:n.props.designDocs,database:n.props.database,indexFunction:n.getIndexFunction(),analyzerInfo:n.analyzer.getInfo(),lastSavedSearchIndexName:n.props.lastSavedSearchIndexName,lastSavedDesignDocName:n.props.lastSavedDesignDocName},o)}else ie.addNotification({msg:"Please enter the index name.",type:"error",clear:!0})})),vT(ET(n),"getIndexFunction",(function(){return n.searchIndexEditor.getValue()})),vT(ET(n),"getDesignDocList",(function(){return n.props.designDocs.map((function(e){return e.id}))})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_T(e,t)}(t,e),n=t,(r=[{key:"getCancelLink",value:function(){var e=encodeURIComponent(this.props.database.id),t=this.props.partitionKey?encodeURIComponent(this.props.partitionKey):"";if(!this.props.lastSavedDesignDocName||this.props.isCreatingIndex)return"#"+ie.urls("allDocs","app",e,t);var n=this.props.lastSavedDesignDocName.replace(/^_design\//,""),r="_design/"+encodeURIComponent(n),o=encodeURIComponent(this.props.lastSavedSearchIndexName);return"#"+ie.urls("search","showIndex",e,t,r,o)}},{key:"render",value:function(){var e=this;if(this.props.isLoading)return ue.a.createElement("div",{className:"search-index-page-loading"},ue.a.createElement(Zo.LoadLines,null));if(!this.props.database)return null;var t=this.props.isCreatingIndex?"New Search Index":"Edit Search Index",n=this.props.isCreatingIndex?"Create Document and Build Index":"Save Document and Build Index";return ue.a.createElement("form",{className:"form-horizontal search-query-save",id:"search-index"},ue.a.createElement("h3",{className:"simple-header"},t),ue.a.createElement(OT,{ref:function(t){return e.designDocSelector=t},designDocLabel:"Save to design document",designDocList:this.getDesignDocList(),isDbPartitioned:this.props.isDbPartitioned,newDesignDocName:this.props.newDesignDocName,newDesignDocPartitioned:this.props.newDesignDocPartitioned,selectedDesignDocName:this.props.ddocName,selectedDesignDocPartitioned:this.props.ddocPartitioned,onSelectDesignDoc:this.props.selectDesignDoc,onChangeNewDesignDocName:this.props.updateNewDesignDocName,onChangeNewDesignDocPartitioned:this.props.updateNewDesignDocPartitioned,docLink:ce.helpers.getDocUrl("DOC_URL_DESIGN_DOCS")}),ue.a.createElement("div",{className:"control-group"},ue.a.createElement("label",{htmlFor:"search-name"},"Index name"),ue.a.createElement("input",{type:"text",id:"search-name",value:this.props.searchIndexName,onChange:this.updateSearchIndexName})),ue.a.createElement(Zo.CodeEditorPanel,{id:"search-function",className:"ace-editor-section",ref:function(t){return e.searchIndexEditor=t},title:"Search index function",allowZenMode:!1,docLink:ce.helpers.getDocUrl("SEARCH_INDEXES"),defaultCode:this.props.searchIndexFunction,blur:this.props.blur}),ue.a.createElement(mT,yT({ref:function(t){return e.analyzer=t}},this.props)),ue.a.createElement("div",{className:"control-group"},ue.a.createElement("button",{id:"save-index",className:"btn btn-primary save",onClick:this.saveIndex},ue.a.createElement("i",{className:"icon fonticon-ok-circled"}),n),ue.a.createElement("a",{href:this.getCancelLink(),className:"index-cancel-link"},"Cancel")))}}])&&bT(n.prototype,r),o&&bT(n,o),t}(ue.a.Component);function DT(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function NT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DT(n,!0).forEach((function(t){wT(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DT(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}vT(ST,"defaultProps",{isCreatingIndex:!0,blur:function(){},isLoading:!0}),vT(ST,"propTypes",{isLoading:et.a.bool,isCreatingIndex:et.a.bool,database:et.a.object.isRequired,saveDoc:et.a.object.isRequired,newDesignDocName:et.a.string,blur:et.a.func,setSearchIndexName:et.a.func.isRequired,searchIndexFunction:et.a.string.isRequired,saveSearchIndex:et.a.func.isRequired,selectDesignDoc:et.a.func.isRequired,updateNewDesignDocName:et.a.func.isRequired});var TT=NT({designDocs:new Backbone.Collection,database:{},loading:!0,ddocName:"new-doc",partitionKey:"",indexName:"",databaseName:""},AT()),CT=[];function IT(){function e(){return Math.random().toString(36).substring(7)}for(var t=e();-1!==CT.indexOf(t);)t=e();return CT.push(t),t}function AT(){return{noResultsWarning:"",hasActiveQuery:!1,searchQuery:"",searchResults:void 0,searchPerformed:!1,newDesignDocName:"",newDesignDocPartitioned:!0,lastSavedSearchIndexName:"",searchIndexFunction:Ow.DEFAULT_SEARCH_INDEX_FUNCTION,searchIndexName:Ow.DEFAULT_SEARCH_INDEX_NAME,analyzerType:Ow.DEFAULT_ANALYZER_TYPE,analyzerFields:[],singleAnalyzer:Ow.DEFAULT_ANALYZER,defaultMultipleAnalyzer:Ow.DEFAULT_ANALYZER}}function RT(e,t){var n=t.analyzer,r=t.fieldName,o=e.analyzerFields.slice();return o.push({key:IT(),fieldName:r||"",analyzer:n,valid:r&&r.trim().length>0}),o}function PT(e,t){var n=e.analyzerFields.slice();return t=parseInt(t,10),n.splice(t,1),n}function LT(e,t){var n=t.fieldName,r=t.rowIndex,o=e.analyzerFields.slice(),a=parseInt(r,10);return o[a].fieldName=n,o[a].valid=""!==n,o}function xT(e,t){var n=t.analyzer,r=t.rowIndex,o=e.analyzerFields.slice();return o[parseInt(r,10)].analyzer=n,o}function kT(e,t){if("new-doc"===e.ddocName){var n={_id:"_design/"+e.newDesignDocName,views:{},language:"javascript"},r=new Nw.Doc(n,{database:e.database});return t&&r.setDDocPartitionedOption(e.newDesignDocPartitioned),r}var o=e.designDocs.find((function(t){return t.id===e.ddocName||t.id==="_design/"+e.ddocName}));return o?o.dDocModel():null}var jT=Object(tt.b)((function(e,t){var n,r,o,a=e.search,i=e.databases,s=(n=a,r=i.isDbPartitioned,!!(o=n.designDocs.find((function(e){return e.id===n.ddocName||e.id==="_design/"+n.ddocName})))&&_n.isDDocPartitioned(o.get("doc"),r));return{isCreatingIndex:t.isCreatingIndex,isLoading:a.loading,database:a.database,designDocs:a.designDocs,searchIndexFunction:a.searchIndexFunction,ddocName:a.ddocName,ddocPartitioned:s,lastSavedDesignDocName:a.lastSavedDesignDocName,lastSavedSearchIndexName:a.lastSavedSearchIndexName,searchIndexName:a.searchIndexName,analyzerType:a.analyzerType,analyzerFields:a.analyzerFields,analyzerFieldsObj:a.analyzerFieldsObj,defaultMultipleAnalyzer:a.defaultMultipleAnalyzer,singleAnalyzer:a.singleAnalyzer,saveDoc:kT(a,i.isDbPartitioned),newDesignDocName:a.newDesignDocName,newDesignDocPartitioned:a.newDesignDocPartitioned,isDbPartitioned:i.isDbPartitioned,partitionKey:t.partitionKey}}),(function(e){return{setSearchIndexName:function(t){e(Rw.setSearchIndexName(t))},saveSearchIndex:function(e,t,n){Rw.saveSearchIndex(e,t,n)},selectDesignDoc:function(t){e(Rw.selectDesignDoc(t))},updateNewDesignDocName:function(t){e(Rw.updateNewDesignDocName(t))},updateNewDesignDocPartitioned:function(t){e(Rw.updateNewDesignDocPartitioned(t))},setAnalyzerType:function(t){e(Rw.setAnalyzerType(t))},setSingleAnalyzer:function(t){e(Rw.setSingleAnalyzer(t))},setDefaultMultipleAnalyzer:function(t){e(Rw.setDefaultMultipleAnalyzer(t))},addAnalyzerRow:function(t){e(Rw.addAnalyzerRow(t))},removeAnalyzerRow:function(t){e(Rw.removeAnalyzerRow(t))},setAnalyzerRowFieldName:function(t){e(Rw.setAnalyzerRowFieldName(t))},setAnalyzer:function(t){e(Rw.setAnalyzer(t))}}}))(ST),UT=function(e){var t=e.section,n=e.database,r=e.indexName,o=e.ddocName,a=e.docURL,i=e.endpoint,s=e.dropDownLinks,c=e.designDocs,l=e.ddoc,u=e.selectedNavItem,d=e.partitionKey,p=e.onPartitionKeySelected,f=e.onGlobalModeSelected,m=e.globalMode;return ue.a.createElement("div",{id:"dashboard",className:"with-sidebar"},ue.a.createElement(Yp,{hideQueryOptions:!0,docURL:a,endpoint:i,dbName:n.id,dropDownLinks:s,database:n,showPartitionKeySelector:"search"===t,partitionKey:d,onPartitionKeySelected:p,onGlobalModeSelected:f,globalMode:m}),ue.a.createElement("div",{className:"with-sidebar tabs-with-sidebar content-area"},ue.a.createElement("aside",{id:"sidebar-content",className:"scrollable"},ue.a.createElement(pc,{selectedNavItem:u,selectedPartitionKey:d})),ue.a.createElement("section",{id:"dashboard-content",className:"flex-layout flex-col"},ue.a.createElement("div",{className:"flex-body",id:"dashboard-lower-content"},ue.a.createElement("div",{className:"search-index-content"},ue.a.createElement("div",{className:"tab-content search-index-tab-content"},function(e,t,n,r,o,a,i){return"create"===e?ue.a.createElement(jT,{designDocs:o,ddoc:a,database:t,isCreatingIndex:!0,partitionKey:i}):"edit"===e?ue.a.createElement(jT,{database:t,indexName:n,ddocName:r,isCreatingIndex:!1,partitionKey:i}):ue.a.createElement(qw,null)}(t,n,r,o,c,l,d)))))))};UT.propTypes={section:et.a.string.isRequired,docURL:et.a.string,endpoint:et.a.string,ddocName:et.a.string,indexName:et.a.string,dropDownLinks:et.a.array.isRequired,database:et.a.object.isRequired};var MT=UT,qT=ii.extend({routes:{"database/:database/_design/:ddoc/_search/:search(?*searchQuery)":{route:"searchNoPartition",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/_design/:ddoc/_search/:search(?*searchQuery)":{route:"search",roles:["fx_loggedIn"]},"database/:database/_design/:ddoc/_indexes/:search(?*searchQuery)":{route:"searchNoPartition",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/_design/:ddoc/_indexes/:search(?*searchQuery)":{route:"search",roles:["fx_loggedIn"]},"database/:database/_design/:ddoc/_search/:search/edit":{route:"editNoPartition",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/_design/:ddoc/_search/:search/edit":{route:"edit",roles:["fx_loggedIn"]},"database/:database/new_search":"createNoPartition","database/:database/_partition/:partitionkey/new_search":"create","database/:database/new_search/:designDoc":"createNoPartition","database/:database/_partition/:partitionkey/new_search/:designDoc":"create"},initialize:function(e,t){this.databaseName=t[0],this.database=new ri.Model({id:this.databaseName}),this.data={database:new ri.Model({id:this.databaseName})},this.data.designDocs=new Nw.AllDocs(null,{database:this.data.database,params:{startkey:'"_design"',endkey:'"_design1"',include_docs:!0}}),ai.dispatchNewOptions({database:this.data.database,designDocs:this.data.designDocs})},searchNoPartition:function(e,t,n,r){return this.search(e,"",t,n,r)},search:function(e,t,n,r,o){this.databaseName=e,this.ddocName=n,this.indexName=r;var a=new si("designDoc",{designDocName:n,designDocSection:"Search Indexes",indexName:r});ai.dispatchExpandSelectedItem(a);var i=this.getCrumbs(this.database);Rw.dispatchInitSearchIndex({databaseName:e,partitionKey:t,designDoc:n,indexName:r,query:o}),Je.fetchSelectedDatabaseInfo(e);var s=t?encodeURIComponent(t):"",c=ie.urls("search","apiurl",this.databaseName,s,this.ddocName,this.indexName,o||"*:*"),l=o?"?".concat(encodeURIComponent(o)):"";return ue.a.createElement(MT,{section:"search",dropDownLinks:i,endpoint:c,docURL:ie.constants.DOC_URLS.SEARCH_INDEXES,database:this.database,indexName:r,selectedNavItem:a,partitionKey:t,onPartitionKeySelected:function(t){var o=ie.urls("partitioned_search","app",encodeURIComponent(e),encodeURIComponent(t),encodeURIComponent(n));ie.navigate("#/"+o+encodeURIComponent(r)+l)},onGlobalModeSelected:function(){var t=ie.urls("search","app",encodeURIComponent(e),encodeURIComponent(n));ie.navigate("#/"+t+encodeURIComponent(r)+l)},globalMode:""===t})},editNoPartition:function(e,t,n){return this.edit(e,"",t,n)},edit:function(e,t,n,r){var o=new si("designDoc",{designDocName:n,designDocSection:"Search Indexes",indexName:r});ai.dispatchExpandSelectedItem(o),Rw.dispatchEditSearchIndex({ddocID:"_design/"+n,database:this.database,indexName:r,designDocs:this.data.designDocs}),Je.fetchSelectedDatabaseInfo(e);var a=this.getCrumbs(this.database);return ue.a.createElement(MT,{section:"edit",dropDownLinks:a,database:this.database,indexName:r,ddocName:n,selectedNavItem:o,partitionKey:t})},createNoPartition:function(e,t){return this.create(e,"",t)},create:function(e,t,n){var r=new si("");Rw.dispatchInitNewSearchIndex({database:this.database,designDocs:this.data.designDocs,defaultDDoc:n}),Je.fetchSelectedDatabaseInfo(e);var o=this.getCrumbs(this.database);return ue.a.createElement(MT,{section:"create",dropDownLinks:o,database:this.database,designDocs:this.data.designDocs,ddoc:n,selectedNavItem:r,partitionKey:t})},getCrumbs:function(e){return[{type:"back",link:"/_all_dbs"},{name:e.id}]}});Nw.RouteObjects=[qT];var VT=Nw;n(642);function FT(e){return e?"/_partition/"+e:""}VT.initialize=function(){v(I.getServerUrl("/")).then((function(e){return e.features&&-1!==e.features.indexOf("search")})).catch((function(){return!1})).then((function(e){e&&(ie.registerExtension("sidebar:list",{selector:"indexes",name:"Search Indexes",urlNamespace:"search",indexLabel:"search index",onDelete:Rw.deleteSearchIndex,onClone:Rw.cloneSearchIndex,onEdit:Rw.gotoEditSearchIndexPage}),ie.registerExtension("sidebar:links",{title:"New Search Index",url:"new_search",icon:"fonticon-plus-circled",showForPartitionedDDocs:!0}),ie.registerExtension("sidebar:newLinks",{url:"new_search",name:"Search Index"}),ie.registerExtension("IndexTypes:propNames","indexes"),ie.registerExtension("mango:indexTemplates",Ow.SEARCH_MANGO_INDEX_TEMPLATES))}))},ie.registerUrls("partitioned_search",{app:function(e,t,n){return"database/"+e+FT(t)+"/_design/"+n+"/_search/"}}),ie.registerUrls("search",{server:function(e,t,n,r,o){return I.getServerUrl("/"+e+FT(t)+"/_design/"+n+"/_search/"+r+o)},app:function(e,t){return"database/"+e+"/_design/"+t+"/_search/"},edit:function(e,t,n,r){return"database/"+e+FT(t)+"/_design/"+n+"/_search/"+r+"/edit"},fragment:function(e,t,n,r){return"database/"+e+FT(t)+"/_design/"+n+"/_search/"+r},showIndex:function(e,t,n,r){return"database/"+e+FT(t)+"/"+n+"/_search/"+r},apiurl:function(e,t,n,r,o){return window.location.origin+"/"+encodeURIComponent(e)+"/_design/"+encodeURIComponent(n)+"/_search/"+encodeURIComponent(r)+"?q="+encodeURIComponent(o)}}),ie.addReducers({search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:TT,t=arguments.length>1?arguments[1]:void 0,n=t.options;switch(t.type){case vw.SEARCH_INDEX_SET_LOADING:return NT({},e,{loading:n.loading});case vw.SEARCH_INDEX_DESIGN_DOCS_LOADED:var r=NT({},e,{loading:!1,designDocs:n.designDocs,database:n.database},AT());return n.defaultDDoc&&(r.ddocName="_design/"+n.defaultDDoc),r;case vw.SEARCH_INDEX_SET_NAME:return NT({},e,{searchIndexName:n.value});case vw.SEARCH_INDEX_SET_ANALYZER_TYPE:return NT({},e,{analyzerType:n.value});case vw.SEARCH_INDEX_SET_SINGLE_ANALYZER:return NT({},e,{singleAnalyzer:n.analyzer});case vw.SEARCH_INDEX_ADD_ANALYZER_ROW:return NT({},e,{analyzerFields:RT(e,n)});case vw.SEARCH_INDEX_PREVIEW_REQUEST_MADE:return NT({},e,{hasActiveQuery:!0});case vw.SEARCH_INDEX_PREVIEW_REQUEST_ERROR:return NT({},e,{hasActiveQuery:!1,searchResults:[]});case vw.SEARCH_INDEX_SET_SEARCH_QUERY:return NT({},e,{searchQuery:n.query});case vw.SEARCH_INDEX_PREVIEW_MODEL_UPDATED:return NT({},e,{searchResults:n.searchResults,hasActiveQuery:!1,searchPerformed:!0});case vw.SEARCH_INDEX_REMOVE_ANALYZER_ROW:return NT({},e,{analyzerFields:PT(e,n.rowIndex)});case vw.SEARCH_INDEX_SET_ANALYZER_ROW_FIELD_NAME:return NT({},e,{analyzerFields:LT(e,n)});case vw.SEARCH_INDEX_SET_ANALYZER_ROW:return NT({},e,{analyzerFields:xT(e,n)});case vw.SEARCH_INDEX_SET_DEFAULT_MULTIPLE_ANALYZER:return NT({},e,{defaultMultipleAnalyzer:n.analyzer});case vw.SEARCH_INDEX_INIT_EDIT_SEARCH_INDEX:return NT({},e,{},function(e,t){var n,r=t.database,o=t.designDocs,a=t.ddocInfo,i=t.indexName,s=o.find((function(e){return e.id===a.id})).dDocModel(),c=s.getAnalyzer(i);n=_.isString(c)?c:_.has(c,"default")?c.default:Ow.DEFAULT_ANALYZER_TYPE;var l=[];return c&&c.fields&&Object.keys(c.fields).forEach((function(e){l.push({key:IT(),fieldName:e||"",analyzer:c.fields[e],valid:!_.isUndefined(e)&&!_.isEmpty(e)})})),{loading:!1,searchPerformed:!1,database:r,designDocs:o,searchIndexName:i,ddocName:a.id,lastSavedSearchIndexName:i,lastSavedDesignDocName:a.id,searchIndexFunction:s.getIndex(i),analyzerType:s.analyzerType(i),singleAnalyzer:n,defaultMultipleAnalyzer:n,analyzerFields:l}}(0,n));case vw.SEARCH_INDEX_SELECT_DESIGN_DOC:return NT({},e,{ddocName:n.value});case vw.SEARCH_INDEX_CLEAR:return NT({},TT,{designDocs:new Backbone.Collection});case vw.SEARCH_INDEX_INIT:return NT({},e,{loading:!1,databaseName:n.databaseName,partitionKey:n.partitionKey,ddocName:n.ddocName,indexName:n.indexName,searchQuery:n.searchQuery,searchResults:""===n.searchQuery?void 0:e.searchResults,noResultsWarning:""});case vw.SEARCH_INDEX_NEW_DESIGN_DOC_NAME_UPDATED:return NT({},e,{newDesignDocName:n.value});case vw.SEARCH_INDEX_NEW_DESIGN_DOC_PARTITONED_UPDATED:return NT({},e,{newDesignDocPartitioned:n.value});case vw.SEARCH_INDEX_PARTITION_PARAM_NOT_SUPPORTED:return NT({},e,{noResultsWarning:"The selected index does not support partitions. Switch back to global mode."});case vw.SEARCH_INDEX_PARTITION_PARAM_MANDATORY:return NT({},e,{noResultsWarning:"The selected index requires a partition key. Use the selector at the top to enter a partition key."});default:return e}}});var BT=VT;n(643);function HT(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function KT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?HT(n,!0).forEach((function(t){GT(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HT(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function GT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var XT={corsEnabled:!1,origins:[],isAllOrigins:!1,configChanged:!1,shouldSaveChange:!1,node:"",isLoading:!0,deleteDomainModalVisible:!1,domainToDelete:""};var WT=ie.addon();WT.initialize=function(){},ie.addReducers({cors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:XT,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case wO.EDIT_CORS:var n=t.options;return KT({},e,{isLoading:!1,node:n.node,corsEnabled:n.corsEnabled,isAllOrigins:-1!==s.a.indexOf(n.origins,"*"),origins:n.origins,deleteDomainModalVisible:!1,domainToDelete:""});case wO.CORS_SHOW_DELETE_DOMAIN_MODAL:return KT({},e,{deleteDomainModalVisible:!0,domainToDelete:t.domainToDelete});case wO.CORS_HIDE_DELETE_DOMAIN_MODAL:return KT({},e,{deleteDomainModalVisible:!1,domainToDelete:""});case wO.CORS_SET_IS_LOADING:return KT({},e,{isLoading:t.isLoading});default:return e}}});var zT=WT,YT=function(e){var t=e.removeItem,n=e.section,r=e.type,o=e.value;return ue.a.createElement("li",{className:"permissions__entry"},ue.a.createElement("span",null,o),ue.a.createElement("button",{onClick:function(){return t(n,r,o)},type:"button",className:"pull-right close"},"×"))};YT.propTypes={value:et.a.string.isRequired,removeItem:et.a.func.isRequired};var QT=YT;function ZT(e){return(ZT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function JT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $T(e){return($T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eC(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tC(e,t){return(tC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function nC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var rC=ce.helpers.getDocUrl,oC=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return r=this,o=(e=$T(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==ZT(o)&&"function"!=typeof o?eC(r):o,nC(eC(n),"state",{newRole:"",newName:""}),nC(eC(n),"getHelp",(function(){return n.props.section,"Database members can access the database. If no members are defined, the database is public. "})),nC(eC(n),"isEmptyValue",(function(e,t){return!!s.a.isEmpty(e)&&(ie.addNotification({msg:"Cannot add an empty value for "+t+".",type:"error"}),!0)})),nC(eC(n),"addNames",(function(e){e.preventDefault(),n.isEmptyValue(n.state.newName,"names")||(n.props.addItem({type:"names",section:n.props.section,value:n.state.newName}),n.setState({newName:""}))})),nC(eC(n),"addRoles",(function(e){e.preventDefault(),n.isEmptyValue(n.state.newRole,"roles")||(n.props.addItem({type:"roles",section:n.props.section,value:n.state.newRole}),n.setState({newRole:""}))})),nC(eC(n),"getItems",(function(e,t){return e.map((function(e,r){return ue.a.createElement(QT,{key:r,value:e,section:n.props.section,type:t,removeItem:n.props.removeItem})}))})),nC(eC(n),"getNames",(function(){return n.getItems(n.props.names,"names")})),nC(eC(n),"getRoles",(function(){return n.getItems(n.props.roles,"roles")})),nC(eC(n),"nameChange",(function(e){n.setState({newName:e.target.value})})),nC(eC(n),"roleChange",(function(e){n.setState({newRole:e.target.value})})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tC(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.section;return ue.a.createElement("div",{className:"permissions__"+e},ue.a.createElement("header",{className:"page-header"},ue.a.createElement("h3",null,e),ue.a.createElement("p",{className:"help"},this.getHelp(),ue.a.createElement("a",{className:"help-link","data-bypass":"true",href:rC("DB_PERMISSION"),target:"_blank",rel:"noopener noreferrer"},ue.a.createElement("i",{className:"icon-question-sign"})))),ue.a.createElement("div",{className:"row-fluid"},ue.a.createElement("div",{className:"span6"},ue.a.createElement("header",null,ue.a.createElement("h4",null,"Users"),ue.a.createElement("p",null,"Specify users who will have ",this.props.section," access to this database.")),ue.a.createElement("form",{onSubmit:this.addNames,className:"permission-item-form permissions-add-user form-inline"},ue.a.createElement("input",{onChange:this.nameChange,value:this.state.newName,type:"text",className:"item input-small",placeholder:"Username"}),ue.a.createElement("button",{type:"submit",className:"btn btn-primary"},ue.a.createElement("i",{className:"icon fonticon-plus-circled"})," Add User")),ue.a.createElement("ul",{className:"unstyled permission-items span10"},this.getNames())),ue.a.createElement("div",{className:"span6"},ue.a.createElement("header",null,ue.a.createElement("h4",null,"Roles"),ue.a.createElement("p",null,"Users with any of the following role(s) will have ",this.props.section," access.")),ue.a.createElement("form",{onSubmit:this.addRoles,className:"permission-item-form permissions-add-role form-inline"},ue.a.createElement("input",{onChange:this.roleChange,value:this.state.newRole,type:"text",className:"item input-small",placeholder:"Role"}),ue.a.createElement("button",{type:"submit",className:"btn btn-primary"},ue.a.createElement("i",{className:"icon fonticon-plus-circled"})," Add Role")),ue.a.createElement("ul",{className:"unstyled permission-items span10"},this.getRoles()))))}}])&&JT(n.prototype,r),o&&JT(n,o),t}(ue.a.Component);nC(oC,"defaultProps",{names:[],roles:[]});var aC=oC;function iC(e,t,n,r){return!!e[t]&&(!!e[t][n]&&-1!==e[t][n].indexOf(r))}var sC="PERMISSIONS_UPDATE",cC=function(e){return{type:sC,permissions:e}},lC=function(e,t,n,r,o){return function(a){!function(e,t,n,r){if(iC(e,t,n,r))throw new Error("Role/Name has already been added");(function(e,t,n,r){e[t]||(e[t]={}),e[t][n]||(e[t][n]=[]),e[t][n].push(r)})(e,t,n,r)}(t,n,r,o),dC(e,t,a).catch((function(e){ie.addNotification({msg:e.message,type:"error"})}))}},uC=function(e,t,n,r,o){return function(a){!function(e,t,n,r){if(!iC(e,t,n,r))throw new Error("Role/Name does not exist");e[t][n]=e[t][n].filter((function(e){return e!==r}))}(t,n,r,o),dC(e,t,a).catch((function(e){ie.addNotification({msg:e.message,type:"error"})}))}},dC=function(e,t,n){return fetch(e,{headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include",method:"PUT",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){if(!e.ok)throw new Error(e.reason);return e})).then((function(){return ie.addNotification({msg:"Database permissions has been updated."}),n(cC(t))})).catch((function(e){ie.addNotification({msg:"Could not update permissions - reason: "+e,type:"error"})}))};function pC(e){return(pC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mC(e){return(mC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hC(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yC(e,t){return(yC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var bC=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=mC(t).call(this,e))||"object"!==pC(o)&&"function"!=typeof o?hC(r):o).addItem=n.addItem.bind(hC(n)),n.removeItem=n.removeItem.bind(hC(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yC(e,t)}(t,e),n=t,(r=[{key:"addItem",value:function(e){var t=e.section,n=e.type,r=e.value;if(iC(this.props.security,t,n,r))return ie.addNotification({msg:"Role/Name has already been added",type:"error"}),null;this.props.dispatch(lC(this.props.url,this.props.security,t,n,r))}},{key:"removeItem",value:function(e,t,n){this.props.dispatch(uC(this.props.url,this.props.security,e,t,n))}},{key:"render",value:function(){var e=this.props,t=e.adminRoles,n=e.adminNames,r=e.memberRoles,o=e.memberNames;return ue.a.createElement("div",{className:"permissions-page flex-body"},ue.a.createElement("div",null,ue.a.createElement(aC,{roles:t,names:n,addItem:this.addItem,removeItem:this.removeItem,section:"admins"}),ue.a.createElement(aC,{roles:r,names:o,addItem:this.addItem,removeItem:this.removeItem,section:"members"})))}}])&&fC(n.prototype,r),o&&fC(n,o),t}(le.Component);function gC(e){return(gC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function EC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _C(e,t){return!t||"object"!==gC(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vC(e){return(vC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function OC(e,t){return(OC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}bC.propTypes={security:et.a.object.isRequired};var SC=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),_C(this,vC(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&OC(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this.props;(0,e.dispatch)(function(e){return function(t){return fetch(e,{headers:{Accept:"application/json"},credentials:"include"}).then((function(e){return e.json()})).then((function(e){if(e.error&&e.reason)throw t(cC({admins:{roles:["_admin"]},members:{roles:["_admin"]}})),new Error(e.reason);t(cC(e))})).catch((function(e){ie.addNotification({msg:"Failed to retrieve permissions. Please try again. Reason:"+e.message,type:"error"})}))}}(e.url))}},{key:"render",value:function(){return this.props.isLoading?ue.a.createElement(vr,null):ue.a.createElement(bC,this.props)}}])&&EC(n.prototype,r),o&&EC(n,o),t}(le.Component);function DC(){return(DC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}SC.propTypes={isLoading:et.a.bool.isRequired,adminRoles:et.a.array.isRequired,adminNames:et.a.array.isRequired,memberNames:et.a.array.isRequired,memberRoles:et.a.array.isRequired,security:et.a.object.isRequired};var NC={isLoading:!0,security:{},adminRoles:[],adminNames:[],memberNames:[],memberRoles:[]};function wC(e,t){return t[e]&&t[e].roles?t[e].roles:[]}function TC(e,t){return t[e]&&t[e].names?t[e].names:[]}var CC=function(e){return e.security},IC=function(e){return e.adminRoles},AC=function(e){return e.adminNames},RC=function(e){return e.memberNames},PC=function(e){return e.memberRoles},LC=Object(tt.b)((function(e){var t,n=e.permissions;return{isLoading:(t=n,t.isLoading),adminRoles:IC(n),adminNames:AC(n),memberNames:RC(n),memberRoles:PC(n),security:CC(n)}}))(SC),xC=function(e){var t=e.docURL,n=e.database,r=e.endpoint,o=e.dbName,a=e.dropDownLinks,i=e.partitionKey,s=new si("permissions");return ue.a.createElement("div",{id:"dashboard",className:"with-sidebar"},ue.a.createElement(Yp,{hideQueryOptions:!0,hideJumpToDoc:!0,docURL:t,endpoint:r,dbName:o,dropDownLinks:a,database:n}),ue.a.createElement("div",{className:"with-sidebar tabs-with-sidebar content-area"},ue.a.createElement("aside",{id:"sidebar-content",className:"scrollable"},ue.a.createElement(pc,{selectedNavItem:s,selectedPartitionKey:i})),ue.a.createElement("section",{id:"dashboard-content",className:"flex-layout flex-col"},ue.a.createElement(LC,{url:r}))))},kC={RouteObjects:[ii.extend({roles:["fx_loggedIn"],routes:{"database/:database/_partition/:partitionKey/permissions":{route:"permissions",roles:["fx_loggedIn"]},"database/:database/permissions":{route:"permissions",roles:["fx_loggedIn"]}},initialize:function(){ce.getParams().include_docs=!0},permissions:function(e,t){this.database=new ri.Model({id:e}),this.createDesignDocsCollection(),this.addSidebar("permissions");var n=[{name:this.database.id,link:ri.databaseUrl(e)},{name:"Permissions"}],r=encodeURIComponent(e),o=ie.urls("permissions","server",r);return ue.a.createElement(xC,{docURL:ie.constants.DOC_URLS.DB_PERMISSION,endpoint:o,dbName:this.database.id,dropDownLinks:n,database:this.database,partitionKey:t})}})]};n(644);kC.initialize=function(){},ie.addReducers({permissions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NC,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case sC:var n=t.permissions;return DC({},e,{isLoading:!1,security:n,adminRoles:wC("admins",n),adminNames:TC("admins",n),memberRoles:wC("members",n),memberNames:TC("members",n)});default:return e}}});var jC=kC,UC=function(e){var t=e.message;ie.addNotification({msg:t,type:"error"})},MC=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.every((function(e){return e}))},qC=function(e,t){return MC(!_.isEmpty(e),!_.isEmpty(t))},VC=function(){ie.dispatch({type:"AUTH_HIDE_PASSWORD_MODAL"})};function FC(e){return(FC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function BC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function HC(e,t){return!t||"object"!==FC(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function KC(e){return(KC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function GC(e,t){return(GC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var XC=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=HC(this,KC(t).call(this))).state={username:"",password:""},e}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&GC(e,t)}(t,e),n=t,(r=[{key:"onUsernameChange",value:function(e){this.setState({username:e.target.value})}},{key:"onPasswordChange",value:function(e){this.setState({password:e.target.value})}},{key:"submit",value:function(e){e.preventDefault(),this.checkUnrecognizedAutoFill()||this.login(this.state.username,this.state.password)}},{key:"checkUnrecognizedAutoFill",value:function(){if(""!==this.state.username||""!==this.state.password)return!1;var e=this.props.testBlankUsername?this.props.testBlankUsername:this.usernameField.value,t=this.props.testBlankPassword?this.props.testBlankPassword:this.passwordField.value;return this.setState({username:e,password:t}),this.login(e,t),!0}},{key:"login",value:function(e,t){!function(e,t,n){qC(e,t)?Jb.login({name:e,password:t}).then((function(e){if(e.error)return UC({message:e.reason}),e;var t=ce.i18n.en_US["auth-logged-in"];if(t&&ie.addNotification({msg:t}),n&&-1===n.indexOf("login"))return ie.navigate(n);ie.navigate("/")})).catch(UC):UC({message:ce.i18n.en_US["auth-missing-credentials"]})}(e,t,this.props.urlBack)}},{key:"componentDidMount",value:function(){this.usernameField.focus()}},{key:"render",value:function(){var e=this;return ue.a.createElement("div",{className:"couch-login-wrapper"},ue.a.createElement("div",{className:"row-fluid"},ue.a.createElement("div",{className:"span12"},ue.a.createElement("form",{id:"login",onSubmit:this.submit.bind(this)},ue.a.createElement("p",{className:"help-block"},"Enter your username and password."),ue.a.createElement("input",{id:"username",type:"text",name:"username",ref:function(t){return e.usernameField=t},placeholder:"Username",size:"24",onChange:this.onUsernameChange.bind(this),value:this.state.username}),ue.a.createElement("br",null),ue.a.createElement("input",{id:"password",type:"password",name:"password",ref:function(t){return e.passwordField=t},placeholder:"Password",size:"24",onChange:this.onPasswordChange.bind(this),value:this.state.password}),ue.a.createElement("br",null),ue.a.createElement("button",{id:"submit",className:"btn btn-success",type:"submit"},"Log In")))))}}])&&BC(n.prototype,r),o&&BC(n,o),t}(ue.a.Component);XC.defaultProps={urlBack:""},XC.propTypes={urlBack:et.a.string.isRequired};var WC=XC;function zC(e){return(zC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function YC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function QC(e){return(QC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ZC(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JC(e,t){return(JC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $C=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=QC(t).call(this,e))||"object"!==zC(o)&&"function"!=typeof o?ZC(r):o).state={password:""},n.authenticate=n.authenticate.bind(ZC(n)),n.onKeyPress=n.onKeyPress.bind(ZC(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&JC(e,t)}(t,e),n=t,(r=[{key:"onKeyPress",value:function(e){"Enter"===e.key&&this.authenticate()}},{key:"authenticate",value:function(){var e=ie.session.user().name;this.props.onSubmit(e,this.state.password,this.props.onSuccess)}},{key:"render",value:function(){var e=this,t=this.props,n=t.visible,r=t.onClose,o=t.submitBtnLabel,a=t.headerTitle,i=t.modalMessage;return this.props.visible?ue.a.createElement(Tt.f,{dialogClassName:"enter-password-modal",show:n,onHide:function(){return r()}},ue.a.createElement(Tt.f.Header,{closeButton:!0},ue.a.createElement(Tt.f.Title,null,a)),ue.a.createElement(Tt.f.Body,null,i,ue.a.createElement("input",{style:{width:"385px"},type:"password",className:"password-modal-input",placeholder:"Enter your password",autoFocus:!0,value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})},onKeyPress:this.onKeyPress})),ue.a.createElement(Tt.f.Footer,null,ue.a.createElement("a",{className:"cancel-link",onClick:function(){return r()}},"Cancel"),ue.a.createElement(Zo.ConfirmButton,{text:o,onClick:this.authenticate}))):null}}])&&YC(n.prototype,r),o&&YC(n,o),t}(ue.a.Component);$C.propTypes={visible:et.a.bool.isRequired,modalMessage:et.a.oneOfType([et.a.string,et.a.element]),onSubmit:et.a.func.isRequired,onClose:et.a.func.isRequired,submitBtnLabel:et.a.string},$C.defaultProps={headerTitle:"Enter Password",visible:!1,modalMessage:"",onClose:VC,onSubmit:function(e,t,n){Jb.login({name:e,password:t}).then((function(r){if(r.error)throw r;VC(),n(e,t)})).catch((function(){ie.addNotification({msg:"Your username or password is incorrect.",type:"error",clear:!0})}))},onSuccess:function(){},submitBtnLabel:"Continue"};var eI=$C;function tI(e){return(tI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rI(e,t){return!t||"object"!==tI(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oI(e){return(oI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function aI(e,t){return(aI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var iI=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=rI(this,oI(t).call(this,e))).state={username:"",password:""},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&aI(e,t)}(t,e),n=t,(r=[{key:"onChangeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"componentDidMount",value:function(){this.usernameField.focus()}},{key:"createAdmin",value:function(e){e.preventDefault(),this.props.createAdmin(this.state.username,this.state.password,this.props.loginAfter,this.props.nodes)}},{key:"render",value:function(){var e=this;return ue.a.createElement("div",{className:"faux__auth-page"},ue.a.createElement("h3",null,"Create Admins"),ue.a.createElement("p",null,"Before a server admin is configured, all clients have admin privileges. This is fine when HTTP access is restricted to trusted users. ",ue.a.createElement("strong",null,"If end-users will be accessing this CouchDB, you must create an admin account to prevent accidental (or malicious) data loss.")),ue.a.createElement("p",null,"Server admins can create and destroy databases, install and update _design documents, run the test suite, and edit all aspects of CouchDB configuration."),ue.a.createElement("form",{id:"create-admin-form",onSubmit:this.createAdmin.bind(this)},ue.a.createElement("input",{id:"username",type:"text",ref:function(t){return e.usernameField=t},name:"name",placeholder:"Username",size:"24",onChange:this.onChangeUsername.bind(this)}),ue.a.createElement("br",null),ue.a.createElement("input",{id:"password",type:"password",name:"password",placeholder:"Password",size:"24",onChange:this.onChangePassword.bind(this)}),ue.a.createElement("p",null,"Non-admin users have read and write access to all databases, which are controlled by validation. CouchDB can be configured to block all access to anonymous users."),ue.a.createElement("button",{type:"submit",id:"create-admin",className:"btn btn-primary"},"Create Admin")))}}])&&nI(n.prototype,r),o&&nI(n,o),t}(ue.a.Component);iI.propTypes={loginAfter:et.a.bool.isRequired},iI.defaultProps={loginAfter:!1};var sI=Object(tt.b)((function(e){return{nodes:e.clusters.nodes}}),{createAdmin:function(e,t,n,r){return function(){var o=r[0].node;if(!qC(e,t))return UC({message:ce.i18n.en_US["auth-missing-credentials"]});Jb.createAdmin({name:e,password:t,node:o}).then((function(e){return e.error?UC({message:"".concat(ce.i18n.en_US["auth-admin-creation-failed-prefix"]," ").concat(e.reason)}):(ie.addNotification({msg:ce.i18n.en_US["auth-admin-created"]}),n?ie.navigate("/login"):void 0)}))}}})(iI);function cI(e){return(cI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uI(e,t){return!t||"object"!==cI(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dI(e){return(dI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pI(e,t){return(pI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var fI=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=uI(this,dI(t).call(this,e))).state={password:"",passwordConfirm:""},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pI(e,t)}(t,e),n=t,(r=[{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"onChangePasswordConfirm",value:function(e){this.setState({passwordConfirm:e.target.value})}},{key:"componentDidMount",value:function(){this.passwordField.focus()}},{key:"changePassword",value:function(e){e.preventDefault(),this.props.changePassword(this.props.username,this.state.password,this.state.passwordConfirm,this.props.nodes)}},{key:"render",value:function(){var e=this;return ue.a.createElement("div",{className:"faux__auth-page"},ue.a.createElement("h3",null,"Change Password"),ue.a.createElement("form",{id:"change-password",onSubmit:this.changePassword.bind(this)},ue.a.createElement("p",null,"Enter your new password."),ue.a.createElement("input",{id:"password",type:"password",ref:function(t){return e.passwordField=t},name:"password",placeholder:"Password",size:"24",onChange:this.onChangePassword.bind(this),value:this.state.password}),ue.a.createElement("br",null),ue.a.createElement("input",{id:"password-confirm",type:"password",name:"password_confirm",placeholder:"Verify Password",size:"24",onChange:this.onChangePasswordConfirm.bind(this),value:this.state.passwordConfirm}),ue.a.createElement("br",null),ue.a.createElement("p",null,ue.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Change"))))}}])&&lI(n.prototype,r),o&&lI(n,o),t}(ue.a.Component),mI={LoginForm:WC,PasswordModal:eI,CreateAdminForm:sI,ChangePasswordForm:Object(tt.b)((function(e){return{nodes:e.clusters.nodes,username:ie.session.user().name}}),{changePassword:function(e,t,n,r){return function(){if(!function(e,t){return MC(!_.isEmpty(e),!_.isEmpty(t),e===t)}(t,n))return UC({message:ce.i18n.en_US["auth-passwords-not-matching"]});Jb.createAdmin({name:e,password:t,node:r[0].node}).then((function(){ie.addNotification({msg:ce.i18n.en_US["auth-change-password"]})}),UC)}}})(fI)},hI=mI.CreateAdminForm,yI=mI.ChangePasswordForm,bI=function(e){var t=e.crumbs;return ue.a.createElement("header",null,ue.a.createElement("div",{className:"flex-layout flex-row"},ue.a.createElement("div",{id:"breadcrumbs",className:"flex-body"},ue.a.createElement(mt,{crumbs:t}))))},gI=function(e){var t=e.crumbs,n=e.component;return ue.a.createElement(gt,null,ue.a.createElement(bI,{crumbs:t}),ue.a.createElement(_t,null,n))},EI=function(e){var t=e.changePassword;return ue.a.createElement(ho,null,ue.a.createElement(fo,{key:1,selected:t,text:"Change Password",onChange:function(){ie.navigate("#changePassword")}}),ue.a.createElement(fo,{key:2,selected:!t,text:"Create Server Admin",onChange:function(){ie.navigate("#addAdmin")}}))},_I=function(e){var t=e.crumbs,n=e.changePassword,r=n?ue.a.createElement(yI,null):ue.a.createElement(hI,{loginAfter:!1});return ue.a.createElement(gt,null,ue.a.createElement(bI,{crumbs:t}),ue.a.createElement(_t,null,ue.a.createElement("div",{className:"template-content flex-body flex-layout flex-col"},ue.a.createElement(EI,{changePassword:n}),ue.a.createElement("div",{id:"dashboard-conten1t",className:"flex-layout flex-col"},r))))},vI=mI.LoginForm,OI=mI.CreateAdminForm,SI=[{name:"Log In to CouchDB"}],DI=[ie.RouteObject.extend({routes:{"login?*extra":"login",login:"login",logout:"logout",createAdmin:"checkNodes","createAdmin/:node":"createAdminForNode"},checkNodes:function(){sb.navigateToNodeBasedOnNodeCount("/createAdmin/")},login:function(){return ue.a.createElement(gI,{crumbs:SI,component:ue.a.createElement(vI,{urlBack:ce.getParams().urlback})})},logout:function(){ie.addNotification({msg:"You have been logged out."}),Jb.logout().then(Jb.getSession).then((function(){return ie.navigate("/")})).catch(UC)},createAdminForNode:function(){sb.fetchNodes();return ue.a.createElement(gI,{crumbs:[{name:"Create Admin"}],component:ue.a.createElement(OI,{loginAfter:!0})})}}),ie.RouteObject.extend({hideNotificationCenter:!0,hideApiBar:!0,selectedHeader:"Your Account",routes:{changePassword:{route:"checkNodesForPasswordChange",roles:["fx_loggedIn"]},"changePassword/:node":{route:"changePassword",roles:["fx_loggedIn"]},addAdmin:{route:"checkNodesForAddAdmin",roles:["_admin"]},"addAdmin/:node":{route:"addAdmin",roles:["_admin"]}},checkNodesForPasswordChange:function(){sb.navigateToNodeBasedOnNodeCount("/changePassword/")},checkNodesForAddAdmin:function(){sb.navigateToNodeBasedOnNodeCount("/addAdmin/")},changePassword:function(){return sb.fetchNodes(),ue.a.createElement(_I,{crumbs:[{name:"User Management"}],changePassword:!0})},addAdmin:function(){return sb.fetchNodes(),ue.a.createElement(_I,{crumbs:[{name:"User Management"}],changePassword:!1})}})];n(645);function NI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wI(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(i.includes)(e,"_admin")}var TI=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._user={name:!1,roles:[]},this._onChange={},this._authenticatedPromise=new V.a((function(e,t){n._authenticateResolve=e,n._authenticateReject=t})),this._allowAdminParty=t.allowAdminParty}var t,n,r;return t=e,(n=[{key:"isAuthenticated",value:function(){return this._authenticatedPromise}},{key:"setUser",value:function(e){var t=this;return this._user.name!==e.name&&(this._user={name:e.name,roles:e.roles,isAdmin:wI(e.roles)},Object(i.each)(this._onChange,(function(e){return e(t._user)}))),this._user}},{key:"user",value:function(){return this._user}},{key:"getSession",value:function(){var e=this;return Jb.getSession().then((function(t){e.setUser(t),e.isLoggedIn()&&e._authenticateResolve(e.user())})).catch((function(t){e._authenticateReject(t)}))}},{key:"isAdminParty",value:function(){return!!this._allowAdminParty&&!this._user.name&&this._user.isAdmin}},{key:"isLoggedIn",value:function(){return!_.isNull(this._user.name)}},{key:"userRoles",value:function(){var e=this._user;return this.isLoggedIn()?(-1===e.roles.indexOf("fx_loggedIn")&&e.roles.push("fx_loggedIn"),e.roles):[]}},{key:"onChange",value:function(e){var t=this,n=Object(i.uniqueId)();return this._onChange[n]=e,function(){delete t._onChange[n]}}},{key:"matchesRoles",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(0===e.length)return!0;var t=_.intersection(this.userRoles(),e).length;return t>0}}])&&NI(t.prototype,n),r&&NI(t,r),e}(),CI=function(){ie.removeHeaderLink({id:"auth",bottomNav:!0})};ie.setSession(new TI({allowAdminParty:!0}));var II,AI,RI={initialize:function(){ie.addHeaderLink({id:"auth",title:"Login",href:"#/login",icon:"fonticon-user",bottomNav:!0}),ie.session.onChange((function(){var e,t=ie.session;t.isAdminParty()?(e={id:"auth",title:"Admin Party!",href:"#/createAdmin",icon:"fonticon-user",bottomNav:!0},CI(),ie.addHeaderLink(e),ie.hideLogin()):t.isLoggedIn()?(e={id:"auth",title:"Your Account",href:"#/changePassword",icon:"fonticon-user",bottomNav:!0},CI(),ie.addHeaderLink(e),ie.showLogout()):(CI(),ie.showLogin())}))},RouteObjects:DI},PI=ie.addon(),LI=new Ve.Model({id:"verifytestdb",name:"verifytestdb"}),xI=new Ve.Model({id:"verifytestdb_replicate",name:"verifytestdb_replicate"});PI.testProcess={saveDoc:function(){return(II=new Me.Doc({_id:"test_doc_1",a:1},{database:LI})).save()},destroyDoc:function(){return II.destroy()},updateDoc:function(){return II.set({b:"hello"}),II.save()},saveDB:function(){return LI.save()},setupDB:function(e){return new ie.Promise((function(t,n){e.fetch().then((function(){return e.destroy()}),(function(){t()})).then((function(){t()}),(function(e,t,r){n(new Error(r))}))}))},setup:function(){return ie.Promise.all([this.setupDB(LI),this.setupDB(xI)])},testView:function(){var e,t,n=new ie.Promise((function(n,r){e=n,t=r}));return v(AI.url()+"/_view/testview").then((function(e){if(e.error)throw new Error(e.reason||e.error);return e})).then((function(n){var r=(n=_.isString(n)?JSON.parse(n):n).rows[0];6===r.value&&e(),t(new Error("Values expect 6, got "+r.value))}),t),n},setupView:function(){var e=new Me.Doc({_id:"test_doc_10",a:1},{database:LI}),t=new Me.Doc({_id:"test_doc_20",a:2},{database:LI}),n=new Me.Doc({_id:"test_doc_30",a:3},{database:LI});return AI=new Me.Doc({_id:"_design/view_check",views:{testview:{map:"function (doc) { emit(doc._id, doc.a); }",reduce:"_sum"}}},{database:LI}),ie.Promise.all([e.save(),t.save(),n.save(),AI.save()])},setupReplicate:function(){return S(I.getServerUrl("/_replicate"),{create_target:!0,source:"verifytestdb",target:"verifytestdb_replicate"}).then((function(e){if(e.error)throw new Error(e.reason||e.error);return e}))},testReplicate:function(){return new ie.Promise((function(e,t){xI.fetch().then((function(){var n=xI.get("doc_count");4!==n?t(new Error("Replication Failed, expected 4 docs got "+n)):e()}),t)}))},removeDBs:function(){xI.destroy(),LI.destroy()}};var kI=PI;function jI(e){return(jI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function UI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function MI(e,t){return!t||"object"!==jI(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qI(e){return(qI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function VI(e,t){return(VI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var FI=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),MI(this,qI(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&VI(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return ue.a.createElement("button",{id:"start",className:"btn btn-primary",onClick:this.props.verify,disabled:this.props.isVerifying},this.props.isVerifying?"Verifying":"Verify Installation")}}])&&UI(n.prototype,r),o&&UI(n,o),t}(ue.a.Component);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(FI,"propTypes",{verify:et.a.func.isRequired,isVerifying:et.a.bool.isRequired});var BI={TESTS:{CREATE_DATABASE:"TEST_CREATE_DATABASE",CREATE_DOCUMENT:"TEST_CREATE_DOCUMENT",UPDATE_DOCUMENT:"TEST_UPDATE_DOCUMENT",DELETE_DOCUMENT:"TEST_DELETE_DOCUMENT",CREATE_VIEW:"TEST_CREATE_VIEW",REPLICATION:"TEST_REPLICATION"}};function HI(e){return(HI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function KI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function GI(e){return(GI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function XI(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function WI(e,t){return(WI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var YI=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,o=(e=GI(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==HI(o)&&"function"!=typeof o?XI(r):o,zI(XI(n),"showTestResult",(function(e){return n.props.testResults[e].complete?n.props.testResults[e].success?ue.a.createElement("span",null,"✓"):ue.a.createElement("span",null,"✗"):""})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&WI(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return ue.a.createElement("table",{className:"table table-striped table-bordered"},ue.a.createElement("thead",null,ue.a.createElement("tr",null,ue.a.createElement("th",null,"Test"),ue.a.createElement("th",null,"Status"))),ue.a.createElement("tbody",null,ue.a.createElement("tr",null,ue.a.createElement("td",null,"Create Database"),ue.a.createElement("td",{id:"js-test-create-db"},this.showTestResult(BI.TESTS.CREATE_DATABASE))),ue.a.createElement("tr",null,ue.a.createElement("td",null,"Create Document"),ue.a.createElement("td",{id:"js-test-create-doc"},this.showTestResult(BI.TESTS.CREATE_DOCUMENT))),ue.a.createElement("tr",null,ue.a.createElement("td",null,"Update Document"),ue.a.createElement("td",{id:"js-test-update-doc"},this.showTestResult(BI.TESTS.UPDATE_DOCUMENT))),ue.a.createElement("tr",null,ue.a.createElement("td",null,"Delete Document"),ue.a.createElement("td",{id:"js-test-delete-doc"},this.showTestResult(BI.TESTS.DELETE_DOCUMENT))),ue.a.createElement("tr",null,ue.a.createElement("td",null,"Create View"),ue.a.createElement("td",{id:"js-test-create-view"},this.showTestResult(BI.TESTS.CREATE_VIEW))),ue.a.createElement("tr",null,ue.a.createElement("td",null,"Replication"),ue.a.createElement("td",{id:"js-test-replication"},this.showTestResult(BI.TESTS.REPLICATION)))))}}])&&KI(n.prototype,r),o&&KI(n,o),t}(ue.a.Component);function QI(e){return(QI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ZI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function JI(e,t){return!t||"object"!==QI(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $I(e){return($I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eA(e,t){return(eA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}zI(YI,"propTypes",{testResults:et.a.object.isRequired});var tA=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=JI(this,$I(t).call(this,e))).props.resetTests(),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&eA(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return ue.a.createElement("div",null,ue.a.createElement(FI,{verify:this.props.startVerification,isVerifying:this.props.isVerifying}),ue.a.createElement(YI,{testResults:this.props.testResults}))}}])&&ZI(n.prototype,r),o&&ZI(n,o),t}(ue.a.Component),nA={VERIFY_INSTALL_START:"VERIFY_INSTALL_START",VERIFY_INSTALL_RESET:"VERIFY_INSTALL_RESET",VERIFY_INSTALL_SINGLE_TEST_COMPLETE:"VERIFY_INSTALL_SINGLE_TEST_COMPLETE",VERIFY_INSTALL_ALL_TESTS_COMPLETE:"VERIFY_INSTALL_ALL_TESTS_COMPLETE"},rA=function(e,t){return function(){t({type:nA.VERIFY_INSTALL_SINGLE_TEST_COMPLETE,test:e,success:!0})}},oA=!0,aA=function(e,t){return function(n){if(oA=!1,n){t({type:nA.VERIFY_INSTALL_SINGLE_TEST_COMPLETE,test:e,success:!1});var r="n/a";n.responseText?r=JSON.parse(n.responseText).reason:n.message&&(r=n.message),ie.addNotification({msg:"Error: "+r,type:"error"})}}},iA=function(){return function(e){e({type:nA.VERIFY_INSTALL_RESET})}},sA=Object(tt.b)((function(e){var t=e.verifyinstall;return{isVerifying:t.isVerifying,testResults:t.tests}}),(function(e){return{resetTests:function(){e(iA())},startVerification:function(){e(iA()),e((function(e){e({type:nA.VERIFY_INSTALL_START});var t=kI.testProcess;t.setup().then((function(){return t.saveDB().then(rA(BI.TESTS.CREATE_DATABASE,e))}),aA(BI.TESTS.CREATE_DATABASE,e)).then((function(){return t.saveDoc().then(rA(BI.TESTS.CREATE_DOCUMENT,e))}),aA(BI.TESTS.CREATE_DATABASE,e)).then((function(){return t.updateDoc().then(rA(BI.TESTS.UPDATE_DOCUMENT,e))}),aA(BI.TESTS.CREATE_DOCUMENT,e)).then((function(){return t.destroyDoc().then(rA(BI.TESTS.DELETE_DOCUMENT,e))}),aA(BI.TESTS.UPDATE_DOCUMENT,e)).then((function(){return t.setupView().then((function(){return t.testView().then(rA(BI.TESTS.CREATE_VIEW,e))}))}),aA(BI.TESTS.DELETE_DOCUMENT,e)).then((function(){return t.setupReplicate().then((function(){return t.testReplicate().then(rA(BI.TESTS.REPLICATION,e))}))}),aA(BI.TESTS.CREATE_VIEW,e)).then((function(){}),aA(BI.TESTS.REPLICATION,e)).then((function(){e({type:nA.VERIFY_INSTALL_ALL_TESTS_COMPLETE}),oA&&ie.addNotification({msg:"Success! Your CouchDB installation is working. Time to Relax.",type:"success"}),t.removeDBs()}))}))}}}))(tA),cA=ie.RouteObject.extend({routes:{verifyinstall:"verifyInstall"},selectedHeader:"Verify",verifyInstall:function(){return ue.a.createElement(Ot,{component:ue.a.createElement(sA,null),crumbs:[{name:"Verify CouchDB Installation"}]})}});kI.RouteObjects=[cA];var lA=kI;function uA(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function dA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uA(n,!0).forEach((function(t){pA(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uA(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fA={isVerifying:!1,tests:{}};function mA(e,t,n){var r=dA({},e);if(!_.has(r,t))throw new Error("Invalid test name passed to updateTestStatus()");return r[t]={complete:!0,success:n},r}Object.keys(BI.TESTS).forEach((function(e){fA.tests[BI.TESTS[e]]={complete:!1}}));n(646);lA.initialize=function(){ie.addHeaderLink({title:"Verify",href:"#/verifyinstall",icon:"fonticon-ok-circled",bottomNav:!0})},ie.addReducers({verifyinstall:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fA,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case nA.VERIFY_INSTALL_START:return dA({},n,{isVerifying:!0});case nA.VERIFY_INSTALL_RESET:return dA({},n,{tests:(e=n.tests,t=dA({},e),Object.keys(t).forEach((function(e){t[e]={complete:!1}})),t)});case nA.VERIFY_INSTALL_SINGLE_TEST_COMPLETE:return dA({},n,{tests:mA(n.tests,r.test,r.success)});case nA.VERIFY_INSTALL_ALL_TESTS_COMPLETE:return dA({},n,{isVerifying:!1});default:return n}}});var hA=lA,yA=[{title:"CouchDB Official Documentation — Online",link:"http://docs.couchdb.org/en/latest/",iconClassName:"couchdb-icon"},{title:"CouchDB Official Documentation — Offline",link:"./docs/index.html",iconClassName:"couchdb-icon"},{title:"CouchDB Weekly News",link:"http://blog.couchdb.org/",iconClassName:"couchdb-icon"},{title:"CouchDB Homepage",link:"https://couchdb.apache.org/",iconClassName:"couchdb-icon"},{title:"CouchDB on GitHub",link:"https://github.com/apache/couchdb",iconClassName:"github-icon"},{title:"Fauxton on GitHub",link:"https://github.com/apache/couchdb-fauxton",iconClassName:"github-icon"},{title:"Fauxton Visual Guide",link:"https://couchdb.apache.org/fauxton-visual-guide/index.html",iconClassName:"couchdb-icon"},{title:"The Apache Software Foundation",link:"http://www.apache.org/",iconClassName:"asf-feather-icon"},{title:"Follow CouchDB on Twitter",link:"https://twitter.com/couchdb",iconClassName:"twitter-icon"},{title:"Follow CouchDB on Google Plus",link:"https://plus.google.com/+CouchDB",iconClassName:"google-plus-icon"},{title:"Follow CouchDB on LinkedIn",link:"https://www.linkedin.com/company/apache-couchdb",iconClassName:"linkedin-icon"}],bA=function(e){var t=e.links,n=void 0===t?yA:t;return ue.a.createElement("div",{id:"documentation-page",className:"scrollable"},ue.a.createElement("div",{className:"links"},ue.a.createElement("table",null,ue.a.createElement("tbody",null,n.map((function(e){return ue.a.createElement("tr",{key:e.title},ue.a.createElement("td",{className:"icons-container"},ue.a.createElement("div",{className:"icon "+e.iconClassName}," ")),ue.a.createElement("td",null,ue.a.createElement("a",{href:e.link,target:"_blank",rel:"noopener noreferrer","data-bypass":"true"},e.title)))}))))))},gA=ie.RouteObject.extend({selectedHeader:"Documentation",hideApiBar:!0,hideNotificationCenter:!0,routes:{documentation:"documentation"},roles:["fx_loggedIn"],documentation:function(){return ue.a.createElement(Ot,{component:ue.a.createElement(bA,null),crumbs:[{name:"Documentation"}]})}});gA.RouteObjects=[gA];var EA=gA;n(647);EA.initialize=function(){ie.addHeaderLink({id:"Documentation",title:"Documentation",icon:"fonticon-bookmark",href:"#/documentation",bottomNav:!0,top:!0})};var _A=[Re,{initialize:function(){}},ri,ob,Qg,__,L_,BO,_w,BT,zT,jC,RI,hA,EA];function vA(e){return(vA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function OA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function SA(e){return(SA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function DA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function NA(e,t){return(NA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var TA=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,o=(e=SA(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==vA(o)&&"function"!=typeof o?DA(r):o,wA(DA(n),"hide",(function(e){e&&e.preventDefault(),n.props.onStartHide(n.props.notificationId)})),wA(DA(n),"getMsg",(function(){return{__html:n.props.escape?_.escape(n.props.msg):n.props.msg}})),wA(DA(n),"onAnimationComplete",(function(){n.props.isHiding&&window.setTimeout((function(){return n.props.onHideComplete(n.props.notificationId)}))})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&NA(e,t)}(t,e),n=t,(r=[{key:"componentWillUnmount",value:function(){this.timeout&&window.clearTimeout(this.timeout)}},{key:"componentDidMount",value:function(){this.timeout=setTimeout(this.hide,this.props.visibleTime)}},{key:"render",value:function(){var e=this,t=this.props,n=t.style,r=t.notificationId;return 0===n.opacity&&this.props.isHiding&&this.onAnimationComplete(),ue.a.createElement("div",{key:r.toString(),className:"notification-wrapper",style:{opacity:n.opacity,minHeight:n.minHeight+"px"}},ue.a.createElement("div",{style:{opacity:n.opacity,minHeight:n.minHeight+"px"},className:"global-notification alert alert-"+this.props.type,ref:function(t){return e.notification=t}},ue.a.createElement("a",{"data-bypass":!0,href:"#",onClick:this.hide},ue.a.createElement("i",{className:"pull-right fonticon-cancel"})),ue.a.createElement("i",{className:"notification-icon "+{error:"fonticon-attention-circled",info:"fonticon-info-circled",success:"fonticon-ok-circled"}[this.props.type]}),ue.a.createElement("span",{dangerouslySetInnerHTML:this.getMsg()})))}}])&&OA(n.prototype,r),o&&OA(n,o),t}(ue.a.Component);function CA(e){return(CA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function IA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function AA(e){return(AA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function RA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PA(e,t){return(PA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function LA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}wA(TA,"propTypes",{notificationId:et.a.number.isRequired,msg:et.a.string.isRequired,onStartHide:et.a.func.isRequired,onHideComplete:et.a.func.isRequired,type:et.a.oneOf(["error","info","success"]),escape:et.a.bool,isHiding:et.a.bool.isRequired,visibleTime:et.a.number}),wA(TA,"defaultProps",{type:"info",visibleTime:8e3,escape:!0});var xA=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,o=(e=AA(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==CA(o)&&"function"!=typeof o?RA(r):o,LA(RA(n),"onKeyDown",(function(e){27===(e.keyCode||e.which)&&n.props.hideAllVisibleNotifications()})),LA(RA(n),"getNotifications",(function(){return n.props.notifications.length?n.props.notifications.map((function(e,t){if(e.visible)return ue.a.createElement(TA,{notificationId:e.notificationId,isHiding:e.isHiding,key:t,msg:e.msg,type:e.type,escape:e.escape,visibleTime:e.visibleTime,onStartHide:n.props.startHidingNotification,onHideComplete:n.props.hideNotification})})):null})),LA(RA(n),"getchildren",(function(e){var t=e.map((function(e){var t=e.key,r=e.data,o=e.style,a=r;return ue.a.createElement(TA,{key:t,style:o,notificationId:a.notificationId,isHiding:a.isHiding,msg:a.msg,type:a.type,escape:a.escape,visibleTime:a.visibleTime,onStartHide:n.props.startHidingNotification,onHideComplete:n.props.hideNotification})}));return ue.a.createElement("div",null,t)})),LA(RA(n),"getStyles",(function(e){return e||(e=[]),n.props.notifications.filter((function(e){return e.visible})).map((function(t){var n=!e.find((function(e){return e.key===t.notificationId.toString()}))&&{opacity:.5,minHeight:50};return n||t.isHiding?!n&&t.isHiding&&(n={opacity:Object(Gr.spring)(0,Gr.presets.stiff),minHeight:Object(Gr.spring)(0,Gr.presets.stiff)}):n={opacity:Object(Gr.spring)(1,Gr.presets.stiff),minHeight:Object(Gr.spring)(64)},{key:t.notificationId.toString(),style:n,data:t}}))})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&PA(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.onKeyDown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.onKeyDown)}},{key:"render",value:function(){return ue.a.createElement("div",{id:"global-notifications",role:"alert"},ue.a.createElement(Gr.TransitionMotion,{styles:this.getStyles},this.getchildren))}}])&&IA(n.prototype,r),o&&IA(n,o),t}(ue.a.Component);LA(xA,"propTypes",{notifications:et.a.array.isRequired,hideAllVisibleNotifications:et.a.func.isRequired,startHidingNotification:et.a.func.isRequired,hideNotification:et.a.func.isRequired});var kA=Object(tt.b)((function(e){return{notifications:e.notifications.notifications}}),(function(e){return{startHidingNotification:function(t){e(function(e){return function(t){t({type:ge.START_HIDING_NOTIFICATION,options:{notificationId:e}})}}(t))},hideNotification:function(t){e(function(e){return function(t){t({type:ge.HIDE_NOTIFICATION,options:{notificationId:e}})}}(t))},hideAllVisibleNotifications:function(){e((function(e){e({type:ge.HIDE_ALL_NOTIFICATIONS})}))}}}))(xA);function jA(e){return(jA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function UA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function MA(e){return(MA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function VA(e,t){return(VA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function FA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var BA=Zo.Copy,HA=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,o=(e=MA(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==jA(o)&&"function"!=typeof o?qA(r):o,FA(qA(n),"clearNotification",(function(){var e=n.props.item.notificationId;n.props.clearSingleNotification(e)})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&VA(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.item.time.fromNow(),t="fonticon "+{success:"fonticon-ok-circled",error:"fonticon-attention-circled",info:"fonticon-info-circled"}[this.props.item.type],n="all"!==this.props.filter&&this.props.filter!==this.props.item.type,r=this.props.style,o=r.opacity,a=r.height;return 0===o&&0===a?null:ue.a.createElement("li",{style:{opactiy:o,height:a+"px",borderBottomColor:"rgba(34, 34, 34, ".concat(o,")")},"aria-hidden":n},ue.a.createElement("div",{className:"flex-layout flex-row"},ue.a.createElement("span",{className:t}),ue.a.createElement("div",{className:"flex-body"},ue.a.createElement("p",null,this.props.item.cleanMsg),ue.a.createElement("div",{className:"notification-actions"},ue.a.createElement("span",{className:"time-elapsed"},e),ue.a.createElement("span",{className:"divider"},"|"),ue.a.createElement(BA,{uniqueKey:gc.a.v4(),text:this.props.item.cleanMsg,displayType:"text"}))),ue.a.createElement("button",{type:"button",onClick:this.clearNotification},"×")))}}])&&UA(n.prototype,r),o&&UA(n,o),t}(ue.a.Component);function KA(e){return(KA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function GA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function XA(e){return(XA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function WA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zA(e,t){return(zA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function YA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}FA(HA,"propTypes",{item:et.a.object.isRequired,filter:et.a.string.isRequired,clearSingleNotification:et.a.func.isRequired});var QA=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,o=(e=XA(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==KA(o)&&"function"!=typeof o?WA(r):o,YA(WA(n),"getNotifications",(function(e){var t;return t=e.length||n.props.notifications.length?e.map((function(e){var t=e.key,r=e.data,o=e.style;return ue.a.createElement(HA,{item:r,filter:n.props.filter,clearSingleNotification:n.props.clearSingleNotification,key:t,style:o})})):ue.a.createElement("li",{className:"no-notifications"},"No notifications."),ue.a.createElement("ul",{className:"notification-list"},t)})),YA(WA(n),"getStyles",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=n.props.notifications.map((function(t){var r=!e.find((function(e){return e.key===t.notificationId.toString()}))&&{opacity:0,height:0};return r||t.type!==n.props.filter&&"all"!==n.props.filter?t.type!==n.props.filter&&(r={opacity:Object(Gr.spring)(0,Gr.presets.stiff),height:Object(Gr.spring)(0,Gr.presets.stiff)}):r={opacity:Object(Gr.spring)(1,Gr.presets.stiff),height:Object(Gr.spring)(61,Gr.presets.stiff)},{key:t.notificationId.toString(),style:r,data:t}}));return t})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zA(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this;if(!this.props.isVisible&&0===this.props.style.x)return null;var t={all:"flex-body",success:"flex-body",error:"flex-body",info:"flex-body"};t[this.props.filter]+=" selected";var n="notification-page-mask ".concat(this.props.isVisible?" visible":"");return ue.a.createElement("div",{id:"notification-center"},ue.a.createElement("div",{className:"notification-center-panel flex-layout flex-col visible",style:{transform:"translate(".concat(this.props.style.x,"px)")}},ue.a.createElement("header",{className:"flex-layout flex-row"},ue.a.createElement("span",{className:"fonticon fonticon-bell"}),ue.a.createElement("h1",{className:"flex-body"},"Notifications"),ue.a.createElement("button",{"aria-label":"Hide Notifications Center",type:"button",onClick:this.props.hideNotificationCenter},"×")),ue.a.createElement("ul",{"aria-label":"Filters",className:"notification-filter flex-layout flex-row"},ue.a.createElement("li",{className:t.all,title:"All notifications","data-filter":"all",onClick:function(){return e.props.selectNotificationFilter("all")}},"All"),ue.a.createElement("li",{className:t.success,title:"Success notifications","data-filter":"success",onClick:function(){return e.props.selectNotificationFilter("success")}},ue.a.createElement("span",{className:"fonticon fonticon-ok-circled"})),ue.a.createElement("li",{className:t.error,title:"Error notifications","data-filter":"error",onClick:function(){return e.props.selectNotificationFilter("error")}},ue.a.createElement("span",{className:"fonticon fonticon-attention-circled"})),ue.a.createElement("li",{className:t.info,title:"Info notifications","data-filter":"info",onClick:function(){return e.props.selectNotificationFilter("info")}},ue.a.createElement("span",{className:"fonticon fonticon-info-circled"}))),ue.a.createElement("div",{className:"flex-body"},ue.a.createElement(Gr.TransitionMotion,{styles:this.getStyles},this.getNotifications)),ue.a.createElement("footer",null,ue.a.createElement("input",{type:"button",value:"Clear All",className:"btn btn-small btn-secondary",onClick:this.props.clearAllNotifications}))),ue.a.createElement("div",{className:n,onClick:this.props.hideNotificationCenter}))}}])&&GA(n.prototype,r),o&&GA(n,o),t}(ue.a.Component);function ZA(e){return(ZA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function JA(){return(JA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function $A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eR(e){return(eR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tR(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nR(e,t){return(nR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rR(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}YA(QA,"propTypes",{isVisible:et.a.bool.isRequired,filter:et.a.string.isRequired,notifications:et.a.array.isRequired,hideNotificationCenter:et.a.func.isRequired,selectNotificationFilter:et.a.func.isRequired,clearAllNotifications:et.a.func.isRequired,clearSingleNotification:et.a.func.isRequired});var oR=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,o=(e=eR(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==ZA(o)&&"function"!=typeof o?tR(r):o,rR(tR(n),"getStyles",(function(){var e={key:"1",style:{x:320}};return n.props.isVisible?e.style={x:Object(Gr.spring)(0)}:e.style={x:Object(Gr.spring)(320)},[e]})),rR(tR(n),"getNotificationCenterPanel",(function(e){var t=e.map((function(e){var t=e.style;return ue.a.createElement(QA,JA({key:"1",style:t},n.props))}));return ue.a.createElement("aside",{"aria-label":"Notifications"},t)})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nR(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return ue.a.createElement(Gr.TransitionMotion,{styles:this.getStyles},this.getNotificationCenterPanel)}}])&&$A(n.prototype,r),o&&$A(n,o),t}(ue.a.Component),aR=Object(tt.b)((function(e){var t=e.notifications;return{isVisible:t.notificationCenterVisible,filter:t.selectedNotificationFilter,notifications:t.notifications}}),(function(e){return{hideNotificationCenter:function(){e((function(e){e({type:ge.HIDE_NOTIFICATION_CENTER})}))},selectNotificationFilter:function(t){e(function(e){return function(t){t({type:ge.SELECT_NOTIFICATION_FILTER,options:{filter:e}})}}(t))},clearAllNotifications:function(){e((function(e){e({type:ge.CLEAR_ALL_NOTIFICATIONS})}))},clearSingleNotification:function(t){e(function(e){return function(t){t({type:ge.CLEAR_SINGLE_NOTIFICATION,options:{notificationId:e}})}}(t))}}}))(oR);function iR(e){return(iR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cR(e,t){return!t||"object"!==iR(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function lR(e){return(lR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uR(e,t){return(uR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function dR(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var pR=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),cR(this,lR(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uR(e,t)}(t,e),n=t,(r=[{key:"getMsg",value:function(){return{__html:this.props.message}}},{key:"getContent",value:function(){return this.props.visible&&this.props.message?ue.a.createElement("p",{className:"perma-warning__content",dangerouslySetInnerHTML:this.getMsg()}):null}},{key:"render",value:function(){return ue.a.createElement("div",{id:"perma-warning"},this.getContent())}}])&&sR(n.prototype,r),o&&sR(n,o),t}(ue.a.Component);dR(pR,"defaultProps",{visible:!1}),dR(pR,"propTypes",{visible:et.a.bool.isRequired,message:et.a.string});var fR=Object(tt.b)((function(e){var t=e.notifications;return{visible:t.permanentNotificationVisible,message:t.permanentNotificationMessage}}))(pR),mR=function(e){var t=e.version;return t?ue.a.createElement("div",{className:"faux-navbar__version-footer"},"Fauxton on  ",ue.a.createElement("a",{href:"http://couchdb.apache.org/"},"Apache CouchDB"),ue.a.createElement("div",null,"v. ",t)):null};mR.propTypes={version:et.a.string};var hR=mR,yR=function(e){var t=e.toggleMenu,n=e.isMinimized,r=wt()("faux-navbar__burger",{"faux-navbar--wide":!n},{"faux-navbar--narrow":n}),o=n?"icon-resize-horizontal":"icon-signin faux-navbar__burger__icon--flipped";return ue.a.createElement("div",{"aria-expanded":!n,"aria-label":"Toggle Navigation Menu",className:r,onClick:t,role:"button",tabIndex:"0"},ue.a.createElement("i",{"aria-hidden":"true",className:"faux-navbar__burger__icon "+o}))};yR.propTypes={toggleMenu:et.a.func.isRequired,isMinimized:et.a.bool.isRequired};var bR=yR,gR=function(e){var t=e.link,n=e.active,r=e.isMinimized,o=n===t.title,a=wt()("faux-navbar__link",{"faux-navbar__link--active":o},{"faux-navbar__link--inactive":!o},{"faux-navbar--wide":!r},{"faux-navbar--narrow":r}),i=r?null:ue.a.createElement("span",{className:"faux-navbar__text"},t.title),s=null;return t.icon&&(s=ue.a.createElement("i",{"aria-hidden":"true",className:wt()(t.icon,"fonticon faux-navbar__icon",{"faux-navbar__icon-badge":t.badge})})),ue.a.createElement("a",{"aria-current":o?"page":null,"aria-label":t.title,className:a,href:t.href,target:t.target?"_blank":null,"data-bypass":t.target?"true":null},ue.a.createElement("div",{"data-nav-name":t.title,className:"faux-navbar__itemarea"},s,i))};gR.propTypes={link:et.a.object.isRequired,active:et.a.string,isMinimized:et.a.bool.isRequired};var ER=gR,_R=function(e){var t=e.isMinimized,n=wt()("faux-navbar__brand-logo",{"faux-navbar__brand-logo--wide":!t},{"faux-navbar__brand-logo--narrow":t});return ue.a.createElement("div",{className:"faux-navbar__brand"},ue.a.createElement("div",{className:n}))};_R.propTypes={isMinimized:et.a.bool.isRequired};var vR=_R,OR=function(e){var t=e.username,n=e.isMinimized,r=wt()("faux-navbar__logout__textcontainer",{"faux-navbar__logout__textcontainer--narrow":n},{"faux-navbar__logout__textcontainer--wide":!n});return ue.a.createElement("a",{className:"faux-logout__link",href:"#/logout"},ue.a.createElement("div",{className:r},ue.a.createElement("span",{className:"faux-navbar__logout__text"},"Log Out")," ",n?null:ue.a.createElement("span",{className:"faux-navbar__logout__username"},s.a.escape(t))))};OR.propTypes={username:et.a.string,isMinimized:et.a.bool.isRequired};var SR=OR,DR=function(e){var t=e.isMinimized,n=wt()("faux-navbar__login__textcontainer",{"faux-navbar__login__textcontainer--narrow":t},{"faux-navbar__login__textcontainer--wide":!t});return ue.a.createElement("a",{className:"faux-login__link",href:"#/login"},ue.a.createElement("div",{className:n},ue.a.createElement("span",{className:"faux-navbar__logout__text"},"Login")))};DR.propTypes={isMinimized:et.a.bool.isRequired};var NR=DR;function wR(e){return(wR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function CR(e,t){return!t||"object"!==wR(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function IR(e){return(IR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function AR(e,t){return(AR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var RR=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),CR(this,IR(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&AR(e,t)}(t,e),n=t,(r=[{key:"createLinks",value:function(e){var t=this.props,n=t.activeLink,r=t.isMinimized;return e.map((function(e,t){return ue.a.createElement(ER,{key:t,link:e,active:n,isMinimized:r})}))}},{key:"render",value:function(){var e=this.props,t=e.isMinimized,n=e.version,r=e.isLoginSectionVisible,o=e.isLoginVisibleInsteadOfLogout,a=e.activeLink,i=e.username,s=e.isNavBarVisible,c=e.toggleNavbarMenu;if(!s)return null;var l=this.createLinks(this.props.navLinks),u=this.createLinks(this.props.bottomNavLinks),d=this.createLinks(this.props.footerNavLinks),p=wt()("faux-navbar",{"faux-navbar--wide":!t},{"faux-navbar--narrow":t}),f=o?ue.a.createElement(NR,{active:a,isMinimized:t}):ue.a.createElement(SR,{username:i,isMinimized:t});return ue.a.createElement("div",{className:p},ue.a.createElement("nav",null,ue.a.createElement("div",{className:"faux-navbar__linkcontainer"},ue.a.createElement(bR,{isMinimized:t,toggleMenu:c}),ue.a.createElement("div",{className:"faux-navbar__links"},l,u),ue.a.createElement("div",{className:"faux-navbar__footer"},ue.a.createElement(vR,{isMinimized:t}),ue.a.createElement("div",null,d),ue.a.createElement(hR,{version:n}),r?f:null))))}}])&&TR(n.prototype,r),o&&TR(n,o),t}(le.Component);RR.propTypes={activeLink:et.a.string,isMinimized:et.a.bool.isRequired,version:et.a.string,username:et.a.string,navLinks:et.a.array,bottomNavLinks:et.a.array,footerNavLinks:et.a.array,isNavBarVisible:et.a.bool,isLoginSectionVisible:et.a.bool.isRequired,isLoginVisibleInsteadOfLogout:et.a.bool.isRequired,toggleNavbarMenu:et.a.func.isRequired};var PR=RR,LR=Object(tt.b)((function(e){var t=e.navigation,n=ie.session.user();return{navLinks:t.navLinks,bottomNavLinks:t.bottomNavLinks,footerNavLinks:t.footerNavLinks,activeLink:t.activeLink,version:t.version,isMinimized:t.isMinimized,isNavBarVisible:t.navBarVisible,isLoginSectionVisible:t.loginSectionVisible,isLoginVisibleInsteadOfLogout:t.loginVisibleInsteadOfLogout,username:n&&n.name?n.name:""}}),(function(e){return{toggleNavbarMenu:function(){e((function(e){e({type:de.TOGGLE_NAVBAR_MENU})}))}}}))(PR);function xR(e){return(xR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kR(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function UR(e,t,n){return t&&jR(e.prototype,t),n&&jR(e,n),e}function MR(e,t){return!t||"object"!==xR(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qR(e){return(qR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function VR(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&FR(e,t)}function FR(e,t){return(FR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var BR=function(e){function t(e){var n;return kR(this,t),(n=MR(this,qR(t).call(this,e))).state={routerOptions:e.router.currentRouteOptions},e.router.currentRouteOptions&&e.router.currentRouteOptions.selectedHeader&&n.props.setNavbarActiveLink(n.state.routerOptions.selectedHeader),n}return VR(t,e),UR(t,[{key:"componentDidMount",value:function(){var e=this;this.props.router.on("new-component",(function(t){e.setState({routerOptions:t}),e.props.setNavbarActiveLink(e.state.routerOptions.selectedHeader)})),this.props.router.on("trigger-update",(function(){e.forceUpdate()}))}},{key:"render",value:function(){if(!this.state.routerOptions)return null;var e=this.state.routerOptions.component;return e||null}}]),t}(ue.a.Component),HR=function(e){function t(e){return kR(this,t),MR(this,qR(t).call(this,e))}return VR(t,e),UR(t,[{key:"render",value:function(){var e=wt()({closeMenu:this.props.isPrimaryNavMinimized});return ue.a.createElement("div",null,ue.a.createElement(fR,null),ue.a.createElement("div",{id:"notifications"},ue.a.createElement(kA,null),ue.a.createElement(aR,null)),ue.a.createElement("div",{id:"main",className:e},ue.a.createElement("div",{id:"app-container"},ue.a.createElement("div",{className:"wrapper"},ue.a.createElement("div",{role:"main",className:"pusher"},ue.a.createElement(BR,{router:this.props.router,setNavbarActiveLink:this.props.setNavbarActiveLink})),ue.a.createElement("div",{id:"primary-navbar"},ue.a.createElement(LR,null))))))}}]),t}(ue.a.Component),KR=Object(tt.b)((function(e){return{isPrimaryNavMinimized:e.navigation.isMinimized}}),(function(e){return{setNavbarActiveLink:function(t){var n;e((n=t,function(e){e({type:de.NAVBAR_ACTIVE_LINK,name:n})}))}}}))(HR),GR=n(92),XR=n(332),WR=n.n(XR);ie.addMiddleware(WR.a);var zR,YR=Object(GR.d)(Object(GR.c)(ie.reducers),GR.a.apply(void 0,function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(zR=ie.middlewares)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(zR)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()));ie.reduxDispatch=function(e){YR.dispatch(e)},ie.reduxState=function(){return YR.getState()},ce.addons=_A,ie.router=ce.router=new ie.Router(ce.addons),R.a.history.start({pushState:!1,root:ce.root}),"ActiveXObject"in window&&o.a.ajaxSetup({cache:!1});document.addEventListener("click",(function(e){var t=function e(t){return t?"A"===t.tagName?t:e(t.parentNode):null}(e.target);if(t&&!t.getAttribute("data-bypass")){var n={prop:t.href,attr:t.getAttribute("href")};if(n.prop){var r=location.protocol+"//"+location.host;n.prop&&n.prop.slice(0,r.length)===r&&(e.preventDefault(),ce.router.navigate(n.attr,!0))}}})),W.a.render(ue.a.createElement(tt.a,{store:YR},ue.a.createElement(KR,{router:ce.router})),document.getElementById("app"))}},[[333,1,2]]]);
$("#primary-navbar").remove();