# Copyright (c) 2001-2025 Convertigo SA.
# 
# This program  is free software; you  can redistribute it and/or
# Modify  it  under the  terms of the  GNU  Affero General Public
# License  as published by  the Free Software Foundation;  either
# version  3  of  the  License,  or  (at your option)  any  later
# version.
# 
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY;  without even the implied warranty of
# MERCHANTABILITY  or  FITNESS  FOR A PARTICULAR PURPOSE. See the
# GNU General Public License for more details.
# 
# You should have received a copy of the GNU General Public
# License along with this program;
# if not, see <http://www.gnu.org/licenses/>.

display_name=SQL transaction
short_description=Defines an SQL transaction. | \
 <p>An <i>SQL transaction</i> allows Convertigo to execute a request on an SQL database, which is accessed by the parent <i>SQL connector</i>.</p>\
 <p>An <i>SQL transaction</i> is always associated with an SQL query, or several SQL queries, defined in the <b>Query</b> property. The query/queries can be dynamically configured using the transaction's variables (see <b>Query</b> property description and <i>Variable</i> objects documentation).</p>\
 <p>The resultset is output in transaction's XML response in an <code>sql_output</code> element. The data organization in the <code>sql_output</code> element depends on the <b>Output mode</b> property.</p>\
 <p>In case of multiple queries, the several queries are sequentially executed, using auto-commit mode defined in <b>Auto-commit</b> property. Each query's resultset is output in transaction's XML response in <code>sql_output</code> elements. The data organization in <code>sql_output</code> elements depends on the <b>Output mode</b> property and is the same for all queries of the transaction.</p>
property.sqlQuery.display_name=Query
property.sqlQuery.short_description=Defines the SQL query/queries to execute on the target database. | \
 <p>The <b>Query</b> property allows to define an SQL query or several SQL queries to be executed on the target database. Any SQL query must be written in accordance with the target database tables and available functions and keywords (depending on the parent <i>SQL connector</i> configuration).</p>\
 <p>The SQL query/queries can be parameterized with the transaction's variables, to be dynamically configured at runtime with variable values. To use a transaction variable in an SQL query, use one of the following syntaxes in the query:</p>\
 <ul>\
  <li><code>{variable_name}</code>: the simple-brace notation - variable name surrounded by curly braces - protects the SQL query from SQL injections, i.e. only the first value represented by the variable is used, discarding any further content (SQL injection). It works so that the variable only contains a value. This notation can only be used inside the <code>WHERE</code> clause. If you need to use a variable anywhere else inside the SQL query, you should use the double-brace notation.</li>\
  <li><code>{{variable_name}}</code>: the double-brace notation - variable name surrounded by double curly braces - does not protect the SQL query from SQL injections, i.e. the variable content can contain any content. If the variable value contains a piece of SQL query, it will not prevent the SQL query execution. This may be useful when a whole <code>WHERE</code> clause is computed outside the transaction (at sequence level for example) and passed as a variable to the SQL transaction. It should also be used when variables need to be used in the query outside of the <code>WHERE</code> clause.</li>\
 </ul>\
 <p>In the case of multiple SQL queries, they must be separated by semicolons ';'.</p>\
 <p><strong>Note:</strong></p>\
 <ul>\
  <li>In the case of multiple SQL queries, you cannot use the <b>Optional max number of results</b> property in this case.</li>\
 </ul>
property.xmlOutput.display_name=Output mode
property.xmlOutput.short_description=Defines how the resulting XML is generated from each SQL query result. | \
 <p>The <b>Output mode</b> property allows to change the structure of generated XML for a same query result. It can be set to one of the following values:</p>\
 <ul>\
  <li><code>RAW</code>: generates a <code>row</code> element for each result line, selected columns are added as attributes named after the column names. Note that as the columns are XML attributes, they are sorted by alphabetical order under the <code>row</code> element.</li>\
  <li><code>AUTO</code>: generates a mix of complex elements and elements with attributes (interesting for multi-table requests).</li>\
  <li><code>ELEMENT</code>: generates XML elements named after table names, selected columns are added as child XML elements named after column name. In case of multi-table requests, one row is a complex element which depth depends on the number of selected tables. Note that as the columns are XML elements, they are sorted in the order requested in the query and as the resultset has returned data.</li>\
  <li><code>ELEMENT_WITH_ATTRIBUTES</code>: generates a structure similar to the <code>ELEMENT</code> output mode but with <code>row</code> and <code>column</code> tag names. Each element (row or column) contains a <code>name</code> attribute with the actual name of the selected table or column (useful when table or column names contain symbols not allowed in XML tag names, or start by a number, etc.).</li>\
  <li><code>FLAT_ELEMENT</code>: generates a structure similar to the <code>RAW</code> output mode but with elements instead of attributes. Each result line generates a <code>row</code> element, selected columns are added as child XML elements named after the column names. Note that as the columns are XML elements, they are sorted in the order requested in the query and as the resultset has returned data.</li>\
 </ul>
property.xmlGrouping.display_name=XML grouping
property.xmlGrouping.short_description=Defines whether the resulting XML should be grouped by elements. | \
 <p>Default value is <code>false</code>. Setting it to <code>true</code> enables the grouping of XML elements in the transaction's XML response. The behavior can be different depending on the <b>Output mode</b> property value.</p>
property.maxResult.display_name=Optional max number of results
property.maxResult.short_description=Defines the maximum number of results returned by the SQL query. | \
 <p>Setting this property automatically adds a <code>LIMIT xx</code> at the end of the query before its execution on the database. It allows limiting automatically the number of results of every execution of one query.</p>\
 <p><strong>Note:</strong></p>\
 <ul>\
  <li>Beware that this property should be used only when the target SQL database allows the <code>LIMIT</code> keyword in the queries. To know which type of database is accessed by the transaction, refer to the <b>Driver</b> property of parent <i>SQL connector</i>.</li>\
  <li>Beware that this property cannot be used when the <b>Query</b> property contains several queries.</li>\
 </ul>
property.autoCommit.display_name=Auto-commit
property.autoCommit.short_description=Defines the commit mode, to be automatic or not. | \
 <p>The <b>Auto-commit</b> property can take one of the following values:</p>\
 <ul>\
  <li><code>enabled, after each query</code>: auto-commit is done after executing each query from the <b>Query</b> property,</li>\
  <li><code>enabled, once at the end</code>: auto-commit is done after executing all queries from the <b>Query</b> property,</li>\
  <li><code>disabled, manual commit</code>: the developer should program himself the commits to the database thanks to <code>COMMIT</code> statement.</li>\
 </ul>\
 <p>Default value is <code>enabled, after each query</code>, enabling auto-commit after each query execution.</p>\
 <p><strong>Note:</strong></p>\
 <ul>\
  <li>Not all databases support "grouped transactions" and "rollback". To use this property, be sure that your target database supports these features. Otherwise, the auto-commit is always applied.</li>\
 </ul>
property.xmlDefaultRowTagname.display_name=Default XML row tag name
property.xmlDefaultRowTagname.short_description=Defines the default row tag name to output in XML response, depending on the <b>Output mode</b> property. | \
 <p>This property allows to configure a tag name for each line of result, depending on the <b>Output mode</b> property.</p>\
 <p>Default value is <code>row</code>.</p>
property.xmlDefaultColumnTagname.display_name=Default XML column tag name
property.xmlDefaultColumnTagname.short_description=Defines the default column tag name to output in XML response, depending on the <b>Output mode</b> property. | \
 <p>This property allows to configure a tag name for each column of result, depending on the <b>Output mode</b> property.</p>\
 <p>Default value is <code>column</code>.</p>
property.generateJsonTypes.display_name=Generate JSON type
property.generateJsonTypes.short_description=Add "type" attributes to respect JSON types for the .json requester. | \
 <p>This property will add "type" and "originalKeyName" attributes on XML response. The <code>FLAT_ELEMENT</code> is the recommended mode, other modes will just add the array support for rows.</p>

